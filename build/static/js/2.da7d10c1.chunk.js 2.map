{"version":3,"sources":["../../finance-final/node_modules/sigma/utils/index.js","../../finance-final/node_modules/graphology-utils/is-graph.js","../../finance-final/node_modules/sigma/rendering/webgl/programs/common/edge.js","../../finance-final/node_modules/sigma/types.js","../../finance-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../finance-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../finance-final/node_modules/sigma/core/camera.js","../../finance-final/node_modules/sigma/utils/matrices.js","../../finance-final/node_modules/sigma/utils/easings.js","../../finance-final/node_modules/sigma/core/captors/mouse.js","../../finance-final/node_modules/sigma/core/captors/captor.js","../../finance-final/node_modules/sigma/core/quadtree.js","../../finance-final/node_modules/sigma/rendering/canvas/label.js","../../finance-final/node_modules/sigma/rendering/webgl/programs/common/program.js","../../finance-final/node_modules/sigma/rendering/webgl/shaders/edge.frag.glsl.js","../../finance-final/node_modules/graphology-gexf/common/helpers.js","../../finance-final/node_modules/sigma/index.js","../../src/utils.js","../../../../node_modules/events/events.js","../../../../node_modules/obliterator/iterator.js","../../../../node_modules/obliterator/support.js","../../../../node_modules/obliterator/iter.js","../../../../node_modules/obliterator/take.js","../../src/errors.js","../../src/data.js","../../src/attributes/nodes.js","../../src/attributes/edges.js","../../../../node_modules/obliterator/chain.js","../../src/iteration/edges.js","../../src/iteration/neighbors.js","../../src/iteration/adjacency.js","../../src/serialization.js","../../src/graph.js","../../src/classes.js","../../finance-final/node_modules/graphology-gexf/browser/index.js","../../finance-final/node_modules/sigma/sigma.js","../../finance-final/node_modules/sigma/utils/animate.js","../../finance-final/node_modules/sigma/utils/data.js","../../finance-final/node_modules/events/events.js","../../finance-final/node_modules/@yomguithereal/helpers/extend.js","../../finance-final/node_modules/sigma/core/labels.js","../../finance-final/node_modules/sigma/settings.js","../../finance-final/node_modules/sigma/rendering/canvas/hover.js","../../finance-final/node_modules/sigma/rendering/canvas/edge-label.js","../../finance-final/node_modules/sigma/rendering/webgl/programs/node.fast.js","../../finance-final/node_modules/sigma/rendering/webgl/shaders/node.fast.vert.glsl.js","../../finance-final/node_modules/sigma/rendering/webgl/shaders/node.fast.frag.glsl.js","../../finance-final/node_modules/sigma/rendering/webgl/programs/common/node.js","../../finance-final/node_modules/sigma/rendering/webgl/shaders/utils.js","../../finance-final/node_modules/sigma/rendering/webgl/programs/edge.js","../../finance-final/node_modules/sigma/rendering/webgl/shaders/edge.vert.glsl.js","../../finance-final/node_modules/sigma/rendering/webgl/programs/edge.arrow.js","../../finance-final/node_modules/sigma/rendering/webgl/programs/edge.arrowHead.js","../../finance-final/node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.vert.glsl.js","../../finance-final/node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.frag.glsl.js","../../finance-final/node_modules/sigma/rendering/webgl/programs/edge.clamped.js","../../finance-final/node_modules/sigma/rendering/webgl/shaders/edge.clamped.vert.glsl.js","../../finance-final/node_modules/sigma/core/captors/touch.js","../../finance-final/node_modules/sigma/utils/edge-collisions.js","../../finance-final/node_modules/graphology-gexf/browser/parser.js","../../finance-final/node_modules/graphology-gexf/common/parser.js","../../finance-final/node_modules/graphology-utils/is-graph-constructor.js","../../finance-final/node_modules/graphology-utils/add-edge.js","../../finance-final/node_modules/graphology-operators/to-mixed.js","../../finance-final/node_modules/graphology-operators/to-multi.js","../../finance-final/node_modules/graphology-gexf/common/writer.js","../../finance-final/node_modules/graphology-utils/infer-type.js","../../finance-final/node_modules/xml-writer/index.js","../../finance-final/node_modules/xml-writer/lib/xml-writer.js"],"names":["__read","this","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__importDefault","mod","__esModule","Object","defineProperty","exports","validateGraph","canUse32BitsIndices","extractPixel","getMatrixImpact","matrixFromCamera","getCorrectionRatio","floatColor","floatArrayColor","parseColor","zIndexOrdering","createNormalizationFunction","graphExtent","getPixelRatio","createElement","cancelFrame","requestFrame","assignDeep","assign","isPlainObject","is_graph_1","require","matrices_1","data_1","constructor","target","objects","_i","arguments","length","l","k","requestAnimationFrame","callback","setTimeout","cancelAnimationFrame","requestID","clearTimeout","tag","style","attributes","element","document","setAttribute","window","devicePixelRatio","graph","order","x","y","xMin","Infinity","xMax","yMin","yMax","forEachNode","_","attr","extent","_a","minX","maxX","_b","minY","maxY","ratio","Math","max","dX","dY","abs","isNaN","fn","data","applyTo","inverse","getter","elements","sort","a","b","zA","zB","INT8","Int8Array","INT32","Int32Array","buffer","FLOAT32","Float32Array","RGBA_TEST_REGEX","RGBA_EXTRACT_REGEX","val","g","parseInt","charAt","test","match","FLOAT_COLOR_CACHE","htmlColor","HTML_COLORS","parsed","color","viewportDimensions","graphDimensions","viewportRatio","height","width","graphRatio","min","state","padding","angle","matrix","identity","smallestDimension","correctionRatio","multiply","translate","scale","rotate","cameraState","multiplyVec2","cos","sin","sqrt","pow","gl","array","Uint8Array","readPixels","RGBA","UNSIGNED_BYTE","WebGL2RenderingContext","getExtension","default","Error","key","Number","isFinite","concat","module","addUndirectedEdgeWithKey","dropNode","multi","__extends","extendStatics","d","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","TypeError","String","__","create","createEdgeCompoundProgram","AbstractEdgeProgram","_super","vertexShaderSource","fragmentShaderSource","points","AbstractProgram","programClasses","EdgeCompoundProgram","renderer","programs","map","ProgramClass","bufferData","forEach","program","allocate","capacity","bind","computeIndices","render","params","process","sourceData","targetData","hidden","offset","TypedEventEmitter","_this","rawEmitter","EventEmitter","_defineProperty","obj","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","source","getOwnPropertyDescriptors","defineProperties","animate_1","easings_1","utils_1","types_1","DEFAULT_ZOOMING_RATIO","Camera","minRatio","maxRatio","nextFrame","previousState","enabled","getState","from","setState","enable","disable","hasState","getPreviousState","getBoundedRatio","validateState","validatedState","isAnimated","validState","emit","animate","opts","options","ANIMATE_DEFAULTS","easing","start","Date","now","initialState","t","duration","animationCallback","undefined","coefficient","newState","animatedZoom","factorOrOptions","factor","animatedUnzoom","animatedReset","copy","of","s","c","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","z","b0","b1","cubicInOut","cubicOut","cubicIn","quadraticInOut","quadraticOut","quadraticIn","linear","easings","__createBinding","k2","get","__setModuleDefault","v","__importStar","result","captor_1","MouseCaptor","container","draggedEvents","downStartTime","lastMouseX","lastMouseY","isMouseDown","isMoving","movingTimeout","startCameraState","clicks","doubleClickTimeout","currentWheelDirection","handleClick","handleRightClick","handleDown","handleUp","handleMove","handleWheel","handleOut","addEventListener","kill","removeEventListener","handleDoubleClick","getMouseCoords","preventDefault","stopPropagation","mouseCoords","sigmaDefaultPrevented","camera","getCamera","newRatio","getViewportZoomedState","getPosition","previousCameraState","refresh","eX","eY","lastMouse","viewportToFramedGraph","mouse","offsetX","offsetY","delta","getWheelDelta","wheelCoords","getWheelCoords","ratioDiff","wheelDirection","lastWheelTriggerTime","MOUSE_ZOOM_DURATION","__assign","getTouchCoords","getTouchesArray","dom","bbox","getBoundingClientRect","clientX","left","clientY","top","res","preventSigmaDefault","original","touches","arr","deltaY","detail","touch","Captor","__spreadArray","to","pack","slice","rectangleCollidesWithQuad","squareCollidesWithQuad","getCircumscribedAlignedRectangle","isRectangleAligned","extend_1","hasWarnedTooMuchOutside","rect","x1","x2","y1","y2","heightVector","tl","tr","bl","br","xL","xR","yT","w","qx","qy","qw","qh","h","pointIsInQuad","QuadTree","containers","cache","lastRectangle","L","boundaries","resize","add","size","maxLevel","level","block","topLeftBlock","topRightBlock","bottomLeftBlock","bottomRightBlock","collidingWithTopLeft","collidingWithTopRight","collidingWithBottomLeft","collidingWithBottomRight","collisions","reduce","acc","current","console","warn","insertNode","clear","stack","pop","hw","hh","buildQuadrants","point","nodes","rectangle","lr","collectedNodes","getNodesInAxisAlignedRectangleArea","context","settings","label","labelSize","font","labelFont","weight","labelWeight","labelColor","attribute","fillStyle","fillText","createBuffer","bindBuffer","ARRAY_BUFFER","vertexShader","loadVertexShader","fragmentShader","loadFragmentShader","loadProgram","DYNAMIC_DRAW","hasNothingToRender","toStringTag","cast","type","split","SANITIZE_PATTERN","sanitizeTagName","tagName","replace","trim","Sigma","sigma_1","camera_1","quadtree_1","mouse_1","getMatchingEdge","_nodes","edge","out","undirected","_typeof","isEmpty","privateProperty","name","readOnlyProperty","descriptor","validateHints","hints","isArray","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","args","Function","getOwnPropertyNames","NumberIsNaN","init","eventsModule","events","emitter","Promise","resolve","reject","errorListener","err","removeListener","resolver","eventTargetAgnosticAddListener","once","handler","flags","on","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","existing","warning","newListener","unshift","warned","count","onceWrapper","fired","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","ret","arrayClone","listenerCount","wrapListener","arg","Iterator","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","message","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","off","removeAllListeners","rawListeners","eventNames","Iterator$2","empty","fromSequence","sequence","is","support","ArrayBuffer","require$$0","require$$1","ARRAY_BUFFER_SUPPORT","SYMBOL_SUPPORT","isView","iter","take","iterable","step","GraphError","_Error","_inheritsLoose","_wrapNativeSuper","InvalidArgumentsGraphError","_this2","captureStackTrace","NotFoundGraphError","_this3","UsageGraphError","_this4","MixedNodeData","DirectedNodeData","UndirectedNodeData","EdgeData","findRelevantNodeData","method","mode","nodeOrEdge","nameOrEdge","add1","add2","nodeData","edgeData","arg1","arg2","_edges","inDegree","outDegree","undirectedDegree","undirectedLoops","directedLoops","in","attach","outKey","inKey","attachMulti","adj","head","previous","detach","detachMulti","NODE_ATTRIBUTES_METHODS","attacher","Class","_findRelevantNodeData","_findRelevantNodeData3","_findRelevantNodeData4","_findRelevantNodeData5","updater","_findRelevantNodeData6","_findRelevantNodeData7","_findRelevantNodeData8","_findRelevantNodeData9","EDGE_ATTRIBUTES_METHODS","chain","iterables","EDGES_ITERATION","direction","forEachSimple","breakable","avoid","shouldBreak","forEachMulti","createIterator","sourceAttributes","targetAttributes","forEachForKeySimple","forEachForKeyMulti","createIteratorForKey","createEdgeArray","undirectedSize","directedSize","mask","values","forEachEdge","shouldFilter","createEdgeIterator","forEachEdgeForNode","found","createEdgeArrayForNode","edges","createEdgeIteratorForNode","forEachEdgeForPath","createEdgeArrayForPath","createEdgeIteratorForPath","NEIGHBORS_ITERATION","CompositeSetWrapper","A","B","forEachInObjectOnce","visited","neighborData","has","forEachNeighbor","wrap","createDedupedObjectIterator","neighbor","attachNeighborArrayCreator","description","node","neighbors","attachNeighborIteratorCreator","iteratorName","forEachAdjacency","assymetric","disconnectedNodes","hasEdges","validateSerializedNode","validateSerializedEdge","INSTANCE_ID","floor","random","TYPES","Set","EMITTER_PROPS","DEFAULTS","allowSelfLoops","unsafeAddNode","NodeDataClass","addEdge","mustGenerateKey","eventData","_edgeKeyGenerator","isSelfLoop","_undirectedSelfLoopCount","_directedSelfLoopCount","_undirectedSize","_directedSize","mergeEdge","asUpdater","alreadyExistingEdgeData","info","oldAttributes","sourceWasAdded","targetWasAdded","dropEdgeFromData","delete","Graph","_EventEmitter","_assertThisInitialized","instancePrefix","edgeId","Map","availableEdgeKey","prop","_options","_proto","_resetInstanceCounters","hasNode","hasDirectedEdge","hasUndirectedEdge","hasEdge","directedEdge","undirectedEdge","areDirectedNeighbors","areOutNeighbors","areInNeighbors","areUndirectedNeighbors","areNeighbors","areInboundNeighbors","areOutboundNeighbors","directedDegree","inboundDegree","degree","outboundDegree","inDegreeWithoutSelfLoops","outDegreeWithoutSelfLoops","directedDegreeWithoutSelfLoops","undirectedDegreeWithoutSelfLoops","inboundDegreeWithoutSelfLoops","loops","outboundDegreeWithoutSelfLoops","degreeWithoutSelfLoops","extremities","opposite","hasExtremity","isUndirected","isDirected","addNode","mergeNode","updateNode","dropEdge","dropDirectedEdge","dropUndirectedEdge","clearEdges","getAttribute","_attributes","getAttributes","hasAttribute","updateAttribute","removeAttribute","replaceAttributes","mergeAttributes","updateAttributes","updateEachNodeAttributes","updateEachEdgeAttributes","forEachAdjacencyEntry","forEachAdjacencyEntryWithOrphans","forEachAssymetricAdjacencyEntry","forEachAssymetricAdjacencyEntryWithOrphans","findNode","mapNodes","someNode","everyNode","filterNodes","reduceNodes","initialValue","accumulator","nodeEntries","serialized","import","merge","_sa","_ta","u","mergeUndirectedEdgeWithKey","mergeDirectedEdgeWithKey","addDirectedEdgeWithKey","undirectedByDefault","_edge$undirected","mergeUndirectedEdge","mergeDirectedEdge","addUndirectedEdge","addDirectedEdge","nullCopy","emptyCopy","toJSON","toString","inspect","multiIndex","tmp","desc","startsWith","dummy","verb","generateKey","_ref","forEachName","toUpperCase","mapName","ea","sa","ta","filterName","reduceName","findEdgeName","someName","everyName","originalName","capitalizedSingular","findName","DirectedGraph","finalOptions","_Graph","UndirectedGraph","_Graph2","MultiGraph","_Graph3","MultiDirectedGraph","_Graph4","MultiUndirectedGraph","_Graph5","attachStaticFromMethod","instance","parse","write","__values","labels_1","settings_1","touch_1","edge_collisions_1","applyNodeDefaults","defaultNodeColor","highlighted","forceLabel","defaultNodeType","zIndex","applyEdgeDefaults","defaultEdgeColor","defaultEdgeType","canvasContexts","webGLContexts","activeListeners","quadtree","labelGrid","LabelGrid","nodeDataCache","edgeDataCache","nodesWithForcedLabels","edgesWithForcedLabels","nodeExtent","invMatrix","customBBox","normalizationFunction","cameraSizeRatio","pixelRatio","displayedLabels","highlightedNodes","hoveredNode","hoveredEdge","renderFrame","renderHighlightedNodesFrame","needToProcess","needToSoftProcess","checkEdgesEventsFrame","nodePrograms","hoverNodePrograms","edgePrograms","DEFAULT_SETTINGS","validateSettings","HTMLElement","createWebGLContext","preserveDrawingBuffer","createCanvasContext","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","BLEND","nodeProgramClasses","NodeProgramClass","hoverNodes","edgeProgramClasses","EdgeProgramClass","bindCameraHandlers","mouseCaptor","touchCaptor","bindEventHandlers","bindGraphHandlers","handleSettingsUpdate","createCanvas","id","canvas","class","appendChild","getContext","antialias","contextOptions","_scheduleRefresh","mouseIsOnNode","nodeX","nodeY","getQuadNodes","mouseGraphPosition","getNodeAtPosition","quadNodes","minDistance","nodeAtPosition","nodePosition","framedGraphToViewport","scaleSize","distance","handleResize","baseEvent","event","nodeToHover","scheduleHighlightedNodesRender","pos","enableEdgeHoverEvents","checkEdgeHoverEvents","createMouseListener","eventType","isFakeSigmaMouseEvent","enableEdgeWheelEvents","enableEdgeClickEvents","getEdgeAtPoint","graphUpdate","softGraphUpdate","dropNodeGraphUpdate","dropEdgeGraphUpdate","clearEdgesGraphUpdate","clearGraphUpdate","payload","edgeToHover","e_1","isPixelColored","_c","viewportToGraph","graphX","graphY","transformationRatio","someEdge","sourceId","targetId","xs","ys","xt","yt","graphLength","graphToViewport","vp_xs","vp_ys","_d","vp_xt","vp_yt","viewportLength","filterEdges","edgeAttributes","sourcePosition","targetPosition","doEdgeCollideWithPoint","selectedEdge","highestZIndex","edges_1","edges_1_1","getEdgeAttribute","e_1_1","return","keepArrays","dimensions","getDimensions","nodeZExtent","edgeZExtent","resizeAndClear","labelGridCellSize","nullCamera","nullCameraMatrix","getGraphDimensions","getSetting","nodesPerPrograms","getNodeAttributes","nodeReducer","organize","edgesPerPrograms","getEdgeAttributes","edgeReducer","minCameraRatio","maxCameraRatio","_refresh","renderLabels","visibleNodes","viewRectangle","labelsToDisplay","getLabelsToDisplay","labelDensity","labels","labelRenderedSizeThreshold","labelRenderer","renderEdgeLabels","edgeLabels","clearRect","edgeLabelsToDisplay","edgeLabelsToDisplayFromNodes","displayedNodeLabels","edgeLabelRenderer","renderHighlightedNodes","hovers","nodesToRender","hoverRenderer","COLOR_BUFFER_BIT","scalingRatio","handleEscape","updateCachedValues","moving","hideEdgesOnMove","hideLabelsOnMove","getContainer","getGraph","getMouseCaptor","getTouchCaptor","getNodeDisplayData","getEdgeDisplayData","getSettings","setSetting","updateSetting","previousWidth","previousHeight","offsetWidth","offsetHeight","allowInvalidContainer","viewport","scheduleRefresh","viewportTarget","center","graphMousePosition","graphCenterPosition","marginX","marginY","p1","p2","coordinates","override","recomputeMatrix","viewportPos","viewportPoint","graphPoint","getBBox","getCustomBBox","setCustomBBox","firstChild","removeChild","getCanvases","animateNodes","index_1","targets","startPositions","attrs","getNodeAttribute","frame","setNodeAttribute","black","silver","gray","grey","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","darkblue","mediumblue","darkgreen","darkcyan","deepskyblue","darkturquoise","mediumspringgreen","springgreen","cyan","midnightblue","dodgerblue","lightseagreen","forestgreen","seagreen","darkslategray","darkslategrey","limegreen","mediumseagreen","turquoise","royalblue","steelblue","darkslateblue","mediumturquoise","indigo","darkolivegreen","cadetblue","cornflowerblue","rebeccapurple","mediumaquamarine","dimgray","dimgrey","slateblue","olivedrab","slategray","slategrey","lightslategray","lightslategrey","mediumslateblue","lawngreen","chartreuse","aquamarine","skyblue","lightskyblue","blueviolet","darkred","darkmagenta","saddlebrown","darkseagreen","lightgreen","mediumpurple","darkviolet","palegreen","darkorchid","yellowgreen","sienna","brown","darkgray","darkgrey","lightblue","greenyellow","paleturquoise","lightsteelblue","powderblue","firebrick","darkgoldenrod","mediumorchid","rosybrown","darkkhaki","mediumvioletred","indianred","peru","chocolate","tan","lightgray","lightgrey","thistle","orchid","goldenrod","palevioletred","crimson","gainsboro","plum","burlywood","lightcyan","lavender","darksalmon","violet","palegoldenrod","lightcoral","khaki","aliceblue","honeydew","azure","sandybrown","wheat","beige","whitesmoke","mintcream","ghostwhite","salmon","antiquewhite","linen","lightgoldenrodyellow","oldlace","magenta","deeppink","orangered","tomato","hotpink","coral","darkorange","lightsalmon","orange","lightpink","pink","gold","peachpuff","navajowhite","moccasin","bisque","mistyrose","blanchedalmond","papayawhip","lavenderblush","seashell","cornsilk","lemonchiffon","floralwhite","snow","lightyellow","ivory","addErrorHandlerIfEventEmitter","unwrapListeners","spliceOne","l2","l1","LabelCandidate","compare","first","second","cellSize","columns","rows","cells","ceil","getIndex","xIndex","candidate","cell","density","cellArea","scaledDensity","labelsToDisplayPerCell","worthyEdges","label_1","hover_1","edge_label_1","node_fast_1","edge_1","edge_arrow_1","edgeLabelFont","edgeLabelSize","edgeLabelWeight","edgeLabelColor","stagePadding","circle","arrow","line","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","textWidth","measureText","boxWidth","round","boxHeight","radius","angleRadian","asin","xDeltaCoord","beginPath","moveTo","lineTo","arc","closePath","fill","PI","cx","cy","sSize","tSize","sx","sy","tx","ty","dx","dy","textLength","acos","save","restore","node_fast_vert_glsl_1","node_fast_frag_glsl_1","node_1","NodeFastProgram","useProgram","uniform1f","ratioLocation","scaleLocation","uniformMatrix3fv","matrixLocation","drawArrays","POINTS","AbstractNodeProgram","createNodeCompoundProgram","positionLocation","getAttribLocation","sizeLocation","colorLocation","getUniformLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","NodeCompoundProgram","loadShader","glType","VERTEX_SHADER","FRAGMENT_SHADER","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","infoLog","getShaderInfoLog","deleteShader","shaders","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","deleteProgram","edge_vert_glsl_1","edge_frag_glsl_1","EdgeProgram","indicesBuffer","normalLocation","correctionRatioLocation","sqrtZoomRatioLocation","IndicesArray","Uint32Array","Uint16Array","indicesArray","indicesType","UNSIGNED_INT","UNSIGNED_SHORT","ELEMENT_ARRAY_BUFFER","indices","STATIC_DRAW","i_1","thickness","n1","n2","drawElements","TRIANGLES","edge_arrowHead_1","edge_clamped_1","EdgeArrowProgram","edge_arrowHead_vert_glsl_1","edge_arrowHead_frag_glsl_1","EdgeArrowHeadProgram","radiusLocation","barycentricLocation","edge_clamped_vert_glsl_1","EdgeClampedProgram","TouchCaptor","touchMode","handleStart","handleLeave","dispatchRelatedMouseEvent","mousePosition","mouseEvent","MouseEvent","altKey","ctrlKey","dispatchEvent","startTouchesPositions","lastTouchesPositions","x0","y0","startTouchesAngle","atan2","startTouchesDistance","touchesPositions","xStart","yStart","newCameraState","_e","angleDiff","hypot","touchGraphPosition","pixels","drawingBufferHeight","xS","yS","xT","createParserFunction","DOMParser","Document","isGraphConstructor","toMixed","toMulti","getFirstMatchingVizTag","vizElement","getElementsByTagName","getElementsByTagNameNS","extractModel","defaultElement","model","defaults","title","textContent","collectAttributes","valueElement","valueElements","toRGBString","shape","mergeResult","addMissingNodes","xmlDoc","parseFromString","GRAPH_ELEMENT","META_ELEMENT","META_ELEMENTS","childNodes","NODE_ELEMENTS","EDGE_ELEMENTS","MODEL_ELEMENTS","NODE_MODEL_ELEMENTS","EDGE_MODEL_ELEMENTS","DEFAULT_EDGE_TYPE","NODE_MODEL","NODE_DEFAULT_ATTRIBUTES","EDGE_MODEL","EDGE_DEFAULT_ATTRIBUTES","meta","nodeName","toLowerCase","collectMeta","lastModifiedDate","copyEdge","updateEdge","updateUndirectedEdge","updateUndirectedEdgeWithKey","updateDirectedEdge","updateDirectedEdgeWithKey","isGraph","inferType","XMLWriter","VIZ_RESERVED_NAMES","RGBA_TEST","RGBA_MATCH","CSSColorToRGBA","DEFAULT_ELEMENT_FORMATTER","output","viz","isEmptyValue","detectValueType","number","join","inferModel","writeModel","writer","modelClass","startElement","writeAttribute","endElement","writeElements","edgeType","emptyModel","startElementNS","encoding","pretty","formatNode","formatEdge","indent","startDocument","metaTagName","graphAttribute","graphAttributes","writeElement","format","collectNodeData","reducer","collectEdgeData","nodeModel","edgeModel","declaredType","isFalse","strval","name_regex","indentString","tags","texts","comment","dtd","root","pi","cdata","started_write","writer_encoding","flush","indenter","version","standalone","startPI","startAttribute","text","endAttribute","endPI","endDocument","endAttributes","content","writeElementNS","prefix","uri","containsTag","startAttributes","writeAttributeNS","startAttributeNS","writeComment","startComment","endComment","writeDocType","pubid","sysid","subset","startDocType","endDocType","writePI","writeCData","startCData","endCData","writeRaw"],"mappings":"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","file":"static/js/2.da7d10c1.chunk.js","sourcesContent":["\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateGraph = exports.canUse32BitsIndices = exports.extractPixel = exports.getMatrixImpact = exports.matrixFromCamera = exports.getCorrectionRatio = exports.floatColor = exports.floatArrayColor = exports.parseColor = exports.zIndexOrdering = exports.createNormalizationFunction = exports.graphExtent = exports.getPixelRatio = exports.createElement = exports.cancelFrame = exports.requestFrame = exports.assignDeep = exports.assign = exports.isPlainObject = void 0;\nvar is_graph_1 = __importDefault(require(\"graphology-utils/is-graph\"));\nvar matrices_1 = require(\"./matrices\");\nvar data_1 = require(\"./data\");\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nfunction isPlainObject(value) {\n    return typeof value === \"object\" && value !== null && value.constructor === Object;\n}\nexports.isPlainObject = isPlainObject;\n/**\n * Helper to use Object.assign with more than two objects.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assign(target) {\n    var objects = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        objects[_i - 1] = arguments[_i];\n    }\n    target = target || {};\n    for (var i = 0, l = objects.length; i < l; i++) {\n        var o = objects[i];\n        if (!o)\n            continue;\n        Object.assign(target, o);\n    }\n    return target;\n}\nexports.assign = assign;\n/**\n * Very simple recursive Object.assign-like function.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignDeep(target) {\n    var objects = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        objects[_i - 1] = arguments[_i];\n    }\n    target = target || {};\n    for (var i = 0, l = objects.length; i < l; i++) {\n        var o = objects[i];\n        if (!o)\n            continue;\n        for (var k in o) {\n            if (isPlainObject(o[k])) {\n                target[k] = assignDeep(target[k], o[k]);\n            }\n            else {\n                target[k] = o[k];\n            }\n        }\n    }\n    return target;\n}\nexports.assignDeep = assignDeep;\n/**\n * Just some dirty trick to make requestAnimationFrame and cancelAnimationFrame \"work\" in Node.js, for unit tests:\n */\nexports.requestFrame = typeof requestAnimationFrame !== \"undefined\"\n    ? function (callback) { return requestAnimationFrame(callback); }\n    : function (callback) { return setTimeout(callback, 0); };\nexports.cancelFrame = typeof cancelAnimationFrame !== \"undefined\"\n    ? function (requestID) { return cancelAnimationFrame(requestID); }\n    : function (requestID) { return clearTimeout(requestID); };\n/**\n * Function used to create DOM elements easily.\n *\n * @param  {string} tag        - Tag name of the element to create.\n * @param  {object} style      - Styles map.\n * @param  {object} attributes - Attributes map.\n * @return {HTMLElement}\n */\nfunction createElement(tag, style, attributes) {\n    var element = document.createElement(tag);\n    if (style) {\n        for (var k in style) {\n            element.style[k] = style[k];\n        }\n    }\n    if (attributes) {\n        for (var k in attributes) {\n            element.setAttribute(k, attributes[k]);\n        }\n    }\n    return element;\n}\nexports.createElement = createElement;\n/**\n * Function returning the browser's pixel ratio.\n *\n * @return {number}\n */\nfunction getPixelRatio() {\n    if (typeof window.devicePixelRatio !== \"undefined\")\n        return window.devicePixelRatio;\n    return 1;\n}\nexports.getPixelRatio = getPixelRatio;\n/**\n * Function returning the graph's node extent in x & y.\n *\n * @param  {Graph}\n * @return {object}\n */\nfunction graphExtent(graph) {\n    if (!graph.order)\n        return { x: [0, 1], y: [0, 1] };\n    var xMin = Infinity;\n    var xMax = -Infinity;\n    var yMin = Infinity;\n    var yMax = -Infinity;\n    graph.forEachNode(function (_, attr) {\n        var x = attr.x, y = attr.y;\n        if (x < xMin)\n            xMin = x;\n        if (x > xMax)\n            xMax = x;\n        if (y < yMin)\n            yMin = y;\n        if (y > yMax)\n            yMax = y;\n    });\n    return { x: [xMin, xMax], y: [yMin, yMax] };\n}\nexports.graphExtent = graphExtent;\nfunction createNormalizationFunction(extent) {\n    var _a = __read(extent.x, 2), minX = _a[0], maxX = _a[1], _b = __read(extent.y, 2), minY = _b[0], maxY = _b[1];\n    var ratio = Math.max(maxX - minX, maxY - minY), dX = (maxX + minX) / 2, dY = (maxY + minY) / 2;\n    if (ratio === 0 || Math.abs(ratio) === Infinity || isNaN(ratio))\n        ratio = 1;\n    if (isNaN(dX))\n        dX = 0;\n    if (isNaN(dY))\n        dY = 0;\n    var fn = function (data) {\n        return {\n            x: 0.5 + (data.x - dX) / ratio,\n            y: 0.5 + (data.y - dY) / ratio,\n        };\n    };\n    // TODO: possibility to apply this in batch over array of indices\n    fn.applyTo = function (data) {\n        data.x = 0.5 + (data.x - dX) / ratio;\n        data.y = 0.5 + (data.y - dY) / ratio;\n    };\n    fn.inverse = function (data) {\n        return {\n            x: dX + ratio * (data.x - 0.5),\n            y: dY + ratio * (data.y - 0.5),\n        };\n    };\n    fn.ratio = ratio;\n    return fn;\n}\nexports.createNormalizationFunction = createNormalizationFunction;\n/**\n * Function ordering the given elements in reverse z-order so they drawn\n * the correct way.\n *\n * @param  {number}   extent   - [min, max] z values.\n * @param  {function} getter   - Z attribute getter function.\n * @param  {array}    elements - The array to sort.\n * @return {array} - The sorted array.\n */\nfunction zIndexOrdering(extent, getter, elements) {\n    // If k is > n, we'll use a standard sort\n    return elements.sort(function (a, b) {\n        var zA = getter(a) || 0, zB = getter(b) || 0;\n        if (zA < zB)\n            return -1;\n        if (zA > zB)\n            return 1;\n        return 0;\n    });\n    // TODO: counting sort optimization\n}\nexports.zIndexOrdering = zIndexOrdering;\n/**\n * WebGL utils\n * ===========\n */\n/**\n * Memoized function returning a float-encoded color from various string\n * formats describing colors.\n */\nvar INT8 = new Int8Array(4);\nvar INT32 = new Int32Array(INT8.buffer, 0, 1);\nvar FLOAT32 = new Float32Array(INT8.buffer, 0, 1);\nvar RGBA_TEST_REGEX = /^\\s*rgba?\\s*\\(/;\nvar RGBA_EXTRACT_REGEX = /^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)(?:\\s*,\\s*(.*)?)?\\)\\s*$/;\nfunction parseColor(val) {\n    var r = 0; // byte\n    var g = 0; // byte\n    var b = 0; // byte\n    var a = 1; // float\n    // Handling hexadecimal notation\n    if (val[0] === \"#\") {\n        if (val.length === 4) {\n            r = parseInt(val.charAt(1) + val.charAt(1), 16);\n            g = parseInt(val.charAt(2) + val.charAt(2), 16);\n            b = parseInt(val.charAt(3) + val.charAt(3), 16);\n        }\n        else {\n            r = parseInt(val.charAt(1) + val.charAt(2), 16);\n            g = parseInt(val.charAt(3) + val.charAt(4), 16);\n            b = parseInt(val.charAt(5) + val.charAt(6), 16);\n        }\n        // TODO: parse hex with alpha?\n    }\n    // Handling rgb notation\n    else if (RGBA_TEST_REGEX.test(val)) {\n        var match = val.match(RGBA_EXTRACT_REGEX);\n        if (match) {\n            r = +match[1];\n            g = +match[2];\n            b = +match[3];\n            if (match[4])\n                a = +match[4];\n        }\n    }\n    return { r: r, g: g, b: b, a: a };\n}\nexports.parseColor = parseColor;\nvar FLOAT_COLOR_CACHE = {};\nfor (var htmlColor in data_1.HTML_COLORS) {\n    FLOAT_COLOR_CACHE[htmlColor] = floatColor(data_1.HTML_COLORS[htmlColor]);\n    // Replicating cache for hex values for free\n    FLOAT_COLOR_CACHE[data_1.HTML_COLORS[htmlColor]] = FLOAT_COLOR_CACHE[htmlColor];\n}\nfunction floatArrayColor(val) {\n    val = data_1.HTML_COLORS[val] || val;\n    // NOTE: this variant is not cached because it is mostly used for uniforms\n    var _a = parseColor(val), r = _a.r, g = _a.g, b = _a.b, a = _a.a;\n    return new Float32Array([r / 255, g / 255, b / 255, a]);\n}\nexports.floatArrayColor = floatArrayColor;\nfunction floatColor(val) {\n    // If the color is already computed, we yield it\n    if (typeof FLOAT_COLOR_CACHE[val] !== \"undefined\")\n        return FLOAT_COLOR_CACHE[val];\n    var parsed = parseColor(val);\n    var r = parsed.r, g = parsed.g, b = parsed.b;\n    var a = parsed.a;\n    a = (a * 255) | 0;\n    INT32[0] = ((a << 24) | (b << 16) | (g << 8) | r) & 0xfeffffff;\n    var color = FLOAT32[0];\n    FLOAT_COLOR_CACHE[val] = color;\n    return color;\n}\nexports.floatColor = floatColor;\n/**\n * In sigma, the graph is normalized into a [0, 1], [0, 1] square, before being given to the various renderers. This\n * helps dealing with quadtree in particular.\n * But at some point, we need to rescale it so that it takes the best place in the screen, ie. we always want to see two\n * nodes \"touching\" opposite sides of the graph, with the camera being at its default state.\n *\n * This function determines this ratio.\n */\nfunction getCorrectionRatio(viewportDimensions, graphDimensions) {\n    var viewportRatio = viewportDimensions.height / viewportDimensions.width;\n    var graphRatio = graphDimensions.height / graphDimensions.width;\n    // If the stage and the graphs are in different directions (such as the graph being wider that tall while the stage\n    // is taller than wide), we can stop here to have indeed nodes touching opposite sides:\n    if ((viewportRatio < 1 && graphRatio > 1) || (viewportRatio > 1 && graphRatio < 1)) {\n        return 1;\n    }\n    // Else, we need to fit the graph inside the stage:\n    // 1. If the graph is \"squarer\" (ie. with a ratio closer to 1), we need to make the largest sides touch;\n    // 2. If the stage is \"squarer\", we need to make the smallest sides touch.\n    return Math.min(Math.max(graphRatio, 1 / graphRatio), Math.max(1 / viewportRatio, viewportRatio));\n}\nexports.getCorrectionRatio = getCorrectionRatio;\n/**\n * Function returning a matrix from the current state of the camera.\n */\n// TODO: it's possible to optimize this drastically!\nfunction matrixFromCamera(state, viewportDimensions, graphDimensions, padding, inverse) {\n    var angle = state.angle, ratio = state.ratio, x = state.x, y = state.y;\n    var width = viewportDimensions.width, height = viewportDimensions.height;\n    var matrix = (0, matrices_1.identity)();\n    var smallestDimension = Math.min(width, height) - 2 * padding;\n    var correctionRatio = getCorrectionRatio(viewportDimensions, graphDimensions);\n    if (!inverse) {\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), 2 * (smallestDimension / width) * correctionRatio, 2 * (smallestDimension / height) * correctionRatio));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.rotate)((0, matrices_1.identity)(), -angle));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), 1 / ratio));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.translate)((0, matrices_1.identity)(), -x, -y));\n    }\n    else {\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.translate)((0, matrices_1.identity)(), x, y));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), ratio));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.rotate)((0, matrices_1.identity)(), angle));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), width / smallestDimension / 2 / correctionRatio, height / smallestDimension / 2 / correctionRatio));\n    }\n    return matrix;\n}\nexports.matrixFromCamera = matrixFromCamera;\n/**\n * All these transformations we apply on the matrix to get it rescale the graph\n * as we want make it very hard to get pixel-perfect distances in WebGL. This\n * function returns a factor that properly cancels the matrix effect on lengths.\n *\n * [jacomyal]\n * To be fully honest, I can't really explain happens here... I notice that the\n * following ratio works (ie. it correctly compensates the matrix impact on all\n * camera states I could try):\n * > `R = size(V) / size(M * V) / W`\n * as long as `M * V` is in the direction of W (ie. parallel to (Ox)). It works\n * as well with H and a vector that transforms into something parallel to (Oy).\n *\n * Also, note that we use `angle` and not `-angle` (that would seem logical,\n * since we want to anticipate the rotation), because of the fact that in WebGL,\n * the image is vertically swapped.\n */\nfunction getMatrixImpact(matrix, cameraState, viewportDimensions) {\n    var _a = (0, matrices_1.multiplyVec2)(matrix, { x: Math.cos(cameraState.angle), y: Math.sin(cameraState.angle) }, 0), x = _a.x, y = _a.y;\n    return 1 / Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2)) / viewportDimensions.width;\n}\nexports.getMatrixImpact = getMatrixImpact;\n/**\n * Function extracting the color at the given pixel.\n */\nfunction extractPixel(gl, x, y, array) {\n    var data = array || new Uint8Array(4);\n    gl.readPixels(x, y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    return data;\n}\nexports.extractPixel = extractPixel;\n/**\n * Function used to know whether given webgl context can use 32 bits indices.\n */\nfunction canUse32BitsIndices(gl) {\n    var webgl2 = typeof WebGL2RenderingContext !== \"undefined\" && gl instanceof WebGL2RenderingContext;\n    return webgl2 || !!gl.getExtension(\"OES_element_index_uint\");\n}\nexports.canUse32BitsIndices = canUse32BitsIndices;\n/**\n * Check if the graph variable is a valid graph, and if sigma can render it.\n */\nfunction validateGraph(graph) {\n    // check if it's a valid graphology instance\n    if (!(0, is_graph_1.default)(graph))\n        throw new Error(\"Sigma: invalid graph instance.\");\n    // check if nodes have x/y attributes\n    graph.forEachNode(function (key, attributes) {\n        if (!Number.isFinite(attributes.x) || !Number.isFinite(attributes.y)) {\n            throw new Error(\"Sigma: Coordinates of node \".concat(key, \" are invalid. A node must have a numeric 'x' and 'y' attribute.\"));\n        }\n    });\n}\nexports.validateGraph = validateGraph;\n","/**\n * Graphology isGraph\n * ===================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology instance.\n */\n\n/**\n * Checking the value is a graphology instance.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraph(value) {\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.dropNode === 'function' &&\n    typeof value.multi === 'boolean'\n  );\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createEdgeCompoundProgram = exports.AbstractEdgeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Edge Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Edge Program class.\n *\n * @constructor\n */\nvar AbstractEdgeProgram = /** @class */ (function (_super) {\n    __extends(AbstractEdgeProgram, _super);\n    function AbstractEdgeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        return _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n    }\n    return AbstractEdgeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractEdgeProgram = AbstractEdgeProgram;\nfunction createEdgeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function EdgeCompoundProgram(gl, renderer) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl, renderer); });\n        }\n        EdgeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        EdgeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        EdgeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        EdgeCompoundProgram.prototype.computeIndices = function () {\n            this.programs.forEach(function (program) { return program.computeIndices(); });\n        };\n        EdgeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) {\n                program.bind();\n                program.bufferData();\n                program.render(params);\n            });\n        };\n        EdgeCompoundProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(sourceData, targetData, data, hidden, offset); });\n        };\n        return EdgeCompoundProgram;\n    }());\n}\nexports.createEdgeCompoundProgram = createEdgeCompoundProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedEventEmitter = void 0;\n/**\n * Sigma.js Types\n * ===============\n *\n * Various type declarations used throughout the library.\n * @module\n */\nvar events_1 = require(\"events\");\nvar TypedEventEmitter = /** @class */ (function (_super) {\n    __extends(TypedEventEmitter, _super);\n    function TypedEventEmitter() {\n        var _this = _super.call(this) || this;\n        _this.rawEmitter = _this;\n        return _this;\n    }\n    return TypedEventEmitter;\n}(events_1.EventEmitter));\nexports.TypedEventEmitter = TypedEventEmitter;\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js Camera Class\n * ======================\n *\n * Class designed to store camera information & used to update it.\n * @module\n */\nvar animate_1 = require(\"../utils/animate\");\nvar easings_1 = __importDefault(require(\"../utils/easings\"));\nvar utils_1 = require(\"../utils\");\nvar types_1 = require(\"../types\");\n/**\n * Defaults.\n */\nvar DEFAULT_ZOOMING_RATIO = 1.5;\n/**\n * Camera class\n *\n * @constructor\n */\nvar Camera = /** @class */ (function (_super) {\n    __extends(Camera, _super);\n    function Camera() {\n        var _this = _super.call(this) || this;\n        _this.x = 0.5;\n        _this.y = 0.5;\n        _this.angle = 0;\n        _this.ratio = 1;\n        _this.minRatio = null;\n        _this.maxRatio = null;\n        _this.nextFrame = null;\n        _this.previousState = null;\n        _this.enabled = true;\n        // State\n        _this.previousState = _this.getState();\n        return _this;\n    }\n    /**\n     * Static method used to create a Camera object with a given state.\n     *\n     * @param state\n     * @return {Camera}\n     */\n    Camera.from = function (state) {\n        var camera = new Camera();\n        return camera.setState(state);\n    };\n    /**\n     * Method used to enable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.enable = function () {\n        this.enabled = true;\n        return this;\n    };\n    /**\n     * Method used to disable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.disable = function () {\n        this.enabled = false;\n        return this;\n    };\n    /**\n     * Method used to retrieve the camera's current state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getState = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            angle: this.angle,\n            ratio: this.ratio,\n        };\n    };\n    /**\n     * Method used to check whether the camera has the given state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.hasState = function (state) {\n        return this.x === state.x && this.y === state.y && this.ratio === state.ratio && this.angle === state.angle;\n    };\n    /**\n     * Method used to retrieve the camera's previous state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getPreviousState = function () {\n        var state = this.previousState;\n        if (!state)\n            return null;\n        return {\n            x: state.x,\n            y: state.y,\n            angle: state.angle,\n            ratio: state.ratio,\n        };\n    };\n    /**\n     * Method used to check minRatio and maxRatio values.\n     *\n     * @param ratio\n     * @return {number}\n     */\n    Camera.prototype.getBoundedRatio = function (ratio) {\n        var r = ratio;\n        if (typeof this.minRatio === \"number\")\n            r = Math.max(r, this.minRatio);\n        if (typeof this.maxRatio === \"number\")\n            r = Math.min(r, this.maxRatio);\n        return r;\n    };\n    /**\n     * Method used to check various things to return a legit state candidate.\n     *\n     * @param state\n     * @return {object}\n     */\n    Camera.prototype.validateState = function (state) {\n        var validatedState = {};\n        if (typeof state.x === \"number\")\n            validatedState.x = state.x;\n        if (typeof state.y === \"number\")\n            validatedState.y = state.y;\n        if (typeof state.angle === \"number\")\n            validatedState.angle = state.angle;\n        if (typeof state.ratio === \"number\")\n            validatedState.ratio = this.getBoundedRatio(state.ratio);\n        return validatedState;\n    };\n    /**\n     * Method used to check whether the camera is currently being animated.\n     *\n     * @return {boolean}\n     */\n    Camera.prototype.isAnimated = function () {\n        return !!this.nextFrame;\n    };\n    /**\n     * Method used to set the camera's state.\n     *\n     * @param  {object} state - New state.\n     * @return {Camera}\n     */\n    Camera.prototype.setState = function (state) {\n        if (!this.enabled)\n            return this;\n        // TODO: update by function\n        // Keeping track of last state\n        this.previousState = this.getState();\n        var validState = this.validateState(state);\n        if (typeof validState.x === \"number\")\n            this.x = validState.x;\n        if (typeof validState.y === \"number\")\n            this.y = validState.y;\n        if (typeof validState.angle === \"number\")\n            this.angle = validState.angle;\n        if (typeof validState.ratio === \"number\")\n            this.ratio = validState.ratio;\n        // Emitting\n        if (!this.hasState(this.previousState))\n            this.emit(\"updated\", this.getState());\n        return this;\n    };\n    /**\n     * Method used to animate the camera.\n     *\n     * @param  {object}                    state      - State to reach eventually.\n     * @param  {object}                    opts       - Options:\n     * @param  {number}                      duration - Duration of the animation.\n     * @param  {string | number => number}   easing   - Easing function or name of an existing one\n     * @param  {function}                  callback   - Callback\n     */\n    Camera.prototype.animate = function (state, opts, callback) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        var options = Object.assign({}, animate_1.ANIMATE_DEFAULTS, opts);\n        var validState = this.validateState(state);\n        var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n        // State\n        var start = Date.now(), initialState = this.getState();\n        // Function performing the animation\n        var fn = function () {\n            var t = (Date.now() - start) / options.duration;\n            // The animation is over:\n            if (t >= 1) {\n                _this.nextFrame = null;\n                _this.setState(validState);\n                if (_this.animationCallback) {\n                    _this.animationCallback.call(null);\n                    _this.animationCallback = undefined;\n                }\n                return;\n            }\n            var coefficient = easing(t);\n            var newState = {};\n            if (typeof validState.x === \"number\")\n                newState.x = initialState.x + (validState.x - initialState.x) * coefficient;\n            if (typeof validState.y === \"number\")\n                newState.y = initialState.y + (validState.y - initialState.y) * coefficient;\n            if (typeof validState.angle === \"number\")\n                newState.angle = initialState.angle + (validState.angle - initialState.angle) * coefficient;\n            if (typeof validState.ratio === \"number\")\n                newState.ratio = initialState.ratio + (validState.ratio - initialState.ratio) * coefficient;\n            _this.setState(newState);\n            _this.nextFrame = (0, utils_1.requestFrame)(fn);\n        };\n        if (this.nextFrame) {\n            (0, utils_1.cancelFrame)(this.nextFrame);\n            if (this.animationCallback)\n                this.animationCallback.call(null);\n            this.nextFrame = (0, utils_1.requestFrame)(fn);\n        }\n        else {\n            fn();\n        }\n        this.animationCallback = callback;\n    };\n    /**\n     * Method used to zoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     * @return {function}\n     */\n    Camera.prototype.animatedZoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio / DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio / factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio / (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to unzoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     */\n    Camera.prototype.animatedUnzoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio * DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio * factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio * (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to reset the camera.\n     *\n     * @param  {object} options - Options.\n     */\n    Camera.prototype.animatedReset = function (options) {\n        this.animate({\n            x: 0.5,\n            y: 0.5,\n            ratio: 1,\n            angle: 0,\n        }, options);\n    };\n    /**\n     * Returns a new Camera instance, with the same state as the current camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.copy = function () {\n        return Camera.from(this.getState());\n    };\n    return Camera;\n}(types_1.TypedEventEmitter));\nexports.default = Camera;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiplyVec2 = exports.multiply = exports.translate = exports.rotate = exports.scale = exports.identity = void 0;\nfunction identity() {\n    return Float32Array.of(1, 0, 0, 0, 1, 0, 0, 0, 1);\n}\nexports.identity = identity;\n// TODO: optimize\nfunction scale(m, x, y) {\n    m[0] = x;\n    m[4] = typeof y === \"number\" ? y : x;\n    return m;\n}\nexports.scale = scale;\nfunction rotate(m, r) {\n    var s = Math.sin(r), c = Math.cos(r);\n    m[0] = c;\n    m[1] = s;\n    m[3] = -s;\n    m[4] = c;\n    return m;\n}\nexports.rotate = rotate;\nfunction translate(m, x, y) {\n    m[6] = x;\n    m[7] = y;\n    return m;\n}\nexports.translate = translate;\nfunction multiply(a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2];\n    var a10 = a[3], a11 = a[4], a12 = a[5];\n    var a20 = a[6], a21 = a[7], a22 = a[8];\n    var b00 = b[0], b01 = b[1], b02 = b[2];\n    var b10 = b[3], b11 = b[4], b12 = b[5];\n    var b20 = b[6], b21 = b[7], b22 = b[8];\n    a[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    a[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    a[2] = b00 * a02 + b01 * a12 + b02 * a22;\n    a[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    a[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    a[5] = b10 * a02 + b11 * a12 + b12 * a22;\n    a[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    a[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    a[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return a;\n}\nexports.multiply = multiply;\nfunction multiplyVec2(a, b, z) {\n    if (z === void 0) { z = 1; }\n    var a00 = a[0];\n    var a01 = a[1];\n    var a10 = a[3];\n    var a11 = a[4];\n    var a20 = a[6];\n    var a21 = a[7];\n    var b0 = b.x;\n    var b1 = b.y;\n    return { x: b0 * a00 + b1 * a10 + a20 * z, y: b0 * a01 + b1 * a11 + a21 * z };\n}\nexports.multiplyVec2 = multiplyVec2;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cubicInOut = exports.cubicOut = exports.cubicIn = exports.quadraticInOut = exports.quadraticOut = exports.quadraticIn = exports.linear = void 0;\n/**\n * Sigma.js Easings\n * =================\n *\n * Handy collection of easing functions.\n * @module\n */\nvar linear = function (k) { return k; };\nexports.linear = linear;\nvar quadraticIn = function (k) { return k * k; };\nexports.quadraticIn = quadraticIn;\nvar quadraticOut = function (k) { return k * (2 - k); };\nexports.quadraticOut = quadraticOut;\nvar quadraticInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k;\n    return -0.5 * (--k * (k - 2) - 1);\n};\nexports.quadraticInOut = quadraticInOut;\nvar cubicIn = function (k) { return k * k * k; };\nexports.cubicIn = cubicIn;\nvar cubicOut = function (k) { return --k * k * k + 1; };\nexports.cubicOut = cubicOut;\nvar cubicInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k * k;\n    return 0.5 * ((k -= 2) * k * k + 2);\n};\nexports.cubicInOut = cubicInOut;\nvar easings = {\n    linear: exports.linear,\n    quadraticIn: exports.quadraticIn,\n    quadraticOut: exports.quadraticOut,\n    quadraticInOut: exports.quadraticInOut,\n    cubicIn: exports.cubicIn,\n    cubicOut: exports.cubicOut,\n    cubicInOut: exports.cubicInOut,\n};\nexports.default = easings;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\n/**\n * Constants.\n */\nvar DRAG_TIMEOUT = 100;\nvar DRAGGED_EVENTS_TOLERANCE = 3;\nvar MOUSE_INERTIA_DURATION = 200;\nvar MOUSE_INERTIA_RATIO = 3;\nvar MOUSE_ZOOM_DURATION = 250;\nvar ZOOMING_RATIO = 1.7;\nvar DOUBLE_CLICK_TIMEOUT = 300;\nvar DOUBLE_CLICK_ZOOMING_RATIO = 2.2;\nvar DOUBLE_CLICK_ZOOMING_DURATION = 200;\n/**\n * Mouse captor class.\n *\n * @constructor\n */\nvar MouseCaptor = /** @class */ (function (_super) {\n    __extends(MouseCaptor, _super);\n    function MouseCaptor(container, renderer) {\n        var _this = _super.call(this, container, renderer) || this;\n        // State\n        _this.enabled = true;\n        _this.draggedEvents = 0;\n        _this.downStartTime = null;\n        _this.lastMouseX = null;\n        _this.lastMouseY = null;\n        _this.isMouseDown = false;\n        _this.isMoving = false;\n        _this.movingTimeout = null;\n        _this.startCameraState = null;\n        _this.clicks = 0;\n        _this.doubleClickTimeout = null;\n        _this.currentWheelDirection = 0;\n        // Binding methods\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.handleRightClick = _this.handleRightClick.bind(_this);\n        _this.handleDown = _this.handleDown.bind(_this);\n        _this.handleUp = _this.handleUp.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        _this.handleWheel = _this.handleWheel.bind(_this);\n        _this.handleOut = _this.handleOut.bind(_this);\n        // Binding events\n        container.addEventListener(\"click\", _this.handleClick, false);\n        container.addEventListener(\"contextmenu\", _this.handleRightClick, false);\n        container.addEventListener(\"mousedown\", _this.handleDown, false);\n        container.addEventListener(\"wheel\", _this.handleWheel, false);\n        container.addEventListener(\"mouseout\", _this.handleOut, false);\n        document.addEventListener(\"mousemove\", _this.handleMove, false);\n        document.addEventListener(\"mouseup\", _this.handleUp, false);\n        return _this;\n    }\n    MouseCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"click\", this.handleClick);\n        container.removeEventListener(\"contextmenu\", this.handleRightClick);\n        container.removeEventListener(\"mousedown\", this.handleDown);\n        container.removeEventListener(\"wheel\", this.handleWheel);\n        container.removeEventListener(\"mouseout\", this.handleOut);\n        document.removeEventListener(\"mousemove\", this.handleMove);\n        document.removeEventListener(\"mouseup\", this.handleUp);\n    };\n    MouseCaptor.prototype.handleClick = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        this.clicks++;\n        if (this.clicks === 2) {\n            this.clicks = 0;\n            if (typeof this.doubleClickTimeout === \"number\") {\n                clearTimeout(this.doubleClickTimeout);\n                this.doubleClickTimeout = null;\n            }\n            return this.handleDoubleClick(e);\n        }\n        setTimeout(function () {\n            _this.clicks = 0;\n            _this.doubleClickTimeout = null;\n        }, DOUBLE_CLICK_TIMEOUT);\n        // NOTE: this is here to prevent click events on drag\n        if (this.draggedEvents < DRAGGED_EVENTS_TOLERANCE)\n            this.emit(\"click\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleRightClick = function (e) {\n        if (!this.enabled)\n            return;\n        this.emit(\"rightClick\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleDoubleClick = function (e) {\n        if (!this.enabled)\n            return;\n        e.preventDefault();\n        e.stopPropagation();\n        var mouseCoords = (0, captor_1.getMouseCoords)(e, this.container);\n        this.emit(\"doubleClick\", mouseCoords);\n        if (mouseCoords.sigmaDefaultPrevented)\n            return;\n        // default behavior\n        var camera = this.renderer.getCamera();\n        var newRatio = camera.getBoundedRatio(camera.getState().ratio / DOUBLE_CLICK_ZOOMING_RATIO);\n        camera.animate(this.renderer.getViewportZoomedState((0, captor_1.getPosition)(e, this.container), newRatio), {\n            easing: \"quadraticInOut\",\n            duration: DOUBLE_CLICK_ZOOMING_DURATION,\n        });\n    };\n    MouseCaptor.prototype.handleDown = function (e) {\n        if (!this.enabled)\n            return;\n        this.startCameraState = this.renderer.getCamera().getState();\n        var _a = (0, captor_1.getPosition)(e, this.container), x = _a.x, y = _a.y;\n        this.lastMouseX = x;\n        this.lastMouseY = y;\n        this.draggedEvents = 0;\n        this.downStartTime = Date.now();\n        // TODO: dispatch events\n        // Left button pressed\n        this.isMouseDown = true;\n        this.emit(\"mousedown\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleUp = function (e) {\n        var _this = this;\n        if (!this.enabled || !this.isMouseDown)\n            return;\n        var camera = this.renderer.getCamera();\n        this.isMouseDown = false;\n        if (typeof this.movingTimeout === \"number\") {\n            clearTimeout(this.movingTimeout);\n            this.movingTimeout = null;\n        }\n        var _a = (0, captor_1.getPosition)(e, this.container), x = _a.x, y = _a.y;\n        var cameraState = camera.getState(), previousCameraState = camera.getPreviousState() || { x: 0, y: 0 };\n        if (this.isMoving) {\n            camera.animate({\n                x: cameraState.x + MOUSE_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                y: cameraState.y + MOUSE_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n            }, {\n                duration: MOUSE_INERTIA_DURATION,\n                easing: \"quadraticOut\",\n            });\n        }\n        else if (this.lastMouseX !== x || this.lastMouseY !== y) {\n            camera.setState({\n                x: cameraState.x,\n                y: cameraState.y,\n            });\n        }\n        this.isMoving = false;\n        setTimeout(function () {\n            _this.draggedEvents = 0;\n            _this.renderer.refresh();\n        }, 0);\n        this.emit(\"mouseup\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleMove = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        var mouseCoords = (0, captor_1.getMouseCoords)(e, this.container);\n        // Always trigger a \"mousemovebody\" event, so that it is possible to develop\n        // a drag-and-drop effect that works even when the mouse is out of the\n        // container:\n        this.emit(\"mousemovebody\", mouseCoords);\n        // Only trigger the \"mousemove\" event when the mouse is actually hovering\n        // the container, to avoid weirdly hovering nodes and/or edges when the\n        // mouse is not hover the container:\n        if (e.target === this.container) {\n            this.emit(\"mousemove\", mouseCoords);\n        }\n        if (mouseCoords.sigmaDefaultPrevented)\n            return;\n        // Handle the case when \"isMouseDown\" all the time, to allow dragging the\n        // stage while the mouse is not hover the container:\n        if (this.isMouseDown) {\n            this.isMoving = true;\n            this.draggedEvents++;\n            if (typeof this.movingTimeout === \"number\") {\n                clearTimeout(this.movingTimeout);\n            }\n            this.movingTimeout = window.setTimeout(function () {\n                _this.movingTimeout = null;\n                _this.isMoving = false;\n            }, DRAG_TIMEOUT);\n            var camera = this.renderer.getCamera();\n            var _a = (0, captor_1.getPosition)(e, this.container), eX = _a.x, eY = _a.y;\n            var lastMouse = this.renderer.viewportToFramedGraph({\n                x: this.lastMouseX,\n                y: this.lastMouseY,\n            });\n            var mouse = this.renderer.viewportToFramedGraph({ x: eX, y: eY });\n            var offsetX = lastMouse.x - mouse.x, offsetY = lastMouse.y - mouse.y;\n            var cameraState = camera.getState();\n            var x = cameraState.x + offsetX, y = cameraState.y + offsetY;\n            camera.setState({ x: x, y: y });\n            this.lastMouseX = eX;\n            this.lastMouseY = eY;\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    };\n    MouseCaptor.prototype.handleWheel = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        e.preventDefault();\n        e.stopPropagation();\n        var delta = (0, captor_1.getWheelDelta)(e);\n        if (!delta)\n            return;\n        var wheelCoords = (0, captor_1.getWheelCoords)(e, this.container);\n        this.emit(\"wheel\", wheelCoords);\n        if (wheelCoords.sigmaDefaultPrevented)\n            return;\n        // Default behavior\n        var ratioDiff = delta > 0 ? 1 / ZOOMING_RATIO : ZOOMING_RATIO;\n        var camera = this.renderer.getCamera();\n        var newRatio = camera.getBoundedRatio(camera.getState().ratio * ratioDiff);\n        var wheelDirection = delta > 0 ? 1 : -1;\n        var now = Date.now();\n        // Cancel events that are too close too each other and in the same direction:\n        if (this.currentWheelDirection === wheelDirection &&\n            this.lastWheelTriggerTime &&\n            now - this.lastWheelTriggerTime < MOUSE_ZOOM_DURATION / 5) {\n            return;\n        }\n        camera.animate(this.renderer.getViewportZoomedState((0, captor_1.getPosition)(e, this.container), newRatio), {\n            easing: \"quadraticOut\",\n            duration: MOUSE_ZOOM_DURATION,\n        }, function () {\n            _this.currentWheelDirection = 0;\n        });\n        this.currentWheelDirection = wheelDirection;\n        this.lastWheelTriggerTime = now;\n    };\n    MouseCaptor.prototype.handleOut = function () {\n        // TODO: dispatch event\n    };\n    return MouseCaptor;\n}(captor_1.default));\nexports.default = MouseCaptor;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getWheelDelta = exports.getTouchCoords = exports.getTouchesArray = exports.getWheelCoords = exports.getMouseCoords = exports.getPosition = void 0;\n/**\n * Sigma.js Captor Class\n * ======================\n * @module\n */\nvar types_1 = require(\"../../types\");\n/**\n * Captor utils functions\n * ======================\n */\n/**\n * Extract the local X and Y coordinates from a mouse event or touch object. If\n * a DOM element is given, it uses this element's offset to compute the position\n * (this allows using events that are not bound to the container itself and\n * still have a proper position).\n *\n * @param  {event}       e - A mouse event or touch object.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {number}      The local Y value of the mouse.\n */\nfunction getPosition(e, dom) {\n    var bbox = dom.getBoundingClientRect();\n    return {\n        x: e.clientX - bbox.left,\n        y: e.clientY - bbox.top,\n    };\n}\nexports.getPosition = getPosition;\n/**\n * Convert mouse coords to sigma coords.\n *\n * @param  {event}       e   - A mouse event or touch object.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getMouseCoords(e, dom) {\n    var res = __assign(__assign({}, getPosition(e, dom)), { sigmaDefaultPrevented: false, preventSigmaDefault: function () {\n            res.sigmaDefaultPrevented = true;\n        }, original: e });\n    return res;\n}\nexports.getMouseCoords = getMouseCoords;\n/**\n * Convert mouse wheel event coords to sigma coords.\n *\n * @param  {event}       e   - A wheel mouse event.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getWheelCoords(e, dom) {\n    return __assign(__assign({}, getMouseCoords(e, dom)), { delta: getWheelDelta(e) });\n}\nexports.getWheelCoords = getWheelCoords;\nvar MAX_TOUCHES = 2;\nfunction getTouchesArray(touches) {\n    var arr = [];\n    for (var i = 0, l = Math.min(touches.length, MAX_TOUCHES); i < l; i++)\n        arr.push(touches[i]);\n    return arr;\n}\nexports.getTouchesArray = getTouchesArray;\n/**\n * Convert touch coords to sigma coords.\n *\n * @param  {event}       e   - A touch event.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getTouchCoords(e, dom) {\n    return {\n        touches: getTouchesArray(e.touches).map(function (touch) { return getPosition(touch, dom); }),\n        original: e,\n    };\n}\nexports.getTouchCoords = getTouchCoords;\n/**\n * Extract the wheel delta from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The wheel delta of the mouse.\n */\nfunction getWheelDelta(e) {\n    // TODO: check those ratios again to ensure a clean Chrome/Firefox compat\n    if (typeof e.deltaY !== \"undefined\")\n        return (e.deltaY * -3) / 360;\n    if (typeof e.detail !== \"undefined\")\n        return e.detail / -9;\n    throw new Error(\"Captor: could not extract delta from event.\");\n}\nexports.getWheelDelta = getWheelDelta;\n/**\n * Abstract class representing a captor like the user's mouse or touch controls.\n */\nvar Captor = /** @class */ (function (_super) {\n    __extends(Captor, _super);\n    function Captor(container, renderer) {\n        var _this = _super.call(this) || this;\n        // Properties\n        _this.container = container;\n        _this.renderer = renderer;\n        return _this;\n    }\n    return Captor;\n}(types_1.TypedEventEmitter));\nexports.default = Captor;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rectangleCollidesWithQuad = exports.squareCollidesWithQuad = exports.getCircumscribedAlignedRectangle = exports.isRectangleAligned = void 0;\n/**\n * Sigma.js Quad Tree Class\n * =========================\n *\n * Class implementing the quad tree data structure used to solve hovers and\n * determine which elements are currently in the scope of the camera so that\n * we don't waste time rendering things the user cannot see anyway.\n * @module\n */\n/* eslint no-nested-ternary: 0 */\n/* eslint no-constant-condition: 0 */\nvar extend_1 = __importDefault(require(\"@yomguithereal/helpers/extend\"));\n// TODO: should not ask the quadtree when the camera has the whole graph in\n// sight.\n// TODO: a square can be represented as topleft + width, saying for the quad blocks (reduce mem)\n// TODO: jsdoc\n// TODO: be sure we can handle cases overcoming boundaries (because of size) or use a maxed size\n// TODO: filtering unwanted labels beforehand through the filter function\n// NOTE: this is basically a MX-CIF Quadtree at this point\n// NOTE: need to explore R-Trees for edges\n// NOTE: need to explore 2d segment tree for edges\n// NOTE: probably can do faster using spatial hashing\n/**\n * Constants.\n *\n * Note that since we are representing a static 4-ary tree, the indices of the\n * quadrants are the following:\n *   - TOP_LEFT:     4i + b\n *   - TOP_RIGHT:    4i + 2b\n *   - BOTTOM_LEFT:  4i + 3b\n *   - BOTTOM_RIGHT: 4i + 4b\n */\nvar BLOCKS = 4, MAX_LEVEL = 5;\nvar OUTSIDE_BLOCK = \"outside\";\nvar X_OFFSET = 0, Y_OFFSET = 1, WIDTH_OFFSET = 2, HEIGHT_OFFSET = 3;\nvar TOP_LEFT = 1, TOP_RIGHT = 2, BOTTOM_LEFT = 3, BOTTOM_RIGHT = 4;\nvar hasWarnedTooMuchOutside = false;\n/**\n * Geometry helpers.\n */\n/**\n * Function returning whether the given rectangle is axis-aligned.\n *\n * @param  {Rectangle} rect\n * @return {boolean}\n */\nfunction isRectangleAligned(rect) {\n    return rect.x1 === rect.x2 || rect.y1 === rect.y2;\n}\nexports.isRectangleAligned = isRectangleAligned;\n/**\n * Function returning the smallest rectangle that contains the given rectangle, and that is aligned with the axis.\n *\n * @param {Rectangle} rect\n * @return {Rectangle}\n */\nfunction getCircumscribedAlignedRectangle(rect) {\n    var width = Math.sqrt(Math.pow(rect.x2 - rect.x1, 2) + Math.pow(rect.y2 - rect.y1, 2));\n    var heightVector = {\n        x: ((rect.y1 - rect.y2) * rect.height) / width,\n        y: ((rect.x2 - rect.x1) * rect.height) / width,\n    };\n    // Compute all corners:\n    var tl = { x: rect.x1, y: rect.y1 };\n    var tr = { x: rect.x2, y: rect.y2 };\n    var bl = {\n        x: rect.x1 + heightVector.x,\n        y: rect.y1 + heightVector.y,\n    };\n    var br = {\n        x: rect.x2 + heightVector.x,\n        y: rect.y2 + heightVector.y,\n    };\n    var xL = Math.min(tl.x, tr.x, bl.x, br.x);\n    var xR = Math.max(tl.x, tr.x, bl.x, br.x);\n    var yT = Math.min(tl.y, tr.y, bl.y, br.y);\n    var yB = Math.max(tl.y, tr.y, bl.y, br.y);\n    return {\n        x1: xL,\n        y1: yT,\n        x2: xR,\n        y2: yT,\n        height: yB - yT,\n    };\n}\nexports.getCircumscribedAlignedRectangle = getCircumscribedAlignedRectangle;\n/**\n *\n * @param x1\n * @param y1\n * @param w\n * @param qx\n * @param qy\n * @param qw\n * @param qh\n */\nfunction squareCollidesWithQuad(x1, y1, w, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + w > qy;\n}\nexports.squareCollidesWithQuad = squareCollidesWithQuad;\nfunction rectangleCollidesWithQuad(x1, y1, w, h, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + h > qy;\n}\nexports.rectangleCollidesWithQuad = rectangleCollidesWithQuad;\nfunction pointIsInQuad(x, y, qx, qy, qw, qh) {\n    var xmp = qx + qw / 2, ymp = qy + qh / 2, top = y < ymp, left = x < xmp;\n    return top ? (left ? TOP_LEFT : TOP_RIGHT) : left ? BOTTOM_LEFT : BOTTOM_RIGHT;\n}\n/**\n * Helper functions that are not bound to the class so an external user\n * cannot mess with them.\n */\nfunction buildQuadrants(maxLevel, data) {\n    // [block, level]\n    var stack = [0, 0];\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var x = data[block + X_OFFSET], y = data[block + Y_OFFSET], width = data[block + WIDTH_OFFSET], height = data[block + HEIGHT_OFFSET], hw = width / 2, hh = height / 2;\n        data[topLeftBlock + X_OFFSET] = x;\n        data[topLeftBlock + Y_OFFSET] = y;\n        data[topLeftBlock + WIDTH_OFFSET] = hw;\n        data[topLeftBlock + HEIGHT_OFFSET] = hh;\n        data[topRightBlock + X_OFFSET] = x + hw;\n        data[topRightBlock + Y_OFFSET] = y;\n        data[topRightBlock + WIDTH_OFFSET] = hw;\n        data[topRightBlock + HEIGHT_OFFSET] = hh;\n        data[bottomLeftBlock + X_OFFSET] = x;\n        data[bottomLeftBlock + Y_OFFSET] = y + hh;\n        data[bottomLeftBlock + WIDTH_OFFSET] = hw;\n        data[bottomLeftBlock + HEIGHT_OFFSET] = hh;\n        data[bottomRightBlock + X_OFFSET] = x + hw;\n        data[bottomRightBlock + Y_OFFSET] = y + hh;\n        data[bottomRightBlock + WIDTH_OFFSET] = hw;\n        data[bottomRightBlock + HEIGHT_OFFSET] = hh;\n        if (level < maxLevel - 1) {\n            stack.push(bottomRightBlock, level + 1);\n            stack.push(bottomLeftBlock, level + 1);\n            stack.push(topRightBlock, level + 1);\n            stack.push(topLeftBlock, level + 1);\n        }\n    }\n}\nfunction insertNode(maxLevel, data, containers, key, x, y, size) {\n    var x1 = x - size, y1 = y - size, w = size * 2;\n    var level = 0, block = 0;\n    while (true) {\n        // If we reached max level\n        if (level >= maxLevel) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = squareCollidesWithQuad(x1, y1, w, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = squareCollidesWithQuad(x1, y1, w, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = squareCollidesWithQuad(x1, y1, w, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = squareCollidesWithQuad(x1, y1, w, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        var collisions = [\n            collidingWithTopLeft,\n            collidingWithTopRight,\n            collidingWithBottomLeft,\n            collidingWithBottomRight,\n        ].reduce(function (acc, current) {\n            if (current)\n                return acc + 1;\n            else\n                return acc;\n        }, 0);\n        // If we have no collision at root level, inject node in the outside block\n        if (collisions === 0 && level === 0) {\n            containers[OUTSIDE_BLOCK].push(key);\n            if (!hasWarnedTooMuchOutside && containers[OUTSIDE_BLOCK].length >= 5) {\n                hasWarnedTooMuchOutside = true;\n                console.warn(\"sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. \" +\n                    \"You might have a problem with the normalization function or the custom bounding box.\");\n            }\n            return;\n        }\n        // If we don't have at least a collision but deeper, there is an issue\n        if (collisions === 0)\n            throw new Error(\"sigma/quadtree.insertNode: no collision (level: \".concat(level, \", key: \").concat(key, \", x: \").concat(x, \", y: \").concat(y, \", size: \").concat(size, \").\"));\n        // If we have 3 collisions, we have a geometry problem obviously\n        if (collisions === 3)\n            throw new Error(\"sigma/quadtree.insertNode: 3 impossible collisions (level: \".concat(level, \", key: \").concat(key, \", x: \").concat(x, \", y: \").concat(y, \", size: \").concat(size, \").\"));\n        // If we have more that one collision, we stop here and store the node\n        // in the relevant containers\n        if (collisions > 1) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        else {\n            level++;\n        }\n        // Else we recurse into the correct quads\n        if (collidingWithTopLeft)\n            block = topLeftBlock;\n        if (collidingWithTopRight)\n            block = topRightBlock;\n        if (collidingWithBottomLeft)\n            block = bottomLeftBlock;\n        if (collidingWithBottomRight)\n            block = bottomRightBlock;\n    }\n}\nfunction getNodesInAxisAlignedRectangleArea(maxLevel, data, containers, x1, y1, w, h) {\n    // [block, level]\n    var stack = [0, 0];\n    var collectedNodes = [];\n    var container;\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        // Collecting nodes\n        container = containers[block];\n        if (container)\n            (0, extend_1.default)(collectedNodes, container);\n        // If we reached max level\n        if (level >= maxLevel)\n            continue;\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = rectangleCollidesWithQuad(x1, y1, w, h, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        if (collidingWithTopLeft)\n            stack.push(topLeftBlock, level + 1);\n        if (collidingWithTopRight)\n            stack.push(topRightBlock, level + 1);\n        if (collidingWithBottomLeft)\n            stack.push(bottomLeftBlock, level + 1);\n        if (collidingWithBottomRight)\n            stack.push(bottomRightBlock, level + 1);\n    }\n    return collectedNodes;\n}\n/**\n * QuadTree class.\n *\n * @constructor\n * @param {object} boundaries - The graph boundaries.\n */\nvar QuadTree = /** @class */ (function () {\n    function QuadTree(params) {\n        var _a;\n        if (params === void 0) { params = {}; }\n        this.containers = (_a = {}, _a[OUTSIDE_BLOCK] = [], _a);\n        this.cache = null;\n        this.lastRectangle = null;\n        // Allocating the underlying byte array\n        var L = Math.pow(4, MAX_LEVEL);\n        this.data = new Float32Array(BLOCKS * ((4 * L - 1) / 3));\n        if (params.boundaries)\n            this.resize(params.boundaries);\n        else\n            this.resize({\n                x: 0,\n                y: 0,\n                width: 1,\n                height: 1,\n            });\n    }\n    QuadTree.prototype.add = function (key, x, y, size) {\n        insertNode(MAX_LEVEL, this.data, this.containers, key, x, y, size);\n        return this;\n    };\n    QuadTree.prototype.resize = function (boundaries) {\n        this.clear();\n        // Building the quadrants\n        this.data[X_OFFSET] = boundaries.x;\n        this.data[Y_OFFSET] = boundaries.y;\n        this.data[WIDTH_OFFSET] = boundaries.width;\n        this.data[HEIGHT_OFFSET] = boundaries.height;\n        buildQuadrants(MAX_LEVEL, this.data);\n    };\n    QuadTree.prototype.clear = function () {\n        var _a;\n        this.containers = (_a = {}, _a[OUTSIDE_BLOCK] = [], _a);\n        return this;\n    };\n    QuadTree.prototype.point = function (x, y) {\n        var nodes = this.containers[OUTSIDE_BLOCK];\n        var block = 0, level = 0;\n        do {\n            if (this.containers[block])\n                nodes.push.apply(nodes, __spreadArray([], __read(this.containers[block]), false));\n            var quad = pointIsInQuad(x, y, this.data[block + X_OFFSET], this.data[block + Y_OFFSET], this.data[block + WIDTH_OFFSET], this.data[block + HEIGHT_OFFSET]);\n            block = 4 * block + quad * BLOCKS;\n            level++;\n        } while (level <= MAX_LEVEL);\n        return nodes;\n    };\n    QuadTree.prototype.rectangle = function (x1, y1, x2, y2, height) {\n        var _a;\n        var lr = this.lastRectangle;\n        if (lr && x1 === lr.x1 && x2 === lr.x2 && y1 === lr.y1 && y2 === lr.y2 && height === lr.height) {\n            return this.cache;\n        }\n        this.lastRectangle = {\n            x1: x1,\n            y1: y1,\n            x2: x2,\n            y2: y2,\n            height: height,\n        };\n        // If the rectangle is shifted, we use the smallest aligned rectangle that contains the shifted one:\n        if (!isRectangleAligned(this.lastRectangle))\n            this.lastRectangle = getCircumscribedAlignedRectangle(this.lastRectangle);\n        this.cache = getNodesInAxisAlignedRectangleArea(MAX_LEVEL, this.data, this.containers, x1, y1, Math.abs(x1 - x2) || Math.abs(y1 - y2), height);\n        // Add all the nodes in the outside block, since they might be relevant, and since they should be very few:\n        (_a = this.cache).push.apply(_a, __spreadArray([], __read(this.containers[OUTSIDE_BLOCK]), false));\n        return this.cache;\n    };\n    return QuadTree;\n}());\nexports.default = QuadTree;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawLabel(context, data, settings) {\n    if (!data.label)\n        return;\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight, color = settings.labelColor.attribute\n        ? data[settings.labelColor.attribute] || settings.labelColor.color || \"#000\"\n        : settings.labelColor.color;\n    context.fillStyle = color;\n    context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n    context.fillText(data.label, data.x + data.size + 3, data.y + size / 3);\n}\nexports.default = drawLabel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractProgram = void 0;\n/**\n * Sigma.js WebGL Renderer Program\n * ================================\n *\n * Class representing a single WebGL program used by sigma's WebGL renderer.\n * @module\n */\nvar utils_1 = require(\"../../shaders/utils\");\n/**\n * Abstract Program class.\n *\n * @constructor\n */\nvar AbstractProgram = /** @class */ (function () {\n    function AbstractProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        this.array = new Float32Array();\n        this.points = points;\n        this.attributes = attributes;\n        this.gl = gl;\n        this.vertexShaderSource = vertexShaderSource;\n        this.fragmentShaderSource = fragmentShaderSource;\n        var buffer = gl.createBuffer();\n        if (buffer === null)\n            throw new Error(\"AbstractProgram: error while creating the buffer\");\n        this.buffer = buffer;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        this.vertexShader = (0, utils_1.loadVertexShader)(gl, this.vertexShaderSource);\n        this.fragmentShader = (0, utils_1.loadFragmentShader)(gl, this.fragmentShaderSource);\n        this.program = (0, utils_1.loadProgram)(gl, [this.vertexShader, this.fragmentShader]);\n    }\n    AbstractProgram.prototype.bufferData = function () {\n        var gl = this.gl;\n        gl.bufferData(gl.ARRAY_BUFFER, this.array, gl.DYNAMIC_DRAW);\n    };\n    AbstractProgram.prototype.allocate = function (capacity) {\n        this.array = new Float32Array(this.points * this.attributes * capacity);\n    };\n    AbstractProgram.prototype.hasNothingToRender = function () {\n        return this.array.length === 0;\n    };\n    return AbstractProgram;\n}());\nexports.AbstractProgram = AbstractProgram;\n","(()=>{\"use strict\";var e={d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>t});const t=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float feather = 0.001;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  float dist = length(v_normal) * v_thickness;\\n\\n  float t = smoothstep(\\n    v_thickness - feather,\\n    v_thickness,\\n    dist\\n  );\\n\\n  gl_FragColor = mix(v_color, transparent, t);\\n}\\n\";module.exports=n})();","/**\n * Graphology Common GEXF Helpers\n * ===============================\n *\n * Miscellaneous helpers used by both instance of the code.\n */\n\n/**\n * Function used to cast a string value to the desired type.\n *\n * @param  {string} type - Value type.\n * @param  {string} type - String value.\n * @return {any}         - Parsed type.\n */\nexports.cast = function (type, value) {\n  switch (type) {\n    case 'boolean':\n      value = value === 'true';\n      break;\n\n    case 'integer':\n    case 'long':\n    case 'float':\n    case 'double':\n      value = +value;\n      break;\n\n    case 'liststring':\n      value = value ? value.split('|') : [];\n      break;\n\n    default:\n  }\n\n  return value;\n};\n\n/**\n * Function deleting illegal characters from a potential tag name to avoid\n * generating invalid XML.\n *\n * @param  {string} type - Tag name.\n * @return {string}\n */\nvar SANITIZE_PATTERN = /[\"'<>&\\s]/g;\n\nexports.sanitizeTagName = function sanitizeTagName(tagName) {\n  return tagName.replace(SANITIZE_PATTERN, '').trim();\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sigma = exports.MouseCaptor = exports.QuadTree = exports.Camera = void 0;\n/**\n * Sigma.js Library Endpoint\n * =========================\n *\n * The library endpoint.\n * @module\n */\nvar sigma_1 = __importDefault(require(\"./sigma\"));\nexports.Sigma = sigma_1.default;\nvar camera_1 = __importDefault(require(\"./core/camera\"));\nexports.Camera = camera_1.default;\nvar quadtree_1 = __importDefault(require(\"./core/quadtree\"));\nexports.QuadTree = quadtree_1.default;\nvar mouse_1 = __importDefault(require(\"./core/captors/mouse\"));\nexports.MouseCaptor = mouse_1.default;\nexports.default = sigma_1.default;\n","/**\n * Graphology Utilities\n * =====================\n *\n * Collection of helpful functions used by the implementation.\n */\n\n/**\n * Object.assign-like polyfill.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignPolyfill() {\n  const target = arguments[0];\n\n  for (let i = 1, l = arguments.length; i < l; i++) {\n    if (!arguments[i]) continue;\n\n    for (const k in arguments[i]) target[k] = arguments[i][k];\n  }\n\n  return target;\n}\n\nlet assign = assignPolyfill;\n\nif (typeof Object.assign === 'function') assign = Object.assign;\n\nexport {assign};\n\n/**\n * Function returning the first matching edge for given path.\n * Note: this function does not check the existence of source & target. This\n * must be performed by the caller.\n *\n * @param  {Graph}  graph  - Target graph.\n * @param  {any}    source - Source node.\n * @param  {any}    target - Target node.\n * @param  {string} type   - Type of the edge (mixed, directed or undirected).\n * @return {string|null}\n */\nexport function getMatchingEdge(graph, source, target, type) {\n  const sourceData = graph._nodes.get(source);\n\n  let edge = null;\n\n  if (!sourceData) return edge;\n\n  if (type === 'mixed') {\n    edge =\n      (sourceData.out && sourceData.out[target]) ||\n      (sourceData.undirected && sourceData.undirected[target]);\n  } else if (type === 'directed') {\n    edge = sourceData.out && sourceData.out[target];\n  } else {\n    edge = sourceData.undirected && sourceData.undirected[target];\n  }\n\n  return edge;\n}\n\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\nexport function isPlainObject(value) {\n  return (\n    typeof value === 'object' && value !== null && value.constructor === Object\n  );\n}\n\n/**\n * Checks whether the given object is empty.\n *\n * @param  {object}  o - Target Object.\n * @return {boolean}\n */\nexport function isEmpty(o) {\n  let k;\n\n  for (k in o) return false;\n\n  return true;\n}\n\n/**\n * Creates a \"private\" property for the given member name by concealing it\n * using the `enumerable` option.\n *\n * @param {object} target - Target object.\n * @param {string} name   - Member name.\n */\nexport function privateProperty(target, name, value) {\n  Object.defineProperty(target, name, {\n    enumerable: false,\n    configurable: false,\n    writable: true,\n    value\n  });\n}\n\n/**\n * Creates a read-only property for the given member name & the given getter.\n *\n * @param {object}   target - Target object.\n * @param {string}   name   - Member name.\n * @param {mixed}    value  - The attached getter or fixed value.\n */\nexport function readOnlyProperty(target, name, value) {\n  const descriptor = {\n    enumerable: true,\n    configurable: true\n  };\n\n  if (typeof value === 'function') {\n    descriptor.get = value;\n  } else {\n    descriptor.value = value;\n    descriptor.writable = false;\n  }\n\n  Object.defineProperty(target, name, descriptor);\n}\n\n/**\n * Returns whether the given object constitute valid hints.\n *\n * @param {object} hints - Target object.\n */\nexport function validateHints(hints) {\n  if (!isPlainObject(hints)) return false;\n\n  if (hints.attributes && !Array.isArray(hints.attributes)) return false;\n\n  return true;\n}\n\n/**\n * Creates a function generating incremental ids for edges.\n *\n * @return {function}\n */\nexport function incrementalIdStartingFromRandomByte() {\n  let i = Math.floor(Math.random() * 256) & 0xff;\n\n  return () => {\n    return i++;\n  };\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Obliterator Iterator Class\n * ===========================\n *\n * Simple class representing the library's iterators.\n */\n\n/**\n * Iterator class.\n *\n * @constructor\n * @param {function} next - Next function.\n */\nfunction Iterator(next) {\n  if (typeof next !== 'function')\n    throw new Error('obliterator/iterator: expecting a function!');\n\n  this.next = next;\n}\n\n/**\n * If symbols are supported, we add `next` to `Symbol.iterator`.\n */\nif (typeof Symbol !== 'undefined')\n  Iterator.prototype[Symbol.iterator] = function () {\n    return this;\n  };\n\n/**\n * Returning an iterator of the given values.\n *\n * @param  {any...} values - Values.\n * @return {Iterator}\n */\nIterator.of = function () {\n  var args = arguments,\n    l = args.length,\n    i = 0;\n\n  return new Iterator(function () {\n    if (i >= l) return {done: true};\n\n    return {done: false, value: args[i++]};\n  });\n};\n\n/**\n * Returning an empty iterator.\n *\n * @return {Iterator}\n */\nIterator.empty = function () {\n  var iterator = new Iterator(function () {\n    return {done: true};\n  });\n\n  return iterator;\n};\n\n/**\n * Returning an iterator over the given indexed sequence.\n *\n * @param  {string|Array} sequence - Target sequence.\n * @return {Iterator}\n */\nIterator.fromSequence = function (sequence) {\n  var i = 0,\n    l = sequence.length;\n\n  return new Iterator(function () {\n    if (i >= l) return {done: true};\n\n    return {done: false, value: sequence[i++]};\n  });\n};\n\n/**\n * Returning whether the given value is an iterator.\n *\n * @param  {any} value - Value.\n * @return {boolean}\n */\nIterator.is = function (value) {\n  if (value instanceof Iterator) return true;\n\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    typeof value.next === 'function'\n  );\n};\n\n/**\n * Exporting.\n */\nmodule.exports = Iterator;\n","exports.ARRAY_BUFFER_SUPPORT = typeof ArrayBuffer !== 'undefined';\nexports.SYMBOL_SUPPORT = typeof Symbol !== 'undefined';\n","/**\n * Obliterator Iter Function\n * ==========================\n *\n * Function coercing values to an iterator. It can be quite useful when needing\n * to handle iterables and iterators the same way.\n */\nvar Iterator = require('./iterator.js');\nvar support = require('./support.js');\n\nvar ARRAY_BUFFER_SUPPORT = support.ARRAY_BUFFER_SUPPORT;\nvar SYMBOL_SUPPORT = support.SYMBOL_SUPPORT;\n\nfunction iterOrNull(target) {\n  // Indexed sequence\n  if (\n    typeof target === 'string' ||\n    Array.isArray(target) ||\n    (ARRAY_BUFFER_SUPPORT && ArrayBuffer.isView(target))\n  )\n    return Iterator.fromSequence(target);\n\n  // Invalid value\n  if (typeof target !== 'object' || target === null) return null;\n\n  // Iterable\n  if (SYMBOL_SUPPORT && typeof target[Symbol.iterator] === 'function')\n    return target[Symbol.iterator]();\n\n  // Iterator duck-typing\n  if (typeof target.next === 'function') return target;\n\n  // Invalid object\n  return null;\n}\n\nmodule.exports = function iter(target) {\n  var iterator = iterOrNull(target);\n\n  if (!iterator)\n    throw new Error(\n      'obliterator: target is not iterable nor a valid iterator.'\n    );\n\n  return iterator;\n};\n","/* eslint no-constant-condition: 0 */\n/**\n * Obliterator Take Function\n * ==========================\n *\n * Function taking n or every value of the given iterator and returns them\n * into an array.\n */\nvar iter = require('./iter.js');\n\n/**\n * Take.\n *\n * @param  {Iterable} iterable - Target iterable.\n * @param  {number}   [n]      - Optional number of items to take.\n * @return {array}\n */\nmodule.exports = function take(iterable, n) {\n  var l = arguments.length > 1 ? n : Infinity,\n    array = l !== Infinity ? new Array(l) : [],\n    step,\n    i = 0;\n\n  var iterator = iter(iterable);\n\n  while (true) {\n    if (i === l) return array;\n\n    step = iterator.next();\n\n    if (step.done) {\n      if (i !== n) array.length = i;\n\n      return array;\n    }\n\n    array[i++] = step.value;\n  }\n};\n","/**\n * Graphology Custom Errors\n * =========================\n *\n * Defining custom errors for ease of use & easy unit tests across\n * implementations (normalized typology rather than relying on error\n * messages to check whether the correct error was found).\n */\nexport class GraphError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'GraphError';\n    this.message = message;\n  }\n}\n\nexport class InvalidArgumentsGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'InvalidArgumentsGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(\n        this,\n        InvalidArgumentsGraphError.prototype.constructor\n      );\n  }\n}\n\nexport class NotFoundGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'NotFoundGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(this, NotFoundGraphError.prototype.constructor);\n  }\n}\n\nexport class UsageGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'UsageGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(this, UsageGraphError.prototype.constructor);\n  }\n}\n","/**\n * Graphology Internal Data Classes\n * =================================\n *\n * Internal classes hopefully reduced to structs by engines & storing\n * necessary information for nodes & edges.\n *\n * Note that those classes don't rely on the `class` keyword to avoid some\n * cruft introduced by most of ES2015 transpilers.\n */\n\n/**\n * MixedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nexport function MixedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nMixedNodeData.prototype.clear = function () {\n  // Degrees\n  this.inDegree = 0;\n  this.outDegree = 0;\n  this.undirectedDegree = 0;\n  this.undirectedLoops = 0;\n  this.directedLoops = 0;\n\n  // Indices\n  this.in = {};\n  this.out = {};\n  this.undirected = {};\n};\n\n/**\n * DirectedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nexport function DirectedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nDirectedNodeData.prototype.clear = function () {\n  // Degrees\n  this.inDegree = 0;\n  this.outDegree = 0;\n  this.directedLoops = 0;\n\n  // Indices\n  this.in = {};\n  this.out = {};\n};\n\n/**\n * UndirectedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nexport function UndirectedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nUndirectedNodeData.prototype.clear = function () {\n  // Degrees\n  this.undirectedDegree = 0;\n  this.undirectedLoops = 0;\n\n  // Indices\n  this.undirected = {};\n};\n\n/**\n * EdgeData class.\n *\n * @constructor\n * @param {boolean} undirected   - Whether the edge is undirected.\n * @param {string}  string       - The edge's key.\n * @param {string}  source       - Source of the edge.\n * @param {string}  target       - Target of the edge.\n * @param {object}  attributes   - Edge's attributes.\n */\nexport function EdgeData(undirected, key, source, target, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n  this.undirected = undirected;\n\n  // Extremities\n  this.source = source;\n  this.target = target;\n}\n\nEdgeData.prototype.attach = function () {\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  const source = this.source.key;\n  const target = this.target.key;\n\n  // Handling source\n  this.source[outKey][target] = this;\n\n  if (this.undirected && source === target) return;\n\n  // Handling target\n  this.target[inKey][source] = this;\n};\n\nEdgeData.prototype.attachMulti = function () {\n  let outKey = 'out';\n  let inKey = 'in';\n\n  const source = this.source.key;\n  const target = this.target.key;\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  // Handling source\n  const adj = this.source[outKey];\n  const head = adj[target];\n\n  if (typeof head === 'undefined') {\n    adj[target] = this;\n\n    // Self-loop optimization\n    if (!(this.undirected && source === target)) {\n      // Handling target\n      this.target[inKey][source] = this;\n    }\n\n    return;\n  }\n\n  // Prepending to doubly-linked list\n  head.previous = this;\n  this.next = head;\n\n  // Pointing to new head\n  // NOTE: use mutating swap later to avoid lookup?\n  adj[target] = this;\n  this.target[inKey][source] = this;\n};\n\nEdgeData.prototype.detach = function () {\n  const source = this.source.key;\n  const target = this.target.key;\n\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  delete this.source[outKey][target];\n\n  // No-op delete in case of undirected self-loop\n  delete this.target[inKey][source];\n};\n\nEdgeData.prototype.detachMulti = function () {\n  const source = this.source.key;\n  const target = this.target.key;\n\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  // Deleting from doubly-linked list\n  if (this.previous === undefined) {\n    // We are dealing with the head\n\n    // Should we delete the adjacency entry because it is now empty?\n    if (this.next === undefined) {\n      delete this.source[outKey][target];\n\n      // No-op delete in case of undirected self-loop\n      delete this.target[inKey][source];\n    } else {\n      // Detaching\n      this.next.previous = undefined;\n\n      // NOTE: could avoid the lookups by creating a #.become mutating method\n      this.source[outKey][target] = this.next;\n\n      // No-op delete in case of undirected self-loop\n      this.target[inKey][source] = this.next;\n    }\n  } else {\n    // We are dealing with another list node\n    this.previous.next = this.next;\n\n    // If not last\n    if (this.next !== undefined) {\n      this.next.previous = this.previous;\n    }\n  }\n};\n","/**\n * Graphology Node Attributes methods\n * ===================================\n */\nimport {assign, isPlainObject} from '../utils';\n\nimport {InvalidArgumentsGraphError, NotFoundGraphError} from '../errors';\n\nconst NODE = 0;\nconst SOURCE = 1;\nconst TARGET = 2;\nconst OPPOSITE = 3;\n\nfunction findRelevantNodeData(\n  graph,\n  method,\n  mode,\n  nodeOrEdge,\n  nameOrEdge,\n  add1,\n  add2\n) {\n  let nodeData, edgeData, arg1, arg2;\n\n  nodeOrEdge = '' + nodeOrEdge;\n\n  if (mode === NODE) {\n    nodeData = graph._nodes.get(nodeOrEdge);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nodeOrEdge}\" node in the graph.`\n      );\n\n    arg1 = nameOrEdge;\n    arg2 = add1;\n  } else if (mode === OPPOSITE) {\n    nameOrEdge = '' + nameOrEdge;\n\n    edgeData = graph._edges.get(nameOrEdge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nameOrEdge}\" edge in the graph.`\n      );\n\n    const source = edgeData.source.key;\n    const target = edgeData.target.key;\n\n    if (nodeOrEdge === source) {\n      nodeData = edgeData.target;\n    } else if (nodeOrEdge === target) {\n      nodeData = edgeData.source;\n    } else {\n      throw new NotFoundGraphError(\n        `Graph.${method}: the \"${nodeOrEdge}\" node is not attached to the \"${nameOrEdge}\" edge (${source}, ${target}).`\n      );\n    }\n\n    arg1 = add1;\n    arg2 = add2;\n  } else {\n    edgeData = graph._edges.get(nodeOrEdge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nodeOrEdge}\" edge in the graph.`\n      );\n\n    if (mode === SOURCE) {\n      nodeData = edgeData.source;\n    } else {\n      nodeData = edgeData.target;\n    }\n\n    arg1 = nameOrEdge;\n    arg2 = add1;\n  }\n\n  return [nodeData, arg1, arg2];\n}\n\nfunction attachNodeAttributeGetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    return data.attributes[name];\n  };\n}\n\nfunction attachNodeAttributesGetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge) {\n    const [data] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge\n    );\n\n    return data.attributes;\n  };\n}\n\nfunction attachNodeAttributeChecker(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    return data.attributes.hasOwnProperty(name);\n  };\n}\n\nfunction attachNodeAttributeSetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1, add2) {\n    const [data, name, value] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1,\n      add2\n    );\n\n    data.attributes[name] = value;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributeUpdater(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1, add2) {\n    const [data, name, updater] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1,\n      add2\n    );\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: updater should be a function.`\n      );\n\n    const attributes = data.attributes;\n    const value = updater(attributes[name]);\n\n    attributes[name] = value;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributeRemover(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    delete data.attributes[name];\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'remove',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesReplacer(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, attributes] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    data.attributes = attributes;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'replace',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesMerger(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, attributes] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    assign(data.attributes, attributes);\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'merge',\n      attributes: data.attributes,\n      data: attributes\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesUpdater(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, updater] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided updater is not a function.`\n      );\n\n    data.attributes = updater(data.attributes);\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'update',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * List of methods to attach.\n */\nconst NODE_ATTRIBUTES_METHODS = [\n  {\n    name: element => `get${element}Attribute`,\n    attacher: attachNodeAttributeGetter\n  },\n  {\n    name: element => `get${element}Attributes`,\n    attacher: attachNodeAttributesGetter\n  },\n  {\n    name: element => `has${element}Attribute`,\n    attacher: attachNodeAttributeChecker\n  },\n  {\n    name: element => `set${element}Attribute`,\n    attacher: attachNodeAttributeSetter\n  },\n  {\n    name: element => `update${element}Attribute`,\n    attacher: attachNodeAttributeUpdater\n  },\n  {\n    name: element => `remove${element}Attribute`,\n    attacher: attachNodeAttributeRemover\n  },\n  {\n    name: element => `replace${element}Attributes`,\n    attacher: attachNodeAttributesReplacer\n  },\n  {\n    name: element => `merge${element}Attributes`,\n    attacher: attachNodeAttributesMerger\n  },\n  {\n    name: element => `update${element}Attributes`,\n    attacher: attachNodeAttributesUpdater\n  }\n];\n\n/**\n * Attach every attributes-related methods to a Graph class.\n *\n * @param {function} Graph - Target class.\n */\nexport default function attachNodeAttributesMethods(Graph) {\n  NODE_ATTRIBUTES_METHODS.forEach(function ({name, attacher}) {\n    // For nodes\n    attacher(Graph, name('Node'), NODE);\n\n    // For sources\n    attacher(Graph, name('Source'), SOURCE);\n\n    // For targets\n    attacher(Graph, name('Target'), TARGET);\n\n    // For opposites\n    attacher(Graph, name('Opposite'), OPPOSITE);\n  });\n}\n","/**\n * Graphology Edge Attributes methods\n * ===================================\n */\nimport {assign, isPlainObject, getMatchingEdge} from '../utils';\n\nimport {\n  InvalidArgumentsGraphError,\n  NotFoundGraphError,\n  UsageGraphError\n} from '../errors';\n\n/**\n * Attach an attribute getter method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeGetter(Class, method, type) {\n  /**\n   * Get the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {mixed}          - The attribute's value.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes[name];\n  };\n}\n\n/**\n * Attach an attributes getter method onto the provided class.\n *\n * @param {function} Class       - Target class.\n * @param {string}   method      - Method name.\n * @param {string}   type        - Type of the edge to find.\n */\nfunction attachEdgeAttributesGetter(Class, method, type) {\n  /**\n   * Retrieves all the target element's attributes.\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   *\n   * @return {object}          - The element's attributes.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 1) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + arguments[1];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes;\n  };\n}\n\n/**\n * Attach an attribute checker method onto the provided class.\n *\n * @param {function} Class       - Target class.\n * @param {string}   method      - Method name.\n * @param {string}   type        - Type of the edge to find.\n */\nfunction attachEdgeAttributeChecker(Class, method, type) {\n  /**\n   * Checks whether the desired attribute is set for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes.hasOwnProperty(name);\n  };\n}\n\n/**\n * Attach an attribute setter method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeSetter(Class, method, type) {\n  /**\n   * Set the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   * @param  {mixed}  value   - New attribute value.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   * @param  {mixed}  value   - New attribute value.\n   *\n   * @return {Graph}          - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name, value) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 3) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n      value = arguments[3];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    data.attributes[name] = value;\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute updater method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeUpdater(Class, method, type) {\n  /**\n   * Update the desired attribute for the given element (node or edge) using\n   * the provided function.\n   *\n   * Arity 2:\n   * @param  {any}      element - Target element.\n   * @param  {string}   name    - Attribute's name.\n   * @param  {function} updater - Updater function.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}      source  - Source element.\n   * @param  {any}      target  - Target element.\n   * @param  {string}   name    - Attribute's name.\n   * @param  {function} updater - Updater function.\n   *\n   * @return {Graph}            - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name, updater) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 3) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n      updater = arguments[3];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: updater should be a function.`\n      );\n\n    data.attributes[name] = updater(data.attributes[name]);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute remover method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeRemover(Class, method, type) {\n  /**\n   * Remove the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {Graph}          - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    delete data.attributes[name];\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'remove',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute replacer method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesReplacer(Class, method, type) {\n  /**\n   * Replace the attributes for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element    - Target element.\n   * @param  {object} attributes - New attributes.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source     - Source element.\n   * @param  {any}     target     - Target element.\n   * @param  {object}  attributes - New attributes.\n   *\n   * @return {Graph}              - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, attributes) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + attributes;\n\n      attributes = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    data.attributes = attributes;\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'replace',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute merger method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesMerger(Class, method, type) {\n  /**\n   * Merge the attributes for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element    - Target element.\n   * @param  {object} attributes - Attributes to merge.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source     - Source element.\n   * @param  {any}     target     - Target element.\n   * @param  {object}  attributes - Attributes to merge.\n   *\n   * @return {Graph}              - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, attributes) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + attributes;\n\n      attributes = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    assign(data.attributes, attributes);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'merge',\n      attributes: data.attributes,\n      data: attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute updater method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesUpdater(Class, method, type) {\n  /**\n   * Update the attributes of the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}      element - Target element.\n   * @param  {function} updater - Updater function.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}      source  - Source element.\n   * @param  {any}      target  - Target element.\n   * @param  {function} updater - Updater function.\n   *\n   * @return {Graph}            - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, updater) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + updater;\n\n      updater = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided updater is not a function.`\n      );\n\n    data.attributes = updater(data.attributes);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'update',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * List of methods to attach.\n */\nconst EDGE_ATTRIBUTES_METHODS = [\n  {\n    name: element => `get${element}Attribute`,\n    attacher: attachEdgeAttributeGetter\n  },\n  {\n    name: element => `get${element}Attributes`,\n    attacher: attachEdgeAttributesGetter\n  },\n  {\n    name: element => `has${element}Attribute`,\n    attacher: attachEdgeAttributeChecker\n  },\n  {\n    name: element => `set${element}Attribute`,\n    attacher: attachEdgeAttributeSetter\n  },\n  {\n    name: element => `update${element}Attribute`,\n    attacher: attachEdgeAttributeUpdater\n  },\n  {\n    name: element => `remove${element}Attribute`,\n    attacher: attachEdgeAttributeRemover\n  },\n  {\n    name: element => `replace${element}Attributes`,\n    attacher: attachEdgeAttributesReplacer\n  },\n  {\n    name: element => `merge${element}Attributes`,\n    attacher: attachEdgeAttributesMerger\n  },\n  {\n    name: element => `update${element}Attributes`,\n    attacher: attachEdgeAttributesUpdater\n  }\n];\n\n/**\n * Attach every attributes-related methods to a Graph class.\n *\n * @param {function} Graph - Target class.\n */\nexport default function attachEdgeAttributesMethods(Graph) {\n  EDGE_ATTRIBUTES_METHODS.forEach(function ({name, attacher}) {\n    // For edges\n    attacher(Graph, name('Edge'), 'mixed');\n\n    // For directed edges\n    attacher(Graph, name('DirectedEdge'), 'directed');\n\n    // For undirected edges\n    attacher(Graph, name('UndirectedEdge'), 'undirected');\n  });\n}\n","/**\n * Obliterator Chain Function\n * ===========================\n *\n * Variadic function combining the given iterables.\n */\nvar Iterator = require('./iterator.js');\nvar iter = require('./iter.js');\n\n/**\n * Chain.\n *\n * @param  {...Iterator} iterables - Target iterables.\n * @return {Iterator}\n */\nmodule.exports = function chain() {\n  var iterables = arguments;\n  var current = null;\n  var i = -1;\n\n  /* eslint-disable no-constant-condition */\n  return new Iterator(function next() {\n    var step = null;\n\n    do {\n      if (current === null) {\n        i++;\n\n        if (i >= iterables.length) return {done: true};\n\n        current = iter(iterables[i]);\n      }\n\n      step = current.next();\n\n      if (step.done === true) {\n        current = null;\n        continue;\n      }\n\n      break;\n    } while (true);\n\n    return step;\n  });\n};\n","/**\n * Graphology Edge Iteration\n * ==========================\n *\n * Attaching some methods to the Graph class to be able to iterate over a\n * graph's edges.\n */\nimport Iterator from 'obliterator/iterator';\nimport chain from 'obliterator/chain';\nimport take from 'obliterator/take';\n\nimport {InvalidArgumentsGraphError, NotFoundGraphError} from '../errors';\n\n/**\n * Definitions.\n */\nconst EDGES_ITERATION = [\n  {\n    name: 'edges',\n    type: 'mixed'\n  },\n  {\n    name: 'inEdges',\n    type: 'directed',\n    direction: 'in'\n  },\n  {\n    name: 'outEdges',\n    type: 'directed',\n    direction: 'out'\n  },\n  {\n    name: 'inboundEdges',\n    type: 'mixed',\n    direction: 'in'\n  },\n  {\n    name: 'outboundEdges',\n    type: 'mixed',\n    direction: 'out'\n  },\n  {\n    name: 'directedEdges',\n    type: 'directed'\n  },\n  {\n    name: 'undirectedEdges',\n    type: 'undirected'\n  }\n];\n\n/**\n * Function iterating over edges from the given object to match one of them.\n *\n * @param {object}   object   - Target object.\n * @param {function} callback - Function to call.\n */\nfunction forEachSimple(breakable, object, callback, avoid) {\n  let shouldBreak = false;\n\n  for (const k in object) {\n    if (k === avoid) continue;\n\n    const edgeData = object[k];\n\n    shouldBreak = callback(\n      edgeData.key,\n      edgeData.attributes,\n      edgeData.source.key,\n      edgeData.target.key,\n      edgeData.source.attributes,\n      edgeData.target.attributes,\n      edgeData.undirected\n    );\n\n    if (breakable && shouldBreak) return edgeData.key;\n  }\n\n  return;\n}\n\nfunction forEachMulti(breakable, object, callback, avoid) {\n  let edgeData, source, target;\n\n  let shouldBreak = false;\n\n  for (const k in object) {\n    if (k === avoid) continue;\n\n    edgeData = object[k];\n\n    do {\n      source = edgeData.source;\n      target = edgeData.target;\n\n      shouldBreak = callback(\n        edgeData.key,\n        edgeData.attributes,\n        source.key,\n        target.key,\n        source.attributes,\n        target.attributes,\n        edgeData.undirected\n      );\n\n      if (breakable && shouldBreak) return edgeData.key;\n\n      edgeData = edgeData.next;\n    } while (edgeData !== undefined);\n  }\n\n  return;\n}\n\n/**\n * Function returning an iterator over edges from the given object.\n *\n * @param  {object}   object - Target object.\n * @return {Iterator}\n */\nfunction createIterator(object, avoid) {\n  const keys = Object.keys(object);\n  const l = keys.length;\n\n  let edgeData;\n  let i = 0;\n\n  return new Iterator(function next() {\n    do {\n      if (!edgeData) {\n        if (i >= l) return {done: true};\n\n        const k = keys[i++];\n\n        if (k === avoid) {\n          edgeData = undefined;\n          continue;\n        }\n\n        edgeData = object[k];\n      } else {\n        edgeData = edgeData.next;\n      }\n    } while (!edgeData);\n\n    return {\n      done: false,\n      value: {\n        edge: edgeData.key,\n        attributes: edgeData.attributes,\n        source: edgeData.source.key,\n        target: edgeData.target.key,\n        sourceAttributes: edgeData.source.attributes,\n        targetAttributes: edgeData.target.attributes,\n        undirected: edgeData.undirected\n      }\n    };\n  });\n}\n\n/**\n * Function iterating over the egdes from the object at given key to match\n * one of them.\n *\n * @param {object}   object   - Target object.\n * @param {mixed}    k        - Neighbor key.\n * @param {function} callback - Callback to use.\n */\nfunction forEachForKeySimple(breakable, object, k, callback) {\n  const edgeData = object[k];\n\n  if (!edgeData) return;\n\n  const sourceData = edgeData.source;\n  const targetData = edgeData.target;\n\n  if (\n    callback(\n      edgeData.key,\n      edgeData.attributes,\n      sourceData.key,\n      targetData.key,\n      sourceData.attributes,\n      targetData.attributes,\n      edgeData.undirected\n    ) &&\n    breakable\n  )\n    return edgeData.key;\n}\n\nfunction forEachForKeyMulti(breakable, object, k, callback) {\n  let edgeData = object[k];\n\n  if (!edgeData) return;\n\n  let shouldBreak = false;\n\n  do {\n    shouldBreak = callback(\n      edgeData.key,\n      edgeData.attributes,\n      edgeData.source.key,\n      edgeData.target.key,\n      edgeData.source.attributes,\n      edgeData.target.attributes,\n      edgeData.undirected\n    );\n\n    if (breakable && shouldBreak) return edgeData.key;\n\n    edgeData = edgeData.next;\n  } while (edgeData !== undefined);\n\n  return;\n}\n\n/**\n * Function returning an iterator over the egdes from the object at given key.\n *\n * @param  {object}   object   - Target object.\n * @param  {mixed}    k        - Neighbor key.\n * @return {Iterator}\n */\nfunction createIteratorForKey(object, k) {\n  let edgeData = object[k];\n\n  if (edgeData.next !== undefined) {\n    return new Iterator(function () {\n      if (!edgeData) return {done: true};\n\n      const value = {\n        edge: edgeData.key,\n        attributes: edgeData.attributes,\n        source: edgeData.source.key,\n        target: edgeData.target.key,\n        sourceAttributes: edgeData.source.attributes,\n        targetAttributes: edgeData.target.attributes,\n        undirected: edgeData.undirected\n      };\n\n      edgeData = edgeData.next;\n\n      return {\n        done: false,\n        value\n      };\n    });\n  }\n\n  return Iterator.of({\n    edge: edgeData.key,\n    attributes: edgeData.attributes,\n    source: edgeData.source.key,\n    target: edgeData.target.key,\n    sourceAttributes: edgeData.source.attributes,\n    targetAttributes: edgeData.target.attributes,\n    undirected: edgeData.undirected\n  });\n}\n\n/**\n * Function creating an array of edges for the given type.\n *\n * @param  {Graph}   graph - Target Graph instance.\n * @param  {string}  type  - Type of edges to retrieve.\n * @return {array}         - Array of edges.\n */\nfunction createEdgeArray(graph, type) {\n  if (graph.size === 0) return [];\n\n  if (type === 'mixed' || type === graph.type) {\n    if (typeof Array.from === 'function')\n      return Array.from(graph._edges.keys());\n\n    return take(graph._edges.keys(), graph._edges.size);\n  }\n\n  const size =\n    type === 'undirected' ? graph.undirectedSize : graph.directedSize;\n\n  const list = new Array(size),\n    mask = type === 'undirected';\n\n  const iterator = graph._edges.values();\n\n  let i = 0;\n  let step, data;\n\n  while (((step = iterator.next()), step.done !== true)) {\n    data = step.value;\n\n    if (data.undirected === mask) list[i++] = data.key;\n  }\n\n  return list;\n}\n\n/**\n * Function iterating over a graph's edges using a callback to match one of\n * them.\n *\n * @param  {Graph}    graph    - Target Graph instance.\n * @param  {string}   type     - Type of edges to retrieve.\n * @param  {function} callback - Function to call.\n */\nfunction forEachEdge(breakable, graph, type, callback) {\n  if (graph.size === 0) return;\n\n  const shouldFilter = type !== 'mixed' && type !== graph.type;\n  const mask = type === 'undirected';\n\n  let step, data;\n  let shouldBreak = false;\n  const iterator = graph._edges.values();\n\n  while (((step = iterator.next()), step.done !== true)) {\n    data = step.value;\n\n    if (shouldFilter && data.undirected !== mask) continue;\n\n    const {key, attributes, source, target} = data;\n\n    shouldBreak = callback(\n      key,\n      attributes,\n      source.key,\n      target.key,\n      source.attributes,\n      target.attributes,\n      data.undirected\n    );\n\n    if (breakable && shouldBreak) return key;\n  }\n\n  return;\n}\n\n/**\n * Function creating an iterator of edges for the given type.\n *\n * @param  {Graph}    graph - Target Graph instance.\n * @param  {string}   type  - Type of edges to retrieve.\n * @return {Iterator}\n */\nfunction createEdgeIterator(graph, type) {\n  if (graph.size === 0) return Iterator.empty();\n\n  const shouldFilter = type !== 'mixed' && type !== graph.type;\n  const mask = type === 'undirected';\n\n  const iterator = graph._edges.values();\n\n  return new Iterator(function next() {\n    let step, data;\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      step = iterator.next();\n\n      if (step.done) return step;\n\n      data = step.value;\n\n      if (shouldFilter && data.undirected !== mask) continue;\n\n      break;\n    }\n\n    const value = {\n      edge: data.key,\n      attributes: data.attributes,\n      source: data.source.key,\n      target: data.target.key,\n      sourceAttributes: data.source.attributes,\n      targetAttributes: data.target.attributes,\n      undirected: data.undirected\n    };\n\n    return {value, done: false};\n  });\n}\n\n/**\n * Function iterating over a node's edges using a callback to match one of them.\n *\n * @param  {boolean}  multi     - Whether the graph is multi or not.\n * @param  {string}   type      - Type of edges to retrieve.\n * @param  {string}   direction - In or out?\n * @param  {any}      nodeData  - Target node's data.\n * @param  {function} callback  - Function to call.\n */\nfunction forEachEdgeForNode(\n  breakable,\n  multi,\n  type,\n  direction,\n  nodeData,\n  callback\n) {\n  const fn = multi ? forEachMulti : forEachSimple;\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      found = fn(breakable, nodeData.in, callback);\n\n      if (breakable && found) return found;\n    }\n    if (direction !== 'in') {\n      found = fn(\n        breakable,\n        nodeData.out,\n        callback,\n        !direction ? nodeData.key : undefined\n      );\n\n      if (breakable && found) return found;\n    }\n  }\n\n  if (type !== 'directed') {\n    found = fn(breakable, nodeData.undirected, callback);\n\n    if (breakable && found) return found;\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of edges for the given type & the given node.\n *\n * @param  {boolean} multi     - Whether the graph is multi or not.\n * @param  {string}  type      - Type of edges to retrieve.\n * @param  {string}  direction - In or out?\n * @param  {any}     nodeData  - Target node's data.\n * @return {array}             - Array of edges.\n */\nfunction createEdgeArrayForNode(multi, type, direction, nodeData) {\n  const edges = []; // TODO: possibility to know size beforehand or factorize with map\n\n  forEachEdgeForNode(false, multi, type, direction, nodeData, function (key) {\n    edges.push(key);\n  });\n\n  return edges;\n}\n\n/**\n * Function iterating over a node's edges using a callback.\n *\n * @param  {string}   type      - Type of edges to retrieve.\n * @param  {string}   direction - In or out?\n * @param  {any}      nodeData  - Target node's data.\n * @return {Iterator}\n */\nfunction createEdgeIteratorForNode(type, direction, nodeData) {\n  let iterator = Iterator.empty();\n\n  if (type !== 'undirected') {\n    if (direction !== 'out' && typeof nodeData.in !== 'undefined')\n      iterator = chain(iterator, createIterator(nodeData.in));\n    if (direction !== 'in' && typeof nodeData.out !== 'undefined')\n      iterator = chain(\n        iterator,\n        createIterator(nodeData.out, !direction ? nodeData.key : undefined)\n      );\n  }\n\n  if (type !== 'directed' && typeof nodeData.undirected !== 'undefined') {\n    iterator = chain(iterator, createIterator(nodeData.undirected));\n  }\n\n  return iterator;\n}\n\n/**\n * Function iterating over edges for the given path using a callback to match\n * one of them.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {boolean}  multi      - Whether the graph is multi.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {string}   target     - Target node.\n * @param  {function} callback   - Function to call.\n */\nfunction forEachEdgeForPath(\n  breakable,\n  type,\n  multi,\n  direction,\n  sourceData,\n  target,\n  callback\n) {\n  const fn = multi ? forEachForKeyMulti : forEachForKeySimple;\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (typeof sourceData.in !== 'undefined' && direction !== 'out') {\n      found = fn(breakable, sourceData.in, target, callback);\n\n      if (breakable && found) return found;\n    }\n\n    if (\n      typeof sourceData.out !== 'undefined' &&\n      direction !== 'in' &&\n      (direction || sourceData.key !== target)\n    ) {\n      found = fn(breakable, sourceData.out, target, callback);\n\n      if (breakable && found) return found;\n    }\n  }\n\n  if (type !== 'directed') {\n    if (typeof sourceData.undirected !== 'undefined') {\n      found = fn(breakable, sourceData.undirected, target, callback);\n\n      if (breakable && found) return found;\n    }\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of edges for the given path.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {boolean}  multi      - Whether the graph is multi.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {any}      target     - Target node.\n * @return {array}               - Array of edges.\n */\nfunction createEdgeArrayForPath(type, multi, direction, sourceData, target) {\n  const edges = []; // TODO: possibility to know size beforehand or factorize with map\n\n  forEachEdgeForPath(\n    false,\n    type,\n    multi,\n    direction,\n    sourceData,\n    target,\n    function (key) {\n      edges.push(key);\n    }\n  );\n\n  return edges;\n}\n\n/**\n * Function returning an iterator over edges for the given path.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {string}   target     - Target node.\n * @param  {function} callback   - Function to call.\n */\nfunction createEdgeIteratorForPath(type, direction, sourceData, target) {\n  let iterator = Iterator.empty();\n\n  if (type !== 'undirected') {\n    if (\n      typeof sourceData.in !== 'undefined' &&\n      direction !== 'out' &&\n      target in sourceData.in\n    )\n      iterator = chain(iterator, createIteratorForKey(sourceData.in, target));\n\n    if (\n      typeof sourceData.out !== 'undefined' &&\n      direction !== 'in' &&\n      target in sourceData.out &&\n      (direction || sourceData.key !== target)\n    )\n      iterator = chain(iterator, createIteratorForKey(sourceData.out, target));\n  }\n\n  if (type !== 'directed') {\n    if (\n      typeof sourceData.undirected !== 'undefined' &&\n      target in sourceData.undirected\n    )\n      iterator = chain(\n        iterator,\n        createIteratorForKey(sourceData.undirected, target)\n      );\n  }\n\n  return iterator;\n}\n\n/**\n * Function attaching an edge array creator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachEdgeArrayCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  /**\n   * Function returning an array of certain edges.\n   *\n   * Arity 0: Return all the relevant edges.\n   *\n   * Arity 1: Return all of a node's relevant edges.\n   * @param  {any}   node   - Target node.\n   *\n   * Arity 2: Return the relevant edges across the given path.\n   * @param  {any}   source - Source node.\n   * @param  {any}   target - Target node.\n   *\n   * @return {array|number} - The edges or the number of edges.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[name] = function (source, target) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return [];\n\n    if (!arguments.length) return createEdgeArray(this, type);\n\n    if (arguments.length === 1) {\n      source = '' + source;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${name}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      return createEdgeArrayForNode(\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData\n      );\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return createEdgeArrayForPath(\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`\n    );\n  };\n}\n\n/**\n * Function attaching a edge callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachForEachEdge(Class, description) {\n  const {name, type, direction} = description;\n\n  const forEachName = 'forEach' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over the graph's relevant edges by applying the given\n   * callback.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[forEachName] = function (source, target, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    if (arguments.length === 1) {\n      callback = source;\n      return forEachEdge(false, this, type, callback);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      callback = target;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      // TODO: maybe attach the sub method to the instance dynamically?\n      return forEachEdgeForNode(\n        false,\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData,\n        callback\n      );\n    }\n\n    if (arguments.length === 3) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return forEachEdgeForPath(\n        false,\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target,\n        callback\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${forEachName}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`\n    );\n  };\n\n  /**\n   * Function mapping the graph's relevant edges by applying the given\n   * callback.\n   *\n   * Arity 1: Map all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Map all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Map the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const mapName = 'map' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[mapName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    let result;\n\n    // We know the result length beforehand\n    if (args.length === 0) {\n      let length = 0;\n\n      if (type !== 'directed') length += this.undirectedSize;\n      if (type !== 'undirected') length += this.directedSize;\n\n      result = new Array(length);\n\n      let i = 0;\n\n      args.push((e, ea, s, t, sa, ta, u) => {\n        result[i++] = callback(e, ea, s, t, sa, ta, u);\n      });\n    }\n\n    // We don't know the result length beforehand\n    // TODO: we can in some instances of simple graphs, knowing degree\n    else {\n      result = [];\n\n      args.push((e, ea, s, t, sa, ta, u) => {\n        result.push(callback(e, ea, s, t, sa, ta, u));\n      });\n    }\n\n    this[forEachName].apply(this, args);\n\n    return result;\n  };\n\n  /**\n   * Function filtering the graph's relevant edges using the provided predicate\n   * function.\n   *\n   * Arity 1: Filter all the relevant edges.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * Arity 2: Filter all of a node's relevant edges.\n   * @param  {any}      node      - Target node.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * Arity 3: Filter the relevant edges across the given path.\n   * @param  {any}      source    - Source node.\n   * @param  {any}      target    - Target node.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const filterName = 'filter' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[filterName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    const result = [];\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      if (callback(e, ea, s, t, sa, ta, u)) result.push(e);\n    });\n\n    this[forEachName].apply(this, args);\n\n    return result;\n  };\n\n  /**\n   * Function reducing the graph's relevant edges using the provided accumulator\n   * function.\n   *\n   * Arity 1: Reduce all the relevant edges.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * Arity 2: Reduce all of a node's relevant edges.\n   * @param  {any}      node         - Target node.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * Arity 3: Reduce the relevant edges across the given path.\n   * @param  {any}      source       - Source node.\n   * @param  {any}      target       - Target node.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const reduceName = 'reduce' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[reduceName] = function () {\n    let args = Array.prototype.slice.call(arguments);\n\n    if (args.length < 2 || args.length > 4) {\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: invalid number of arguments (expecting 2, 3 or 4 and got ${args.length}).`\n      );\n    }\n\n    if (\n      typeof args[args.length - 1] === 'function' &&\n      typeof args[args.length - 2] !== 'function'\n    ) {\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`\n      );\n    }\n\n    let callback;\n    let initialValue;\n\n    if (args.length === 2) {\n      callback = args[0];\n      initialValue = args[1];\n      args = [];\n    } else if (args.length === 3) {\n      callback = args[1];\n      initialValue = args[2];\n      args = [args[0]];\n    } else if (args.length === 4) {\n      callback = args[2];\n      initialValue = args[3];\n      args = [args[0], args[1]];\n    }\n\n    let accumulator = initialValue;\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      accumulator = callback(accumulator, e, ea, s, t, sa, ta, u);\n    });\n\n    this[forEachName].apply(this, args);\n\n    return accumulator;\n  };\n}\n\n/**\n * Function attaching a breakable edge callback iterator method to the Graph\n * prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachFindEdge(Class, description) {\n  const {name, type, direction} = description;\n\n  const findEdgeName = 'find' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over the graph's relevant edges in order to match\n   * one of them using the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[findEdgeName] = function (source, target, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return false;\n\n    if (arguments.length === 1) {\n      callback = source;\n      return forEachEdge(true, this, type, callback);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      callback = target;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      // TODO: maybe attach the sub method to the instance dynamically?\n      return forEachEdgeForNode(\n        true,\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData,\n        callback\n      );\n    }\n\n    if (arguments.length === 3) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return forEachEdgeForPath(\n        true,\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target,\n        callback\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${findEdgeName}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`\n    );\n  };\n\n  /**\n   * Function iterating over the graph's relevant edges in order to assert\n   * whether any one of them matches the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const someName = 'some' + name[0].toUpperCase() + name.slice(1, -1);\n\n  Class.prototype[someName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      return callback(e, ea, s, t, sa, ta, u);\n    });\n\n    const found = this[findEdgeName].apply(this, args);\n\n    if (found) return true;\n\n    return false;\n  };\n\n  /**\n   * Function iterating over the graph's relevant edges in order to assert\n   * whether all of them matche the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const everyName = 'every' + name[0].toUpperCase() + name.slice(1, -1);\n\n  Class.prototype[everyName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      return !callback(e, ea, s, t, sa, ta, u);\n    });\n\n    const found = this[findEdgeName].apply(this, args);\n\n    if (found) return false;\n\n    return true;\n  };\n}\n\n/**\n * Function attaching an edge iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachEdgeIteratorCreator(Class, description) {\n  const {name: originalName, type, direction} = description;\n\n  const name = originalName.slice(0, -1) + 'Entries';\n\n  /**\n   * Function returning an iterator over the graph's edges.\n   *\n   * Arity 0: Iterate over all the relevant edges.\n   *\n   * Arity 1: Iterate over all of a node's relevant edges.\n   * @param  {any}   node   - Target node.\n   *\n   * Arity 2: Iterate over the relevant edges across the given path.\n   * @param  {any}   source - Source node.\n   * @param  {any}   target - Target node.\n   *\n   * @return {array|number} - The edges or the number of edges.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[name] = function (source, target) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return Iterator.empty();\n\n    if (!arguments.length) return createEdgeIterator(this, type);\n\n    if (arguments.length === 1) {\n      source = '' + source;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      return createEdgeIteratorForNode(type, direction, sourceData);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return createEdgeIteratorForPath(type, direction, sourceData, target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`\n    );\n  };\n}\n\n/**\n * Function attaching every edge iteration method to the Graph class.\n *\n * @param {function} Graph - Graph class.\n */\nexport default function attachEdgeIterationMethods(Graph) {\n  EDGES_ITERATION.forEach(description => {\n    attachEdgeArrayCreator(Graph, description);\n    attachForEachEdge(Graph, description);\n    attachFindEdge(Graph, description);\n    attachEdgeIteratorCreator(Graph, description);\n  });\n}\n","/**\n * Graphology Neighbor Iteration\n * ==============================\n *\n * Attaching some methods to the Graph class to be able to iterate over\n * neighbors.\n */\nimport Iterator from 'obliterator/iterator';\nimport chain from 'obliterator/chain';\n\nimport {NotFoundGraphError, InvalidArgumentsGraphError} from '../errors';\n\n/**\n * Definitions.\n */\nconst NEIGHBORS_ITERATION = [\n  {\n    name: 'neighbors',\n    type: 'mixed'\n  },\n  {\n    name: 'inNeighbors',\n    type: 'directed',\n    direction: 'in'\n  },\n  {\n    name: 'outNeighbors',\n    type: 'directed',\n    direction: 'out'\n  },\n  {\n    name: 'inboundNeighbors',\n    type: 'mixed',\n    direction: 'in'\n  },\n  {\n    name: 'outboundNeighbors',\n    type: 'mixed',\n    direction: 'out'\n  },\n  {\n    name: 'directedNeighbors',\n    type: 'directed'\n  },\n  {\n    name: 'undirectedNeighbors',\n    type: 'undirected'\n  }\n];\n\n/**\n * Helpers.\n */\nfunction CompositeSetWrapper() {\n  this.A = null;\n  this.B = null;\n}\n\nCompositeSetWrapper.prototype.wrap = function (set) {\n  if (this.A === null) this.A = set;\n  else if (this.B === null) this.B = set;\n};\n\nCompositeSetWrapper.prototype.has = function (key) {\n  if (this.A !== null && key in this.A) return true;\n  if (this.B !== null && key in this.B) return true;\n  return false;\n};\n\n/**\n * Function iterating over the given node's relevant neighbors to match\n * one of them using a predicated function.\n *\n * @param  {string}   type      - Type of neighbors.\n * @param  {string}   direction - Direction.\n * @param  {any}      nodeData  - Target node's data.\n * @param  {function} callback  - Callback to use.\n */\nfunction forEachInObjectOnce(breakable, visited, nodeData, object, callback) {\n  for (const k in object) {\n    const edgeData = object[k];\n\n    const sourceData = edgeData.source;\n    const targetData = edgeData.target;\n\n    const neighborData = sourceData === nodeData ? targetData : sourceData;\n\n    if (visited && visited.has(neighborData.key)) continue;\n\n    const shouldBreak = callback(neighborData.key, neighborData.attributes);\n\n    if (breakable && shouldBreak) return neighborData.key;\n  }\n\n  return;\n}\n\nfunction forEachNeighbor(breakable, type, direction, nodeData, callback) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected')\n      return forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData.undirected,\n        callback\n      );\n\n    if (typeof direction === 'string')\n      return forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData[direction],\n        callback\n      );\n  }\n\n  // Else we need to keep a set of neighbors not to return duplicates\n  // We cheat by querying the other adjacencies\n  const visited = new CompositeSetWrapper();\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      found = forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData.in,\n        callback\n      );\n\n      if (breakable && found) return found;\n\n      visited.wrap(nodeData.in);\n    }\n    if (direction !== 'in') {\n      found = forEachInObjectOnce(\n        breakable,\n        visited,\n        nodeData,\n        nodeData.out,\n        callback\n      );\n\n      if (breakable && found) return found;\n\n      visited.wrap(nodeData.out);\n    }\n  }\n\n  if (type !== 'directed') {\n    found = forEachInObjectOnce(\n      breakable,\n      visited,\n      nodeData,\n      nodeData.undirected,\n      callback\n    );\n\n    if (breakable && found) return found;\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of relevant neighbors for the given node.\n *\n * @param  {string}       type      - Type of neighbors.\n * @param  {string}       direction - Direction.\n * @param  {any}          nodeData  - Target node's data.\n * @return {Array}                  - The list of neighbors.\n */\nfunction createNeighborArrayForNode(type, direction, nodeData) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected') return Object.keys(nodeData.undirected);\n\n    if (typeof direction === 'string') return Object.keys(nodeData[direction]);\n  }\n\n  const neighbors = [];\n\n  forEachNeighbor(false, type, direction, nodeData, function (key) {\n    neighbors.push(key);\n  });\n\n  return neighbors;\n}\n\n/**\n * Function returning an iterator over the given node's relevant neighbors.\n *\n * @param  {string}   type      - Type of neighbors.\n * @param  {string}   direction - Direction.\n * @param  {any}      nodeData  - Target node's data.\n * @return {Iterator}\n */\nfunction createDedupedObjectIterator(visited, nodeData, object) {\n  const keys = Object.keys(object);\n  const l = keys.length;\n\n  let i = 0;\n\n  return new Iterator(function next() {\n    let neighborData = null;\n\n    do {\n      if (i >= l) {\n        if (visited) visited.wrap(object);\n        return {done: true};\n      }\n\n      const edgeData = object[keys[i++]];\n\n      const sourceData = edgeData.source;\n      const targetData = edgeData.target;\n\n      neighborData = sourceData === nodeData ? targetData : sourceData;\n\n      if (visited && visited.has(neighborData.key)) {\n        neighborData = null;\n        continue;\n      }\n    } while (neighborData === null);\n\n    return {\n      done: false,\n      value: {neighbor: neighborData.key, attributes: neighborData.attributes}\n    };\n  });\n}\n\nfunction createNeighborIterator(type, direction, nodeData) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected')\n      return createDedupedObjectIterator(null, nodeData, nodeData.undirected);\n\n    if (typeof direction === 'string')\n      return createDedupedObjectIterator(null, nodeData, nodeData[direction]);\n  }\n\n  let iterator = Iterator.empty();\n\n  // Else we need to keep a set of neighbors not to return duplicates\n  // We cheat by querying the other adjacencies\n  const visited = new CompositeSetWrapper();\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      iterator = chain(\n        iterator,\n        createDedupedObjectIterator(visited, nodeData, nodeData.in)\n      );\n    }\n    if (direction !== 'in') {\n      iterator = chain(\n        iterator,\n        createDedupedObjectIterator(visited, nodeData, nodeData.out)\n      );\n    }\n  }\n\n  if (type !== 'directed') {\n    iterator = chain(\n      iterator,\n      createDedupedObjectIterator(visited, nodeData, nodeData.undirected)\n    );\n  }\n\n  return iterator;\n}\n\n/**\n * Function attaching a neighbors array creator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachNeighborArrayCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  /**\n   * Function returning an array of certain neighbors.\n   *\n   * @param  {any}   node   - Target node.\n   * @return {array} - The neighbors of neighbors.\n   *\n   * @throws {Error} - Will throw if node is not found in the graph.\n   */\n  Class.prototype[name] = function (node) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return [];\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${name}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return createNeighborArrayForNode(\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData\n    );\n  };\n}\n\n/**\n * Function attaching a neighbors callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachForEachNeighbor(Class, description) {\n  const {name, type, direction} = description;\n\n  const forEachName = 'forEach' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over all the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[forEachName] = function (node, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${forEachName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    forEachNeighbor(\n      false,\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData,\n      callback\n    );\n  };\n\n  /**\n   * Function mapping the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const mapName = 'map' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[mapName] = function (node, callback) {\n    // TODO: optimize when size is known beforehand\n    const result = [];\n\n    this[forEachName](node, (n, a) => {\n      result.push(callback(n, a));\n    });\n\n    return result;\n  };\n\n  /**\n   * Function filtering the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const filterName = 'filter' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[filterName] = function (node, callback) {\n    const result = [];\n\n    this[forEachName](node, (n, a) => {\n      if (callback(n, a)) result.push(n);\n    });\n\n    return result;\n  };\n\n  /**\n   * Function reducing the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const reduceName = 'reduce' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[reduceName] = function (node, callback, initialValue) {\n    if (arguments.length < 3)\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`\n      );\n\n    let accumulator = initialValue;\n\n    this[forEachName](node, (n, a) => {\n      accumulator = callback(accumulator, n, a);\n    });\n\n    return accumulator;\n  };\n}\n\n/**\n * Function attaching a breakable neighbors callback iterator method to the\n * Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachFindNeighbor(Class, description) {\n  const {name, type, direction} = description;\n\n  const capitalizedSingular = name[0].toUpperCase() + name.slice(1, -1);\n\n  const findName = 'find' + capitalizedSingular;\n\n  /**\n   * Function iterating over all the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[findName] = function (node, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${findName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return forEachNeighbor(\n      true,\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData,\n      callback\n    );\n  };\n\n  /**\n   * Function iterating over all the relevant neighbors to find if any of them\n   * matches the given predicate.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const someName = 'some' + capitalizedSingular;\n\n  Class.prototype[someName] = function (node, callback) {\n    const found = this[findName](node, callback);\n\n    if (found) return true;\n\n    return false;\n  };\n\n  /**\n   * Function iterating over all the relevant neighbors to find if all of them\n   * matche the given predicate.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const everyName = 'every' + capitalizedSingular;\n\n  Class.prototype[everyName] = function (node, callback) {\n    const found = this[findName](node, (n, a) => {\n      return !callback(n, a);\n    });\n\n    if (found) return false;\n\n    return true;\n  };\n}\n\n/**\n * Function attaching a neighbors callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachNeighborIteratorCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  const iteratorName = name.slice(0, -1) + 'Entries';\n\n  /**\n   * Function returning an iterator over all the relevant neighbors.\n   *\n   * @param  {any}      node     - Target node.\n   * @return {Iterator}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[iteratorName] = function (node) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return Iterator.empty();\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${iteratorName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return createNeighborIterator(\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData\n    );\n  };\n}\n\n/**\n * Function attaching every neighbor iteration method to the Graph class.\n *\n * @param {function} Graph - Graph class.\n */\nexport default function attachNeighborIterationMethods(Graph) {\n  NEIGHBORS_ITERATION.forEach(description => {\n    attachNeighborArrayCreator(Graph, description);\n    attachForEachNeighbor(Graph, description);\n    attachFindNeighbor(Graph, description);\n    attachNeighborIteratorCreator(Graph, description);\n  });\n}\n","/**\n * Graphology Adjacency Iteration\n * ===============================\n *\n * Attaching some methods to the Graph class to be able to iterate over a\n * graph's adjacency.\n */\n\n/**\n * Function iterating over a simple graph's adjacency using a callback.\n *\n * @param {boolean}  breakable         - Can we break?\n * @param {boolean}  assymetric        - Whether to emit undirected edges only once.\n * @param {boolean}  disconnectedNodes - Whether to emit disconnected nodes.\n * @param {Graph}    graph             - Target Graph instance.\n * @param {callback} function          - Iteration callback.\n */\nexport function forEachAdjacency(\n  breakable,\n  assymetric,\n  disconnectedNodes,\n  graph,\n  callback\n) {\n  const iterator = graph._nodes.values();\n\n  const type = graph.type;\n\n  let step, sourceData, neighbor, adj, edgeData, targetData, shouldBreak;\n\n  while (((step = iterator.next()), step.done !== true)) {\n    let hasEdges = false;\n\n    sourceData = step.value;\n\n    if (type !== 'undirected') {\n      adj = sourceData.out;\n\n      for (neighbor in adj) {\n        edgeData = adj[neighbor];\n\n        do {\n          targetData = edgeData.target;\n\n          hasEdges = true;\n          shouldBreak = callback(\n            sourceData.key,\n            targetData.key,\n            sourceData.attributes,\n            targetData.attributes,\n            edgeData.key,\n            edgeData.attributes,\n            edgeData.undirected\n          );\n\n          if (breakable && shouldBreak) return edgeData;\n\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (type !== 'directed') {\n      adj = sourceData.undirected;\n\n      for (neighbor in adj) {\n        if (assymetric && sourceData.key > neighbor) continue;\n\n        edgeData = adj[neighbor];\n\n        do {\n          targetData = edgeData.target;\n\n          if (targetData.key !== neighbor) targetData = edgeData.source;\n\n          hasEdges = true;\n          shouldBreak = callback(\n            sourceData.key,\n            targetData.key,\n            sourceData.attributes,\n            targetData.attributes,\n            edgeData.key,\n            edgeData.attributes,\n            edgeData.undirected\n          );\n\n          if (breakable && shouldBreak) return edgeData;\n\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (disconnectedNodes && !hasEdges) {\n      shouldBreak = callback(\n        sourceData.key,\n        null,\n        sourceData.attributes,\n        null,\n        null,\n        null,\n        null\n      );\n\n      if (breakable && shouldBreak) return null;\n    }\n  }\n\n  return;\n}\n","/**\n * Graphology Serialization Utilities\n * ===================================\n *\n * Collection of functions used by the graph serialization schemes.\n */\nimport {InvalidArgumentsGraphError} from './errors';\nimport {assign, isPlainObject, isEmpty} from './utils';\n\n/**\n * Formats internal node data into a serialized node.\n *\n * @param  {any}    key  - The node's key.\n * @param  {object} data - Internal node's data.\n * @return {array}       - The serialized node.\n */\nexport function serializeNode(key, data) {\n  const serialized = {key};\n\n  if (!isEmpty(data.attributes))\n    serialized.attributes = assign({}, data.attributes);\n\n  return serialized;\n}\n\n/**\n * Formats internal edge data into a serialized edge.\n *\n * @param  {string} type - The graph's type.\n * @param  {any}    key  - The edge's key.\n * @param  {object} data - Internal edge's data.\n * @return {array}       - The serialized edge.\n */\nexport function serializeEdge(type, key, data) {\n  const serialized = {\n    key,\n    source: data.source.key,\n    target: data.target.key\n  };\n\n  if (!isEmpty(data.attributes))\n    serialized.attributes = assign({}, data.attributes);\n\n  if (type === 'mixed' && data.undirected) serialized.undirected = true;\n\n  return serialized;\n}\n\n/**\n * Checks whether the given value is a serialized node.\n *\n * @param  {mixed} value - Target value.\n * @return {string|null}\n */\nexport function validateSerializedNode(value) {\n  if (!isPlainObject(value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid serialized node. A serialized node should be a plain object with at least a \"key\" property.'\n    );\n\n  if (!('key' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized node is missing its key.'\n    );\n\n  if (\n    'attributes' in value &&\n    (!isPlainObject(value.attributes) || value.attributes === null)\n  )\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.'\n    );\n}\n\n/**\n * Checks whether the given value is a serialized edge.\n *\n * @param  {mixed} value - Target value.\n * @return {string|null}\n */\nexport function validateSerializedEdge(value) {\n  if (!isPlainObject(value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a \"source\" & \"target\" property.'\n    );\n\n  if (!('source' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized edge is missing its source.'\n    );\n\n  if (!('target' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized edge is missing its target.'\n    );\n\n  if (\n    'attributes' in value &&\n    (!isPlainObject(value.attributes) || value.attributes === null)\n  )\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.'\n    );\n\n  if ('undirected' in value && typeof value.undirected !== 'boolean')\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.'\n    );\n}\n","/* eslint no-nested-ternary: 0 */\n/**\n * Graphology Reference Implementation\n * ====================================\n *\n * Reference implementation of the graphology specs.\n */\nimport {EventEmitter} from 'events';\nimport Iterator from 'obliterator/iterator';\nimport take from 'obliterator/take';\n\nimport {\n  InvalidArgumentsGraphError,\n  NotFoundGraphError,\n  UsageGraphError\n} from './errors';\n\nimport {\n  MixedNodeData,\n  DirectedNodeData,\n  UndirectedNodeData,\n  EdgeData\n} from './data';\n\nimport attachNodeAttributesMethods from './attributes/nodes';\nimport attachEdgeAttributesMethods from './attributes/edges';\nimport attachEdgeIterationMethods from './iteration/edges';\nimport attachNeighborIterationMethods from './iteration/neighbors';\nimport {forEachAdjacency} from './iteration/adjacency';\n\nimport {\n  serializeNode,\n  serializeEdge,\n  validateSerializedNode,\n  validateSerializedEdge\n} from './serialization';\n\nimport {\n  assign,\n  getMatchingEdge,\n  isPlainObject,\n  privateProperty,\n  readOnlyProperty,\n  incrementalIdStartingFromRandomByte,\n  validateHints\n} from './utils';\n\n/**\n * Constants.\n */\nconst INSTANCE_ID = incrementalIdStartingFromRandomByte();\n\n/**\n * Enums.\n */\nconst TYPES = new Set(['directed', 'undirected', 'mixed']);\n\nconst EMITTER_PROPS = new Set([\n  'domain',\n  '_events',\n  '_eventsCount',\n  '_maxListeners'\n]);\n\nconst EDGE_ADD_METHODS = [\n  {\n    name: verb => `${verb}Edge`,\n    generateKey: true\n  },\n  {\n    name: verb => `${verb}DirectedEdge`,\n    generateKey: true,\n    type: 'directed'\n  },\n  {\n    name: verb => `${verb}UndirectedEdge`,\n    generateKey: true,\n    type: 'undirected'\n  },\n  {\n    name: verb => `${verb}EdgeWithKey`\n  },\n  {\n    name: verb => `${verb}DirectedEdgeWithKey`,\n    type: 'directed'\n  },\n  {\n    name: verb => `${verb}UndirectedEdgeWithKey`,\n    type: 'undirected'\n  }\n];\n\n/**\n * Default options.\n */\nconst DEFAULTS = {\n  allowSelfLoops: true,\n  multi: false,\n  type: 'mixed'\n};\n\n/**\n * Abstract functions used by the Graph class for various methods.\n */\n\n/**\n * Internal method used to add a node to the given graph\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {any}     node            - The node's key.\n * @param  {object}  [attributes]    - Optional attributes.\n * @return {NodeData}                - Created node data.\n */\nfunction addNode(graph, node, attributes) {\n  if (attributes && !isPlainObject(attributes))\n    throw new InvalidArgumentsGraphError(\n      `Graph.addNode: invalid attributes. Expecting an object but got \"${attributes}\"`\n    );\n\n  // String coercion\n  node = '' + node;\n  attributes = attributes || {};\n\n  if (graph._nodes.has(node))\n    throw new UsageGraphError(\n      `Graph.addNode: the \"${node}\" node already exist in the graph.`\n    );\n\n  const data = new graph.NodeDataClass(node, attributes);\n\n  // Adding the node to internal register\n  graph._nodes.set(node, data);\n\n  // Emitting\n  graph.emit('nodeAdded', {\n    key: node,\n    attributes\n  });\n\n  return data;\n}\n\n/**\n * Same as the above but without sanity checks because we call this in contexts\n * where necessary checks were already done.\n */\nfunction unsafeAddNode(graph, node, attributes) {\n  const data = new graph.NodeDataClass(node, attributes);\n\n  graph._nodes.set(node, data);\n\n  graph.emit('nodeAdded', {\n    key: node,\n    attributes\n  });\n\n  return data;\n}\n\n/**\n * Internal method used to add an arbitrary edge to the given graph.\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {string}  name            - Name of the child method for errors.\n * @param  {boolean} mustGenerateKey - Should the graph generate an id?\n * @param  {boolean} undirected      - Whether the edge is undirected.\n * @param  {any}     edge            - The edge's key.\n * @param  {any}     source          - The source node.\n * @param  {any}     target          - The target node.\n * @param  {object}  [attributes]    - Optional attributes.\n * @return {any}                     - The edge.\n *\n * @throws {Error} - Will throw if the graph is of the wrong type.\n * @throws {Error} - Will throw if the given attributes are not an object.\n * @throws {Error} - Will throw if source or target doesn't exist.\n * @throws {Error} - Will throw if the edge already exist.\n */\nfunction addEdge(\n  graph,\n  name,\n  mustGenerateKey,\n  undirected,\n  edge,\n  source,\n  target,\n  attributes\n) {\n  // Checking validity of operation\n  if (!undirected && graph.type === 'undirected')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`\n    );\n\n  if (undirected && graph.type === 'directed')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`\n    );\n\n  if (attributes && !isPlainObject(attributes))\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: invalid attributes. Expecting an object but got \"${attributes}\"`\n    );\n\n  // Coercion of source & target:\n  source = '' + source;\n  target = '' + target;\n  attributes = attributes || {};\n\n  if (!graph.allowSelfLoops && source === target)\n    throw new UsageGraphError(\n      `Graph.${name}: source & target are the same (\"${source}\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`\n    );\n\n  const sourceData = graph._nodes.get(source),\n    targetData = graph._nodes.get(target);\n\n  if (!sourceData)\n    throw new NotFoundGraphError(\n      `Graph.${name}: source node \"${source}\" not found.`\n    );\n\n  if (!targetData)\n    throw new NotFoundGraphError(\n      `Graph.${name}: target node \"${target}\" not found.`\n    );\n\n  // Must the graph generate an id for this edge?\n  const eventData = {\n    key: null,\n    undirected,\n    source,\n    target,\n    attributes\n  };\n\n  if (mustGenerateKey) {\n    // NOTE: in this case we can guarantee that the key does not already\n    // exist and is already correctly casted as a string\n    edge = graph._edgeKeyGenerator();\n  } else {\n    // Coercion of edge key\n    edge = '' + edge;\n\n    // Here, we have a key collision\n    if (graph._edges.has(edge))\n      throw new UsageGraphError(\n        `Graph.${name}: the \"${edge}\" edge already exists in the graph.`\n      );\n  }\n\n  // Here, we might have a source / target collision\n  if (\n    !graph.multi &&\n    (undirected\n      ? typeof sourceData.undirected[target] !== 'undefined'\n      : typeof sourceData.out[target] !== 'undefined')\n  ) {\n    throw new UsageGraphError(\n      `Graph.${name}: an edge linking \"${source}\" to \"${target}\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`\n    );\n  }\n\n  // Storing some data\n  const edgeData = new EdgeData(\n    undirected,\n    edge,\n    sourceData,\n    targetData,\n    attributes\n  );\n\n  // Adding the edge to the internal register\n  graph._edges.set(edge, edgeData);\n\n  // Incrementing node degree counters\n  const isSelfLoop = source === target;\n\n  if (undirected) {\n    sourceData.undirectedDegree++;\n    targetData.undirectedDegree++;\n\n    if (isSelfLoop) {\n      sourceData.undirectedLoops++;\n      graph._undirectedSelfLoopCount++;\n    }\n  } else {\n    sourceData.outDegree++;\n    targetData.inDegree++;\n\n    if (isSelfLoop) {\n      sourceData.directedLoops++;\n      graph._directedSelfLoopCount++;\n    }\n  }\n\n  // Updating relevant index\n  if (graph.multi) edgeData.attachMulti();\n  else edgeData.attach();\n\n  if (undirected) graph._undirectedSize++;\n  else graph._directedSize++;\n\n  // Emitting\n  eventData.key = edge;\n\n  graph.emit('edgeAdded', eventData);\n\n  return edge;\n}\n\n/**\n * Internal method used to add an arbitrary edge to the given graph.\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {string}  name            - Name of the child method for errors.\n * @param  {boolean} mustGenerateKey - Should the graph generate an id?\n * @param  {boolean} undirected      - Whether the edge is undirected.\n * @param  {any}     edge            - The edge's key.\n * @param  {any}     source          - The source node.\n * @param  {any}     target          - The target node.\n * @param  {object}  [attributes]    - Optional attributes.\n * @param  {boolean} [asUpdater]       - Are we updating or merging?\n * @return {any}                     - The edge.\n *\n * @throws {Error} - Will throw if the graph is of the wrong type.\n * @throws {Error} - Will throw if the given attributes are not an object.\n * @throws {Error} - Will throw if source or target doesn't exist.\n * @throws {Error} - Will throw if the edge already exist.\n */\nfunction mergeEdge(\n  graph,\n  name,\n  mustGenerateKey,\n  undirected,\n  edge,\n  source,\n  target,\n  attributes,\n  asUpdater\n) {\n  // Checking validity of operation\n  if (!undirected && graph.type === 'undirected')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`\n    );\n\n  if (undirected && graph.type === 'directed')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`\n    );\n\n  if (attributes) {\n    if (asUpdater) {\n      if (typeof attributes !== 'function')\n        throw new InvalidArgumentsGraphError(\n          `Graph.${name}: invalid updater function. Expecting a function but got \"${attributes}\"`\n        );\n    } else {\n      if (!isPlainObject(attributes))\n        throw new InvalidArgumentsGraphError(\n          `Graph.${name}: invalid attributes. Expecting an object but got \"${attributes}\"`\n        );\n    }\n  }\n\n  // Coercion of source & target:\n  source = '' + source;\n  target = '' + target;\n\n  let updater;\n\n  if (asUpdater) {\n    updater = attributes;\n    attributes = undefined;\n  }\n\n  if (!graph.allowSelfLoops && source === target)\n    throw new UsageGraphError(\n      `Graph.${name}: source & target are the same (\"${source}\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`\n    );\n\n  let sourceData = graph._nodes.get(source);\n  let targetData = graph._nodes.get(target);\n  let edgeData;\n\n  // Do we need to handle duplicate?\n  let alreadyExistingEdgeData;\n\n  if (!mustGenerateKey) {\n    edgeData = graph._edges.get(edge);\n\n    if (edgeData) {\n      // Here, we need to ensure, if the user gave a key, that source & target\n      // are consistent\n      if (edgeData.source.key !== source || edgeData.target.key !== target) {\n        // If source or target inconsistent\n        if (\n          !undirected ||\n          edgeData.source.key !== target ||\n          edgeData.target.key !== source\n        ) {\n          // If directed, or source/target aren't flipped\n          throw new UsageGraphError(\n            `Graph.${name}: inconsistency detected when attempting to merge the \"${edge}\" edge with \"${source}\" source & \"${target}\" target vs. (\"${edgeData.source.key}\", \"${edgeData.target.key}\").`\n          );\n        }\n      }\n\n      alreadyExistingEdgeData = edgeData;\n    }\n  }\n\n  // Here, we might have a source / target collision\n  if (!alreadyExistingEdgeData && !graph.multi && sourceData) {\n    alreadyExistingEdgeData = undirected\n      ? sourceData.undirected[target]\n      : sourceData.out[target];\n  }\n\n  // Handling duplicates\n  if (alreadyExistingEdgeData) {\n    const info = [alreadyExistingEdgeData.key, false, false, false];\n\n    // We can skip the attribute merging part if the user did not provide them\n    if (asUpdater ? !updater : !attributes) return info;\n\n    // Updating the attributes\n    if (asUpdater) {\n      const oldAttributes = alreadyExistingEdgeData.attributes;\n      alreadyExistingEdgeData.attributes = updater(oldAttributes);\n\n      graph.emit('edgeAttributesUpdated', {\n        type: 'replace',\n        key: alreadyExistingEdgeData.key,\n        attributes: alreadyExistingEdgeData.attributes\n      });\n    }\n\n    // Merging the attributes\n    else {\n      assign(alreadyExistingEdgeData.attributes, attributes);\n\n      graph.emit('edgeAttributesUpdated', {\n        type: 'merge',\n        key: alreadyExistingEdgeData.key,\n        attributes: alreadyExistingEdgeData.attributes,\n        data: attributes\n      });\n    }\n\n    return info;\n  }\n\n  attributes = attributes || {};\n\n  if (asUpdater && updater) attributes = updater(attributes);\n\n  // Must the graph generate an id for this edge?\n  const eventData = {\n    key: null,\n    undirected,\n    source,\n    target,\n    attributes\n  };\n\n  if (mustGenerateKey) {\n    // NOTE: in this case we can guarantee that the key does not already\n    // exist and is already correctly casted as a string\n    edge = graph._edgeKeyGenerator();\n  } else {\n    // Coercion of edge key\n    edge = '' + edge;\n\n    // Here, we have a key collision\n    if (graph._edges.has(edge))\n      throw new UsageGraphError(\n        `Graph.${name}: the \"${edge}\" edge already exists in the graph.`\n      );\n  }\n\n  let sourceWasAdded = false;\n  let targetWasAdded = false;\n\n  if (!sourceData) {\n    sourceData = unsafeAddNode(graph, source, {});\n    sourceWasAdded = true;\n\n    if (source === target) {\n      targetData = sourceData;\n      targetWasAdded = true;\n    }\n  }\n  if (!targetData) {\n    targetData = unsafeAddNode(graph, target, {});\n    targetWasAdded = true;\n  }\n\n  // Storing some data\n  edgeData = new EdgeData(undirected, edge, sourceData, targetData, attributes);\n\n  // Adding the edge to the internal register\n  graph._edges.set(edge, edgeData);\n\n  // Incrementing node degree counters\n  const isSelfLoop = source === target;\n\n  if (undirected) {\n    sourceData.undirectedDegree++;\n    targetData.undirectedDegree++;\n\n    if (isSelfLoop) {\n      sourceData.undirectedLoops++;\n      graph._undirectedSelfLoopCount++;\n    }\n  } else {\n    sourceData.outDegree++;\n    targetData.inDegree++;\n\n    if (isSelfLoop) {\n      sourceData.directedLoops++;\n      graph._directedSelfLoopCount++;\n    }\n  }\n\n  // Updating relevant index\n  if (graph.multi) edgeData.attachMulti();\n  else edgeData.attach();\n\n  if (undirected) graph._undirectedSize++;\n  else graph._directedSize++;\n\n  // Emitting\n  eventData.key = edge;\n\n  graph.emit('edgeAdded', eventData);\n\n  return [edge, true, sourceWasAdded, targetWasAdded];\n}\n\n/**\n * Internal method used to drop an edge.\n *\n * @param  {Graph}    graph    - Target graph.\n * @param  {EdgeData} edgeData - Data of the edge to drop.\n */\nfunction dropEdgeFromData(graph, edgeData) {\n  // Dropping the edge from the register\n  graph._edges.delete(edgeData.key);\n\n  // Updating related degrees\n  const {source: sourceData, target: targetData, attributes} = edgeData;\n\n  const undirected = edgeData.undirected;\n\n  const isSelfLoop = sourceData === targetData;\n\n  if (undirected) {\n    sourceData.undirectedDegree--;\n    targetData.undirectedDegree--;\n\n    if (isSelfLoop) {\n      sourceData.undirectedLoops--;\n      graph._undirectedSelfLoopCount--;\n    }\n  } else {\n    sourceData.outDegree--;\n    targetData.inDegree--;\n\n    if (isSelfLoop) {\n      sourceData.directedLoops--;\n      graph._directedSelfLoopCount--;\n    }\n  }\n\n  // Clearing index\n  if (graph.multi) edgeData.detachMulti();\n  else edgeData.detach();\n\n  if (undirected) graph._undirectedSize--;\n  else graph._directedSize--;\n\n  // Emitting\n  graph.emit('edgeDropped', {\n    key: edgeData.key,\n    attributes,\n    source: sourceData.key,\n    target: targetData.key,\n    undirected\n  });\n}\n\n/**\n * Graph class\n *\n * @constructor\n * @param  {object}  [options] - Options:\n * @param  {boolean}   [allowSelfLoops] - Allow self loops?\n * @param  {string}    [type]           - Type of the graph.\n * @param  {boolean}   [map]            - Allow references as keys?\n * @param  {boolean}   [multi]          - Allow parallel edges?\n *\n * @throws {Error} - Will throw if the arguments are not valid.\n */\nexport default class Graph extends EventEmitter {\n  constructor(options) {\n    super();\n\n    //-- Solving options\n    options = assign({}, DEFAULTS, options);\n\n    // Enforcing options validity\n    if (typeof options.multi !== 'boolean')\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"${options.multi}\".`\n      );\n\n    if (!TYPES.has(options.type))\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'type' option. Should be one of \"mixed\", \"directed\" or \"undirected\" but got \"${options.type}\".`\n      );\n\n    if (typeof options.allowSelfLoops !== 'boolean')\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"${options.allowSelfLoops}\".`\n      );\n\n    //-- Private properties\n\n    // Utilities\n    const NodeDataClass =\n      options.type === 'mixed'\n        ? MixedNodeData\n        : options.type === 'directed'\n        ? DirectedNodeData\n        : UndirectedNodeData;\n\n    privateProperty(this, 'NodeDataClass', NodeDataClass);\n\n    // Internal edge key generator\n\n    // NOTE: this internal generator produce keys that are strings\n    // composed of a weird prefix, an incremental instance id starting from\n    // a random byte and finally an internal instance incremental id.\n    // All this to avoid intra-frame and cross-frame adversarial inputs\n    // that can force a single #.addEdge call to degenerate into a O(n)\n    // available key search loop.\n\n    // It also ensures that automatically generated edge keys are unlikely\n    // to produce collisions with arbitrary keys given by users.\n    const instancePrefix = 'geid_' + INSTANCE_ID() + '_';\n    let edgeId = 0;\n\n    const edgeKeyGenerator = () => {\n      let availableEdgeKey;\n\n      do {\n        availableEdgeKey = instancePrefix + edgeId++;\n      } while (this._edges.has(availableEdgeKey));\n\n      return availableEdgeKey;\n    };\n\n    // Indexes\n    privateProperty(this, '_attributes', {});\n    privateProperty(this, '_nodes', new Map());\n    privateProperty(this, '_edges', new Map());\n    privateProperty(this, '_directedSize', 0);\n    privateProperty(this, '_undirectedSize', 0);\n    privateProperty(this, '_directedSelfLoopCount', 0);\n    privateProperty(this, '_undirectedSelfLoopCount', 0);\n    privateProperty(this, '_edgeKeyGenerator', edgeKeyGenerator);\n\n    // Options\n    privateProperty(this, '_options', options);\n\n    // Emitter properties\n    EMITTER_PROPS.forEach(prop => privateProperty(this, prop, this[prop]));\n\n    //-- Properties readers\n    readOnlyProperty(this, 'order', () => this._nodes.size);\n    readOnlyProperty(this, 'size', () => this._edges.size);\n    readOnlyProperty(this, 'directedSize', () => this._directedSize);\n    readOnlyProperty(this, 'undirectedSize', () => this._undirectedSize);\n    readOnlyProperty(\n      this,\n      'selfLoopCount',\n      () => this._directedSelfLoopCount + this._undirectedSelfLoopCount\n    );\n    readOnlyProperty(\n      this,\n      'directedSelfLoopCount',\n      () => this._directedSelfLoopCount\n    );\n    readOnlyProperty(\n      this,\n      'undirectedSelfLoopCount',\n      () => this._undirectedSelfLoopCount\n    );\n    readOnlyProperty(this, 'multi', this._options.multi);\n    readOnlyProperty(this, 'type', this._options.type);\n    readOnlyProperty(this, 'allowSelfLoops', this._options.allowSelfLoops);\n    readOnlyProperty(this, 'implementation', () => 'graphology');\n  }\n\n  _resetInstanceCounters() {\n    this._directedSize = 0;\n    this._undirectedSize = 0;\n    this._directedSelfLoopCount = 0;\n    this._undirectedSelfLoopCount = 0;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Read\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning whether the given node is found in the graph.\n   *\n   * @param  {any}     node - The node.\n   * @return {boolean}\n   */\n  hasNode(node) {\n    return this._nodes.has('' + node);\n  }\n\n  /**\n   * Method returning whether the given directed edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasDirectedEdge(source, target) {\n    // Early termination\n    if (this.type === 'undirected') return false;\n\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      const edgeData = this._edges.get(edge);\n\n      return !!edgeData && !edgeData.undirected;\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      return nodeData.out.hasOwnProperty(target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning whether the given undirected edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasUndirectedEdge(source, target) {\n    // Early termination\n    if (this.type === 'directed') return false;\n\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      const edgeData = this._edges.get(edge);\n\n      return !!edgeData && edgeData.undirected;\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      return nodeData.undirected.hasOwnProperty(target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning whether the given edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasEdge(source, target) {\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      return this._edges.has(edge);\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      return (\n        (typeof nodeData.out !== 'undefined' &&\n          nodeData.out.hasOwnProperty(target)) ||\n        (typeof nodeData.undirected !== 'undefined' &&\n          nodeData.undirected.hasOwnProperty(target))\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning the edge matching source & target in a directed fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  directedEdge(source, target) {\n    if (this.type === 'undirected') return;\n\n    source = '' + source;\n    target = '' + target;\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.'\n      );\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.directedEdge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.directedEdge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData = (sourceData.out && sourceData.out[target]) || undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning the edge matching source & target in a undirected fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  undirectedEdge(source, target) {\n    if (this.type === 'directed') return;\n\n    source = '' + source;\n    target = '' + target;\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.'\n      );\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedEdge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.undirectedEdge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData =\n      (sourceData.undirected && sourceData.undirected[target]) || undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning the edge matching source & target in a mixed fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  edge(source, target) {\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.'\n      );\n\n    source = '' + source;\n    target = '' + target;\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.edge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.edge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData =\n      (sourceData.out && sourceData.out[target]) ||\n      (sourceData.undirected && sourceData.undirected[target]) ||\n      undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning whether two nodes are directed neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areDirectedNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areDirectedNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.in || neighbor in nodeData.out;\n  }\n\n  /**\n   * Method returning whether two nodes are out neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areOutNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areOutNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.out;\n  }\n\n  /**\n   * Method returning whether two nodes are in neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areInNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areInNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.in;\n  }\n\n  /**\n   * Method returning whether two nodes are undirected neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areUndirectedNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areUndirectedNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return false;\n\n    return neighbor in nodeData.undirected;\n  }\n\n  /**\n   * Method returning whether two nodes are neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.in || neighbor in nodeData.out) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether two nodes are inbound neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areInboundNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areInboundNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.in) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether two nodes are outbound neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areOutboundNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areOutboundNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.out) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning the given node's in degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree;\n  }\n\n  /**\n   * Method returning the given node's out degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.outDegree;\n  }\n\n  /**\n   * Method returning the given node's directed degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  directedDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.directedDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree + nodeData.outDegree;\n  }\n\n  /**\n   * Method returning the given node's undirected degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  undirectedDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return 0;\n\n    return nodeData.undirectedDegree;\n  }\n\n  /**\n   * Method returning the given node's inbound degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's inbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inboundDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inboundDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's outbound degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's outbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outboundDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outboundDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.outDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's directed degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  degree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.degree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree + nodeData.outDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's in degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree - nodeData.directedLoops;\n  }\n\n  /**\n   * Method returning the given node's out degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.outDegree - nodeData.directedLoops;\n  }\n\n  /**\n   * Method returning the given node's directed degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  directedDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.directedDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree + nodeData.outDegree - nodeData.directedLoops * 2;\n  }\n\n  /**\n   * Method returning the given node's undirected degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  undirectedDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return 0;\n\n    return nodeData.undirectedDegree - nodeData.undirectedLoops * 2;\n  }\n\n  /**\n   * Method returning the given node's inbound degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's inbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inboundDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inboundDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n      loops += nodeData.undirectedLoops * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree;\n      loops += nodeData.directedLoops;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given node's outbound degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's outbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outboundDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outboundDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n      loops += nodeData.undirectedLoops * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.outDegree;\n      loops += nodeData.directedLoops;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given node's directed degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  degreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.degreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n      loops += nodeData.undirectedLoops * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree + nodeData.outDegree;\n      loops += nodeData.directedLoops * 2;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given edge's source.\n   *\n   * @param  {any} edge - The edge's key.\n   * @return {any}      - The edge's source.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  source(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.source: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source.key;\n  }\n\n  /**\n   * Method returning the given edge's target.\n   *\n   * @param  {any} edge - The edge's key.\n   * @return {any}      - The edge's target.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  target(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.target: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.target.key;\n  }\n\n  /**\n   * Method returning the given edge's extremities.\n   *\n   * @param  {any}   edge - The edge's key.\n   * @return {array}      - The edge's extremities.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  extremities(edge) {\n    edge = '' + edge;\n\n    const edgeData = this._edges.get(edge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.extremities: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return [edgeData.source.key, edgeData.target.key];\n  }\n\n  /**\n   * Given a node & an edge, returns the other extremity of the edge.\n   *\n   * @param  {any}   node - The node's key.\n   * @param  {any}   edge - The edge's key.\n   * @return {any}        - The related node.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph or if the\n   *                   edge & node are not related.\n   */\n  opposite(node, edge) {\n    node = '' + node;\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.opposite: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    const source = data.source.key;\n    const target = data.target.key;\n\n    if (node === source) return target;\n    if (node === target) return source;\n\n    throw new NotFoundGraphError(\n      `Graph.opposite: the \"${node}\" node is not attached to the \"${edge}\" edge (${source}, ${target}).`\n    );\n  }\n\n  /**\n   * Returns whether the given edge has the given node as extremity.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @param  {any}     node - The node's key.\n   * @return {boolean}      - The related node.\n   *\n   * @throws {Error} - Will throw if either the node or the edge isn't in the graph.\n   */\n  hasExtremity(edge, node) {\n    edge = '' + edge;\n    node = '' + node;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.hasExtremity: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source.key === node || data.target.key === node;\n  }\n\n  /**\n   * Method returning whether the given edge is undirected.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isUndirected(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isUndirected: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.undirected;\n  }\n\n  /**\n   * Method returning whether the given edge is directed.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isDirected(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isDirected: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return !data.undirected;\n  }\n\n  /**\n   * Method returning whether the given edge is a self loop.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isSelfLoop(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isSelfLoop: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source === data.target;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Mutation\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used to add a node to the graph.\n   *\n   * @param  {any}    node         - The node.\n   * @param  {object} [attributes] - Optional attributes.\n   * @return {any}                 - The node.\n   *\n   * @throws {Error} - Will throw if the given node already exist.\n   * @throws {Error} - Will throw if the given attributes are not an object.\n   */\n  addNode(node, attributes) {\n    const nodeData = addNode(this, node, attributes);\n\n    return nodeData.key;\n  }\n\n  /**\n   * Method used to merge a node into the graph.\n   *\n   * @param  {any}    node         - The node.\n   * @param  {object} [attributes] - Optional attributes.\n   * @return {any}                 - The node.\n   */\n  mergeNode(node, attributes) {\n    if (attributes && !isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.mergeNode: invalid attributes. Expecting an object but got \"${attributes}\"`\n      );\n\n    // String coercion\n    node = '' + node;\n    attributes = attributes || {};\n\n    // If the node already exists, we merge the attributes\n    let data = this._nodes.get(node);\n\n    if (data) {\n      if (attributes) {\n        assign(data.attributes, attributes);\n\n        this.emit('nodeAttributesUpdated', {\n          type: 'merge',\n          key: node,\n          attributes: data.attributes,\n          data: attributes\n        });\n      }\n      return [node, false];\n    }\n\n    data = new this.NodeDataClass(node, attributes);\n\n    // Adding the node to internal register\n    this._nodes.set(node, data);\n\n    // Emitting\n    this.emit('nodeAdded', {\n      key: node,\n      attributes\n    });\n\n    return [node, true];\n  }\n\n  /**\n   * Method used to add a node if it does not exist in the graph or else to\n   * update its attributes using a function.\n   *\n   * @param  {any}      node      - The node.\n   * @param  {function} [updater] - Optional updater function.\n   * @return {any}                - The node.\n   */\n  updateNode(node, updater) {\n    if (updater && typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.updateNode: invalid updater function. Expecting a function but got \"${updater}\"`\n      );\n\n    // String coercion\n    node = '' + node;\n\n    // If the node already exists, we update the attributes\n    let data = this._nodes.get(node);\n\n    if (data) {\n      if (updater) {\n        const oldAttributes = data.attributes;\n        data.attributes = updater(oldAttributes);\n\n        this.emit('nodeAttributesUpdated', {\n          type: 'replace',\n          key: node,\n          attributes: data.attributes\n        });\n      }\n      return [node, false];\n    }\n\n    const attributes = updater ? updater({}) : {};\n\n    data = new this.NodeDataClass(node, attributes);\n\n    // Adding the node to internal register\n    this._nodes.set(node, data);\n\n    // Emitting\n    this.emit('nodeAdded', {\n      key: node,\n      attributes\n    });\n\n    return [node, true];\n  }\n\n  /**\n   * Method used to drop a single node & all its attached edges from the graph.\n   *\n   * @param  {any}    node - The node.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the node doesn't exist.\n   */\n  dropNode(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.dropNode: could not find the \"${node}\" node in the graph.`\n      );\n\n    let edgeData;\n\n    // Removing attached edges\n    // NOTE: we could be faster here, but this is such a pain to maintain\n    if (this.type !== 'undirected') {\n      for (const neighbor in nodeData.out) {\n        edgeData = nodeData.out[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n\n      for (const neighbor in nodeData.in) {\n        edgeData = nodeData.in[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (this.type !== 'directed') {\n      for (const neighbor in nodeData.undirected) {\n        edgeData = nodeData.undirected[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    // Dropping the node from the register\n    this._nodes.delete(node);\n\n    // Emitting\n    this.emit('nodeDropped', {\n      key: node,\n      attributes: nodeData.attributes\n    });\n  }\n\n  /**\n   * Method used to drop a single edge from the graph.\n   *\n   * Arity 1:\n   * @param  {any}    edge - The edge.\n   *\n   * Arity 2:\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropEdge(edge) {\n    let edgeData;\n\n    if (arguments.length > 1) {\n      const source = '' + arguments[0];\n      const target = '' + arguments[1];\n\n      edgeData = getMatchingEdge(this, source, target, this.type);\n\n      if (!edgeData)\n        throw new NotFoundGraphError(\n          `Graph.dropEdge: could not find the \"${source}\" -> \"${target}\" edge in the graph.`\n        );\n    } else {\n      edge = '' + edge;\n\n      edgeData = this._edges.get(edge);\n\n      if (!edgeData)\n        throw new NotFoundGraphError(\n          `Graph.dropEdge: could not find the \"${edge}\" edge in the graph.`\n        );\n    }\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to drop a single directed edge from the graph.\n   *\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropDirectedEdge(source, target) {\n    if (arguments.length < 2)\n      throw new UsageGraphError(\n        'Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.'\n      );\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.'\n      );\n\n    source = '' + source;\n    target = '' + target;\n\n    const edgeData = getMatchingEdge(this, source, target, 'directed');\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.dropDirectedEdge: could not find a \"${source}\" -> \"${target}\" edge in the graph.`\n      );\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to drop a single undirected edge from the graph.\n   *\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropUndirectedEdge(source, target) {\n    if (arguments.length < 2)\n      throw new UsageGraphError(\n        'Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.'\n      );\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.'\n      );\n\n    const edgeData = getMatchingEdge(this, source, target, 'undirected');\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.dropUndirectedEdge: could not find a \"${source}\" -> \"${target}\" edge in the graph.`\n      );\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to remove every edge & every node from the graph.\n   *\n   * @return {Graph}\n   */\n  clear() {\n    // Clearing edges\n    this._edges.clear();\n\n    // Clearing nodes\n    this._nodes.clear();\n\n    // Reset counters\n    this._resetInstanceCounters();\n\n    // Emitting\n    this.emit('cleared');\n  }\n\n  /**\n   * Method used to remove every edge from the graph.\n   *\n   * @return {Graph}\n   */\n  clearEdges() {\n    // Clearing structure index\n    const iterator = this._nodes.values();\n\n    let step;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      step.value.clear();\n    }\n\n    // Clearing edges\n    this._edges.clear();\n\n    // Reset counters\n    this._resetInstanceCounters();\n\n    // Emitting\n    this.emit('edgesCleared');\n  }\n\n  /**---------------------------------------------------------------------------\n   * Attributes-related methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning the desired graph's attribute.\n   *\n   * @param  {string} name - Name of the attribute.\n   * @return {any}\n   */\n  getAttribute(name) {\n    return this._attributes[name];\n  }\n\n  /**\n   * Method returning the graph's attributes.\n   *\n   * @return {object}\n   */\n  getAttributes() {\n    return this._attributes;\n  }\n\n  /**\n   * Method returning whether the graph has the desired attribute.\n   *\n   * @param  {string}  name - Name of the attribute.\n   * @return {boolean}\n   */\n  hasAttribute(name) {\n    return this._attributes.hasOwnProperty(name);\n  }\n\n  /**\n   * Method setting a value for the desired graph's attribute.\n   *\n   * @param  {string}  name  - Name of the attribute.\n   * @param  {any}     value - Value for the attribute.\n   * @return {Graph}\n   */\n  setAttribute(name, value) {\n    this._attributes[name] = value;\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'set',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method using a function to update the desired graph's attribute's value.\n   *\n   * @param  {string}   name    - Name of the attribute.\n   * @param  {function} updater - Function use to update the attribute's value.\n   * @return {Graph}\n   */\n  updateAttribute(name, updater) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateAttribute: updater should be a function.'\n      );\n\n    const value = this._attributes[name];\n\n    this._attributes[name] = updater(value);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'set',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method removing the desired graph's attribute.\n   *\n   * @param  {string} name  - Name of the attribute.\n   * @return {Graph}\n   */\n  removeAttribute(name) {\n    delete this._attributes[name];\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'remove',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method replacing the graph's attributes.\n   *\n   * @param  {object} attributes - New attributes.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given attributes are not a plain object.\n   */\n  replaceAttributes(attributes) {\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        'Graph.replaceAttributes: provided attributes are not a plain object.'\n      );\n\n    this._attributes = attributes;\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'replace',\n      attributes: this._attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method merging the graph's attributes.\n   *\n   * @param  {object} attributes - Attributes to merge.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given attributes are not a plain object.\n   */\n  mergeAttributes(attributes) {\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        'Graph.mergeAttributes: provided attributes are not a plain object.'\n      );\n\n    assign(this._attributes, attributes);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'merge',\n      attributes: this._attributes,\n      data: attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method updating the graph's attributes.\n   *\n   * @param  {function} updater - Function used to update the attributes.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given updater is not a function.\n   */\n  updateAttributes(updater) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateAttributes: provided updater is not a function.'\n      );\n\n    this._attributes = updater(this._attributes);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'update',\n      attributes: this._attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method used to update each node's attributes using the given function.\n   *\n   * @param {function}  updater - Updater function to use.\n   * @param {object}    [hints] - Optional hints.\n   */\n  updateEachNodeAttributes(updater, hints) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachNodeAttributes: expecting an updater function.'\n      );\n\n    if (hints && !validateHints(hints))\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      nodeData.attributes = updater(nodeData.key, nodeData.attributes);\n    }\n\n    this.emit('eachNodeAttributesUpdated', {\n      hints: hints ? hints : null\n    });\n  }\n\n  /**\n   * Method used to update each edge's attributes using the given function.\n   *\n   * @param {function}  updater - Updater function to use.\n   * @param {object}    [hints] - Optional hints.\n   */\n  updateEachEdgeAttributes(updater, hints) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachEdgeAttributes: expecting an updater function.'\n      );\n\n    if (hints && !validateHints(hints))\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}'\n      );\n\n    const iterator = this._edges.values();\n\n    let step, edgeData, sourceData, targetData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      edgeData = step.value;\n      sourceData = edgeData.source;\n      targetData = edgeData.target;\n\n      edgeData.attributes = updater(\n        edgeData.key,\n        edgeData.attributes,\n        sourceData.key,\n        targetData.key,\n        sourceData.attributes,\n        targetData.attributes,\n        edgeData.undirected\n      );\n    }\n\n    this.emit('eachEdgeAttributesUpdated', {\n      hints: hints ? hints : null\n    });\n  }\n\n  /**---------------------------------------------------------------------------\n   * Iteration-related methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method iterating over the graph's adjacency using the given callback.\n   *\n   * @param  {function}  callback - Callback to use.\n   */\n  forEachAdjacencyEntry(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAdjacencyEntry: expecting a callback.'\n      );\n\n    forEachAdjacency(false, false, false, this, callback);\n  }\n  forEachAdjacencyEntryWithOrphans(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.'\n      );\n\n    forEachAdjacency(false, false, true, this, callback);\n  }\n\n  /**\n   * Method iterating over the graph's assymetric adjacency using the given callback.\n   *\n   * @param  {function}  callback - Callback to use.\n   */\n  forEachAssymetricAdjacencyEntry(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAssymetricAdjacencyEntry: expecting a callback.'\n      );\n\n    forEachAdjacency(false, true, false, this, callback);\n  }\n  forEachAssymetricAdjacencyEntryWithOrphans(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.'\n      );\n\n    forEachAdjacency(false, true, true, this, callback);\n  }\n\n  /**\n   * Method returning the list of the graph's nodes.\n   *\n   * @return {array} - The nodes.\n   */\n  nodes() {\n    if (typeof Array.from === 'function') return Array.from(this._nodes.keys());\n\n    return take(this._nodes.keys(), this._nodes.size);\n  }\n\n  /**\n   * Method iterating over the graph's nodes using the given callback.\n   *\n   * @param  {function}  callback - Callback (key, attributes, index).\n   */\n  forEachNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      callback(nodeData.key, nodeData.attributes);\n    }\n  }\n\n  /**\n   * Method iterating attempting to find a node matching the given predicate\n   * function.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  findNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.findNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes)) return nodeData.key;\n    }\n\n    return;\n  }\n\n  /**\n   * Method mapping nodes.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  mapNodes(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.mapNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    const result = new Array(this.order);\n    let i = 0;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      result[i++] = callback(nodeData.key, nodeData.attributes);\n    }\n\n    return result;\n  }\n\n  /**\n   * Method returning whether some node verify the given predicate.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  someNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.someNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes)) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether all node verify the given predicate.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  everyNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.everyNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (!callback(nodeData.key, nodeData.attributes)) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Method filtering nodes.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  filterNodes(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.filterNodes: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    const result = [];\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes))\n        result.push(nodeData.key);\n    }\n\n    return result;\n  }\n\n  /**\n   * Method reducing nodes.\n   *\n   * @param  {function}  callback - Callback (accumulator, key, attributes).\n   */\n  reduceNodes(callback, initialValue) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.reduceNodes: expecting a callback.'\n      );\n\n    if (arguments.length < 2)\n      throw new InvalidArgumentsGraphError(\n        'Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.'\n      );\n\n    let accumulator = initialValue;\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      accumulator = callback(accumulator, nodeData.key, nodeData.attributes);\n    }\n\n    return accumulator;\n  }\n\n  /**\n   * Method returning an iterator over the graph's node entries.\n   *\n   * @return {Iterator}\n   */\n  nodeEntries() {\n    const iterator = this._nodes.values();\n\n    return new Iterator(() => {\n      const step = iterator.next();\n\n      if (step.done) return step;\n\n      const data = step.value;\n\n      return {\n        value: {node: data.key, attributes: data.attributes},\n        done: false\n      };\n    });\n  }\n\n  /**---------------------------------------------------------------------------\n   * Serialization\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used to export the whole graph.\n   *\n   * @return {object} - The serialized graph.\n   */\n  export() {\n    const nodes = new Array(this._nodes.size);\n\n    let i = 0;\n\n    this._nodes.forEach((data, key) => {\n      nodes[i++] = serializeNode(key, data);\n    });\n\n    const edges = new Array(this._edges.size);\n\n    i = 0;\n\n    this._edges.forEach((data, key) => {\n      edges[i++] = serializeEdge(this.type, key, data);\n    });\n\n    return {\n      options: {\n        type: this.type,\n        multi: this.multi,\n        allowSelfLoops: this.allowSelfLoops\n      },\n      attributes: this.getAttributes(),\n      nodes,\n      edges\n    };\n  }\n\n  /**\n   * Method used to import a serialized graph.\n   *\n   * @param  {object|Graph} data  - The serialized graph.\n   * @param  {boolean}      merge - Whether to merge data.\n   * @return {Graph}              - Returns itself for chaining.\n   */\n  import(data, merge = false) {\n    // Importing a Graph instance directly\n    if (data instanceof Graph) {\n      // Nodes\n      data.forEachNode((n, a) => {\n        if (merge) this.mergeNode(n, a);\n        else this.addNode(n, a);\n      });\n\n      // Edges\n      data.forEachEdge((e, a, s, t, _sa, _ta, u) => {\n        if (merge) {\n          if (u) this.mergeUndirectedEdgeWithKey(e, s, t, a);\n          else this.mergeDirectedEdgeWithKey(e, s, t, a);\n        } else {\n          if (u) this.addUndirectedEdgeWithKey(e, s, t, a);\n          else this.addDirectedEdgeWithKey(e, s, t, a);\n        }\n      });\n\n      return this;\n    }\n\n    // Importing a serialized graph\n    if (!isPlainObject(data))\n      throw new InvalidArgumentsGraphError(\n        'Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.'\n      );\n\n    if (data.attributes) {\n      if (!isPlainObject(data.attributes))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid attributes. Expecting a plain object.'\n        );\n\n      if (merge) this.mergeAttributes(data.attributes);\n      else this.replaceAttributes(data.attributes);\n    }\n\n    let i, l, list, node, edge;\n\n    if (data.nodes) {\n      list = data.nodes;\n\n      if (!Array.isArray(list))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid nodes. Expecting an array.'\n        );\n\n      for (i = 0, l = list.length; i < l; i++) {\n        node = list[i];\n\n        // Validating\n        validateSerializedNode(node);\n\n        // Adding the node\n        const {key, attributes} = node;\n\n        if (merge) this.mergeNode(key, attributes);\n        else this.addNode(key, attributes);\n      }\n    }\n\n    if (data.edges) {\n      let undirectedByDefault = false;\n\n      if (this.type === 'undirected') {\n        undirectedByDefault = true;\n      }\n\n      list = data.edges;\n\n      if (!Array.isArray(list))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid edges. Expecting an array.'\n        );\n\n      for (i = 0, l = list.length; i < l; i++) {\n        edge = list[i];\n\n        // Validating\n        validateSerializedEdge(edge);\n\n        // Adding the edge\n        const {\n          source,\n          target,\n          attributes,\n          undirected = undirectedByDefault\n        } = edge;\n\n        let method;\n\n        if ('key' in edge) {\n          method = merge\n            ? undirected\n              ? this.mergeUndirectedEdgeWithKey\n              : this.mergeDirectedEdgeWithKey\n            : undirected\n            ? this.addUndirectedEdgeWithKey\n            : this.addDirectedEdgeWithKey;\n\n          method.call(this, edge.key, source, target, attributes);\n        } else {\n          method = merge\n            ? undirected\n              ? this.mergeUndirectedEdge\n              : this.mergeDirectedEdge\n            : undirected\n            ? this.addUndirectedEdge\n            : this.addDirectedEdge;\n\n          method.call(this, source, target, attributes);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Utils\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning a null copy of the graph, i.e. a graph without nodes\n   * & edges but with the exact same options.\n   *\n   * @param  {object} options - Options to merge with the current ones.\n   * @return {Graph}          - The null copy.\n   */\n  nullCopy(options) {\n    const graph = new Graph(assign({}, this._options, options));\n    graph.replaceAttributes(assign({}, this.getAttributes()));\n    return graph;\n  }\n\n  /**\n   * Method returning an empty copy of the graph, i.e. a graph without edges but\n   * with the exact same options.\n   *\n   * @param  {object} options - Options to merge with the current ones.\n   * @return {Graph}          - The empty copy.\n   */\n  emptyCopy(options) {\n    const graph = this.nullCopy(options);\n\n    this._nodes.forEach((nodeData, key) => {\n      const attributes = assign({}, nodeData.attributes);\n\n      // NOTE: no need to emit events since user cannot access the instance yet\n      nodeData = new graph.NodeDataClass(key, attributes);\n      graph._nodes.set(key, nodeData);\n    });\n\n    return graph;\n  }\n\n  /**\n   * Method returning an exact copy of the graph.\n   *\n   * @param  {object} options - Upgrade options.\n   * @return {Graph}          - The copy.\n   */\n  copy(options) {\n    options = options || {};\n\n    if (\n      typeof options.type === 'string' &&\n      options.type !== this.type &&\n      options.type !== 'mixed'\n    )\n      throw new UsageGraphError(\n        `Graph.copy: cannot create an incompatible copy from \"${this.type}\" type to \"${options.type}\" because this would mean losing information about the current graph.`\n      );\n\n    if (\n      typeof options.multi === 'boolean' &&\n      options.multi !== this.multi &&\n      options.multi !== true\n    )\n      throw new UsageGraphError(\n        'Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.'\n      );\n\n    if (\n      typeof options.allowSelfLoops === 'boolean' &&\n      options.allowSelfLoops !== this.allowSelfLoops &&\n      options.allowSelfLoops !== true\n    )\n      throw new UsageGraphError(\n        'Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.'\n      );\n\n    const graph = this.emptyCopy(options);\n\n    const iterator = this._edges.values();\n\n    let step, edgeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      edgeData = step.value;\n\n      // NOTE: no need to emit events since user cannot access the instance yet\n      addEdge(\n        graph,\n        'copy',\n        false,\n        edgeData.undirected,\n        edgeData.key,\n        edgeData.source.key,\n        edgeData.target.key,\n        assign({}, edgeData.attributes)\n      );\n    }\n\n    return graph;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Known methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used by JavaScript to perform JSON serialization.\n   *\n   * @return {object} - The serialized graph.\n   */\n  toJSON() {\n    return this.export();\n  }\n\n  /**\n   * Method returning [object Graph].\n   */\n  toString() {\n    return '[object Graph]';\n  }\n\n  /**\n   * Method used internally by node's console to display a custom object.\n   *\n   * @return {object} - Formatted object representation of the graph.\n   */\n  inspect() {\n    const nodes = {};\n    this._nodes.forEach((data, key) => {\n      nodes[key] = data.attributes;\n    });\n\n    const edges = {},\n      multiIndex = {};\n\n    this._edges.forEach((data, key) => {\n      const direction = data.undirected ? '--' : '->';\n\n      let label = '';\n\n      let source = data.source.key;\n      let target = data.target.key;\n      let tmp;\n\n      if (data.undirected && source > target) {\n        tmp = source;\n        source = target;\n        target = tmp;\n      }\n\n      const desc = `(${source})${direction}(${target})`;\n\n      if (!key.startsWith('geid_')) {\n        label += `[${key}]: `;\n      } else if (this.multi) {\n        if (typeof multiIndex[desc] === 'undefined') {\n          multiIndex[desc] = 0;\n        } else {\n          multiIndex[desc]++;\n        }\n\n        label += `${multiIndex[desc]}. `;\n      }\n\n      label += desc;\n\n      edges[label] = data.attributes;\n    });\n\n    const dummy = {};\n\n    for (const k in this) {\n      if (\n        this.hasOwnProperty(k) &&\n        !EMITTER_PROPS.has(k) &&\n        typeof this[k] !== 'function' &&\n        typeof k !== 'symbol'\n      )\n        dummy[k] = this[k];\n    }\n\n    dummy.attributes = this._attributes;\n    dummy.nodes = nodes;\n    dummy.edges = edges;\n\n    privateProperty(dummy, 'constructor', this.constructor);\n\n    return dummy;\n  }\n}\n\n/**\n * Attaching methods to the prototype.\n *\n * Here, we are attaching a wide variety of methods to the Graph class'\n * prototype when those are very numerous and when their creation is\n * abstracted.\n */\n\n/**\n * Attaching custom inspect method for node >= 10.\n */\nif (typeof Symbol !== 'undefined')\n  Graph.prototype[Symbol.for('nodejs.util.inspect.custom')] =\n    Graph.prototype.inspect;\n\n/**\n * Related to edge addition.\n */\nEDGE_ADD_METHODS.forEach(method => {\n  ['add', 'merge', 'update'].forEach(verb => {\n    const name = method.name(verb);\n    const fn = verb === 'add' ? addEdge : mergeEdge;\n\n    if (method.generateKey) {\n      Graph.prototype[name] = function (source, target, attributes) {\n        return fn(\n          this,\n          name,\n          true,\n          (method.type || this.type) === 'undirected',\n          null,\n          source,\n          target,\n          attributes,\n          verb === 'update'\n        );\n      };\n    } else {\n      Graph.prototype[name] = function (edge, source, target, attributes) {\n        return fn(\n          this,\n          name,\n          false,\n          (method.type || this.type) === 'undirected',\n          edge,\n          source,\n          target,\n          attributes,\n          verb === 'update'\n        );\n      };\n    }\n  });\n});\n\n/**\n * Attributes-related.\n */\nattachNodeAttributesMethods(Graph);\nattachEdgeAttributesMethods(Graph);\n\n/**\n * Edge iteration-related.\n */\nattachEdgeIterationMethods(Graph);\n\n/**\n * Neighbor iteration-related.\n */\nattachNeighborIterationMethods(Graph);\n","/**\n * Graphology Helper Classes\n * ==========================\n *\n * Building some higher-order classes instantiating the graph with\n * predefinite options.\n */\nimport {assign} from './utils';\nimport Graph from './graph';\n\nimport {\n  InvalidArgumentsGraphError,\n  NotFoundGraphError,\n  UsageGraphError\n} from './errors';\n\n/**\n * Alternative constructors.\n */\nclass DirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'directed'}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== false)\n      throw new InvalidArgumentsGraphError(\n        'DirectedGraph.from: inconsistent indication that the graph should be multi in given options!'\n      );\n\n    if (finalOptions.type !== 'directed')\n      throw new InvalidArgumentsGraphError(\n        'DirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass UndirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'undirected'}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== false)\n      throw new InvalidArgumentsGraphError(\n        'UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!'\n      );\n\n    if (finalOptions.type !== 'undirected')\n      throw new InvalidArgumentsGraphError(\n        'UndirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiDirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'directed', multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    if (finalOptions.type !== 'directed')\n      throw new InvalidArgumentsGraphError(\n        'MultiDirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiUndirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'undirected', multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    if (finalOptions.type !== 'undirected')\n      throw new InvalidArgumentsGraphError(\n        'MultiUndirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\n\n/**\n * Attaching static #.from method to each of the constructors.\n */\nfunction attachStaticFromMethod(Class) {\n  /**\n   * Builds a graph from serialized data or another graph's data.\n   *\n   * @param  {Graph|SerializedGraph} data      - Hydratation data.\n   * @param  {object}                [options] - Options.\n   * @return {Class}\n   */\n  Class.from = function (data, options) {\n    // Merging given options with serialized ones\n    const finalOptions = assign({}, data.options, options);\n\n    const instance = new Class(finalOptions);\n    instance.import(data);\n\n    return instance;\n  };\n}\n\nattachStaticFromMethod(Graph);\nattachStaticFromMethod(DirectedGraph);\nattachStaticFromMethod(UndirectedGraph);\nattachStaticFromMethod(MultiGraph);\nattachStaticFromMethod(MultiDirectedGraph);\nattachStaticFromMethod(MultiUndirectedGraph);\n\nGraph.Graph = Graph;\nGraph.DirectedGraph = DirectedGraph;\nGraph.UndirectedGraph = UndirectedGraph;\nGraph.MultiGraph = MultiGraph;\nGraph.MultiDirectedGraph = MultiDirectedGraph;\nGraph.MultiUndirectedGraph = MultiUndirectedGraph;\n\nGraph.InvalidArgumentsGraphError = InvalidArgumentsGraphError;\nGraph.NotFoundGraphError = NotFoundGraphError;\nGraph.UsageGraphError = UsageGraphError;\n\nexport {\n  Graph,\n  DirectedGraph,\n  UndirectedGraph,\n  MultiGraph,\n  MultiDirectedGraph,\n  MultiUndirectedGraph\n};\n","/**\n * Graphology Browser GEXF Endpoint\n * =================================\n *\n * Endpoint gathering both parser & writer for the browser.\n */\nexports.parse = require('./parser.js');\nexports.write = require('../common/writer.js');\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar camera_1 = __importDefault(require(\"./core/camera\"));\nvar mouse_1 = __importDefault(require(\"./core/captors/mouse\"));\nvar quadtree_1 = __importDefault(require(\"./core/quadtree\"));\nvar types_1 = require(\"./types\");\nvar utils_1 = require(\"./utils\");\nvar labels_1 = require(\"./core/labels\");\nvar settings_1 = require(\"./settings\");\nvar touch_1 = __importDefault(require(\"./core/captors/touch\"));\nvar matrices_1 = require(\"./utils/matrices\");\nvar edge_collisions_1 = require(\"./utils/edge-collisions\");\n/**\n * Important functions.\n */\nfunction applyNodeDefaults(settings, key, data) {\n    if (!data.hasOwnProperty(\"x\") || !data.hasOwnProperty(\"y\"))\n        throw new Error(\"Sigma: could not find a valid position (x, y) for node \\\"\".concat(key, \"\\\". All your nodes must have a number \\\"x\\\" and \\\"y\\\". Maybe your forgot to apply a layout or your \\\"nodeReducer\\\" is not returning the correct data?\"));\n    if (!data.color)\n        data.color = settings.defaultNodeColor;\n    if (!data.label && data.label !== \"\")\n        data.label = null;\n    if (data.label !== undefined && data.label !== null)\n        data.label = \"\" + data.label;\n    else\n        data.label = null;\n    if (!data.size)\n        data.size = 2;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n    if (!data.hasOwnProperty(\"highlighted\"))\n        data.highlighted = false;\n    if (!data.hasOwnProperty(\"forceLabel\"))\n        data.forceLabel = false;\n    if (!data.type || data.type === \"\")\n        data.type = settings.defaultNodeType;\n    if (!data.zIndex)\n        data.zIndex = 0;\n    return data;\n}\nfunction applyEdgeDefaults(settings, key, data) {\n    if (!data.color)\n        data.color = settings.defaultEdgeColor;\n    if (!data.label)\n        data.label = \"\";\n    if (!data.size)\n        data.size = 0.5;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n    if (!data.hasOwnProperty(\"forceLabel\"))\n        data.forceLabel = false;\n    if (!data.type || data.type === \"\")\n        data.type = settings.defaultEdgeType;\n    if (!data.zIndex)\n        data.zIndex = 0;\n    return data;\n}\n/**\n * Main class.\n *\n * @constructor\n * @param {Graph}       graph     - Graph to render.\n * @param {HTMLElement} container - DOM container in which to render.\n * @param {object}      settings  - Optional settings.\n */\nvar Sigma = /** @class */ (function (_super) {\n    __extends(Sigma, _super);\n    function Sigma(graph, container, settings) {\n        if (settings === void 0) { settings = {}; }\n        var _this = _super.call(this) || this;\n        _this.elements = {};\n        _this.canvasContexts = {};\n        _this.webGLContexts = {};\n        _this.activeListeners = {};\n        _this.quadtree = new quadtree_1.default();\n        _this.labelGrid = new labels_1.LabelGrid();\n        _this.nodeDataCache = {};\n        _this.edgeDataCache = {};\n        _this.nodesWithForcedLabels = [];\n        _this.edgesWithForcedLabels = [];\n        _this.nodeExtent = { x: [0, 1], y: [0, 1] };\n        _this.matrix = (0, matrices_1.identity)();\n        _this.invMatrix = (0, matrices_1.identity)();\n        _this.correctionRatio = 1;\n        _this.customBBox = null;\n        _this.normalizationFunction = (0, utils_1.createNormalizationFunction)({\n            x: [0, 1],\n            y: [0, 1],\n        });\n        // Cache:\n        _this.cameraSizeRatio = 1;\n        // Starting dimensions and pixel ratio\n        _this.width = 0;\n        _this.height = 0;\n        _this.pixelRatio = (0, utils_1.getPixelRatio)();\n        // State\n        _this.displayedLabels = new Set();\n        _this.highlightedNodes = new Set();\n        _this.hoveredNode = null;\n        _this.hoveredEdge = null;\n        _this.renderFrame = null;\n        _this.renderHighlightedNodesFrame = null;\n        _this.needToProcess = false;\n        _this.needToSoftProcess = false;\n        _this.checkEdgesEventsFrame = null;\n        // Programs\n        _this.nodePrograms = {};\n        _this.hoverNodePrograms = {};\n        _this.edgePrograms = {};\n        _this.settings = (0, utils_1.assign)({}, settings_1.DEFAULT_SETTINGS, settings);\n        // Validating\n        (0, settings_1.validateSettings)(_this.settings);\n        (0, utils_1.validateGraph)(graph);\n        if (!(container instanceof HTMLElement))\n            throw new Error(\"Sigma: container should be an html element.\");\n        // Properties\n        _this.graph = graph;\n        _this.container = container;\n        // Initializing contexts\n        _this.createWebGLContext(\"edges\", { preserveDrawingBuffer: true });\n        _this.createCanvasContext(\"edgeLabels\");\n        _this.createWebGLContext(\"nodes\");\n        _this.createCanvasContext(\"labels\");\n        _this.createCanvasContext(\"hovers\");\n        _this.createWebGLContext(\"hoverNodes\");\n        _this.createCanvasContext(\"mouse\");\n        // Blending\n        for (var key in _this.webGLContexts) {\n            var gl = _this.webGLContexts[key];\n            gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n            gl.enable(gl.BLEND);\n        }\n        // Loading programs\n        for (var type in _this.settings.nodeProgramClasses) {\n            var NodeProgramClass = _this.settings.nodeProgramClasses[type];\n            _this.nodePrograms[type] = new NodeProgramClass(_this.webGLContexts.nodes, _this);\n            _this.hoverNodePrograms[type] = new NodeProgramClass(_this.webGLContexts.hoverNodes, _this);\n        }\n        for (var type in _this.settings.edgeProgramClasses) {\n            var EdgeProgramClass = _this.settings.edgeProgramClasses[type];\n            _this.edgePrograms[type] = new EdgeProgramClass(_this.webGLContexts.edges, _this);\n        }\n        // Initial resize\n        _this.resize();\n        // Initializing the camera\n        _this.camera = new camera_1.default();\n        // Binding camera events\n        _this.bindCameraHandlers();\n        // Initializing captors\n        _this.mouseCaptor = new mouse_1.default(_this.elements.mouse, _this);\n        _this.touchCaptor = new touch_1.default(_this.elements.mouse, _this);\n        // Binding event handlers\n        _this.bindEventHandlers();\n        // Binding graph handlers\n        _this.bindGraphHandlers();\n        // Trigger eventual settings-related things\n        _this.handleSettingsUpdate();\n        // Processing data for the first time & render\n        _this.process();\n        _this.render();\n        return _this;\n    }\n    /**---------------------------------------------------------------------------\n     * Internal methods.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Internal function used to create a canvas element.\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvas = function (id) {\n        var canvas = (0, utils_1.createElement)(\"canvas\", {\n            position: \"absolute\",\n        }, {\n            class: \"sigma-\".concat(id),\n        });\n        this.elements[id] = canvas;\n        this.container.appendChild(canvas);\n        return canvas;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvasContext = function (id) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = {\n            preserveDrawingBuffer: false,\n            antialias: false,\n        };\n        this.canvasContexts[id] = canvas.getContext(\"2d\", contextOptions);\n        return this;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string}  id      - Context's id.\n     * @param  {object?} options - #getContext params to override (optional)\n     * @return {Sigma}\n     */\n    Sigma.prototype.createWebGLContext = function (id, options) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = __assign({ preserveDrawingBuffer: false, antialias: false }, (options || {}));\n        var context;\n        // First we try webgl2 for an easy performance boost\n        context = canvas.getContext(\"webgl2\", contextOptions);\n        // Else we fall back to webgl\n        if (!context)\n            context = canvas.getContext(\"webgl\", contextOptions);\n        // Edge, I am looking right at you...\n        if (!context)\n            context = canvas.getContext(\"experimental-webgl\", contextOptions);\n        this.webGLContexts[id] = context;\n        return this;\n    };\n    /**\n     * Method binding camera handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindCameraHandlers = function () {\n        var _this = this;\n        this.activeListeners.camera = function () {\n            _this._scheduleRefresh();\n        };\n        this.camera.on(\"updated\", this.activeListeners.camera);\n        return this;\n    };\n    /**\n     * Method that checks whether or not a node collides with a given position.\n     */\n    Sigma.prototype.mouseIsOnNode = function (_a, _b, size) {\n        var x = _a.x, y = _a.y;\n        var nodeX = _b.x, nodeY = _b.y;\n        return (x > nodeX - size &&\n            x < nodeX + size &&\n            y > nodeY - size &&\n            y < nodeY + size &&\n            Math.sqrt(Math.pow(x - nodeX, 2) + Math.pow(y - nodeY, 2)) < size);\n    };\n    /**\n     * Method that returns all nodes in quad at a given position.\n     */\n    Sigma.prototype.getQuadNodes = function (position) {\n        var mouseGraphPosition = this.viewportToFramedGraph(position);\n        return this.quadtree.point(mouseGraphPosition.x, 1 - mouseGraphPosition.y);\n    };\n    /**\n     * Method that returns the closest node to a given position.\n     */\n    Sigma.prototype.getNodeAtPosition = function (position) {\n        var x = position.x, y = position.y;\n        var quadNodes = this.getQuadNodes(position);\n        // We will hover the node whose center is closest to mouse\n        var minDistance = Infinity, nodeAtPosition = null;\n        for (var i = 0, l = quadNodes.length; i < l; i++) {\n            var node = quadNodes[i];\n            var data = this.nodeDataCache[node];\n            var nodePosition = this.framedGraphToViewport(data);\n            var size = this.scaleSize(data.size);\n            if (!data.hidden && this.mouseIsOnNode(position, nodePosition, size)) {\n                var distance = Math.sqrt(Math.pow(x - nodePosition.x, 2) + Math.pow(y - nodePosition.y, 2));\n                // TODO: sort by min size also for cases where center is the same\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    nodeAtPosition = node;\n                }\n            }\n        }\n        return nodeAtPosition;\n    };\n    /**\n     * Method binding event handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindEventHandlers = function () {\n        var _this = this;\n        // Handling window resize\n        this.activeListeners.handleResize = function () {\n            _this.needToSoftProcess = true;\n            _this._scheduleRefresh();\n        };\n        window.addEventListener(\"resize\", this.activeListeners.handleResize);\n        // Handling mouse move\n        this.activeListeners.handleMove = function (e) {\n            var baseEvent = {\n                event: e,\n                preventSigmaDefault: function () {\n                    e.preventSigmaDefault();\n                },\n            };\n            var nodeToHover = _this.getNodeAtPosition(e);\n            if (nodeToHover && _this.hoveredNode !== nodeToHover && !_this.nodeDataCache[nodeToHover].hidden) {\n                // Handling passing from one node to the other directly\n                if (_this.hoveredNode)\n                    _this.emit(\"leaveNode\", __assign(__assign({}, baseEvent), { node: _this.hoveredNode }));\n                _this.hoveredNode = nodeToHover;\n                _this.emit(\"enterNode\", __assign(__assign({}, baseEvent), { node: nodeToHover }));\n                _this.scheduleHighlightedNodesRender();\n                return;\n            }\n            // Checking if the hovered node is still hovered\n            if (_this.hoveredNode) {\n                var data = _this.nodeDataCache[_this.hoveredNode];\n                var pos = _this.framedGraphToViewport(data);\n                var size = _this.scaleSize(data.size);\n                if (!_this.mouseIsOnNode(e, pos, size)) {\n                    var node = _this.hoveredNode;\n                    _this.hoveredNode = null;\n                    _this.emit(\"leaveNode\", __assign(__assign({}, baseEvent), { node: node }));\n                    _this.scheduleHighlightedNodesRender();\n                    return;\n                }\n            }\n            if (_this.settings.enableEdgeHoverEvents === true) {\n                _this.checkEdgeHoverEvents(baseEvent);\n            }\n            else if (_this.settings.enableEdgeHoverEvents === \"debounce\") {\n                if (!_this.checkEdgesEventsFrame)\n                    _this.checkEdgesEventsFrame = (0, utils_1.requestFrame)(function () {\n                        _this.checkEdgeHoverEvents(baseEvent);\n                        _this.checkEdgesEventsFrame = null;\n                    });\n            }\n        };\n        // Handling click\n        var createMouseListener = function (eventType) {\n            return function (e) {\n                var baseEvent = {\n                    event: e,\n                    preventSigmaDefault: function () {\n                        e.preventSigmaDefault();\n                    },\n                };\n                var isFakeSigmaMouseEvent = e.original.isFakeSigmaMouseEvent;\n                var nodeAtPosition = isFakeSigmaMouseEvent ? _this.getNodeAtPosition(e) : _this.hoveredNode;\n                if (nodeAtPosition)\n                    return _this.emit(\"\".concat(eventType, \"Node\"), __assign(__assign({}, baseEvent), { node: nodeAtPosition }));\n                if (eventType === \"wheel\" ? _this.settings.enableEdgeWheelEvents : _this.settings.enableEdgeClickEvents) {\n                    var edge = _this.getEdgeAtPoint(e.x, e.y);\n                    if (edge)\n                        return _this.emit(\"\".concat(eventType, \"Edge\"), __assign(__assign({}, baseEvent), { edge: edge }));\n                }\n                return _this.emit(\"\".concat(eventType, \"Stage\"), baseEvent);\n            };\n        };\n        this.activeListeners.handleClick = createMouseListener(\"click\");\n        this.activeListeners.handleRightClick = createMouseListener(\"rightClick\");\n        this.activeListeners.handleDoubleClick = createMouseListener(\"doubleClick\");\n        this.activeListeners.handleWheel = createMouseListener(\"wheel\");\n        this.activeListeners.handleDown = createMouseListener(\"down\");\n        this.mouseCaptor.on(\"mousemove\", this.activeListeners.handleMove);\n        this.mouseCaptor.on(\"click\", this.activeListeners.handleClick);\n        this.mouseCaptor.on(\"rightClick\", this.activeListeners.handleRightClick);\n        this.mouseCaptor.on(\"doubleClick\", this.activeListeners.handleDoubleClick);\n        this.mouseCaptor.on(\"wheel\", this.activeListeners.handleWheel);\n        this.mouseCaptor.on(\"mousedown\", this.activeListeners.handleDown);\n        // TODO\n        // Deal with Touch captor events\n        return this;\n    };\n    /**\n     * Method binding graph handlers\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindGraphHandlers = function () {\n        var _this = this;\n        var graph = this.graph;\n        this.activeListeners.graphUpdate = function () {\n            _this.needToProcess = true;\n            _this._scheduleRefresh();\n        };\n        this.activeListeners.softGraphUpdate = function () {\n            _this.needToSoftProcess = true;\n            _this._scheduleRefresh();\n        };\n        this.activeListeners.dropNodeGraphUpdate = function (e) {\n            delete _this.nodeDataCache[e.key];\n            if (_this.hoveredNode === e.key)\n                _this.hoveredNode = null;\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.dropEdgeGraphUpdate = function (e) {\n            delete _this.edgeDataCache[e.key];\n            if (_this.hoveredEdge === e.key)\n                _this.hoveredEdge = null;\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.clearEdgesGraphUpdate = function () {\n            _this.edgeDataCache = {};\n            _this.hoveredEdge = null;\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.clearGraphUpdate = function () {\n            _this.nodeDataCache = {};\n            _this.hoveredNode = null;\n            _this.activeListeners.clearEdgesGraphUpdate();\n        };\n        graph.on(\"nodeAdded\", this.activeListeners.graphUpdate);\n        graph.on(\"nodeDropped\", this.activeListeners.dropNodeGraphUpdate);\n        graph.on(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeAdded\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeDropped\", this.activeListeners.dropEdgeGraphUpdate);\n        graph.on(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgesCleared\", this.activeListeners.clearEdgesGraphUpdate);\n        graph.on(\"cleared\", this.activeListeners.clearGraphUpdate);\n        return this;\n    };\n    /**\n     * Method dealing with \"leaveEdge\" and \"enterEdge\" events.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.checkEdgeHoverEvents = function (payload) {\n        var edgeToHover = this.hoveredNode ? null : this.getEdgeAtPoint(payload.event.x, payload.event.y);\n        if (edgeToHover !== this.hoveredEdge) {\n            if (this.hoveredEdge)\n                this.emit(\"leaveEdge\", __assign(__assign({}, payload), { edge: this.hoveredEdge }));\n            if (edgeToHover)\n                this.emit(\"enterEdge\", __assign(__assign({}, payload), { edge: edgeToHover }));\n            this.hoveredEdge = edgeToHover;\n        }\n        return this;\n    };\n    /**\n     * Method looking for an edge colliding with a given point at (x, y). Returns\n     * the key of the edge if any, or null else.\n     */\n    Sigma.prototype.getEdgeAtPoint = function (x, y) {\n        var e_1, _a;\n        var _this = this;\n        var _b = this, edgeDataCache = _b.edgeDataCache, nodeDataCache = _b.nodeDataCache;\n        // Check first that pixel is colored:\n        // Note that mouse positions must be corrected by pixel ratio to correctly\n        // index the drawing buffer.\n        if (!(0, edge_collisions_1.isPixelColored)(this.webGLContexts.edges, x * this.pixelRatio, y * this.pixelRatio))\n            return null;\n        // Check for each edge if it collides with the point:\n        var _c = this.viewportToGraph({ x: x, y: y }), graphX = _c.x, graphY = _c.y;\n        // To translate edge thicknesses to the graph system, we observe by how much\n        // the length of a non-null edge is transformed to between the graph system\n        // and the viewport system:\n        var transformationRatio = 0;\n        this.graph.someEdge(function (key, _, sourceId, targetId, _a, _b) {\n            var xs = _a.x, ys = _a.y;\n            var xt = _b.x, yt = _b.y;\n            if (edgeDataCache[key].hidden || nodeDataCache[sourceId].hidden || nodeDataCache[targetId].hidden)\n                return false;\n            if (xs !== xt || ys !== yt) {\n                var graphLength = Math.sqrt(Math.pow(xt - xs, 2) + Math.pow(yt - ys, 2));\n                var _c = _this.graphToViewport({ x: xs, y: ys }), vp_xs = _c.x, vp_ys = _c.y;\n                var _d = _this.graphToViewport({ x: xt, y: yt }), vp_xt = _d.x, vp_yt = _d.y;\n                var viewportLength = Math.sqrt(Math.pow(vp_xt - vp_xs, 2) + Math.pow(vp_yt - vp_ys, 2));\n                transformationRatio = graphLength / viewportLength;\n                return true;\n            }\n        });\n        // If no non-null edge has been found, return null:\n        if (!transformationRatio)\n            return null;\n        // Now we can look for matching edges:\n        var edges = this.graph.filterEdges(function (key, edgeAttributes, sourceId, targetId, sourcePosition, targetPosition) {\n            if (edgeDataCache[key].hidden || nodeDataCache[sourceId].hidden || nodeDataCache[targetId].hidden)\n                return false;\n            if ((0, edge_collisions_1.doEdgeCollideWithPoint)(graphX, graphY, sourcePosition.x, sourcePosition.y, targetPosition.x, targetPosition.y, \n            // Adapt the edge size to the zoom ratio:\n            (edgeDataCache[key].size * transformationRatio) / _this.cameraSizeRatio)) {\n                return true;\n            }\n        });\n        if (edges.length === 0)\n            return null; // no edges found\n        // if none of the edges have a zIndex, selected the most recently created one to match the rendering order\n        var selectedEdge = edges[edges.length - 1];\n        // otherwise select edge with highest zIndex\n        var highestZIndex = -Infinity;\n        try {\n            for (var edges_1 = __values(edges), edges_1_1 = edges_1.next(); !edges_1_1.done; edges_1_1 = edges_1.next()) {\n                var edge = edges_1_1.value;\n                var zIndex = this.graph.getEdgeAttribute(edge, \"zIndex\");\n                if (zIndex >= highestZIndex) {\n                    selectedEdge = edge;\n                    highestZIndex = zIndex;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (edges_1_1 && !edges_1_1.done && (_a = edges_1.return)) _a.call(edges_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return selectedEdge;\n    };\n    /**\n     * Method used to process the whole graph's data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.process = function (keepArrays) {\n        var _this = this;\n        if (keepArrays === void 0) { keepArrays = false; }\n        var graph = this.graph;\n        var settings = this.settings;\n        var dimensions = this.getDimensions();\n        var nodeZExtent = [Infinity, -Infinity];\n        var edgeZExtent = [Infinity, -Infinity];\n        // Clearing the quad\n        this.quadtree.clear();\n        // Resetting the label grid\n        // TODO: it's probably better to do this explicitly or on resizes for layout and anims\n        this.labelGrid.resizeAndClear(dimensions, settings.labelGridCellSize);\n        // Clear the highlightedNodes\n        this.highlightedNodes = new Set();\n        // Computing extents\n        this.nodeExtent = (0, utils_1.graphExtent)(graph);\n        // Resetting `forceLabel` indices\n        this.nodesWithForcedLabels = [];\n        this.edgesWithForcedLabels = [];\n        // NOTE: it is important to compute this matrix after computing the node's extent\n        // because #.getGraphDimensions relies on it\n        var nullCamera = new camera_1.default();\n        var nullCameraMatrix = (0, utils_1.matrixFromCamera)(nullCamera.getState(), this.getDimensions(), this.getGraphDimensions(), this.getSetting(\"stagePadding\") || 0);\n        // Rescaling function\n        this.normalizationFunction = (0, utils_1.createNormalizationFunction)(this.customBBox || this.nodeExtent);\n        var nodesPerPrograms = {};\n        var nodes = graph.nodes();\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            var node = nodes[i];\n            // Node display data resolution:\n            //   1. First we get the node's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            //   4. We apply the normalization function\n            // We shallow copy node data to avoid dangerous behaviors from reducers\n            var attr = Object.assign({}, graph.getNodeAttributes(node));\n            if (settings.nodeReducer)\n                attr = settings.nodeReducer(node, attr);\n            var data = applyNodeDefaults(this.settings, node, attr);\n            nodesPerPrograms[data.type] = (nodesPerPrograms[data.type] || 0) + 1;\n            this.nodeDataCache[node] = data;\n            this.normalizationFunction.applyTo(data);\n            if (data.forceLabel)\n                this.nodesWithForcedLabels.push(node);\n            if (this.settings.zIndex) {\n                if (data.zIndex < nodeZExtent[0])\n                    nodeZExtent[0] = data.zIndex;\n                if (data.zIndex > nodeZExtent[1])\n                    nodeZExtent[1] = data.zIndex;\n            }\n        }\n        for (var type in this.nodePrograms) {\n            if (!this.nodePrograms.hasOwnProperty(type)) {\n                throw new Error(\"Sigma: could not find a suitable program for node type \\\"\".concat(type, \"\\\"!\"));\n            }\n            if (!keepArrays)\n                this.nodePrograms[type].allocate(nodesPerPrograms[type] || 0);\n            // We reset that count here, so that we can reuse it while calling the Program#process methods:\n            nodesPerPrograms[type] = 0;\n        }\n        // Handling node z-index\n        // TODO: z-index needs us to compute display data before hand\n        if (this.settings.zIndex && nodeZExtent[0] !== nodeZExtent[1])\n            nodes = (0, utils_1.zIndexOrdering)(nodeZExtent, function (node) { return _this.nodeDataCache[node].zIndex; }, nodes);\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            var node = nodes[i];\n            var data = this.nodeDataCache[node];\n            this.quadtree.add(node, data.x, 1 - data.y, data.size / this.width);\n            if (typeof data.label === \"string\" && !data.hidden)\n                this.labelGrid.add(node, data.size, this.framedGraphToViewport(data, { matrix: nullCameraMatrix }));\n            this.nodePrograms[data.type].process(data, data.hidden, nodesPerPrograms[data.type]++);\n            // Save the node in the highlighted set if needed\n            if (data.highlighted && !data.hidden)\n                this.highlightedNodes.add(node);\n        }\n        this.labelGrid.organize();\n        var edgesPerPrograms = {};\n        var edges = graph.edges();\n        for (var i = 0, l = edges.length; i < l; i++) {\n            var edge = edges[i];\n            // Edge display data resolution:\n            //   1. First we get the edge's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            // We shallow copy edge data to avoid dangerous behaviors from reducers\n            var attr = Object.assign({}, graph.getEdgeAttributes(edge));\n            if (settings.edgeReducer)\n                attr = settings.edgeReducer(edge, attr);\n            var data = applyEdgeDefaults(this.settings, edge, attr);\n            edgesPerPrograms[data.type] = (edgesPerPrograms[data.type] || 0) + 1;\n            this.edgeDataCache[edge] = data;\n            if (data.forceLabel && !data.hidden)\n                this.edgesWithForcedLabels.push(edge);\n            if (this.settings.zIndex) {\n                if (data.zIndex < edgeZExtent[0])\n                    edgeZExtent[0] = data.zIndex;\n                if (data.zIndex > edgeZExtent[1])\n                    edgeZExtent[1] = data.zIndex;\n            }\n        }\n        for (var type in this.edgePrograms) {\n            if (!this.edgePrograms.hasOwnProperty(type)) {\n                throw new Error(\"Sigma: could not find a suitable program for edge type \\\"\".concat(type, \"\\\"!\"));\n            }\n            if (!keepArrays)\n                this.edgePrograms[type].allocate(edgesPerPrograms[type] || 0);\n            // We reset that count here, so that we can reuse it while calling the Program#process methods:\n            edgesPerPrograms[type] = 0;\n        }\n        // Handling edge z-index\n        if (this.settings.zIndex && edgeZExtent[0] !== edgeZExtent[1])\n            edges = (0, utils_1.zIndexOrdering)(edgeZExtent, function (edge) { return _this.edgeDataCache[edge].zIndex; }, edges);\n        for (var i = 0, l = edges.length; i < l; i++) {\n            var edge = edges[i];\n            var data = this.edgeDataCache[edge];\n            var extremities = graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]];\n            var hidden = data.hidden || sourceData.hidden || targetData.hidden;\n            this.edgePrograms[data.type].process(sourceData, targetData, data, hidden, edgesPerPrograms[data.type]++);\n        }\n        for (var type in this.edgePrograms) {\n            var program = this.edgePrograms[type];\n            if (!keepArrays && typeof program.computeIndices === \"function\")\n                program.computeIndices();\n        }\n        return this;\n    };\n    /**\n     * Method that backports potential settings updates where it's needed.\n     * @private\n     */\n    Sigma.prototype.handleSettingsUpdate = function () {\n        this.camera.minRatio = this.settings.minCameraRatio;\n        this.camera.maxRatio = this.settings.maxCameraRatio;\n        this.camera.setState(this.camera.validateState(this.camera.getState()));\n        return this;\n    };\n    /**\n     * Method that decides whether to reprocess graph or not, and then render the\n     * graph.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype._refresh = function () {\n        // Do we need to process data?\n        if (this.needToProcess) {\n            this.process();\n        }\n        else if (this.needToSoftProcess) {\n            this.process(true);\n        }\n        // Resetting state\n        this.needToProcess = false;\n        this.needToSoftProcess = false;\n        // Rendering\n        this.render();\n        return this;\n    };\n    /**\n     * Method that schedules a `_refresh` call if none has been scheduled yet. It\n     * will then be processed next available frame.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype._scheduleRefresh = function () {\n        var _this = this;\n        if (!this.renderFrame) {\n            this.renderFrame = (0, utils_1.requestFrame)(function () {\n                _this._refresh();\n                _this.renderFrame = null;\n            });\n        }\n        return this;\n    };\n    /**\n     * Method used to render labels.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderLabels = function () {\n        if (!this.settings.renderLabels)\n            return this;\n        var cameraState = this.camera.getState();\n        // Finding visible nodes to display their labels\n        var visibleNodes;\n        if (cameraState.ratio >= 1) {\n            // Camera is unzoomed so no need to ask the quadtree for visible nodes\n            visibleNodes = new Set(this.graph.nodes());\n        }\n        else {\n            // Let's ask the quadtree\n            var viewRectangle = this.viewRectangle();\n            visibleNodes = new Set(this.quadtree.rectangle(viewRectangle.x1, 1 - viewRectangle.y1, viewRectangle.x2, 1 - viewRectangle.y2, viewRectangle.height));\n        }\n        // Selecting labels to draw\n        // TODO: drop gridsettings likewise\n        // TODO: optimize through visible nodes\n        var labelsToDisplay = this.labelGrid\n            .getLabelsToDisplay(cameraState.ratio, this.settings.labelDensity)\n            .concat(this.nodesWithForcedLabels);\n        this.displayedLabels = new Set();\n        // Drawing labels\n        var context = this.canvasContexts.labels;\n        for (var i = 0, l = labelsToDisplay.length; i < l; i++) {\n            var node = labelsToDisplay[i];\n            var data = this.nodeDataCache[node];\n            // If the node was already drawn (like if it is eligible AND has\n            // `forceLabel`), we don't want to draw it again\n            if (this.displayedLabels.has(node))\n                continue;\n            // If the node is hidden, we don't need to display its label obviously\n            if (data.hidden)\n                continue;\n            var _a = this.framedGraphToViewport(data), x = _a.x, y = _a.y;\n            // TODO: we can cache the labels we need to render until the camera's ratio changes\n            // TODO: this should be computed in the canvas components?\n            var size = this.scaleSize(data.size);\n            if (!data.forceLabel && size < this.settings.labelRenderedSizeThreshold)\n                continue;\n            if (!visibleNodes.has(node))\n                continue;\n            // TODO:\n            // Because displayed edge labels depend directly on actually rendered node\n            // labels, we need to only add to this.displayedLabels nodes whose label\n            // is rendered.\n            // This makes this.displayedLabels depend on viewport, which might become\n            // an issue once we start memoizing getLabelsToDisplay.\n            this.displayedLabels.add(node);\n            this.settings.labelRenderer(context, __assign(__assign({ key: node }, data), { size: size, x: x, y: y }), this.settings);\n        }\n        return this;\n    };\n    /**\n     * Method used to render edge labels, based on which node labels were\n     * rendered.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderEdgeLabels = function () {\n        if (!this.settings.renderEdgeLabels)\n            return this;\n        var context = this.canvasContexts.edgeLabels;\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        var edgeLabelsToDisplay = (0, labels_1.edgeLabelsToDisplayFromNodes)({\n            graph: this.graph,\n            hoveredNode: this.hoveredNode,\n            displayedNodeLabels: this.displayedLabels,\n            highlightedNodes: this.highlightedNodes,\n        }).concat(this.edgesWithForcedLabels);\n        var displayedLabels = new Set();\n        for (var i = 0, l = edgeLabelsToDisplay.length; i < l; i++) {\n            var edge = edgeLabelsToDisplay[i], extremities = this.graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]], edgeData = this.edgeDataCache[edge];\n            // If the edge was already drawn (like if it is eligible AND has\n            // `forceLabel`), we don't want to draw it again\n            if (displayedLabels.has(edge))\n                continue;\n            // If the edge is hidden we don't need to display its label\n            // NOTE: the test on sourceData & targetData is probably paranoid at this point?\n            if (edgeData.hidden || sourceData.hidden || targetData.hidden) {\n                continue;\n            }\n            this.settings.edgeLabelRenderer(context, __assign(__assign({ key: edge }, edgeData), { size: this.scaleSize(edgeData.size) }), __assign(__assign(__assign({ key: extremities[0] }, sourceData), this.framedGraphToViewport(sourceData)), { size: this.scaleSize(sourceData.size) }), __assign(__assign(__assign({ key: extremities[1] }, targetData), this.framedGraphToViewport(targetData)), { size: this.scaleSize(targetData.size) }), this.settings);\n            displayedLabels.add(edge);\n        }\n        return this;\n    };\n    /**\n     * Method used to render the highlighted nodes.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderHighlightedNodes = function () {\n        var _this = this;\n        var context = this.canvasContexts.hovers;\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        // Rendering\n        var render = function (node) {\n            var data = _this.nodeDataCache[node];\n            var _a = _this.framedGraphToViewport(data), x = _a.x, y = _a.y;\n            var size = _this.scaleSize(data.size);\n            _this.settings.hoverRenderer(context, __assign(__assign({ key: node }, data), { size: size, x: x, y: y }), _this.settings);\n        };\n        var nodesToRender = [];\n        if (this.hoveredNode && !this.nodeDataCache[this.hoveredNode].hidden) {\n            nodesToRender.push(this.hoveredNode);\n        }\n        this.highlightedNodes.forEach(function (node) {\n            // The hovered node has already been highlighted\n            if (node !== _this.hoveredNode)\n                nodesToRender.push(node);\n        });\n        // Draw labels:\n        nodesToRender.forEach(function (node) { return render(node); });\n        // Draw WebGL nodes on top of the labels:\n        var nodesPerPrograms = {};\n        // 1. Count nodes per type:\n        nodesToRender.forEach(function (node) {\n            var type = _this.nodeDataCache[node].type;\n            nodesPerPrograms[type] = (nodesPerPrograms[type] || 0) + 1;\n        });\n        // 2. Allocate for each type for the proper number of nodes\n        for (var type in this.hoverNodePrograms) {\n            this.hoverNodePrograms[type].allocate(nodesPerPrograms[type] || 0);\n            // Also reset count, to use when rendering:\n            nodesPerPrograms[type] = 0;\n        }\n        // 3. Process all nodes to render:\n        nodesToRender.forEach(function (node) {\n            var data = _this.nodeDataCache[node];\n            _this.hoverNodePrograms[data.type].process(data, data.hidden, nodesPerPrograms[data.type]++);\n        });\n        // 4. Clear hovered nodes layer:\n        this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);\n        // 5. Render:\n        for (var type in this.hoverNodePrograms) {\n            var program = this.hoverNodePrograms[type];\n            program.bind();\n            program.bufferData();\n            program.render({\n                matrix: this.matrix,\n                width: this.width,\n                height: this.height,\n                ratio: this.camera.ratio,\n                correctionRatio: this.correctionRatio / this.camera.ratio,\n                scalingRatio: this.pixelRatio,\n            });\n        }\n    };\n    /**\n     * Method used to schedule a hover render.\n     *\n     */\n    Sigma.prototype.scheduleHighlightedNodesRender = function () {\n        var _this = this;\n        if (this.renderHighlightedNodesFrame || this.renderFrame)\n            return;\n        this.renderHighlightedNodesFrame = (0, utils_1.requestFrame)(function () {\n            // Resetting state\n            _this.renderHighlightedNodesFrame = null;\n            // Rendering\n            _this.renderHighlightedNodes();\n            _this.renderEdgeLabels();\n        });\n    };\n    /**\n     * Method used to render.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.render = function () {\n        var _this = this;\n        this.emit(\"beforeRender\");\n        var handleEscape = function () {\n            _this.emit(\"afterRender\");\n            return _this;\n        };\n        // If a render was scheduled, we cancel it\n        if (this.renderFrame) {\n            (0, utils_1.cancelFrame)(this.renderFrame);\n            this.renderFrame = null;\n            this.needToProcess = false;\n            this.needToSoftProcess = false;\n        }\n        // First we need to resize\n        this.resize();\n        // Clearing the canvases\n        this.clear();\n        // Recomputing useful camera-related values:\n        this.updateCachedValues();\n        // If we have no nodes we can stop right there\n        if (!this.graph.order)\n            return handleEscape();\n        // TODO: improve this heuristic or move to the captor itself?\n        // TODO: deal with the touch captor here as well\n        var mouseCaptor = this.mouseCaptor;\n        var moving = this.camera.isAnimated() ||\n            mouseCaptor.isMoving ||\n            mouseCaptor.draggedEvents ||\n            mouseCaptor.currentWheelDirection;\n        // Then we need to extract a matrix from the camera\n        var cameraState = this.camera.getState();\n        var viewportDimensions = this.getDimensions();\n        var graphDimensions = this.getGraphDimensions();\n        var padding = this.getSetting(\"stagePadding\") || 0;\n        this.matrix = (0, utils_1.matrixFromCamera)(cameraState, viewportDimensions, graphDimensions, padding);\n        this.invMatrix = (0, utils_1.matrixFromCamera)(cameraState, viewportDimensions, graphDimensions, padding, true);\n        this.correctionRatio = (0, utils_1.getMatrixImpact)(this.matrix, cameraState, viewportDimensions);\n        // Drawing nodes\n        for (var type in this.nodePrograms) {\n            var program = this.nodePrograms[type];\n            program.bind();\n            program.bufferData();\n            program.render({\n                matrix: this.matrix,\n                width: this.width,\n                height: this.height,\n                ratio: cameraState.ratio,\n                correctionRatio: this.correctionRatio / cameraState.ratio,\n                scalingRatio: this.pixelRatio,\n            });\n        }\n        // Drawing edges\n        if (!this.settings.hideEdgesOnMove || !moving) {\n            for (var type in this.edgePrograms) {\n                var program = this.edgePrograms[type];\n                program.bind();\n                program.bufferData();\n                program.render({\n                    matrix: this.matrix,\n                    width: this.width,\n                    height: this.height,\n                    ratio: cameraState.ratio,\n                    correctionRatio: this.correctionRatio / cameraState.ratio,\n                    scalingRatio: this.pixelRatio,\n                });\n            }\n        }\n        // Do not display labels on move per setting\n        if (this.settings.hideLabelsOnMove && moving)\n            return handleEscape();\n        this.renderLabels();\n        this.renderEdgeLabels();\n        this.renderHighlightedNodes();\n        return handleEscape();\n    };\n    /**\n     * Internal method used to update expensive and therefore cached values\n     * each time the camera state is updated.\n     */\n    Sigma.prototype.updateCachedValues = function () {\n        var ratio = this.camera.getState().ratio;\n        this.cameraSizeRatio = Math.sqrt(ratio);\n    };\n    /**---------------------------------------------------------------------------\n     * Public API.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Method returning the renderer's camera.\n     *\n     * @return {Camera}\n     */\n    Sigma.prototype.getCamera = function () {\n        return this.camera;\n    };\n    /**\n     * Method returning the container DOM element.\n     *\n     * @return {HTMLElement}\n     */\n    Sigma.prototype.getContainer = function () {\n        return this.container;\n    };\n    /**\n     * Method returning the renderer's graph.\n     *\n     * @return {Graph}\n     */\n    Sigma.prototype.getGraph = function () {\n        return this.graph;\n    };\n    /**\n     * Method returning the mouse captor.\n     *\n     * @return {MouseCaptor}\n     */\n    Sigma.prototype.getMouseCaptor = function () {\n        return this.mouseCaptor;\n    };\n    /**\n     * Method returning the touch captor.\n     *\n     * @return {TouchCaptor}\n     */\n    Sigma.prototype.getTouchCaptor = function () {\n        return this.touchCaptor;\n    };\n    /**\n     * Method returning the current renderer's dimensions.\n     *\n     * @return {Dimensions}\n     */\n    Sigma.prototype.getDimensions = function () {\n        return { width: this.width, height: this.height };\n    };\n    /**\n     * Method returning the current graph's dimensions.\n     *\n     * @return {Dimensions}\n     */\n    Sigma.prototype.getGraphDimensions = function () {\n        var extent = this.customBBox || this.nodeExtent;\n        return {\n            width: extent.x[1] - extent.x[0] || 1,\n            height: extent.y[1] - extent.y[0] || 1,\n        };\n    };\n    /**\n     * Method used to get all the sigma node attributes.\n     * It's usefull for example to get the position of a node\n     * and to get values that are set by the nodeReducer\n     *\n     * @param  {string} key - The node's key.\n     * @return {NodeDisplayData | undefined} A copy of the desired node's attribute or undefined if not found\n     */\n    Sigma.prototype.getNodeDisplayData = function (key) {\n        var node = this.nodeDataCache[key];\n        return node ? Object.assign({}, node) : undefined;\n    };\n    /**\n     * Method used to get all the sigma edge attributes.\n     * It's usefull for example to get values that are set by the edgeReducer.\n     *\n     * @param  {string} key - The edge's key.\n     * @return {EdgeDisplayData | undefined} A copy of the desired edge's attribute or undefined if not found\n     */\n    Sigma.prototype.getEdgeDisplayData = function (key) {\n        var edge = this.edgeDataCache[key];\n        return edge ? Object.assign({}, edge) : undefined;\n    };\n    /**\n     * Method returning a copy of the settings collection.\n     *\n     * @return {Settings} A copy of the settings collection.\n     */\n    Sigma.prototype.getSettings = function () {\n        return __assign({}, this.settings);\n    };\n    /**\n     * Method returning the current value for a given setting key.\n     *\n     * @param  {string} key - The setting key to get.\n     * @return {any} The value attached to this setting key or undefined if not found\n     */\n    Sigma.prototype.getSetting = function (key) {\n        return this.settings[key];\n    };\n    /**\n     * Method setting the value of a given setting key. Note that this will schedule\n     * a new render next frame.\n     *\n     * @param  {string} key - The setting key to set.\n     * @param  {any}    value - The value to set.\n     * @return {Sigma}\n     */\n    Sigma.prototype.setSetting = function (key, value) {\n        this.settings[key] = value;\n        (0, settings_1.validateSettings)(this.settings);\n        this.handleSettingsUpdate();\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method updating the value of a given setting key using the provided function.\n     * Note that this will schedule a new render next frame.\n     *\n     * @param  {string}   key     - The setting key to set.\n     * @param  {function} updater - The update function.\n     * @return {Sigma}\n     */\n    Sigma.prototype.updateSetting = function (key, updater) {\n        this.settings[key] = updater(this.settings[key]);\n        (0, settings_1.validateSettings)(this.settings);\n        this.handleSettingsUpdate();\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to resize the renderer.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.resize = function () {\n        var previousWidth = this.width, previousHeight = this.height;\n        this.width = this.container.offsetWidth;\n        this.height = this.container.offsetHeight;\n        this.pixelRatio = (0, utils_1.getPixelRatio)();\n        if (this.width === 0) {\n            if (this.settings.allowInvalidContainer)\n                this.width = 1;\n            else\n                throw new Error(\"Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.\");\n        }\n        if (this.height === 0) {\n            if (this.settings.allowInvalidContainer)\n                this.height = 1;\n            else\n                throw new Error(\"Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.\");\n        }\n        // If nothing has changed, we can stop right here\n        if (previousWidth === this.width && previousHeight === this.height)\n            return this;\n        this.emit(\"resize\");\n        // Sizing dom elements\n        for (var id in this.elements) {\n            var element = this.elements[id];\n            element.style.width = this.width + \"px\";\n            element.style.height = this.height + \"px\";\n        }\n        // Sizing canvas contexts\n        for (var id in this.canvasContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * this.pixelRatio + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * this.pixelRatio + \"px\");\n            if (this.pixelRatio !== 1)\n                this.canvasContexts[id].scale(this.pixelRatio, this.pixelRatio);\n        }\n        // Sizing WebGL contexts\n        for (var id in this.webGLContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * this.pixelRatio + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * this.pixelRatio + \"px\");\n            this.webGLContexts[id].viewport(0, 0, this.width * this.pixelRatio, this.height * this.pixelRatio);\n        }\n        return this;\n    };\n    /**\n     * Method used to clear all the canvases.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.clear = function () {\n        this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT);\n        this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT);\n        this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);\n        this.canvasContexts.labels.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.hovers.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.edgeLabels.clearRect(0, 0, this.width, this.height);\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.refresh = function () {\n        this.needToProcess = true;\n        this._refresh();\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data, at the next available frame.\n     * If this method has already been called this frame, then it will only render once at the next available frame.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.scheduleRefresh = function () {\n        this.needToProcess = true;\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to (un)zoom, while preserving the position of a viewport point.\n     * Used for instance to zoom \"on the mouse cursor\".\n     *\n     * @param viewportTarget\n     * @param newRatio\n     * @return {CameraState}\n     */\n    Sigma.prototype.getViewportZoomedState = function (viewportTarget, newRatio) {\n        var _a = this.camera.getState(), ratio = _a.ratio, angle = _a.angle, x = _a.x, y = _a.y;\n        // TODO: handle max zoom\n        var ratioDiff = newRatio / ratio;\n        var center = {\n            x: this.width / 2,\n            y: this.height / 2,\n        };\n        var graphMousePosition = this.viewportToFramedGraph(viewportTarget);\n        var graphCenterPosition = this.viewportToFramedGraph(center);\n        return {\n            angle: angle,\n            x: (graphMousePosition.x - graphCenterPosition.x) * (1 - ratioDiff) + x,\n            y: (graphMousePosition.y - graphCenterPosition.y) * (1 - ratioDiff) + y,\n            ratio: newRatio,\n        };\n    };\n    /**\n     * Method returning the abstract rectangle containing the graph according\n     * to the camera's state.\n     *\n     * @return {object} - The view's rectangle.\n     */\n    Sigma.prototype.viewRectangle = function () {\n        // TODO: reduce relative margin?\n        var marginX = (0 * this.width) / 8, marginY = (0 * this.height) / 8;\n        var p1 = this.viewportToFramedGraph({ x: 0 - marginX, y: 0 - marginY }), p2 = this.viewportToFramedGraph({ x: this.width + marginX, y: 0 - marginY }), h = this.viewportToFramedGraph({ x: 0, y: this.height + marginY });\n        return {\n            x1: p1.x,\n            y1: p1.y,\n            x2: p2.x,\n            y2: p2.y,\n            height: p2.y - h.y,\n        };\n    };\n    /**\n     * Method returning the coordinates of a point from the framed graph system to the viewport system. It allows\n     * overriding anything that is used to get the translation matrix, or even the matrix itself.\n     *\n     * Be careful if overriding dimensions, padding or cameraState, as the computation of the matrix is not the lightest\n     * of computations.\n     */\n    Sigma.prototype.framedGraphToViewport = function (coordinates, override) {\n        if (override === void 0) { override = {}; }\n        var recomputeMatrix = !!override.cameraState || !!override.viewportDimensions || !!override.graphDimensions;\n        var matrix = override.matrix\n            ? override.matrix\n            : recomputeMatrix\n                ? (0, utils_1.matrixFromCamera)(override.cameraState || this.camera.getState(), override.viewportDimensions || this.getDimensions(), override.graphDimensions || this.getGraphDimensions(), override.padding || this.getSetting(\"stagePadding\") || 0)\n                : this.matrix;\n        var viewportPos = (0, matrices_1.multiplyVec2)(matrix, coordinates);\n        return {\n            x: ((1 + viewportPos.x) * this.width) / 2,\n            y: ((1 - viewportPos.y) * this.height) / 2,\n        };\n    };\n    /**\n     * Method returning the coordinates of a point from the viewport system to the framed graph system. It allows\n     * overriding anything that is used to get the translation matrix, or even the matrix itself.\n     *\n     * Be careful if overriding dimensions, padding or cameraState, as the computation of the matrix is not the lightest\n     * of computations.\n     */\n    Sigma.prototype.viewportToFramedGraph = function (coordinates, override) {\n        if (override === void 0) { override = {}; }\n        var recomputeMatrix = !!override.cameraState || !!override.viewportDimensions || !override.graphDimensions;\n        var invMatrix = override.matrix\n            ? override.matrix\n            : recomputeMatrix\n                ? (0, utils_1.matrixFromCamera)(override.cameraState || this.camera.getState(), override.viewportDimensions || this.getDimensions(), override.graphDimensions || this.getGraphDimensions(), override.padding || this.getSetting(\"stagePadding\") || 0, true)\n                : this.invMatrix;\n        var res = (0, matrices_1.multiplyVec2)(invMatrix, {\n            x: (coordinates.x / this.width) * 2 - 1,\n            y: 1 - (coordinates.y / this.height) * 2,\n        });\n        if (isNaN(res.x))\n            res.x = 0;\n        if (isNaN(res.y))\n            res.y = 0;\n        return res;\n    };\n    /**\n     * Method used to translate a point's coordinates from the viewport system (pixel distance from the top-left of the\n     * stage) to the graph system (the reference system of data as they are in the given graph instance).\n     *\n     * This method accepts an optional camera which can be useful if you need to translate coordinates\n     * based on a different view than the one being currently being displayed on screen.\n     *\n     * @param {Coordinates}                  viewportPoint\n     * @param {CoordinateConversionOverride} override\n     */\n    Sigma.prototype.viewportToGraph = function (viewportPoint, override) {\n        if (override === void 0) { override = {}; }\n        return this.normalizationFunction.inverse(this.viewportToFramedGraph(viewportPoint, override));\n    };\n    /**\n     * Method used to translate a point's coordinates from the graph system (the reference system of data as they are in\n     * the given graph instance) to the viewport system (pixel distance from the top-left of the stage).\n     *\n     * This method accepts an optional camera which can be useful if you need to translate coordinates\n     * based on a different view than the one being currently being displayed on screen.\n     *\n     * @param {Coordinates}                  graphPoint\n     * @param {CoordinateConversionOverride} override\n     */\n    Sigma.prototype.graphToViewport = function (graphPoint, override) {\n        if (override === void 0) { override = {}; }\n        return this.framedGraphToViewport(this.normalizationFunction(graphPoint), override);\n    };\n    /**\n     * Method returning the graph's bounding box.\n     *\n     * @return {{ x: Extent, y: Extent }}\n     */\n    Sigma.prototype.getBBox = function () {\n        return (0, utils_1.graphExtent)(this.graph);\n    };\n    /**\n     * Method returning the graph's custom bounding box, if any.\n     *\n     * @return {{ x: Extent, y: Extent } | null}\n     */\n    Sigma.prototype.getCustomBBox = function () {\n        return this.customBBox;\n    };\n    /**\n     * Method used to override the graph's bounding box with a custom one. Give `null` as the argument to stop overriding.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.setCustomBBox = function (customBBox) {\n        this.customBBox = customBBox;\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to shut the container & release event listeners.\n     *\n     * @return {undefined}\n     */\n    Sigma.prototype.kill = function () {\n        var graph = this.graph;\n        // Emitting \"kill\" events so that plugins and such can cleanup\n        this.emit(\"kill\");\n        // Releasing events\n        this.removeAllListeners();\n        // Releasing camera handlers\n        this.camera.removeListener(\"updated\", this.activeListeners.camera);\n        // Releasing DOM events & captors\n        window.removeEventListener(\"resize\", this.activeListeners.handleResize);\n        this.mouseCaptor.kill();\n        this.touchCaptor.kill();\n        // Releasing graph handlers\n        graph.removeListener(\"nodeAdded\", this.activeListeners.dropNodeGraphUpdate);\n        graph.removeListener(\"nodeDropped\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeAdded\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeDropped\", this.activeListeners.dropEdgeGraphUpdate);\n        graph.removeListener(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgesCleared\", this.activeListeners.clearEdgesGraphUpdate);\n        graph.removeListener(\"cleared\", this.activeListeners.clearGraphUpdate);\n        // Releasing cache & state\n        this.quadtree = new quadtree_1.default();\n        this.nodeDataCache = {};\n        this.edgeDataCache = {};\n        this.nodesWithForcedLabels = [];\n        this.edgesWithForcedLabels = [];\n        this.highlightedNodes.clear();\n        // Clearing frames\n        if (this.renderFrame) {\n            (0, utils_1.cancelFrame)(this.renderFrame);\n            this.renderFrame = null;\n        }\n        if (this.renderHighlightedNodesFrame) {\n            (0, utils_1.cancelFrame)(this.renderHighlightedNodesFrame);\n            this.renderHighlightedNodesFrame = null;\n        }\n        // Destroying canvases\n        var container = this.container;\n        while (container.firstChild)\n            container.removeChild(container.firstChild);\n    };\n    /**\n     * Method used to scale the given size according to the camera's ratio, i.e.\n     * zooming state.\n     *\n     * @param  {number} size - The size to scale (node size, edge thickness etc.).\n     * @return {number}      - The scaled size.\n     */\n    Sigma.prototype.scaleSize = function (size) {\n        return size / this.cameraSizeRatio;\n    };\n    /**\n     * Method that returns the collection of all used canvases.\n     * At the moment, the instantiated canvases are the following, and in the\n     * following order in the DOM:\n     * - `edges`\n     * - `nodes`\n     * - `edgeLabels`\n     * - `labels`\n     * - `hovers`\n     * - `hoverNodes`\n     * - `mouse`\n     *\n     * @return {PlainObject<HTMLCanvasElement>} - The collection of canvases.\n     */\n    Sigma.prototype.getCanvases = function () {\n        return __assign({}, this.elements);\n    };\n    return Sigma;\n}(types_1.TypedEventEmitter));\nexports.default = Sigma;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.animateNodes = exports.ANIMATE_DEFAULTS = void 0;\nvar index_1 = require(\"./index\");\nvar easings_1 = __importDefault(require(\"./easings\"));\nexports.ANIMATE_DEFAULTS = {\n    easing: \"quadraticInOut\",\n    duration: 150,\n};\n/**\n * Function used to animate the nodes.\n */\nfunction animateNodes(graph, targets, opts, callback) {\n    var options = Object.assign({}, exports.ANIMATE_DEFAULTS, opts);\n    var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n    var start = Date.now();\n    var startPositions = {};\n    for (var node in targets) {\n        var attrs = targets[node];\n        startPositions[node] = {};\n        for (var k in attrs)\n            startPositions[node][k] = graph.getNodeAttribute(node, k);\n    }\n    var frame = null;\n    var step = function () {\n        frame = null;\n        var p = (Date.now() - start) / options.duration;\n        if (p >= 1) {\n            // Animation is done\n            for (var node in targets) {\n                var attrs = targets[node];\n                // We use given values to avoid precision issues and for convenience\n                for (var k in attrs)\n                    graph.setNodeAttribute(node, k, attrs[k]);\n            }\n            if (typeof callback === \"function\")\n                callback();\n            return;\n        }\n        p = easing(p);\n        for (var node in targets) {\n            var attrs = targets[node];\n            var s = startPositions[node];\n            for (var k in attrs)\n                graph.setNodeAttribute(node, k, attrs[k] * p + s[k] * (1 - p));\n        }\n        frame = (0, index_1.requestFrame)(step);\n    };\n    step();\n    return function () {\n        if (frame)\n            (0, index_1.cancelFrame)(frame);\n    };\n}\nexports.animateNodes = animateNodes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HTML_COLORS = void 0;\nexports.HTML_COLORS = {\n    black: \"#000000\",\n    silver: \"#C0C0C0\",\n    gray: \"#808080\",\n    grey: \"#808080\",\n    white: \"#FFFFFF\",\n    maroon: \"#800000\",\n    red: \"#FF0000\",\n    purple: \"#800080\",\n    fuchsia: \"#FF00FF\",\n    green: \"#008000\",\n    lime: \"#00FF00\",\n    olive: \"#808000\",\n    yellow: \"#FFFF00\",\n    navy: \"#000080\",\n    blue: \"#0000FF\",\n    teal: \"#008080\",\n    aqua: \"#00FFFF\",\n    darkblue: \"#00008B\",\n    mediumblue: \"#0000CD\",\n    darkgreen: \"#006400\",\n    darkcyan: \"#008B8B\",\n    deepskyblue: \"#00BFFF\",\n    darkturquoise: \"#00CED1\",\n    mediumspringgreen: \"#00FA9A\",\n    springgreen: \"#00FF7F\",\n    cyan: \"#00FFFF\",\n    midnightblue: \"#191970\",\n    dodgerblue: \"#1E90FF\",\n    lightseagreen: \"#20B2AA\",\n    forestgreen: \"#228B22\",\n    seagreen: \"#2E8B57\",\n    darkslategray: \"#2F4F4F\",\n    darkslategrey: \"#2F4F4F\",\n    limegreen: \"#32CD32\",\n    mediumseagreen: \"#3CB371\",\n    turquoise: \"#40E0D0\",\n    royalblue: \"#4169E1\",\n    steelblue: \"#4682B4\",\n    darkslateblue: \"#483D8B\",\n    mediumturquoise: \"#48D1CC\",\n    indigo: \"#4B0082\",\n    darkolivegreen: \"#556B2F\",\n    cadetblue: \"#5F9EA0\",\n    cornflowerblue: \"#6495ED\",\n    rebeccapurple: \"#663399\",\n    mediumaquamarine: \"#66CDAA\",\n    dimgray: \"#696969\",\n    dimgrey: \"#696969\",\n    slateblue: \"#6A5ACD\",\n    olivedrab: \"#6B8E23\",\n    slategray: \"#708090\",\n    slategrey: \"#708090\",\n    lightslategray: \"#778899\",\n    lightslategrey: \"#778899\",\n    mediumslateblue: \"#7B68EE\",\n    lawngreen: \"#7CFC00\",\n    chartreuse: \"#7FFF00\",\n    aquamarine: \"#7FFFD4\",\n    skyblue: \"#87CEEB\",\n    lightskyblue: \"#87CEFA\",\n    blueviolet: \"#8A2BE2\",\n    darkred: \"#8B0000\",\n    darkmagenta: \"#8B008B\",\n    saddlebrown: \"#8B4513\",\n    darkseagreen: \"#8FBC8F\",\n    lightgreen: \"#90EE90\",\n    mediumpurple: \"#9370DB\",\n    darkviolet: \"#9400D3\",\n    palegreen: \"#98FB98\",\n    darkorchid: \"#9932CC\",\n    yellowgreen: \"#9ACD32\",\n    sienna: \"#A0522D\",\n    brown: \"#A52A2A\",\n    darkgray: \"#A9A9A9\",\n    darkgrey: \"#A9A9A9\",\n    lightblue: \"#ADD8E6\",\n    greenyellow: \"#ADFF2F\",\n    paleturquoise: \"#AFEEEE\",\n    lightsteelblue: \"#B0C4DE\",\n    powderblue: \"#B0E0E6\",\n    firebrick: \"#B22222\",\n    darkgoldenrod: \"#B8860B\",\n    mediumorchid: \"#BA55D3\",\n    rosybrown: \"#BC8F8F\",\n    darkkhaki: \"#BDB76B\",\n    mediumvioletred: \"#C71585\",\n    indianred: \"#CD5C5C\",\n    peru: \"#CD853F\",\n    chocolate: \"#D2691E\",\n    tan: \"#D2B48C\",\n    lightgray: \"#D3D3D3\",\n    lightgrey: \"#D3D3D3\",\n    thistle: \"#D8BFD8\",\n    orchid: \"#DA70D6\",\n    goldenrod: \"#DAA520\",\n    palevioletred: \"#DB7093\",\n    crimson: \"#DC143C\",\n    gainsboro: \"#DCDCDC\",\n    plum: \"#DDA0DD\",\n    burlywood: \"#DEB887\",\n    lightcyan: \"#E0FFFF\",\n    lavender: \"#E6E6FA\",\n    darksalmon: \"#E9967A\",\n    violet: \"#EE82EE\",\n    palegoldenrod: \"#EEE8AA\",\n    lightcoral: \"#F08080\",\n    khaki: \"#F0E68C\",\n    aliceblue: \"#F0F8FF\",\n    honeydew: \"#F0FFF0\",\n    azure: \"#F0FFFF\",\n    sandybrown: \"#F4A460\",\n    wheat: \"#F5DEB3\",\n    beige: \"#F5F5DC\",\n    whitesmoke: \"#F5F5F5\",\n    mintcream: \"#F5FFFA\",\n    ghostwhite: \"#F8F8FF\",\n    salmon: \"#FA8072\",\n    antiquewhite: \"#FAEBD7\",\n    linen: \"#FAF0E6\",\n    lightgoldenrodyellow: \"#FAFAD2\",\n    oldlace: \"#FDF5E6\",\n    magenta: \"#FF00FF\",\n    deeppink: \"#FF1493\",\n    orangered: \"#FF4500\",\n    tomato: \"#FF6347\",\n    hotpink: \"#FF69B4\",\n    coral: \"#FF7F50\",\n    darkorange: \"#FF8C00\",\n    lightsalmon: \"#FFA07A\",\n    orange: \"#FFA500\",\n    lightpink: \"#FFB6C1\",\n    pink: \"#FFC0CB\",\n    gold: \"#FFD700\",\n    peachpuff: \"#FFDAB9\",\n    navajowhite: \"#FFDEAD\",\n    moccasin: \"#FFE4B5\",\n    bisque: \"#FFE4C4\",\n    mistyrose: \"#FFE4E1\",\n    blanchedalmond: \"#FFEBCD\",\n    papayawhip: \"#FFEFD5\",\n    lavenderblush: \"#FFF0F5\",\n    seashell: \"#FFF5EE\",\n    cornsilk: \"#FFF8DC\",\n    lemonchiffon: \"#FFFACD\",\n    floralwhite: \"#FFFAF0\",\n    snow: \"#FFFAFA\",\n    lightyellow: \"#FFFFE0\",\n    ivory: \"#FFFFF0\",\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Extend function\n * ================\n *\n * Function used to push a bunch of values into an array at once.\n *\n * Its strategy is to mutate target array's length then setting the new indices\n * to be the values to add.\n *\n * A benchmark proved that it is faster than the following strategies:\n *   1) `array.push.apply(array, values)`.\n *   2) A loop of pushes.\n *   3) `array = array.concat(values)`, obviously.\n *\n * Intuitively, this is correct because when adding a lot of elements, the\n * chosen strategies does not need to handle the `arguments` object to\n * execute #.apply's variadicity and because the array know its final length\n * at the beginning, avoiding potential multiple reallocations of the underlying\n * contiguous array. Some engines may be able to optimize the loop of push\n * operations but empirically they don't seem to do so.\n */\n\n/**\n * Extends the target array with the given values.\n *\n * @param  {array} array  - Target array.\n * @param  {array} values - Values to add.\n */\nmodule.exports = function extend(array, values) {\n  var l2 = values.length;\n\n  if (l2 === 0)\n    return;\n\n  var l1 = array.length;\n\n  array.length += l2;\n\n  for (var i = 0; i < l2; i++)\n    array[l1 + i] = values[i];\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.edgeLabelsToDisplayFromNodes = exports.LabelGrid = void 0;\n/**\n * Class representing a single candidate for the label grid selection.\n *\n * It also describes a deterministic way to compare two candidates to assess\n * which one is better.\n */\nvar LabelCandidate = /** @class */ (function () {\n    function LabelCandidate(key, size) {\n        this.key = key;\n        this.size = size;\n    }\n    LabelCandidate.compare = function (first, second) {\n        // First we compare by size\n        if (first.size > second.size)\n            return -1;\n        if (first.size < second.size)\n            return 1;\n        // Then since no two nodes can have the same key, we use it to\n        // deterministically tie-break by key\n        if (first.key > second.key)\n            return 1;\n        // NOTE: this comparator cannot return 0\n        return -1;\n    };\n    return LabelCandidate;\n}());\n/**\n * Class representing a 2D spatial grid divided into constant-size cells.\n */\nvar LabelGrid = /** @class */ (function () {\n    function LabelGrid() {\n        this.width = 0;\n        this.height = 0;\n        this.cellSize = 0;\n        this.columns = 0;\n        this.rows = 0;\n        this.cells = {};\n    }\n    LabelGrid.prototype.resizeAndClear = function (dimensions, cellSize) {\n        this.width = dimensions.width;\n        this.height = dimensions.height;\n        this.cellSize = cellSize;\n        this.columns = Math.ceil(dimensions.width / cellSize);\n        this.rows = Math.ceil(dimensions.height / cellSize);\n        this.cells = {};\n    };\n    LabelGrid.prototype.getIndex = function (pos) {\n        var xIndex = Math.floor(pos.x / this.cellSize);\n        var yIndex = Math.floor(pos.y / this.cellSize);\n        return yIndex * this.columns + xIndex;\n    };\n    LabelGrid.prototype.add = function (key, size, pos) {\n        var candidate = new LabelCandidate(key, size);\n        var index = this.getIndex(pos);\n        var cell = this.cells[index];\n        if (!cell) {\n            cell = [];\n            this.cells[index] = cell;\n        }\n        cell.push(candidate);\n    };\n    LabelGrid.prototype.organize = function () {\n        for (var k in this.cells) {\n            var cell = this.cells[k];\n            cell.sort(LabelCandidate.compare);\n        }\n    };\n    LabelGrid.prototype.getLabelsToDisplay = function (ratio, density) {\n        // TODO: work on visible nodes to optimize? ^ -> threshold outside so that memoization works?\n        // TODO: adjust threshold lower, but increase cells a bit?\n        // TODO: hunt for geom issue in disguise\n        // TODO: memoize while ratio does not move. method to force recompute\n        var cellArea = this.cellSize * this.cellSize;\n        var scaledCellArea = cellArea / ratio / ratio;\n        var scaledDensity = (scaledCellArea * density) / cellArea;\n        var labelsToDisplayPerCell = Math.ceil(scaledDensity);\n        var labels = [];\n        for (var k in this.cells) {\n            var cell = this.cells[k];\n            for (var i = 0; i < Math.min(labelsToDisplayPerCell, cell.length); i++) {\n                labels.push(cell[i].key);\n            }\n        }\n        return labels;\n    };\n    return LabelGrid;\n}());\nexports.LabelGrid = LabelGrid;\n/**\n * Label heuristic selecting edge labels to display, based on displayed node\n * labels\n *\n * @param  {object} params                 - Parameters:\n * @param  {Set}      displayedNodeLabels  - Currently displayed node labels.\n * @param  {Set}      highlightedNodes     - Highlighted nodes.\n * @param  {Graph}    graph                - The rendered graph.\n * @param  {string}   hoveredNode          - Hovered node (optional)\n * @return {Array}                         - The selected labels.\n */\nfunction edgeLabelsToDisplayFromNodes(params) {\n    var graph = params.graph, hoveredNode = params.hoveredNode, highlightedNodes = params.highlightedNodes, displayedNodeLabels = params.displayedNodeLabels;\n    var worthyEdges = [];\n    // TODO: the code below can be optimized using #.forEach and batching the code per adj\n    // We should display an edge's label if:\n    //   - Any of its extremities is highlighted or hovered\n    //   - Both of its extremities has its label shown\n    graph.forEachEdge(function (edge, _, source, target) {\n        if (source === hoveredNode ||\n            target === hoveredNode ||\n            highlightedNodes.has(source) ||\n            highlightedNodes.has(target) ||\n            (displayedNodeLabels.has(source) && displayedNodeLabels.has(target))) {\n            worthyEdges.push(edge);\n        }\n    });\n    return worthyEdges;\n}\nexports.edgeLabelsToDisplayFromNodes = edgeLabelsToDisplayFromNodes;\n","\"use strict\";\n/**\n * Sigma.js Settings\n * =================================\n *\n * The list of settings and some handy functions.\n * @module\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_SETTINGS = exports.validateSettings = void 0;\nvar label_1 = __importDefault(require(\"./rendering/canvas/label\"));\nvar hover_1 = __importDefault(require(\"./rendering/canvas/hover\"));\nvar edge_label_1 = __importDefault(require(\"./rendering/canvas/edge-label\"));\nvar node_fast_1 = __importDefault(require(\"./rendering/webgl/programs/node.fast\"));\nvar edge_1 = __importDefault(require(\"./rendering/webgl/programs/edge\"));\nvar edge_arrow_1 = __importDefault(require(\"./rendering/webgl/programs/edge.arrow\"));\nfunction validateSettings(settings) {\n    if (typeof settings.labelDensity !== \"number\" || settings.labelDensity < 0) {\n        throw new Error(\"Settings: invalid `labelDensity`. Expecting a positive number.\");\n    }\n    var minCameraRatio = settings.minCameraRatio, maxCameraRatio = settings.maxCameraRatio;\n    if (typeof minCameraRatio === \"number\" && typeof maxCameraRatio === \"number\" && maxCameraRatio < minCameraRatio) {\n        throw new Error(\"Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.\");\n    }\n}\nexports.validateSettings = validateSettings;\nexports.DEFAULT_SETTINGS = {\n    // Performance\n    hideEdgesOnMove: false,\n    hideLabelsOnMove: false,\n    renderLabels: true,\n    renderEdgeLabels: false,\n    enableEdgeClickEvents: false,\n    enableEdgeWheelEvents: false,\n    enableEdgeHoverEvents: false,\n    // Component rendering\n    defaultNodeColor: \"#999\",\n    defaultNodeType: \"circle\",\n    defaultEdgeColor: \"#ccc\",\n    defaultEdgeType: \"line\",\n    labelFont: \"Arial\",\n    labelSize: 14,\n    labelWeight: \"normal\",\n    labelColor: { color: \"#000\" },\n    edgeLabelFont: \"Arial\",\n    edgeLabelSize: 14,\n    edgeLabelWeight: \"normal\",\n    edgeLabelColor: { attribute: \"color\" },\n    stagePadding: 30,\n    // Labels\n    labelDensity: 1,\n    labelGridCellSize: 100,\n    labelRenderedSizeThreshold: 6,\n    // Reducers\n    nodeReducer: null,\n    edgeReducer: null,\n    // Features\n    zIndex: false,\n    minCameraRatio: null,\n    maxCameraRatio: null,\n    // Renderers\n    labelRenderer: label_1.default,\n    hoverRenderer: hover_1.default,\n    edgeLabelRenderer: edge_label_1.default,\n    // Lifecycle\n    allowInvalidContainer: false,\n    // Program classes\n    nodeProgramClasses: {\n        circle: node_fast_1.default,\n    },\n    edgeProgramClasses: {\n        arrow: edge_arrow_1.default,\n        line: edge_1.default,\n    },\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar label_1 = __importDefault(require(\"./label\"));\n/**\n * Draw an hovered node.\n * - if there is no label => display a shadow on the node\n * - if the label box is bigger than node size => display a label box that contains the node with a shadow\n * - else node with shadow and the label box\n */\nfunction drawHover(context, data, settings) {\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight;\n    context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n    // Then we draw the label background\n    context.fillStyle = \"#FFF\";\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 8;\n    context.shadowColor = \"#000\";\n    var PADDING = 2;\n    if (typeof data.label === \"string\") {\n        var textWidth = context.measureText(data.label).width, boxWidth = Math.round(textWidth + 5), boxHeight = Math.round(size + 2 * PADDING), radius = Math.max(data.size, size / 2) + PADDING;\n        var angleRadian = Math.asin(boxHeight / 2 / radius);\n        var xDeltaCoord = Math.sqrt(Math.abs(Math.pow(radius, 2) - Math.pow(boxHeight / 2, 2)));\n        context.beginPath();\n        context.moveTo(data.x + xDeltaCoord, data.y + boxHeight / 2);\n        context.lineTo(data.x + radius + boxWidth, data.y + boxHeight / 2);\n        context.lineTo(data.x + radius + boxWidth, data.y - boxHeight / 2);\n        context.lineTo(data.x + xDeltaCoord, data.y - boxHeight / 2);\n        context.arc(data.x, data.y, radius, angleRadian, -angleRadian);\n        context.closePath();\n        context.fill();\n    }\n    else {\n        context.beginPath();\n        context.arc(data.x, data.y, data.size + PADDING, 0, Math.PI * 2);\n        context.closePath();\n        context.fill();\n    }\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 0;\n    // And finally we draw the label\n    (0, label_1.default)(context, data, settings);\n}\nexports.default = drawHover;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawEdgeLabel(context, edgeData, sourceData, targetData, settings) {\n    var size = settings.edgeLabelSize, font = settings.edgeLabelFont, weight = settings.edgeLabelWeight, color = settings.edgeLabelColor.attribute\n        ? edgeData[settings.edgeLabelColor.attribute] || settings.edgeLabelColor.color || \"#000\"\n        : settings.edgeLabelColor.color;\n    var label = edgeData.label;\n    if (!label)\n        return;\n    context.fillStyle = color;\n    context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n    // Computing positions without considering nodes sizes:\n    var sSize = sourceData.size;\n    var tSize = targetData.size;\n    var sx = sourceData.x;\n    var sy = sourceData.y;\n    var tx = targetData.x;\n    var ty = targetData.y;\n    var cx = (sx + tx) / 2;\n    var cy = (sy + ty) / 2;\n    var dx = tx - sx;\n    var dy = ty - sy;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    if (d < sSize + tSize)\n        return;\n    // Adding nodes sizes:\n    sx += (dx * sSize) / d;\n    sy += (dy * sSize) / d;\n    tx -= (dx * tSize) / d;\n    ty -= (dy * tSize) / d;\n    cx = (sx + tx) / 2;\n    cy = (sy + ty) / 2;\n    dx = tx - sx;\n    dy = ty - sy;\n    d = Math.sqrt(dx * dx + dy * dy);\n    // Handling ellipsis\n    var textLength = context.measureText(label).width;\n    if (textLength > d) {\n        var ellipsis = \"…\";\n        label = label + ellipsis;\n        textLength = context.measureText(label).width;\n        while (textLength > d && label.length > 1) {\n            label = label.slice(0, -2) + ellipsis;\n            textLength = context.measureText(label).width;\n        }\n        if (label.length < 4)\n            return;\n    }\n    var angle;\n    if (dx > 0) {\n        if (dy > 0)\n            angle = Math.acos(dx / d);\n        else\n            angle = Math.asin(dy / d);\n    }\n    else {\n        if (dy > 0)\n            angle = Math.acos(dx / d) + Math.PI;\n        else\n            angle = Math.asin(dx / d) + Math.PI / 2;\n    }\n    context.save();\n    context.translate(cx, cy);\n    context.rotate(angle);\n    context.fillText(label, -textLength / 2, edgeData.size / 2 + size);\n    context.restore();\n}\nexports.default = drawEdgeLabel;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar node_fast_vert_glsl_1 = __importDefault(require(\"../shaders/node.fast.vert.glsl.js\"));\nvar node_fast_frag_glsl_1 = __importDefault(require(\"../shaders/node.fast.frag.glsl.js\"));\nvar node_1 = require(\"./common/node\");\nvar POINTS = 1, ATTRIBUTES = 4;\nvar NodeFastProgram = /** @class */ (function (_super) {\n    __extends(NodeFastProgram, _super);\n    function NodeFastProgram(gl) {\n        var _this = _super.call(this, gl, node_fast_vert_glsl_1.default, node_fast_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        _this.bind();\n        return _this;\n    }\n    NodeFastProgram.prototype.process = function (data, hidden, offset) {\n        var array = this.array;\n        var i = offset * POINTS * ATTRIBUTES;\n        if (hidden) {\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            return;\n        }\n        var color = (0, utils_1.floatColor)(data.color);\n        array[i++] = data.x;\n        array[i++] = data.y;\n        array[i++] = data.size;\n        array[i] = color;\n    };\n    NodeFastProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        gl.uniform1f(this.ratioLocation, 1 / Math.sqrt(params.ratio));\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.drawArrays(gl.POINTS, 0, this.array.length / ATTRIBUTES);\n    };\n    return NodeFastProgram;\n}(node_1.AbstractNodeProgram));\nexports.default = NodeFastProgram;\n","(()=>{\"use strict\";var o={d:(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(o,\"__esModule\",{value:!0})}},t={};o.r(t),o.d(t,{default:()=>e});const e=\"attribute vec2 a_position;\\nattribute float a_size;\\nattribute vec4 a_color;\\n\\nuniform float u_ratio;\\nuniform float u_scale;\\nuniform mat3 u_matrix;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  gl_Position = vec4(\\n    (u_matrix * vec3(a_position, 1)).xy,\\n    0,\\n    1\\n  );\\n\\n  // Multiply the point size twice:\\n  //  - x SCALING_RATIO to correct the canvas scaling\\n  //  - x 2 to correct the formulae\\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\\n\\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=t})();","(()=>{\"use strict\";var e={d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const o=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float radius = 0.5;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\\n  float dist = radius - length(m);\\n\\n  float t = 0.0;\\n  if (dist > v_border)\\n    t = 1.0;\\n  else if (dist > 0.0)\\n    t = dist / v_border;\\n\\n  gl_FragColor = mix(transparent, v_color, t);\\n}\\n\";module.exports=n})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createNodeCompoundProgram = exports.AbstractNodeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Node Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Node Program class.\n *\n * @constructor\n */\nvar AbstractNodeProgram = /** @class */ (function (_super) {\n    __extends(AbstractNodeProgram, _super);\n    function AbstractNodeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        var _this = _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.sizeLocation = gl.getAttribLocation(_this.program, \"a_size\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        // Uniform Location\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var ratioLocation = gl.getUniformLocation(_this.program, \"u_ratio\");\n        if (ratioLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting ratioLocation\");\n        _this.ratioLocation = ratioLocation;\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        return _this;\n    }\n    AbstractNodeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.sizeLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.sizeLocation, 1, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, this.attributes * Float32Array.BYTES_PER_ELEMENT, 12);\n    };\n    return AbstractNodeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractNodeProgram = AbstractNodeProgram;\n/**\n * Helper function combining two or more programs into a single compound one.\n * Note that this is more a quick & easy way to combine program than a really\n * performant option. More performant programs can be written entirely.\n *\n * @param  {array}    programClasses - Program classes to combine.\n * @return {function}\n */\nfunction createNodeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function NodeCompoundProgram(gl, renderer) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl, renderer); });\n        }\n        NodeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        NodeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        NodeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        NodeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) {\n                program.bind();\n                program.bufferData();\n                program.render(params);\n            });\n        };\n        NodeCompoundProgram.prototype.process = function (data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(data, hidden, offset); });\n        };\n        return NodeCompoundProgram;\n    }());\n}\nexports.createNodeCompoundProgram = createNodeCompoundProgram;\n","\"use strict\";\n/**\n * Sigma.js Shader Utils\n * ======================\n *\n * Code used to load sigma's shaders.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadProgram = exports.loadFragmentShader = exports.loadVertexShader = void 0;\n/**\n * Function used to load a shader.\n */\nfunction loadShader(type, gl, source) {\n    var glType = type === \"VERTEX\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER;\n    // Creating the shader\n    var shader = gl.createShader(glType);\n    if (shader === null) {\n        throw new Error(\"loadShader: error while creating the shader\");\n    }\n    // Loading source\n    gl.shaderSource(shader, source);\n    // Compiling the shader\n    gl.compileShader(shader);\n    // Retrieving compilation status\n    var successfullyCompiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    // Throwing if something went awry\n    if (!successfullyCompiled) {\n        var infoLog = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        throw new Error(\"loadShader: error while compiling the shader:\\n\".concat(infoLog, \"\\n\").concat(source));\n    }\n    return shader;\n}\nfunction loadVertexShader(gl, source) {\n    return loadShader(\"VERTEX\", gl, source);\n}\nexports.loadVertexShader = loadVertexShader;\nfunction loadFragmentShader(gl, source) {\n    return loadShader(\"FRAGMENT\", gl, source);\n}\nexports.loadFragmentShader = loadFragmentShader;\n/**\n * Function used to load a program.\n */\nfunction loadProgram(gl, shaders) {\n    var program = gl.createProgram();\n    if (program === null) {\n        throw new Error(\"loadProgram: error while creating the program.\");\n    }\n    var i, l;\n    // Attaching the shaders\n    for (i = 0, l = shaders.length; i < l; i++)\n        gl.attachShader(program, shaders[i]);\n    gl.linkProgram(program);\n    // Checking status\n    var successfullyLinked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!successfullyLinked) {\n        gl.deleteProgram(program);\n        throw new Error(\"loadProgram: error while linking the program.\");\n    }\n    return program;\n}\nexports.loadProgram = loadProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Program\n * =====================================\n *\n * Program rendering edges as thick lines using four points translated\n * orthogonally from the source & target's centers by half thickness.\n *\n * Rendering two triangles by using only four points is made possible through\n * the use of indices.\n *\n * This method should be faster than the 6 points / 2 triangles approach and\n * should handle thickness better than with gl.LINES.\n *\n * This version of the shader balances geometry computation evenly between\n * the CPU & GPU (normals are computed on the CPU side).\n * @module\n */\nvar utils_1 = require(\"../../../utils\");\nvar edge_vert_glsl_1 = __importDefault(require(\"../shaders/edge.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 4, ATTRIBUTES = 5, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeProgram = /** @class */ (function (_super) {\n    __extends(EdgeProgram, _super);\n    function EdgeProgram(gl) {\n        var _this = _super.call(this, gl, edge_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeProgram: error while creating indicesBuffer\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n        if (correctionRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting correctionRatioLocation\");\n        _this.correctionRatioLocation = correctionRatioLocation;\n        var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n        if (sqrtZoomRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting sqrtZoomRatioLocation\");\n        _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = (0, utils_1.canUse32BitsIndices)(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n    };\n    EdgeProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = (0, utils_1.floatColor)(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len * thickness;\n            n2 = dx * len * thickness;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = color;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i] = color;\n    };\n    EdgeProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n        gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeProgram;\n","(()=>{\"use strict\";var e={d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const o='attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // We require edges to be at least `minThickness` pixels thick *on screen*\\n  // (so we need to compensate the SQRT zoom ratio):\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n\\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\\n  // referential (in a ([0, 1], [0, 1]) space), using our \"magic\" correction\\n  // ratio:\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n\\n  // Finally, we adapt the edge thickness to the \"SQRT rule\" in sigma (so that\\n  // items are not too big when zoomed in, and not too small when zoomed out).\\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\\n  // it\\'s simpler like this:\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\\n\\n  // For the fragment shader though, we need a thickness that takes the \"magic\"\\n  // correction ratio into account (as in webGLThickness), but so that the\\n  // antialiasint effect does not depend on the zoom level. So here\\'s yet\\n  // another thickness version:\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n';module.exports=n})();","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Arrow Program\n * ===========================================\n *\n * Compound program rendering edges as an arrow from the source to the target.\n * @module\n */\nvar edge_1 = require(\"./common/edge\");\nvar edge_arrowHead_1 = __importDefault(require(\"./edge.arrowHead\"));\nvar edge_clamped_1 = __importDefault(require(\"./edge.clamped\"));\nvar EdgeArrowProgram = (0, edge_1.createEdgeCompoundProgram)([edge_clamped_1.default, edge_arrowHead_1.default]);\nexports.default = EdgeArrowProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar edge_arrowHead_vert_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.vert.glsl.js\"));\nvar edge_arrowHead_frag_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 3, ATTRIBUTES = 9, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeArrowHeadProgram = /** @class */ (function (_super) {\n    __extends(EdgeArrowHeadProgram, _super);\n    function EdgeArrowHeadProgram(gl) {\n        var _this = _super.call(this, gl, edge_arrowHead_vert_glsl_1.default, edge_arrowHead_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        _this.barycentricLocation = gl.getAttribLocation(_this.program, \"a_barycentric\");\n        // Uniform locations\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n        if (sqrtZoomRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation\");\n        _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n        var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n        if (correctionRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting correctionRatioLocation\");\n        _this.correctionRatioLocation = correctionRatioLocation;\n        _this.bind();\n        return _this;\n    }\n    EdgeArrowHeadProgram.prototype.bind = function () {\n        var gl = this.gl;\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.barycentricLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n        // TODO: maybe we can optimize here by packing this in a bit mask\n        gl.vertexAttribPointer(this.barycentricLocation, 3, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 24);\n    };\n    EdgeArrowHeadProgram.prototype.computeIndices = function () {\n        // nothing to do\n    };\n    EdgeArrowHeadProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, radius = targetData.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = (0, utils_1.floatColor)(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len * thickness;\n            n2 = dx * len * thickness;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 1;\n        array[i++] = 0;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 1;\n        array[i++] = 0;\n        // Third point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 0;\n        array[i] = 1;\n    };\n    EdgeArrowHeadProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n        gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n        // Drawing:\n        gl.drawArrays(gl.TRIANGLES, 0, this.array.length / ATTRIBUTES);\n    };\n    return EdgeArrowHeadProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeArrowHeadProgram;\n","(()=>{\"use strict\";var a={d:(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:(a,e)=>Object.prototype.hasOwnProperty.call(a,e),r:a=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(a,\"__esModule\",{value:!0})}},e={};a.r(e),a.d(e,{default:()=>t});const t=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_radius;\\nattribute vec4 a_color;\\nattribute vec3 a_barycentric;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadWidthLengthRatio = 0.66;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl and\\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\\n  // happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\\n\\n  float da = a_barycentric.x;\\n  float db = a_barycentric.y;\\n  float dc = a_barycentric.z;\\n\\n  vec2 delta = vec2(\\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\\n\\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n  );\\n\\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=e})();","(()=>{\"use strict\";var e={d:(o,r)=>{for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>r});const r=\"precision mediump float;\\n\\nvarying vec4 v_color;\\n\\nvoid main(void) {\\n  gl_FragColor = v_color;\\n}\\n\";module.exports=o})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar edge_1 = require(\"./common/edge\");\nvar utils_1 = require(\"../../../utils\");\nvar edge_clamped_vert_glsl_1 = __importDefault(require(\"../shaders/edge.clamped.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar POINTS = 4, ATTRIBUTES = 6, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeClampedProgram = /** @class */ (function (_super) {\n    __extends(EdgeClampedProgram, _super);\n    function EdgeClampedProgram(gl) {\n        var _this = _super.call(this, gl, edge_clamped_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeClampedProgram: error while getting resolutionLocation\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations:\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        // Uniform locations\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n        if (sqrtZoomRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting cameraRatioLocation\");\n        _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n        var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n        if (correctionRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting viewportRatioLocation\");\n        _this.correctionRatioLocation = correctionRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = (0, utils_1.canUse32BitsIndices)(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeClampedProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n    };\n    EdgeClampedProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, radius = targetData.size || 1, color = (0, utils_1.floatColor)(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len * thickness;\n            n2 = dx * len * thickness;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        array[i++] = 0;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = color;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        array[i++] = radius;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = color;\n        array[i] = -radius;\n    };\n    EdgeClampedProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeClampedProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeClampedProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n        gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeClampedProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeClampedProgram;\n","(()=>{\"use strict\";var e={d:(o,n)=>{for(var t in n)e.o(n,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:n[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>n});const n=\"attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\nattribute float a_radius;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl. Please read it to\\n  // get better comments on what's happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here, we move the point to leave space for the arrow head:\\n  float direction = sign(a_radius);\\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n\\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\\n\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=o})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\nvar DRAG_TIMEOUT = 200;\nvar TOUCH_INERTIA_RATIO = 3;\nvar TOUCH_INERTIA_DURATION = 200;\n/**\n * Touch captor class.\n *\n * @constructor\n */\nvar TouchCaptor = /** @class */ (function (_super) {\n    __extends(TouchCaptor, _super);\n    function TouchCaptor(container, renderer) {\n        var _this = _super.call(this, container, renderer) || this;\n        _this.enabled = true;\n        _this.isMoving = false;\n        _this.touchMode = 0; // number of touches down\n        // Binding methods:\n        _this.handleStart = _this.handleStart.bind(_this);\n        _this.handleLeave = _this.handleLeave.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        // Binding events\n        container.addEventListener(\"touchstart\", _this.handleStart, false);\n        container.addEventListener(\"touchend\", _this.handleLeave, false);\n        container.addEventListener(\"touchcancel\", _this.handleLeave, false);\n        container.addEventListener(\"touchmove\", _this.handleMove, false);\n        return _this;\n    }\n    TouchCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"touchstart\", this.handleStart);\n        container.removeEventListener(\"touchend\", this.handleLeave);\n        container.removeEventListener(\"touchcancel\", this.handleLeave);\n        container.removeEventListener(\"touchmove\", this.handleMove);\n    };\n    TouchCaptor.prototype.getDimensions = function () {\n        return {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        };\n    };\n    TouchCaptor.prototype.dispatchRelatedMouseEvent = function (type, e, position, emitter) {\n        var mousePosition = position || (0, captor_1.getPosition)(e.touches[0], this.container);\n        var mouseEvent = new MouseEvent(type, {\n            clientX: mousePosition.x,\n            clientY: mousePosition.y,\n            altKey: e.altKey,\n            ctrlKey: e.ctrlKey,\n        });\n        mouseEvent.isFakeSigmaMouseEvent = true;\n        (emitter || this.container).dispatchEvent(mouseEvent);\n    };\n    TouchCaptor.prototype.handleStart = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousedown\", e);\n        var touches = (0, captor_1.getTouchesArray)(e.touches);\n        this.isMoving = true;\n        this.touchMode = touches.length;\n        this.startCameraState = this.renderer.getCamera().getState();\n        this.startTouchesPositions = touches.map(function (touch) { return (0, captor_1.getPosition)(touch, _this.container); });\n        this.lastTouchesPositions = this.startTouchesPositions;\n        // When there are two touches down, let's record distance and angle as well:\n        if (this.touchMode === 2) {\n            var _a = __read(this.startTouchesPositions, 2), _b = _a[0], x0 = _b.x, y0 = _b.y, _c = _a[1], x1 = _c.x, y1 = _c.y;\n            this.startTouchesAngle = Math.atan2(y1 - y0, x1 - x0);\n            this.startTouchesDistance = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n        }\n        this.emit(\"touchdown\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    TouchCaptor.prototype.handleLeave = function (e) {\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 0 && this.lastTouchesPositions && this.lastTouchesPositions.length) {\n            this.dispatchRelatedMouseEvent(\"mouseup\", e, this.lastTouchesPositions[0], document);\n            this.dispatchRelatedMouseEvent(\"click\", e, this.lastTouchesPositions[0]);\n        }\n        if (this.movingTimeout) {\n            this.isMoving = false;\n            clearTimeout(this.movingTimeout);\n        }\n        switch (this.touchMode) {\n            case 2:\n                if (e.touches.length === 1) {\n                    this.handleStart(e);\n                    e.preventDefault();\n                    break;\n                }\n            /* falls through */\n            case 1:\n                // TODO\n                // Dispatch event\n                if (this.isMoving) {\n                    var camera = this.renderer.getCamera();\n                    var cameraState = camera.getState(), previousCameraState = camera.getPreviousState() || { x: 0, y: 0 };\n                    camera.animate({\n                        x: cameraState.x + TOUCH_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                        y: cameraState.y + TOUCH_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n                    }, {\n                        duration: TOUCH_INERTIA_DURATION,\n                        easing: \"quadraticOut\",\n                    });\n                }\n                this.isMoving = false;\n                this.touchMode = 0;\n                break;\n        }\n        this.emit(\"touchup\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    TouchCaptor.prototype.handleMove = function (e) {\n        var _a;\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousemove\", e);\n        var camera = this.renderer.getCamera();\n        var startCameraState = this.startCameraState;\n        var touches = (0, captor_1.getTouchesArray)(e.touches);\n        var touchesPositions = touches.map(function (touch) { return (0, captor_1.getPosition)(touch, _this.container); });\n        this.lastTouchesPositions = touchesPositions;\n        this.isMoving = true;\n        if (this.movingTimeout)\n            clearTimeout(this.movingTimeout);\n        this.movingTimeout = window.setTimeout(function () {\n            _this.isMoving = false;\n        }, DRAG_TIMEOUT);\n        switch (this.touchMode) {\n            case 1: {\n                var _b = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0]), xStart = _b.x, yStart = _b.y;\n                var _c = this.renderer.viewportToFramedGraph(touchesPositions[0]), x = _c.x, y = _c.y;\n                camera.setState({\n                    x: startCameraState.x + xStart - x,\n                    y: startCameraState.y + yStart - y,\n                });\n                break;\n            }\n            case 2: {\n                /**\n                 * Here is the thinking here:\n                 *\n                 * 1. We can find the new angle and ratio, by comparing the vector from \"touch one\" to \"touch two\" at the start\n                 *    of the d'n'd and now\n                 *\n                 * 2. We can use `Camera#viewportToGraph` inside formula to retrieve the new camera position, using the graph\n                 *    position of a touch at the beginning of the d'n'd (using `startCamera.viewportToGraph`) and the viewport\n                 *    position of this same touch now\n                 */\n                var newCameraState = {};\n                var _d = touchesPositions[0], x0 = _d.x, y0 = _d.y;\n                var _e = touchesPositions[1], x1 = _e.x, y1 = _e.y;\n                var angleDiff = Math.atan2(y1 - y0, x1 - x0) - this.startTouchesAngle;\n                var ratioDiff = Math.hypot(y1 - y0, x1 - x0) / this.startTouchesDistance;\n                // 1.\n                var newRatio = camera.getBoundedRatio(startCameraState.ratio / ratioDiff);\n                newCameraState.ratio = newRatio;\n                newCameraState.angle = startCameraState.angle + angleDiff;\n                // 2.\n                var dimensions = this.getDimensions();\n                var touchGraphPosition = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0], { cameraState: startCameraState });\n                var smallestDimension = Math.min(dimensions.width, dimensions.height);\n                var dx = smallestDimension / dimensions.width;\n                var dy = smallestDimension / dimensions.height;\n                var ratio = newRatio / smallestDimension;\n                // Align with center of the graph:\n                var x = x0 - smallestDimension / 2 / dx;\n                var y = y0 - smallestDimension / 2 / dy;\n                // Rotate:\n                _a = __read([\n                    x * Math.cos(-newCameraState.angle) - y * Math.sin(-newCameraState.angle),\n                    y * Math.cos(-newCameraState.angle) + x * Math.sin(-newCameraState.angle),\n                ], 2), x = _a[0], y = _a[1];\n                newCameraState.x = touchGraphPosition.x - x * ratio;\n                newCameraState.y = touchGraphPosition.y + y * ratio;\n                camera.setState(newCameraState);\n                break;\n            }\n        }\n        this.emit(\"touchmove\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    return TouchCaptor;\n}(captor_1.default));\nexports.default = TouchCaptor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.doEdgeCollideWithPoint = exports.isPixelColored = void 0;\n/**\n * This helper returns true is the pixel at (x,y) in the given WebGL context is\n * colored, and false else.\n */\nfunction isPixelColored(gl, x, y) {\n    var pixels = new Uint8Array(4);\n    gl.readPixels(x, gl.drawingBufferHeight - y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n    return pixels[3] > 0;\n}\nexports.isPixelColored = isPixelColored;\n/**\n * This helper checks whether or not a point (x, y) collides with an\n * edge, connecting a source (xS, yS) to a target (xT, yT) with a thickness in\n * pixels.\n */\nfunction doEdgeCollideWithPoint(x, y, xS, yS, xT, yT, thickness) {\n    // Check first if point is out of the rectangle which opposite corners are the\n    // source and the target, rectangle we expand by `thickness` in every\n    // directions:\n    if (x < xS - thickness && x < xT - thickness)\n        return false;\n    if (y < yS - thickness && y < yT - thickness)\n        return false;\n    if (x > xS + thickness && x > xT + thickness)\n        return false;\n    if (y > yS + thickness && y > yT + thickness)\n        return false;\n    // Check actual collision now: Since we now the point is in this big rectangle\n    // we \"just\" need to check that the distance between the point and the line\n    // connecting the source and the target is less than `thickness`:\n    // https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n    var distance = Math.abs((xT - xS) * (yS - y) - (xS - x) * (yT - yS)) / Math.sqrt(Math.pow(xT - xS, 2) + Math.pow(yT - yS, 2));\n    return distance < thickness / 2;\n}\nexports.doEdgeCollideWithPoint = doEdgeCollideWithPoint;\n","/**\n * Graphology Browser GEXF Parser\n * ===============================\n *\n * Browser version of the graphology GEXF parser.\n */\nvar createParserFunction = require('../common/parser.js');\n\nmodule.exports = createParserFunction(DOMParser, Document);\n","/* eslint no-self-compare: 0 */\n/**\n * Graphology Browser GEXF Parser\n * ===============================\n *\n * Browser version of the graphology GEXF parser using DOMParser to function.\n */\nvar isGraphConstructor = require('graphology-utils/is-graph-constructor');\nvar mergeEdge = require('graphology-utils/add-edge').mergeEdge;\nvar toMixed = require('graphology-operators/to-mixed');\nvar toMulti = require('graphology-operators/to-multi');\nvar helpers = require('../common/helpers.js');\n\nvar cast = helpers.cast;\n\n/**\n * Function checking whether the given value is a NaN.\n *\n * @param  {any} value - Value to test.\n * @return {boolean}\n */\nfunction isReallyNaN(value) {\n  return value !== value;\n}\n\n/**\n * Function used to convert a viz:color attribute into a CSS rgba? string.\n *\n * @param  {Node}   element - DOM element.\n * @return {string}\n */\nfunction toRGBString(element) {\n  var a = element.getAttribute('a'),\n    r = element.getAttribute('r'),\n    g = element.getAttribute('g'),\n    b = element.getAttribute('b');\n\n  return a\n    ? 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')'\n    : 'rgb(' + r + ',' + g + ',' + b + ')';\n}\n\n/**\n * Function returning the first matching tag of the `viz` namespace matching\n * the desired tag name.\n *\n * @param  {Node}   element - Target DOM element.\n * @param  {string} name    - Tag name.\n * @return {Node}\n */\nfunction getFirstMatchingVizTag(element, name) {\n  var vizElement = element.getElementsByTagName('viz:' + name)[0];\n\n  if (!vizElement) vizElement = element.getElementsByTagNameNS('viz', name)[0];\n\n  if (!vizElement) vizElement = element.getElementsByTagName(name)[0];\n\n  return vizElement;\n}\n\n/**\n * Function used to collect meta information.\n *\n * @param  {Array<Node>} elements - Target DOM element.\n * @return {object}\n */\nfunction collectMeta(elements) {\n  var meta = {},\n    element,\n    value;\n\n  for (var i = 0, l = elements.length; i < l; i++) {\n    element = elements[i];\n\n    if (element.nodeName === '#text') continue;\n\n    value = element.textContent.trim();\n\n    if (value) meta[element.tagName.toLowerCase()] = element.textContent;\n  }\n\n  return meta;\n}\n\n/**\n * Function used to extract the model from the right elements.\n *\n * @param  {Array<Node>} elements - Target DOM elements.\n * @return {array}                - The model & default attributes.\n */\nfunction extractModel(elements) {\n  var model = {},\n    defaults = {},\n    element,\n    defaultElement,\n    id;\n\n  for (var i = 0, l = elements.length; i < l; i++) {\n    element = elements[i];\n    id = element.getAttribute('id') || element.getAttribute('for');\n\n    model[id] = {\n      id: id,\n      type: element.getAttribute('type') || 'string',\n      title: !isReallyNaN(+id) ? element.getAttribute('title') || id : id\n    };\n\n    // Default?\n    defaultElement = element.getElementsByTagName('default')[0];\n\n    if (defaultElement)\n      defaults[model[id].title] = cast(\n        model[id].type,\n        defaultElement.textContent\n      );\n  }\n\n  return [model, defaults];\n}\n\n/**\n * Function used to collect an element's attributes.\n *\n * @param  {object} model    - Data model to use.\n * @param  {object} defaults - Default values.\n * @param  {Node}   element  - Target DOM element.\n * @return {object}          - The collected attributes.\n */\nfunction collectAttributes(model, defaults, element) {\n  var data = {},\n    label = element.getAttribute('label'),\n    weight = element.getAttribute('weight');\n\n  if (label) data.label = label;\n\n  if (weight) data.weight = +weight;\n\n  var valueElements = element.getElementsByTagName('attvalue'),\n    valueElement,\n    id;\n\n  for (var i = 0, l = valueElements.length; i < l; i++) {\n    valueElement = valueElements[i];\n    id = valueElement.getAttribute('id') || valueElement.getAttribute('for');\n\n    data[model[id].title] = cast(\n      model[id].type,\n      valueElement.getAttribute('value')\n    );\n  }\n\n  // Applying default values\n  var k;\n\n  for (k in defaults) {\n    if (!(k in data)) data[k] = defaults[k];\n  }\n\n  // TODO: shortcut here to avoid viz when namespace is not set\n\n  // Attempting to find viz namespace tags\n\n  //-- 1) Color\n  var vizElement = getFirstMatchingVizTag(element, 'color');\n\n  if (vizElement) data.color = toRGBString(vizElement);\n\n  //-- 2) Size\n  vizElement = getFirstMatchingVizTag(element, 'size');\n\n  if (vizElement) data.size = +vizElement.getAttribute('value');\n\n  //-- 3) Position\n  var x, y, z;\n\n  vizElement = getFirstMatchingVizTag(element, 'position');\n\n  if (vizElement) {\n    x = vizElement.getAttribute('x');\n    y = vizElement.getAttribute('y');\n    z = vizElement.getAttribute('z');\n\n    if (x) data.x = +x;\n    if (y) data.y = +y;\n    if (z) data.z = +z;\n  }\n\n  //-- 4) Shape\n  vizElement = getFirstMatchingVizTag(element, 'shape');\n\n  if (vizElement) data.shape = vizElement.getAttribute('value');\n\n  //-- 5) Thickness\n  vizElement = getFirstMatchingVizTag(element, 'thickness');\n\n  if (vizElement) data.thickness = +vizElement.getAttribute('value');\n\n  return data;\n}\n\n/**\n * Factory taking implementations of `DOMParser` & `Document` returning\n * the parser function.\n */\nmodule.exports = function createParserFunction(DOMParser, Document) {\n  /**\n   * Function taking either a string or a document and returning a\n   * graphology instance.\n   *\n   * @param {function}        Graph  - A graphology constructor.\n   * @param {string|Document} source - The source to parse.\n   * @param {object}          options - Parsing options.\n   */\n\n  // TODO: option to map the data to the attributes for customization, nodeModel, edgeModel, nodeReducer, edgeReducer\n  // TODO: option to disable the model mapping heuristic\n  return function parse(Graph, source, options) {\n    options = options || {};\n\n    var addMissingNodes = options.addMissingNodes === true;\n    var mergeResult;\n\n    var xmlDoc = source;\n\n    var element, result, type, attributes, id, s, t, i, l;\n\n    if (!isGraphConstructor(Graph))\n      throw new Error('graphology-gexf/parser: invalid Graph constructor.');\n\n    // If source is a string, we are going to parse it\n    if (typeof source === 'string')\n      xmlDoc = new DOMParser().parseFromString(source, 'application/xml');\n\n    if (!(xmlDoc instanceof Document))\n      throw new Error(\n        'graphology-gexf/parser: source should either be a XML document or a string.'\n      );\n\n    // Finding useful elements\n    var GRAPH_ELEMENT = xmlDoc.getElementsByTagName('graph')[0],\n      META_ELEMENT = xmlDoc.getElementsByTagName('meta')[0],\n      META_ELEMENTS = (META_ELEMENT && META_ELEMENT.childNodes) || [],\n      NODE_ELEMENTS = xmlDoc.getElementsByTagName('node'),\n      EDGE_ELEMENTS = xmlDoc.getElementsByTagName('edge'),\n      MODEL_ELEMENTS = xmlDoc.getElementsByTagName('attributes'),\n      NODE_MODEL_ELEMENTS = [],\n      EDGE_MODEL_ELEMENTS = [];\n\n    for (i = 0, l = MODEL_ELEMENTS.length; i < l; i++) {\n      element = MODEL_ELEMENTS[i];\n\n      if (element.getAttribute('class') === 'node')\n        NODE_MODEL_ELEMENTS = element.getElementsByTagName('attribute');\n      else if (element.getAttribute('class') === 'edge')\n        EDGE_MODEL_ELEMENTS = element.getElementsByTagName('attribute');\n    }\n\n    // Information\n    var DEFAULT_EDGE_TYPE =\n      GRAPH_ELEMENT.getAttribute('defaultedgetype') || 'undirected';\n\n    if (DEFAULT_EDGE_TYPE === 'mutual') DEFAULT_EDGE_TYPE = 'undirected';\n\n    // Computing models\n    result = extractModel(NODE_MODEL_ELEMENTS);\n\n    var NODE_MODEL = result[0],\n      NODE_DEFAULT_ATTRIBUTES = result[1];\n\n    result = extractModel(EDGE_MODEL_ELEMENTS);\n\n    var EDGE_MODEL = result[0],\n      EDGE_DEFAULT_ATTRIBUTES = result[1];\n\n    // Polling the first edge to guess the type of the edges\n    var graphType = EDGE_ELEMENTS[0]\n      ? EDGE_ELEMENTS[0].getAttribute('type') || DEFAULT_EDGE_TYPE\n      : 'mixed';\n\n    // Instantiating our graph\n    var graph = new Graph({\n      type: graphType\n    });\n\n    // Collecting meta\n    var meta = collectMeta(META_ELEMENTS),\n      lastModifiedDate =\n        META_ELEMENT && META_ELEMENT.getAttribute('lastmodifieddate');\n\n    graph.replaceAttributes(meta);\n\n    if (lastModifiedDate)\n      graph.setAttribute('lastModifiedDate', lastModifiedDate);\n\n    // Adding nodes\n    for (i = 0, l = NODE_ELEMENTS.length; i < l; i++) {\n      element = NODE_ELEMENTS[i];\n\n      graph.addNode(\n        element.getAttribute('id'),\n        collectAttributes(NODE_MODEL, NODE_DEFAULT_ATTRIBUTES, element)\n      );\n    }\n\n    // Adding edges\n    for (i = 0, l = EDGE_ELEMENTS.length; i < l; i++) {\n      element = EDGE_ELEMENTS[i];\n\n      id = element.getAttribute('id');\n      type = element.getAttribute('type') || DEFAULT_EDGE_TYPE;\n      s = element.getAttribute('source');\n      t = element.getAttribute('target');\n      attributes = collectAttributes(\n        EDGE_MODEL,\n        EDGE_DEFAULT_ATTRIBUTES,\n        element\n      );\n\n      // If we encountered an edge with a different type, we upgrade the graph\n      if (type !== graph.type && graph.type !== 'mixed') {\n        graph = toMixed(graph);\n      }\n\n      // If we encountered twice the same edge, we upgrade the graph\n      if (\n        !graph.multi &&\n        ((type === 'directed' && graph.hasDirectedEdge(s, t)) ||\n          graph.hasUndirectedEdge(s, t))\n      ) {\n        graph = toMulti(graph);\n      }\n\n      mergeResult = mergeEdge(\n        graph,\n        type !== 'directed',\n        id || null,\n        s,\n        t,\n        attributes\n      );\n\n      if (!addMissingNodes && (mergeResult[2] || mergeResult[3])) {\n        throw new Error(\n          'graphology-gexf/parser: one of your gexf file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.'\n        );\n      }\n    }\n\n    return graph;\n  };\n};\n","/**\n * Graphology isGraphConstructor\n * ==============================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology constructor.\n */\n\n/**\n * Checking the value is a graphology constructor.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraphConstructor(value) {\n  return (\n    value !== null &&\n    typeof value === 'function' &&\n    typeof value.prototype === 'object' &&\n    typeof value.prototype.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.prototype.dropNode === 'function'\n  );\n};\n","/**\n * Graphology Edge Adders\n * =======================\n *\n * Generic edge addition functions that can be used to avoid nasty repetitive\n * conditions.\n */\nexports.addEdge = function addEdge(\n  graph,\n  undirected,\n  key,\n  source,\n  target,\n  attributes\n) {\n  if (undirected) {\n    if (key === null || key === undefined)\n      return graph.addUndirectedEdge(source, target, attributes);\n    else return graph.addUndirectedEdgeWithKey(key, source, target, attributes);\n  } else {\n    if (key === null || key === undefined)\n      return graph.addDirectedEdge(source, target, attributes);\n    else return graph.addDirectedEdgeWithKey(key, source, target, attributes);\n  }\n};\n\nexports.copyEdge = function copyEdge(\n  graph,\n  undirected,\n  key,\n  source,\n  target,\n  attributes\n) {\n  attributes = Object.assign({}, attributes);\n\n  if (undirected) {\n    if (key === null || key === undefined)\n      return graph.addUndirectedEdge(source, target, attributes);\n    else return graph.addUndirectedEdgeWithKey(key, source, target, attributes);\n  } else {\n    if (key === null || key === undefined)\n      return graph.addDirectedEdge(source, target, attributes);\n    else return graph.addDirectedEdgeWithKey(key, source, target, attributes);\n  }\n};\n\nexports.mergeEdge = function mergeEdge(\n  graph,\n  undirected,\n  key,\n  source,\n  target,\n  attributes\n) {\n  if (undirected) {\n    if (key === null || key === undefined)\n      return graph.mergeUndirectedEdge(source, target, attributes);\n    else\n      return graph.mergeUndirectedEdgeWithKey(key, source, target, attributes);\n  } else {\n    if (key === null || key === undefined)\n      return graph.mergeDirectedEdge(source, target, attributes);\n    else return graph.mergeDirectedEdgeWithKey(key, source, target, attributes);\n  }\n};\n\nexports.updateEdge = function updateEdge(\n  graph,\n  undirected,\n  key,\n  source,\n  target,\n  updater\n) {\n  if (undirected) {\n    if (key === null || key === undefined)\n      return graph.updateUndirectedEdge(source, target, updater);\n    else return graph.updateUndirectedEdgeWithKey(key, source, target, updater);\n  } else {\n    if (key === null || key === undefined)\n      return graph.updateDirectedEdge(source, target, updater);\n    else return graph.updateDirectedEdgeWithKey(key, source, target, updater);\n  }\n};\n","/**\n * Graphology Operators To Mixed Caster\n * =====================================\n *\n * Function used to cast any graph to a mixed one.\n */\nvar isGraph = require('graphology-utils/is-graph');\n\nmodule.exports = function toMixed(graph) {\n  if (!isGraph(graph))\n    throw new Error(\n      'graphology-operators/to-mixed: expecting a valid graphology instance.'\n    );\n\n  return graph.copy({type: 'mixed'});\n};\n","/**\n * Graphology Operators To Multi Caster\n * =====================================\n *\n * Function used to cast any graph to a multi one.\n */\nvar isGraph = require('graphology-utils/is-graph');\n\nmodule.exports = function toMulti(graph) {\n  if (!isGraph(graph))\n    throw new Error(\n      'graphology-operators/to-multi: expecting a valid graphology instance.'\n    );\n\n  return graph.copy({multi: true});\n};\n","/* eslint no-self-compare: 0 */\n/**\n * Graphology Common GEXF Writer\n * ==============================\n *\n * GEXF writer working for both node.js & the browser.\n */\nvar isGraph = require('graphology-utils/is-graph'),\n  inferType = require('graphology-utils/infer-type'),\n  XMLWriter = require('xml-writer'),\n  sanitizeTagName = require('./helpers.js').sanitizeTagName;\n\n// TODO: handle object in color, position with object for viz\n\n/**\n * Constants.\n */\nvar GEXF_NAMESPACE = 'http://www.gexf.net/1.2draft',\n  GEXF_VIZ_NAMESPACE = 'http:///www.gexf.net/1.1draft/viz';\n\nvar VIZ_RESERVED_NAMES = new Set([\n  'color',\n  'size',\n  'x',\n  'y',\n  'z',\n  'shape',\n  'thickness'\n]);\n\nvar RGBA_TEST = /^\\s*rgba?\\s*\\(/i,\n  RGBA_MATCH =\n    /^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*(?:,\\s*([.0-9]*))?\\)\\s*$/;\n\n/**\n * Function used to transform a CSS color into a RGBA object.\n *\n * @param  {string} value - Target value.\n * @return {object}\n */\nfunction CSSColorToRGBA(value) {\n  if (!value || typeof value !== 'string') return {};\n\n  if (value[0] === '#') {\n    value = value.slice(1);\n\n    return value.length === 3\n      ? {\n          r: parseInt(value[0] + value[0], 16),\n          g: parseInt(value[1] + value[1], 16),\n          b: parseInt(value[2] + value[2], 16)\n        }\n      : {\n          r: parseInt(value[0] + value[1], 16),\n          g: parseInt(value[2] + value[3], 16),\n          b: parseInt(value[4] + value[5], 16)\n        };\n  } else if (RGBA_TEST.test(value)) {\n    var result = {};\n\n    value = value.match(RGBA_MATCH);\n    result.r = +value[1];\n    result.g = +value[2];\n    result.b = +value[3];\n\n    if (value[4]) result.a = +value[4];\n\n    return result;\n  }\n\n  return {};\n}\n\n/**\n * Function used to map an element's attributes to a standardized map of\n * GEXF expected properties (label, viz, attributes).\n *\n * @param  {string} type       - The element's type.\n * @param  {string} key        - The element's key.\n * @param  {object} attributes - The element's attributes.\n * @return {object}\n */\nfunction DEFAULT_ELEMENT_FORMATTER(type, key, attributes) {\n  var output = {},\n    name;\n\n  for (name in attributes) {\n    if (name === 'label') {\n      output.label = attributes.label;\n    } else if (type === 'edge' && name === 'weight') {\n      output.weight = attributes.weight;\n    } else if (VIZ_RESERVED_NAMES.has(name)) {\n      output.viz = output.viz || {};\n      output.viz[name] = attributes[name];\n    } else {\n      output.attributes = output.attributes || {};\n      output.attributes[name] = attributes[name];\n    }\n  }\n\n  return output;\n}\n\nvar DEFAULT_NODE_FORMATTER = DEFAULT_ELEMENT_FORMATTER.bind(null, 'node'),\n  DEFAULT_EDGE_FORMATTER = DEFAULT_ELEMENT_FORMATTER.bind(null, 'edge');\n\n/**\n * Function used to check whether the given integer is 32 bits or not.\n *\n * @param  {number} number - Target number.\n * @return {boolean}\n */\nfunction is32BitInteger(number) {\n  return number <= 0x7fffffff && number >= -0x7fffffff;\n}\n\n/**\n * Function used to check whether the given value is \"empty\".\n *\n * @param  {any} value - Target value.\n * @return {boolean}\n */\nfunction isEmptyValue(value) {\n  return (\n    typeof value === 'undefined' ||\n    value === null ||\n    value === '' ||\n    value !== value\n  );\n}\n\n/**\n * Function used to detect a JavaScript's value type in the GEXF model.\n *\n * @param  {any}    value - Target value.\n * @return {string}\n */\nfunction detectValueType(value) {\n  if (isEmptyValue(value)) return 'empty';\n\n  if (Array.isArray(value)) return 'liststring';\n\n  if (typeof value === 'boolean') return 'boolean';\n\n  if (typeof value === 'object') return 'string';\n\n  // Numbers\n  if (typeof value === 'number') {\n    // Integer\n    if (value === (value | 0)) {\n      // Long (JavaScript integer can go up to 53 bit)?\n      return is32BitInteger(value) ? 'integer' : 'long';\n    }\n\n    // JavaScript numbers are 64 bit float, hence the double\n    return 'double';\n  }\n\n  return 'string';\n}\n\n/**\n * Function used to cast the given value into the given type.\n *\n * @param  {string} type  - Target type.\n * @param  {any}    value - Value to cast.\n * @return {string}\n */\nfunction cast(type, value) {\n  if (type === 'liststring' && Array.isArray(value)) return value.join('|');\n  return '' + value;\n}\n\n/**\n * Function used to collect data from a graph's nodes.\n *\n * @param  {Graph}    graph   - Target graph.\n * @param  {function} format  - Function formatting the nodes attributes.\n * @return {array}\n */\nfunction collectNodeData(graph, format) {\n  var nodes = new Array(graph.order);\n  var i = 0;\n\n  graph.forEachNode(function (node, attr) {\n    var data = format(node, attr);\n    data.key = node;\n    nodes[i++] = data;\n  });\n\n  return nodes;\n}\n\n/**\n * Function used to collect data from a graph's edges.\n *\n * @param  {Graph}    graph   - Target graph.\n * @param  {function} reducer - Function reducing the edges attributes.\n * @return {array}\n */\nfunction collectEdgeData(graph, reducer) {\n  var edges = new Array(graph.size);\n  var i = 0;\n\n  graph.forEachEdge(function (\n    edge,\n    attr,\n    source,\n    target,\n    _sa,\n    _ta,\n    undirected\n  ) {\n    var data = reducer(edge, attr);\n    data.key = edge;\n    data.source = source;\n    data.target = target;\n    data.undirected = undirected;\n    edges[i++] = data;\n  });\n\n  return edges;\n}\n\n/**\n * Function used to infer the model of the graph's nodes or edges.\n *\n * @param  {array} elements - The graph's relevant elements.\n * @return {array}\n */\n\n// TODO: on large graph, we could also sample or let the user indicate the types\nfunction inferModel(elements) {\n  var model = {},\n    attributes,\n    type,\n    k;\n\n  // Testing every attributes\n  for (var i = 0, l = elements.length; i < l; i++) {\n    attributes = elements[i].attributes;\n\n    if (!attributes) continue;\n\n    for (k in attributes) {\n      type = detectValueType(attributes[k]);\n\n      if (type === 'empty') continue;\n\n      if (!model[k]) model[k] = type;\n      else {\n        if (model[k] === 'integer' && type === 'long') model[k] = type;\n        else if (model[k] !== type) model[k] = 'string';\n      }\n    }\n  }\n\n  // TODO: check default values\n  return model;\n}\n\n/**\n * Function used to write a model.\n *\n * @param {XMLWriter} writer     - The writer to use.\n * @param {object}    model      - Model to write.\n * @param {string}    modelClass - Class of the model.\n */\nfunction writeModel(writer, model, modelClass) {\n  var name;\n\n  if (!Object.keys(model).length) return;\n\n  writer.startElement('attributes');\n  writer.writeAttribute('class', modelClass);\n\n  for (name in model) {\n    writer.startElement('attribute');\n    writer.writeAttribute('id', name);\n    writer.writeAttribute('title', name);\n    writer.writeAttribute('type', model[name]);\n    writer.endElement();\n  }\n\n  writer.endElement();\n}\n\nfunction writeElements(writer, type, model, elements) {\n  var emptyModel = !Object.keys(model).length,\n    element,\n    name,\n    color,\n    value,\n    edgeType,\n    attributes,\n    weight,\n    viz,\n    k,\n    i,\n    l;\n\n  writer.startElement(type + 's');\n\n  for (i = 0, l = elements.length; i < l; i++) {\n    element = elements[i];\n    attributes = element.attributes;\n    viz = element.viz;\n\n    writer.startElement(type);\n    writer.writeAttribute('id', element.key);\n\n    if (type === 'edge') {\n      edgeType = element.undirected ? 'undirected' : 'directed';\n\n      if (edgeType !== writer.defaultEdgeType)\n        writer.writeAttribute('type', edgeType);\n\n      writer.writeAttribute('source', element.source);\n      writer.writeAttribute('target', element.target);\n\n      weight = element.weight;\n\n      if (\n        (typeof weight === 'number' && !isNaN(weight)) ||\n        typeof weight === 'string'\n      )\n        writer.writeAttribute('weight', element.weight);\n    }\n\n    if (element.label) writer.writeAttribute('label', element.label);\n\n    if (!emptyModel && attributes) {\n      writer.startElement('attvalues');\n\n      for (name in model) {\n        if (name in attributes) {\n          value = attributes[name];\n\n          if (isEmptyValue(value)) continue;\n\n          writer.startElement('attvalue');\n          writer.writeAttribute('for', name);\n          writer.writeAttribute('value', cast(model[name], value));\n          writer.endElement();\n        }\n      }\n\n      writer.endElement();\n    }\n\n    if (viz) {\n      //-- 1) Color\n      if (viz.color) {\n        color = CSSColorToRGBA(viz.color);\n\n        writer.startElementNS('viz', 'color');\n\n        for (k in color) writer.writeAttribute(k, color[k]);\n\n        writer.endElement();\n      }\n\n      //-- 2) Size\n      if ('size' in viz) {\n        writer.startElementNS('viz', 'size');\n        writer.writeAttribute('value', viz.size);\n        writer.endElement();\n      }\n\n      //-- 3) Position\n      if ('x' in viz || 'y' in viz || 'z' in viz) {\n        writer.startElementNS('viz', 'position');\n\n        if ('x' in viz) writer.writeAttribute('x', viz.x);\n\n        if ('y' in viz) writer.writeAttribute('y', viz.y);\n\n        if ('z' in viz) writer.writeAttribute('z', viz.z);\n\n        writer.endElement();\n      }\n\n      //-- 4) Shape\n      if (viz.shape) {\n        writer.startElementNS('viz', 'shape');\n        writer.writeAttribute('value', viz.shape);\n        writer.endElement();\n      }\n\n      //-- 5) Thickness\n      if ('thickness' in viz) {\n        writer.startElementNS('viz', 'thickness');\n        writer.writeAttribute('value', viz.thickness);\n        writer.endElement();\n      }\n    }\n\n    writer.endElement();\n  }\n\n  writer.endElement();\n}\n\n/**\n * Defaults.\n */\nvar DEFAULTS = {\n  encoding: 'UTF-8',\n  pretty: true,\n  formatNode: DEFAULT_NODE_FORMATTER,\n  formatEdge: DEFAULT_EDGE_FORMATTER\n};\n\n/**\n * Function taking a graphology instance & outputting a gexf string.\n *\n * @param  {Graph}  graph        - Target graphology instance.\n * @param  {object} options      - Options:\n * @param  {string}   [encoding]   - Character encoding.\n * @param  {boolean}  [pretty]     - Whether to pretty print output.\n * @param  {function} [formatNode] - Function formatting nodes' output.\n * @param  {function} [formatEdge] - Function formatting edges' output.\n * @return {string}              - GEXF string.\n */\nmodule.exports = function write(graph, options) {\n  if (!isGraph(graph))\n    throw new Error('graphology-gexf/writer: invalid graphology instance.');\n\n  options = options || {};\n\n  var indent = options.pretty === false ? false : '  ';\n\n  var formatNode = options.formatNode || DEFAULTS.formatNode,\n    formatEdge = options.formatEdge || DEFAULTS.formatEdge;\n\n  var writer = new XMLWriter(indent);\n\n  writer.startDocument('1.0', options.encoding || DEFAULTS.encoding);\n\n  // Starting gexf\n  writer.startElement('gexf');\n  writer.writeAttribute('version', '1.2');\n  writer.writeAttribute('xmlns', GEXF_NAMESPACE);\n  writer.writeAttribute('xmlns:viz', GEXF_VIZ_NAMESPACE);\n\n  // Processing meta\n  writer.startElement('meta');\n  var graphAttributes = graph.getAttributes();\n\n  if (graphAttributes.lastModifiedDate)\n    writer.writeAttribute('lastmodifieddate', graphAttributes.lastModifiedDate);\n\n  var metaTagName;\n  var graphAttribute;\n\n  for (var k in graphAttributes) {\n    if (k === 'lastModifiedDate') continue;\n\n    metaTagName = sanitizeTagName(k);\n\n    if (!metaTagName) continue;\n\n    graphAttribute = graphAttributes[k];\n\n    // NOTE: if the graph attribute is not a scalar, we do not bother writing\n    // it as metadata in the gexf output. This means the writer/parser is not\n    // idempotent, but we cannot do better because the gexf format does not\n    // allow it, since it was not meant to handle complex values as graph\n    // metadata anyway.\n    if (\n      typeof graphAttribute === 'string' ||\n      typeof graphAttribute === 'number' ||\n      typeof graphAttribute === 'boolean'\n    ) {\n      writer.writeElement(metaTagName, '' + graphAttribute);\n    }\n  }\n\n  writer.endElement();\n  writer.startElement('graph');\n\n  var type = inferType(graph);\n\n  writer.defaultEdgeType = type === 'mixed' ? 'directed' : type;\n\n  writer.writeAttribute('defaultedgetype', writer.defaultEdgeType);\n\n  // Processing model\n  var nodes = collectNodeData(graph, formatNode),\n    edges = collectEdgeData(graph, formatEdge);\n\n  var nodeModel = inferModel(nodes);\n\n  writeModel(writer, nodeModel, 'node');\n\n  var edgeModel = inferModel(edges);\n\n  writeModel(writer, edgeModel, 'edge');\n\n  // Processing nodes\n  writeElements(writer, 'node', nodeModel, nodes);\n\n  // Processing edges\n  writeElements(writer, 'edge', edgeModel, edges);\n\n  return writer.toString();\n};\n","/**\n * Graphology inferType\n * =====================\n *\n * Useful function used to \"guess\" the real type of the given Graph using\n * introspection.\n */\nvar isGraph = require('./is-graph.js');\n\n/**\n * Returning the inferred type of the given graph.\n *\n * @param  {Graph}   graph - Target graph.\n * @return {boolean}\n */\nmodule.exports = function inferType(graph) {\n  if (!isGraph(graph))\n    throw new Error(\n      'graphology-utils/infer-type: expecting a valid graphology instance.'\n    );\n\n  var declaredType = graph.type;\n\n  if (declaredType !== 'mixed') return declaredType;\n\n  if (\n    (graph.directedSize === 0 && graph.undirectedSize === 0) ||\n    (graph.directedSize > 0 && graph.undirectedSize > 0)\n  )\n    return 'mixed';\n\n  if (graph.directedSize > 0) return 'directed';\n\n  return 'undirected';\n};\n","module.exports = require('./lib/xml-writer.js');\n","\nfunction isFalse(s) {\n  return typeof s !== 'number' && !s;\n}\n\nfunction strval(s) {\n  if (typeof s == 'string') {\n    return s;\n  }\n  else if (typeof s == 'number') {\n    return s+'';\n  }\n  else if (typeof s == 'function') {\n    return s();\n  }\n  else if (s instanceof XMLWriter) {\n    return s.toString();\n  }\n  else throw Error('Bad Parameter');\n}\n\nfunction XMLWriter(indent, callback) {\n\n    if (!(this instanceof XMLWriter)) {\n        return new XMLWriter();\n    }\n\n    this.name_regex = /[_:A-Za-z][-._:A-Za-z0-9]*/;\n    this.indent = indent ? true : false;\n    this.indentString = this.indent && typeof indent === 'string' ? indent : '    ';\n    this.output = '';\n    this.stack = [];\n    this.tags = 0;\n    this.attributes = 0;\n    this.attribute = 0;\n    this.texts = 0;\n    this.comment = 0;\n    this.dtd = 0;\n    this.root = '';\n    this.pi = 0;\n    this.cdata = 0;\n    this.started_write = false;\n    this.writer;\n    this.writer_encoding = 'UTF-8';\n\n    if (typeof callback == 'function') {\n        this.writer = callback;\n    } else {\n        this.writer = function (s, e) {\n            this.output += s;\n        }\n    }\n}\n\nXMLWriter.prototype = {\n    toString : function () {\n        this.flush();\n        return this.output;\n    },\n\n    indenter : function () {\n      if (this.indent) {\n        this.write('\\n');\n        for (var i = 1; i < this.tags; i++) {\n          this.write(this.indentString);\n        }\n      }\n    },\n\n    write : function () {\n        for (var i = 0; i < arguments.length; i++) {\n            this.writer(arguments[i], this.writer_encoding);\n        }\n    },\n\n\n    flush : function () {\n        for (var i = this.tags; i > 0; i--) {\n            this.endElement();\n        }\n        this.tags = 0;\n    },\n\n    startDocument : function (version, encoding, standalone) {\n        if (this.tags || this.attributes) return this;\n\n        this.startPI('xml');\n        this.startAttribute('version');\n        this.text(typeof version == \"string\" ? version : \"1.0\");\n        this.endAttribute();\n        if (typeof encoding == \"string\") {\n            this.startAttribute('encoding');\n            this.text(encoding);\n            this.endAttribute();\n            this.writer_encoding = encoding;\n        }\n        if (standalone) {\n            this.startAttribute('standalone');\n            this.text(\"yes\");\n            this.endAttribute();\n        }\n        this.endPI();\n        if (!this.indent) {\n          this.write('\\n');\n        }\n        return this;\n    },\n\n    endDocument : function () {\n        if (this.attributes) this.endAttributes();\n        return this;\n    },\n\n    writeElement : function (name, content) {\n        return this.startElement(name).text(content).endElement();\n    },\n\n    writeElementNS : function (prefix, name, uri, content) {\n        if (!content) {\n            content = uri;\n        }\n        return this.startElementNS(prefix, name, uri).text(content).endElement();\n    },\n\n    startElement : function (name) {\n        name = strval(name);\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (this.tags === 0 && this.root && this.root !== name) throw Error('Invalid Parameter');\n        if (this.attributes) this.endAttributes();\n        ++this.tags;\n        this.texts = 0;\n        if (this.stack.length > 0)\n          this.stack[this.stack.length-1].containsTag = true;\n\n        this.stack.push({\n            name: name,\n            tags: this.tags\n        });\n        if (this.started_write) this.indenter();\n        this.write('<', name);\n        this.startAttributes();\n        this.started_write = true;\n        return this;\n    },\n    startElementNS : function (prefix, name, uri) {\n        prefix = strval(prefix);\n        name = strval(name);\n\n        if (!prefix.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (this.attributes) this.endAttributes();\n        ++this.tags;\n        this.texts = 0;\n        if (this.stack.length > 0)\n          this.stack[this.stack.length-1].containsTag = true;\n\n        this.stack.push({\n            name: prefix + ':' + name,\n            tags: this.tags\n        });\n        if (this.started_write) this.indenter();\n        this.write('<', prefix + ':' + name);\n        this.startAttributes();\n        this.started_write = true;\n        return this;\n    },\n\n    endElement : function () {\n        if (!this.tags) return this;\n        var t = this.stack.pop();\n        if (this.attributes > 0) {\n            if (this.attribute) {\n                if (this.texts) this.endAttribute();\n                this.endAttribute();\n            }\n            this.write('/');\n            this.endAttributes();\n        } else {\n            if (t.containsTag) this.indenter();\n            this.write('</', t.name, '>');\n        }\n        --this.tags;\n        this.texts = 0;\n        return this;\n    },\n\n    writeAttribute : function (name, content) {\n        if (typeof content == 'function') {\n          content = content();\n        }\n        if (isFalse(content)) {\n           return this;\n        }\n        return this.startAttribute(name).text(content).endAttribute();\n    },\n    writeAttributeNS : function (prefix, name, uri, content) {\n        if (!content) {\n            content = uri;\n        }\n        if (typeof content == 'function') {\n          content = content();\n        }\n        if (isFalse(content)) {\n          return this;\n        }\n        return this.startAttributeNS(prefix, name, uri).text(content).endAttribute();\n    },\n\n    startAttributes : function () {\n        this.attributes = 1;\n        return this;\n    },\n\n    endAttributes : function () {\n        if (!this.attributes) return this;\n        if (this.attribute) this.endAttribute();\n        this.attributes = 0;\n        this.attribute = 0;\n        this.texts = 0;\n        this.write('>');\n        return this;\n    },\n\n    startAttribute : function (name) {\n        name = strval(name);\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (!this.attributes && !this.pi) return this;\n        if (this.attribute) return this;\n        this.attribute = 1;\n        this.write(' ', name, '=\"');\n        return this;\n    },\n    startAttributeNS : function (prefix, name, uri) {\n        prefix = strval(prefix);\n        name = strval(name);\n\n        if (!prefix.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (!this.attributes && !this.pi) return this;\n        if (this.attribute) return this;\n        this.attribute = 1;\n        this.write(' ', prefix + ':' + name, '=\"');\n        return this;\n    },\n    endAttribute : function () {\n        if (!this.attribute) return this;\n        this.attribute = 0;\n        this.texts = 0;\n        this.write('\"');\n        return this;\n    },\n\n    text : function (content) {\n        content = strval(content);\n        if (!this.tags && !this.comment && !this.pi && !this.cdata) return this;\n        if (this.attributes && this.attribute) {\n            ++this.texts;\n            this.write(content\n                       .replace(/&/g, '&amp;')\n                       .replace(/</g, '&lt;')\n                       .replace(/\"/g, '&quot;')\n                       .replace(/\\t/g, '&#x9;')\n                       .replace(/\\n/g, '&#xA;')\n                       .replace(/\\r/g, '&#xD;')\n                      );\n            return this;\n        } else if (this.attributes && !this.attribute) {\n            this.endAttributes();\n        }\n        if (this.comment || this.cdata) {\n            this.write(content);\n        }\n        else {\n          this.write(content.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;'));\n        }\n        ++this.texts;\n        this.started_write = true;\n        return this;\n    },\n\n    writeComment : function (content) {\n        return this.startComment().text(content).endComment();\n    },\n\n    startComment : function () {\n        if (this.comment) return this;\n        if (this.attributes) this.endAttributes();\n        this.indenter();\n        this.write('<!--');\n        this.comment = 1;\n        this.started_write = true;\n        return this;\n    },\n\n    endComment : function () {\n        if (!this.comment) return this;\n        this.write('-->');\n        this.comment = 0;\n        return this;\n    },\n\n    writeDocType : function (name, pubid, sysid, subset) {\n        return this.startDocType(name, pubid, sysid, subset).endDocType()\n    },\n\n    startDocType : function (name, pubid, sysid, subset) {\n        if (this.dtd || this.tags) return this;\n\n        name = strval(name);\n        pubid = pubid ? strval(pubid) : pubid;\n        sysid = sysid ? strval(sysid) : sysid;\n        subset = subset ? strval(subset) : subset;\n\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (pubid && !pubid.match(/^[\\w\\-][\\w\\s\\-\\/\\+\\:\\.]*/)) throw Error('Invalid Parameter');\n        if (sysid && !sysid.match(/^[\\w\\.][\\w\\-\\/\\\\\\:\\.]*/)) throw Error('Invalid Parameter');\n        if (subset && !subset.match(/[\\w\\s\\<\\>\\+\\.\\!\\#\\-\\?\\*\\,\\(\\)\\|]*/)) throw Error('Invalid Parameter');\n\n        pubid = pubid ? ' PUBLIC \"' + pubid + '\"' : (sysid) ? ' SYSTEM' : '';\n        sysid = sysid ? ' \"' + sysid + '\"' : '';\n        subset = subset ? ' [' + subset + ']': '';\n\n        if (this.started_write) this.indenter();\n        this.write('<!DOCTYPE ', name, pubid, sysid, subset);\n        this.root = name;\n        this.dtd = 1;\n        this.started_write = true;\n        return this;\n    },\n\n    endDocType : function () {\n        if (!this.dtd) return this;\n        this.write('>');\n        return this;\n    },\n\n    writePI : function (name, content) {\n        return this.startPI(name).text(content).endPI()\n    },\n\n    startPI : function (name) {\n        name = strval(name);\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (this.pi) return this;\n        if (this.attributes) this.endAttributes();\n        if (this.started_write) this.indenter();\n        this.write('<?', name);\n        this.pi = 1;\n        this.started_write = true;\n        return this;\n    },\n\n    endPI : function () {\n        if (!this.pi) return this;\n        this.write('?>');\n        this.pi = 0;\n        return this;\n    },\n\n    writeCData : function (content) {\n        return this.startCData().text(content).endCData();\n    },\n\n    startCData : function () {\n        if (this.cdata) return this;\n        if (this.attributes) this.endAttributes();\n        this.indenter();\n        this.write('<![CDATA[');\n        this.cdata = 1;\n        this.started_write = true;\n        return this;\n    },\n\n    endCData : function () {\n        if (!this.cdata) return this;\n        this.write(']]>');\n        this.cdata = 0;\n        return this;\n    },\n\n    writeRaw : function(content) {\n        content = strval(content);\n        if (!this.tags && !this.comment && !this.pi && !this.cdata) return this;\n        if (this.attributes && this.attribute) {\n            ++this.texts;\n            this.write(content.replace('&', '&amp;').replace('\"', '&quot;'));\n            return this;\n        } else if (this.attributes && !this.attribute) {\n            this.endAttributes();\n        }\n        ++this.texts;\n        this.write(content);\n        this.started_write = true;\n        return this;\n    }\n\n}\n\nmodule.exports = XMLWriter;\n"],"sourceRoot":""}