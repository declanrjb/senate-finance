{"code":"(this[\"webpackJsonpnew-flare\"]=this[\"webpackJsonpnew-flare\"]||[]).push([[2],[function(t,e,r){\"use strict\";var n=this&&this.__read||function(t,e){var r=\"function\"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0}),e.validateGraph=e.canUse32BitsIndices=e.extractPixel=e.getMatrixImpact=e.matrixFromCamera=e.getCorrectionRatio=e.floatColor=e.floatArrayColor=e.parseColor=e.zIndexOrdering=e.createNormalizationFunction=e.graphExtent=e.getPixelRatio=e.createElement=e.cancelFrame=e.requestFrame=e.assignDeep=e.assign=e.isPlainObject=void 0;var o=i(r(1)),a=r(6),s=r(21);function u(t){return\"object\"===typeof t&&null!==t&&t.constructor===Object}e.isPlainObject=u,e.assign=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t=t||{};for(var n=0,i=e.length;n<i;n++){var o=e[n];o&&Object.assign(t,o)}return t},e.assignDeep=function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e=e||{};for(var i=0,o=r.length;i<o;i++){var a=r[i];if(a)for(var s in a)u(a[s])?e[s]=t(e[s],a[s]):e[s]=a[s]}return e},e.requestFrame=\"undefined\"!==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,0)},e.cancelFrame=\"undefined\"!==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:function(t){return clearTimeout(t)},e.createElement=function(t,e,r){var n=document.createElement(t);if(e)for(var i in e)n.style[i]=e[i];if(r)for(var i in r)n.setAttribute(i,r[i]);return n},e.getPixelRatio=function(){return\"undefined\"!==typeof window.devicePixelRatio?window.devicePixelRatio:1},e.graphExtent=function(t){if(!t.order)return{x:[0,1],y:[0,1]};var e=1/0,r=-1/0,n=1/0,i=-1/0;return t.forEachNode((function(t,o){var a=o.x,s=o.y;a<e&&(e=a),a>r&&(r=a),s<n&&(n=s),s>i&&(i=s)})),{x:[e,r],y:[n,i]}},e.createNormalizationFunction=function(t){var e=n(t.x,2),r=e[0],i=e[1],o=n(t.y,2),a=o[0],s=o[1],u=Math.max(i-r,s-a),c=(i+r)/2,h=(s+a)/2;(0===u||Math.abs(u)===1/0||isNaN(u))&&(u=1),isNaN(c)&&(c=0),isNaN(h)&&(h=0);var d=function(t){return{x:.5+(t.x-c)/u,y:.5+(t.y-h)/u}};return d.applyTo=function(t){t.x=.5+(t.x-c)/u,t.y=.5+(t.y-h)/u},d.inverse=function(t){return{x:c+u*(t.x-.5),y:h+u*(t.y-.5)}},d.ratio=u,d},e.zIndexOrdering=function(t,e,r){return r.sort((function(t,r){var n=e(t)||0,i=e(r)||0;return n<i?-1:n>i?1:0}))};var c=new Int8Array(4),h=new Int32Array(c.buffer,0,1),d=new Float32Array(c.buffer,0,1),l=/^\\s*rgba?\\s*\\(/,f=/^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)(?:\\s*,\\s*(.*)?)?\\)\\s*$/;function p(t){var e=0,r=0,n=0,i=1;if(\"#\"===t[0])4===t.length?(e=parseInt(t.charAt(1)+t.charAt(1),16),r=parseInt(t.charAt(2)+t.charAt(2),16),n=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),r=parseInt(t.charAt(3)+t.charAt(4),16),n=parseInt(t.charAt(5)+t.charAt(6),16));else if(l.test(t)){var o=t.match(f);o&&(e=+o[1],r=+o[2],n=+o[3],o[4]&&(i=+o[4]))}return{r:e,g:r,b:n,a:i}}e.parseColor=p;var g={};for(var y in s.HTML_COLORS)g[y]=m(s.HTML_COLORS[y]),g[s.HTML_COLORS[y]]=g[y];function m(t){if(\"undefined\"!==typeof g[t])return g[t];var e=p(t),r=e.r,n=e.g,i=e.b,o=e.a;o=255*o|0,h[0]=4278190079&(o<<24|i<<16|n<<8|r);var a=d[0];return g[t]=a,a}function v(t,e){var r=t.height/t.width,n=e.height/e.width;return r<1&&n>1||r>1&&n<1?1:Math.min(Math.max(n,1/n),Math.max(1/r,r))}e.floatArrayColor=function(t){var e=p(t=s.HTML_COLORS[t]||t),r=e.r,n=e.g,i=e.b,o=e.a;return new Float32Array([r/255,n/255,i/255,o])},e.floatColor=m,e.getCorrectionRatio=v,e.matrixFromCamera=function(t,e,r,n,i){var o=t.angle,s=t.ratio,u=t.x,c=t.y,h=e.width,d=e.height,l=(0,a.identity)(),f=Math.min(h,d)-2*n,p=v(e,r);return i?((0,a.multiply)(l,(0,a.translate)((0,a.identity)(),u,c)),(0,a.multiply)(l,(0,a.scale)((0,a.identity)(),s)),(0,a.multiply)(l,(0,a.rotate)((0,a.identity)(),o)),(0,a.multiply)(l,(0,a.scale)((0,a.identity)(),h/f/2/p,d/f/2/p))):((0,a.multiply)(l,(0,a.scale)((0,a.identity)(),f/h*2*p,f/d*2*p)),(0,a.multiply)(l,(0,a.rotate)((0,a.identity)(),-o)),(0,a.multiply)(l,(0,a.scale)((0,a.identity)(),1/s)),(0,a.multiply)(l,(0,a.translate)((0,a.identity)(),-u,-c))),l},e.getMatrixImpact=function(t,e,r){var n=(0,a.multiplyVec2)(t,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),i=n.x,o=n.y;return 1/Math.sqrt(Math.pow(i,2)+Math.pow(o,2))/r.width},e.extractPixel=function(t,e,r,n){var i=n||new Uint8Array(4);return t.readPixels(e,r,1,1,t.RGBA,t.UNSIGNED_BYTE,i),i},e.canUse32BitsIndices=function(t){return\"undefined\"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||!!t.getExtension(\"OES_element_index_uint\")},e.validateGraph=function(t){if(!(0,o.default)(t))throw new Error(\"Sigma: invalid graph instance.\");t.forEachNode((function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error(\"Sigma: Coordinates of node \".concat(t,\" are invalid. A node must have a numeric 'x' and 'y' attribute.\"))}))}},function(t,e){t.exports=function(t){return null!==t&&\"object\"===typeof t&&\"function\"===typeof t.addUndirectedEdgeWithKey&&\"function\"===typeof t.dropNode&&\"boolean\"===typeof t.multi}},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,\"__esModule\",{value:!0}),e.createEdgeCompoundProgram=e.AbstractEdgeProgram=void 0;var i=function(t){function e(e,r,n,i,o){return t.call(this,e,r,n,i,o)||this}return n(e,t),e}(r(12).AbstractProgram);e.AbstractEdgeProgram=i,e.createEdgeCompoundProgram=function(t){return function(){function e(e,r){this.programs=t.map((function(t){return new t(e,r)}))}return e.prototype.bufferData=function(){this.programs.forEach((function(t){return t.bufferData()}))},e.prototype.allocate=function(t){this.programs.forEach((function(e){return e.allocate(t)}))},e.prototype.bind=function(){},e.prototype.computeIndices=function(){this.programs.forEach((function(t){return t.computeIndices()}))},e.prototype.render=function(t){this.programs.forEach((function(e){e.bind(),e.bufferData(),e.render(t)}))},e.prototype.process=function(t,e,r,n,i){this.programs.forEach((function(o){return o.process(t,e,r,n,i)}))},e}()}},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,\"__esModule\",{value:!0}),e.TypedEventEmitter=void 0;var i=function(t){function e(){var e=t.call(this)||this;return e.rawEmitter=e,e}return n(e,t),e}(r(22).EventEmitter);e.TypedEventEmitter=i},function(t,e,r){\"use strict\";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r.d(e,\"a\",(function(){return o}))},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(20),a=i(r(7)),s=r(0),u=r(3),c=1.5,h=function(t){function e(){var e=t.call(this)||this;return e.x=.5,e.y=.5,e.angle=0,e.ratio=1,e.minRatio=null,e.maxRatio=null,e.nextFrame=null,e.previousState=null,e.enabled=!0,e.previousState=e.getState(),e}return n(e,t),e.from=function(t){return(new e).setState(t)},e.prototype.enable=function(){return this.enabled=!0,this},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},e.prototype.hasState=function(t){return this.x===t.x&&this.y===t.y&&this.ratio===t.ratio&&this.angle===t.angle},e.prototype.getPreviousState=function(){var t=this.previousState;return t?{x:t.x,y:t.y,angle:t.angle,ratio:t.ratio}:null},e.prototype.getBoundedRatio=function(t){var e=t;return\"number\"===typeof this.minRatio&&(e=Math.max(e,this.minRatio)),\"number\"===typeof this.maxRatio&&(e=Math.min(e,this.maxRatio)),e},e.prototype.validateState=function(t){var e={};return\"number\"===typeof t.x&&(e.x=t.x),\"number\"===typeof t.y&&(e.y=t.y),\"number\"===typeof t.angle&&(e.angle=t.angle),\"number\"===typeof t.ratio&&(e.ratio=this.getBoundedRatio(t.ratio)),e},e.prototype.isAnimated=function(){return!!this.nextFrame},e.prototype.setState=function(t){if(!this.enabled)return this;this.previousState=this.getState();var e=this.validateState(t);return\"number\"===typeof e.x&&(this.x=e.x),\"number\"===typeof e.y&&(this.y=e.y),\"number\"===typeof e.angle&&(this.angle=e.angle),\"number\"===typeof e.ratio&&(this.ratio=e.ratio),this.hasState(this.previousState)||this.emit(\"updated\",this.getState()),this},e.prototype.animate=function(t,e,r){var n=this;if(this.enabled){var i=Object.assign({},o.ANIMATE_DEFAULTS,e),u=this.validateState(t),c=\"function\"===typeof i.easing?i.easing:a.default[i.easing],h=Date.now(),d=this.getState(),l=function t(){var e=(Date.now()-h)/i.duration;if(e>=1)return n.nextFrame=null,n.setState(u),void(n.animationCallback&&(n.animationCallback.call(null),n.animationCallback=void 0));var r=c(e),o={};\"number\"===typeof u.x&&(o.x=d.x+(u.x-d.x)*r),\"number\"===typeof u.y&&(o.y=d.y+(u.y-d.y)*r),\"number\"===typeof u.angle&&(o.angle=d.angle+(u.angle-d.angle)*r),\"number\"===typeof u.ratio&&(o.ratio=d.ratio+(u.ratio-d.ratio)*r),n.setState(o),n.nextFrame=(0,s.requestFrame)(t)};this.nextFrame?((0,s.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,s.requestFrame)(l)):l(),this.animationCallback=r}},e.prototype.animatedZoom=function(t){if(t){if(\"number\"===typeof t)return this.animate({ratio:this.ratio/t});this.animate({ratio:this.ratio/(t.factor||c)},t)}else this.animate({ratio:this.ratio/c})},e.prototype.animatedUnzoom=function(t){if(t){if(\"number\"===typeof t)return this.animate({ratio:this.ratio*t});this.animate({ratio:this.ratio*(t.factor||c)},t)}else this.animate({ratio:this.ratio*c})},e.prototype.animatedReset=function(t){this.animate({x:.5,y:.5,ratio:1,angle:0},t)},e.prototype.copy=function(){return e.from(this.getState())},e}(u.TypedEventEmitter);e.default=h},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.multiplyVec2=e.multiply=e.translate=e.rotate=e.scale=e.identity=void 0,e.identity=function(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},e.scale=function(t,e,r){return t[0]=e,t[4]=\"number\"===typeof r?r:e,t},e.rotate=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[3]=-r,t[4]=n,t},e.translate=function(t,e,r){return t[6]=e,t[7]=r,t},e.multiply=function(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],d=e[0],l=e[1],f=e[2],p=e[3],g=e[4],y=e[5],m=e[6],v=e[7],b=e[8];return t[0]=d*r+l*o+f*u,t[1]=d*n+l*a+f*c,t[2]=d*i+l*s+f*h,t[3]=p*r+g*o+y*u,t[4]=p*n+g*a+y*c,t[5]=p*i+g*s+y*h,t[6]=m*r+v*o+b*u,t[7]=m*n+v*a+b*c,t[8]=m*i+v*s+b*h,t},e.multiplyVec2=function(t,e,r){void 0===r&&(r=1);var n=t[0],i=t[1],o=t[3],a=t[4],s=t[6],u=t[7],c=e.x,h=e.y;return{x:c*n+h*o+s*r,y:c*i+h*a+u*r}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.cubicInOut=e.cubicOut=e.cubicIn=e.quadraticInOut=e.quadraticOut=e.quadraticIn=e.linear=void 0;e.linear=function(t){return t};e.quadraticIn=function(t){return t*t};e.quadraticOut=function(t){return t*(2-t)};e.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};e.cubicIn=function(t){return t*t*t};e.cubicOut=function(t){return--t*t*t+1};e.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};var n={linear:e.linear,quadraticIn:e.quadraticIn,quadraticOut:e.quadraticOut,quadraticInOut:e.quadraticInOut,cubicIn:e.cubicIn,cubicOut:e.cubicOut,cubicInOut:e.cubicInOut};e.default=n},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,\"default\",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)\"default\"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e};Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(r(9)),u=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.enabled=!0,n.draggedEvents=0,n.downStartTime=null,n.lastMouseX=null,n.lastMouseY=null,n.isMouseDown=!1,n.isMoving=!1,n.movingTimeout=null,n.startCameraState=null,n.clicks=0,n.doubleClickTimeout=null,n.currentWheelDirection=0,n.handleClick=n.handleClick.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.handleDown=n.handleDown.bind(n),n.handleUp=n.handleUp.bind(n),n.handleMove=n.handleMove.bind(n),n.handleWheel=n.handleWheel.bind(n),n.handleOut=n.handleOut.bind(n),e.addEventListener(\"click\",n.handleClick,!1),e.addEventListener(\"contextmenu\",n.handleRightClick,!1),e.addEventListener(\"mousedown\",n.handleDown,!1),e.addEventListener(\"wheel\",n.handleWheel,!1),e.addEventListener(\"mouseout\",n.handleOut,!1),document.addEventListener(\"mousemove\",n.handleMove,!1),document.addEventListener(\"mouseup\",n.handleUp,!1),n}return n(e,t),e.prototype.kill=function(){var t=this.container;t.removeEventListener(\"click\",this.handleClick),t.removeEventListener(\"contextmenu\",this.handleRightClick),t.removeEventListener(\"mousedown\",this.handleDown),t.removeEventListener(\"wheel\",this.handleWheel),t.removeEventListener(\"mouseout\",this.handleOut),document.removeEventListener(\"mousemove\",this.handleMove),document.removeEventListener(\"mouseup\",this.handleUp)},e.prototype.handleClick=function(t){var e=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,\"number\"===typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(t);setTimeout((function(){e.clicks=0,e.doubleClickTimeout=null}),300),this.draggedEvents<3&&this.emit(\"click\",(0,s.getMouseCoords)(t,this.container))}},e.prototype.handleRightClick=function(t){this.enabled&&this.emit(\"rightClick\",(0,s.getMouseCoords)(t,this.container))},e.prototype.handleDoubleClick=function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e=(0,s.getMouseCoords)(t,this.container);if(this.emit(\"doubleClick\",e),!e.sigmaDefaultPrevented){var r=this.renderer.getCamera(),n=r.getBoundedRatio(r.getState().ratio/2.2);r.animate(this.renderer.getViewportZoomedState((0,s.getPosition)(t,this.container),n),{easing:\"quadraticInOut\",duration:200})}}},e.prototype.handleDown=function(t){if(this.enabled){this.startCameraState=this.renderer.getCamera().getState();var e=(0,s.getPosition)(t,this.container),r=e.x,n=e.y;this.lastMouseX=r,this.lastMouseY=n,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0,this.emit(\"mousedown\",(0,s.getMouseCoords)(t,this.container))}},e.prototype.handleUp=function(t){var e=this;if(this.enabled&&this.isMouseDown){var r=this.renderer.getCamera();this.isMouseDown=!1,\"number\"===typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var n=(0,s.getPosition)(t,this.container),i=n.x,o=n.y,a=r.getState(),u=r.getPreviousState()||{x:0,y:0};this.isMoving?r.animate({x:a.x+3*(a.x-u.x),y:a.y+3*(a.y-u.y)},{duration:200,easing:\"quadraticOut\"}):this.lastMouseX===i&&this.lastMouseY===o||r.setState({x:a.x,y:a.y}),this.isMoving=!1,setTimeout((function(){e.draggedEvents=0,e.renderer.refresh()}),0),this.emit(\"mouseup\",(0,s.getMouseCoords)(t,this.container))}},e.prototype.handleMove=function(t){var e=this;if(this.enabled){var r=(0,s.getMouseCoords)(t,this.container);if(this.emit(\"mousemovebody\",r),t.target===this.container&&this.emit(\"mousemove\",r),!r.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,\"number\"===typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){e.movingTimeout=null,e.isMoving=!1}),100);var n=this.renderer.getCamera(),i=(0,s.getPosition)(t,this.container),o=i.x,a=i.y,u=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),c=this.renderer.viewportToFramedGraph({x:o,y:a}),h=u.x-c.x,d=u.y-c.y,l=n.getState(),f=l.x+h,p=l.y+d;n.setState({x:f,y:p}),this.lastMouseX=o,this.lastMouseY=a,t.preventDefault(),t.stopPropagation()}}},e.prototype.handleWheel=function(t){var e=this;if(this.enabled){t.preventDefault(),t.stopPropagation();var r=(0,s.getWheelDelta)(t);if(r){var n=(0,s.getWheelCoords)(t,this.container);if(this.emit(\"wheel\",n),!n.sigmaDefaultPrevented){var i=r>0?1/1.7:1.7,o=this.renderer.getCamera(),a=o.getBoundedRatio(o.getState().ratio*i),u=r>0?1:-1,c=Date.now();this.currentWheelDirection===u&&this.lastWheelTriggerTime&&c-this.lastWheelTriggerTime<50||(o.animate(this.renderer.getViewportZoomedState((0,s.getPosition)(t,this.container),a),{easing:\"quadraticOut\",duration:250},(function(){e.currentWheelDirection=0})),this.currentWheelDirection=u,this.lastWheelTriggerTime=c)}}}},e.prototype.handleOut=function(){},e}(s.default);e.default=u},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)};Object.defineProperty(e,\"__esModule\",{value:!0}),e.getWheelDelta=e.getTouchCoords=e.getTouchesArray=e.getWheelCoords=e.getMouseCoords=e.getPosition=void 0;var o=r(3);function a(t,e){var r=e.getBoundingClientRect();return{x:t.clientX-r.left,y:t.clientY-r.top}}function s(t,e){var r=i(i({},a(t,e)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0},original:t});return r}e.getPosition=a,e.getMouseCoords=s,e.getWheelCoords=function(t,e){return i(i({},s(t,e)),{delta:c(t)})};function u(t){for(var e=[],r=0,n=Math.min(t.length,2);r<n;r++)e.push(t[r]);return e}function c(t){if(\"undefined\"!==typeof t.deltaY)return-3*t.deltaY/360;if(\"undefined\"!==typeof t.detail)return t.detail/-9;throw new Error(\"Captor: could not extract delta from event.\")}e.getTouchesArray=u,e.getTouchCoords=function(t,e){return{touches:u(t.touches).map((function(t){return a(t,e)})),original:t}},e.getWheelDelta=c;var h=function(t){function e(e,r){var n=t.call(this)||this;return n.container=e,n.renderer=r,n}return n(e,t),e}(o.TypedEventEmitter);e.default=h},function(t,e,r){\"use strict\";var n=this&&this.__read||function(t,e){var r=\"function\"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0}),e.rectangleCollidesWithQuad=e.squareCollidesWithQuad=e.getCircumscribedAlignedRectangle=e.isRectangleAligned=void 0;var a=o(r(23)),s=!1;function u(t){return t.x1===t.x2||t.y1===t.y2}function c(t){var e=Math.sqrt(Math.pow(t.x2-t.x1,2)+Math.pow(t.y2-t.y1,2)),r=(t.y1-t.y2)*t.height/e,n=(t.x2-t.x1)*t.height/e,i={x:t.x1,y:t.y1},o={x:t.x2,y:t.y2},a={x:t.x1+r,y:t.y1+n},s={x:t.x2+r,y:t.y2+n},u=Math.min(i.x,o.x,a.x,s.x),c=Math.max(i.x,o.x,a.x,s.x),h=Math.min(i.y,o.y,a.y,s.y);return{x1:u,y1:h,x2:c,y2:h,height:Math.max(i.y,o.y,a.y,s.y)-h}}function h(t,e,r,n,i,o,a){return t<n+o&&t+r>n&&e<i+a&&e+r>i}function d(t,e,r,n,i,o,a,s){return t<i+a&&t+r>i&&e<o+s&&e+n>o}function l(t,e,r,n,i,o){var a=t<r+i/2;return e<n+o/2?a?1:2:a?3:4}e.isRectangleAligned=u,e.getCircumscribedAlignedRectangle=c,e.squareCollidesWithQuad=h,e.rectangleCollidesWithQuad=d;var f=function(){function t(t){var e;void 0===t&&(t={}),this.containers=((e={}).outside=[],e),this.cache=null,this.lastRectangle=null;var r=Math.pow(4,5);this.data=new Float32Array((4*r-1)/3*4),t.boundaries?this.resize(t.boundaries):this.resize({x:0,y:0,width:1,height:1})}return t.prototype.add=function(t,e,r,n){return function(t,e,r,n,i,o,a){for(var u=i-a,c=o-a,d=2*a,l=0,f=0;;){if(l>=t)return r[f]=r[f]||[],void r[f].push(n);var p=4*f+4,g=4*f+8,y=4*f+12,m=4*f+16,v=h(u,c,d,e[p+0],e[p+1],e[p+2],e[p+3]),b=h(u,c,d,e[g+0],e[g+1],e[g+2],e[g+3]),w=h(u,c,d,e[y+0],e[y+1],e[y+2],e[y+3]),_=h(u,c,d,e[m+0],e[m+1],e[m+2],e[m+3]),x=[v,b,w,_].reduce((function(t,e){return e?t+1:t}),0);if(0===x&&0===l)return r.outside.push(n),void(!s&&r.outside.length>=5&&(s=!0,console.warn(\"sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.\")));if(0===x)throw new Error(\"sigma/quadtree.insertNode: no collision (level: \".concat(l,\", key: \").concat(n,\", x: \").concat(i,\", y: \").concat(o,\", size: \").concat(a,\").\"));if(3===x)throw new Error(\"sigma/quadtree.insertNode: 3 impossible collisions (level: \".concat(l,\", key: \").concat(n,\", x: \").concat(i,\", y: \").concat(o,\", size: \").concat(a,\").\"));if(x>1)return r[f]=r[f]||[],void r[f].push(n);l++,v&&(f=p),b&&(f=g),w&&(f=y),_&&(f=m)}}(5,this.data,this.containers,t,e,r,n),this},t.prototype.resize=function(t){this.clear(),this.data[0]=t.x,this.data[1]=t.y,this.data[2]=t.width,this.data[3]=t.height,function(t,e){for(var r=[0,0];r.length;){var n=r.pop(),i=r.pop(),o=4*i+4,a=4*i+8,s=4*i+12,u=4*i+16,c=e[i+0],h=e[i+1],d=e[i+2]/2,l=e[i+3]/2;e[o+0]=c,e[o+1]=h,e[o+2]=d,e[o+3]=l,e[a+0]=c+d,e[a+1]=h,e[a+2]=d,e[a+3]=l,e[s+0]=c,e[s+1]=h+l,e[s+2]=d,e[s+3]=l,e[u+0]=c+d,e[u+1]=h+l,e[u+2]=d,e[u+3]=l,n<t-1&&(r.push(u,n+1),r.push(s,n+1),r.push(a,n+1),r.push(o,n+1))}}(5,this.data)},t.prototype.clear=function(){var t;return this.containers=((t={}).outside=[],t),this},t.prototype.point=function(t,e){var r=this.containers.outside,o=0,a=0;do{this.containers[o]&&r.push.apply(r,i([],n(this.containers[o]),!1)),o=4*o+4*l(t,e,this.data[o+0],this.data[o+1],this.data[o+2],this.data[o+3]),a++}while(a<=5);return r},t.prototype.rectangle=function(t,e,r,o,s){var h,l=this.lastRectangle;return l&&t===l.x1&&r===l.x2&&e===l.y1&&o===l.y2&&s===l.height||(this.lastRectangle={x1:t,y1:e,x2:r,y2:o,height:s},u(this.lastRectangle)||(this.lastRectangle=c(this.lastRectangle)),this.cache=function(t,e,r,n,i,o,s){for(var u,c=[0,0],h=[];c.length;){var l=c.pop(),f=c.pop();if((u=r[f])&&(0,a.default)(h,u),!(l>=t)){var p=4*f+4,g=4*f+8,y=4*f+12,m=4*f+16,v=d(n,i,o,s,e[p+0],e[p+1],e[p+2],e[p+3]),b=d(n,i,o,s,e[g+0],e[g+1],e[g+2],e[g+3]),w=d(n,i,o,s,e[y+0],e[y+1],e[y+2],e[y+3]),_=d(n,i,o,s,e[m+0],e[m+1],e[m+2],e[m+3]);v&&c.push(p,l+1),b&&c.push(g,l+1),w&&c.push(y,l+1),_&&c.push(m,l+1)}}return h}(5,this.data,this.containers,t,e,Math.abs(t-r)||Math.abs(e-o),s),(h=this.cache).push.apply(h,i([],n(this.containers.outside),!1))),this.cache},t}();e.default=f},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t,e,r){if(e.label){var n=r.labelSize,i=r.labelFont,o=r.labelWeight,a=r.labelColor.attribute?e[r.labelColor.attribute]||r.labelColor.color||\"#000\":r.labelColor.color;t.fillStyle=a,t.font=\"\".concat(o,\" \").concat(n,\"px \").concat(i),t.fillText(e.label,e.x+e.size+3,e.y+n/3)}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.AbstractProgram=void 0;var n=r(32),i=function(){function t(t,e,r,i,o){this.array=new Float32Array,this.points=i,this.attributes=o,this.gl=t,this.vertexShaderSource=e,this.fragmentShaderSource=r;var a=t.createBuffer();if(null===a)throw new Error(\"AbstractProgram: error while creating the buffer\");this.buffer=a,t.bindBuffer(t.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,n.loadVertexShader)(t,this.vertexShaderSource),this.fragmentShader=(0,n.loadFragmentShader)(t,this.fragmentShaderSource),this.program=(0,n.loadProgram)(t,[this.vertexShader,this.fragmentShader])}return t.prototype.bufferData=function(){var t=this.gl;t.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW)},t.prototype.allocate=function(t){this.array=new Float32Array(this.points*this.attributes*t)},t.prototype.hasNothingToRender=function(){return 0===this.array.length},t}();e.AbstractProgram=i},function(t,e){!function(){\"use strict\";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})}},r={};e.r(r),e.d(r,{default:function(){return n}});var n=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float feather = 0.001;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  float dist = length(v_normal) * v_thickness;\\n\\n  float t = smoothstep(\\n    v_thickness - feather,\\n    v_thickness,\\n    dist\\n  );\\n\\n  gl_FragColor = mix(v_color, transparent, t);\\n}\\n\";t.exports=r}()},function(t,e){e.cast=function(t,e){switch(t){case\"boolean\":e=\"true\"===e;break;case\"integer\":case\"long\":case\"float\":case\"double\":e=+e;break;case\"liststring\":e=e?e.split(\"|\"):[]}return e};var r=/[\"'<>&\\s]/g;e.sanitizeTagName=function(t){return t.replace(r,\"\").trim()}},function(t,e,r){\"use strict\";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0}),e.Sigma=e.MouseCaptor=e.QuadTree=e.Camera=void 0;var i=n(r(19));e.Sigma=i.default;var o=n(r(5));e.Camera=o.default;var a=n(r(10));e.QuadTree=a.default;var s=n(r(8));e.MouseCaptor=s.default,e.default=i.default},function(t,e,r){t.exports=function(){\"use strict\";function t(e){return(t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(e)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}function i(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function o(t,e,r){return o=i()?Reflect.construct.bind():function(t,e,r){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return r&&n(o,r.prototype),o},o.apply(null,arguments)}function a(t){var e=\"function\"==typeof Map?new Map:void 0;return a=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf(\"[native code]\")))return t;var i;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return o(t,arguments,r(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n(a,t)},a(t)}function s(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}var u=function(){for(var t=arguments[0],e=1,r=arguments.length;e<r;e++)if(arguments[e])for(var n in arguments[e])t[n]=arguments[e][n];return t};function c(t,e,r,n){var i=t._nodes.get(e),o=null;return i?o=\"mixed\"===n?i.out&&i.out[r]||i.undirected&&i.undirected[r]:\"directed\"===n?i.out&&i.out[r]:i.undirected&&i.undirected[r]:o}function h(e){return\"object\"===t(e)&&null!==e&&e.constructor===Object}function d(t){var e;for(e in t)return!1;return!0}function l(t,e,r){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:r})}function f(t,e,r){var n={enumerable:!0,configurable:!0};\"function\"==typeof r?n.get=r:(n.value=r,n.writable=!1),Object.defineProperty(t,e,n)}function p(t){return!!h(t)&&!(t.attributes&&!Array.isArray(t.attributes))}\"function\"==typeof Object.assign&&(u=Object.assign);var g,y={exports:{}},m=\"object\"==typeof Reflect?Reflect:null,v=m&&\"function\"==typeof m.apply?m.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};g=m&&\"function\"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var b=Number.isNaN||function(t){return t!=t};function w(){w.init.call(this)}y.exports=w,y.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){\"function\"==typeof t.removeListener&&t.removeListener(\"error\",i),r([].slice.call(arguments))}G(t,e,o,{once:!0}),\"error\"!==e&&function(t,e,r){\"function\"==typeof t.on&&G(t,\"error\",e,r)}(t,i,{once:!0})}))},w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var _=10;function x(t){if(\"function\"!=typeof t)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof t)}function E(t){return void 0===t._maxListeners?w.defaultMaxListeners:t._maxListeners}function L(t,e,r,n){var i,o,a,s;if(x(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit(\"newListener\",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if(\"function\"==typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=E(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error(\"Possible EventEmitter memory leak detected. \"+a.length+\" \"+String(e)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");u.name=\"MaxListenersExceededWarning\",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function A(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function k(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=A.bind(n);return i.listener=r,n.wrapFn=i,i}function S(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:\"function\"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):D(i,i.length)}function C(t){var e=this._events;if(void 0!==e){var r=e[t];if(\"function\"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function D(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function G(t,e,r,n){if(\"function\"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if(\"function\"!=typeof t.addEventListener)throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}function F(t){if(\"function\"!=typeof t)throw new Error(\"obliterator/iterator: expecting a function!\");this.next=t}Object.defineProperty(w,\"defaultMaxListeners\",{enumerable:!0,get:function(){return _},set:function(t){if(\"number\"!=typeof t||t<0||b(t))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+t+\".\");_=t}}),w.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(t){if(\"number\"!=typeof t||t<0||b(t))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+t+\".\");return this._maxListeners=t,this},w.prototype.getMaxListeners=function(){return E(this)},w.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=\"error\"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error(\"Unhandled error.\"+(o?\" (\"+o.message+\")\":\"\"));throw a.context=o,a}var s=i[t];if(void 0===s)return!1;if(\"function\"==typeof s)v(s,this,e);else{var u=s.length,c=D(s,u);for(r=0;r<u;++r)v(c[r],this,e)}return!0},w.prototype.addListener=function(t,e){return L(this,t,e,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(t,e){return L(this,t,e,!0)},w.prototype.once=function(t,e){return x(e),this.on(t,k(this,t,e)),this},w.prototype.prependOnceListener=function(t,e){return x(e),this.prependListener(t,k(this,t,e)),this},w.prototype.removeListener=function(t,e){var r,n,i,o,a;if(x(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit(\"removeListener\",t,r.listener||e));else if(\"function\"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit(\"removeListener\",t,a||e)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)\"removeListener\"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},w.prototype.listeners=function(t){return S(this,t,!0)},w.prototype.rawListeners=function(t){return S(this,t,!1)},w.listenerCount=function(t,e){return\"function\"==typeof t.listenerCount?t.listenerCount(e):C.call(t,e)},w.prototype.listenerCount=C,w.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]},\"undefined\"!=typeof Symbol&&(F.prototype[Symbol.iterator]=function(){return this}),F.of=function(){var t=arguments,e=t.length,r=0;return new F((function(){return r>=e?{done:!0}:{done:!1,value:t[r++]}}))},F.empty=function(){return new F((function(){return{done:!0}}))},F.fromSequence=function(t){var e=0,r=t.length;return new F((function(){return e>=r?{done:!0}:{done:!1,value:t[e++]}}))},F.is=function(t){return t instanceof F||\"object\"==typeof t&&null!==t&&\"function\"==typeof t.next};var P=F,T={};T.ARRAY_BUFFER_SUPPORT=\"undefined\"!=typeof ArrayBuffer,T.SYMBOL_SUPPORT=\"undefined\"!=typeof Symbol;var O=P,N=T,M=N.ARRAY_BUFFER_SUPPORT,R=N.SYMBOL_SUPPORT,j=function(t){var e=function(t){return\"string\"==typeof t||Array.isArray(t)||M&&ArrayBuffer.isView(t)?O.fromSequence(t):\"object\"!=typeof t||null===t?null:R&&\"function\"==typeof t[Symbol.iterator]?t[Symbol.iterator]():\"function\"==typeof t.next?t:null}(t);if(!e)throw new Error(\"obliterator: target is not iterable nor a valid iterator.\");return e},z=j,U=function(t,e){for(var r,n=arguments.length>1?e:1/0,i=n!==1/0?new Array(n):[],o=0,a=z(t);;){if(o===n)return i;if((r=a.next()).done)return o!==e&&(i.length=o),i;i[o++]=r.value}},I=function(t){function r(e){var r;return(r=t.call(this)||this).name=\"GraphError\",r.message=e,r}return e(r,t),r}(a(Error)),B=function(t){function r(e){var n;return(n=t.call(this,e)||this).name=\"InvalidArgumentsGraphError\",\"function\"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(n),r.prototype.constructor),n}return e(r,t),r}(I),W=function(t){function r(e){var n;return(n=t.call(this,e)||this).name=\"NotFoundGraphError\",\"function\"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(n),r.prototype.constructor),n}return e(r,t),r}(I),q=function(t){function r(e){var n;return(n=t.call(this,e)||this).name=\"UsageGraphError\",\"function\"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(n),r.prototype.constructor),n}return e(r,t),r}(I);function H(t,e){this.key=t,this.attributes=e,this.clear()}function Y(t,e){this.key=t,this.attributes=e,this.clear()}function V(t,e){this.key=t,this.attributes=e,this.clear()}function K(t,e,r,n,i){this.key=e,this.attributes=i,this.undirected=t,this.source=r,this.target=n}function Z(t,e,r,n,i,o,a){var s,u,c,h;if(n=\"\"+n,0===r){if(!(s=t._nodes.get(n)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(n,'\" node in the graph.'));c=i,h=o}else if(3===r){if(i=\"\"+i,!(u=t._edges.get(i)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(i,'\" edge in the graph.'));var d=u.source.key,l=u.target.key;if(n===d)s=u.target;else{if(n!==l)throw new W(\"Graph.\".concat(e,': the \"').concat(n,'\" node is not attached to the \"').concat(i,'\" edge (').concat(d,\", \").concat(l,\").\"));s=u.source}c=o,h=a}else{if(!(u=t._edges.get(n)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(n,'\" edge in the graph.'));s=1===r?u.source:u.target,c=i,h=o}return[s,c,h]}H.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},Y.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},V.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},K.prototype.attach=function(){var t=\"out\",e=\"in\";this.undirected&&(t=e=\"undirected\");var r=this.source.key,n=this.target.key;this.source[t][n]=this,this.undirected&&r===n||(this.target[e][r]=this)},K.prototype.attachMulti=function(){var t=\"out\",e=\"in\",r=this.source.key,n=this.target.key;this.undirected&&(t=e=\"undirected\");var i=this.source[t],o=i[n];if(void 0===o)return i[n]=this,void(this.undirected&&r===n||(this.target[e][r]=this));o.previous=this,this.next=o,i[n]=this,this.target[e][r]=this},K.prototype.detach=function(){var t=this.source.key,e=this.target.key,r=\"out\",n=\"in\";this.undirected&&(r=n=\"undirected\"),delete this.source[r][e],delete this.target[n][t]},K.prototype.detachMulti=function(){var t=this.source.key,e=this.target.key,r=\"out\",n=\"in\";this.undirected&&(r=n=\"undirected\"),void 0===this.previous?void 0===this.next?(delete this.source[r][e],delete this.target[n][t]):(this.next.previous=void 0,this.source[r][e]=this.next,this.target[n][t]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var X=[{name:function(t){return\"get\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i){var o=Z(this,e,r,t,n,i),a=o[0],s=o[1];return a.attributes[s]}}},{name:function(t){return\"get\".concat(t,\"Attributes\")},attacher:function(t,e,r){t.prototype[e]=function(t,n){return Z(this,e,r,t,n)[0].attributes}}},{name:function(t){return\"has\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i){var o=Z(this,e,r,t,n,i),a=o[0],s=o[1];return a.attributes.hasOwnProperty(s)}}},{name:function(t){return\"set\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i,o){var a=Z(this,e,r,t,n,i,o),s=a[0],u=a[1],c=a[2];return s.attributes[u]=c,this.emit(\"nodeAttributesUpdated\",{key:s.key,type:\"set\",attributes:s.attributes,name:u}),this}}},{name:function(t){return\"update\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i,o){var a=Z(this,e,r,t,n,i,o),s=a[0],u=a[1],c=a[2];if(\"function\"!=typeof c)throw new B(\"Graph.\".concat(e,\": updater should be a function.\"));var h=s.attributes,d=c(h[u]);return h[u]=d,this.emit(\"nodeAttributesUpdated\",{key:s.key,type:\"set\",attributes:s.attributes,name:u}),this}}},{name:function(t){return\"remove\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i){var o=Z(this,e,r,t,n,i),a=o[0],s=o[1];return delete a.attributes[s],this.emit(\"nodeAttributesUpdated\",{key:a.key,type:\"remove\",attributes:a.attributes,name:s}),this}}},{name:function(t){return\"replace\".concat(t,\"Attributes\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i){var o=Z(this,e,r,t,n,i),a=o[0],s=o[1];if(!h(s))throw new B(\"Graph.\".concat(e,\": provided attributes are not a plain object.\"));return a.attributes=s,this.emit(\"nodeAttributesUpdated\",{key:a.key,type:\"replace\",attributes:a.attributes}),this}}},{name:function(t){return\"merge\".concat(t,\"Attributes\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i){var o=Z(this,e,r,t,n,i),a=o[0],s=o[1];if(!h(s))throw new B(\"Graph.\".concat(e,\": provided attributes are not a plain object.\"));return u(a.attributes,s),this.emit(\"nodeAttributesUpdated\",{key:a.key,type:\"merge\",attributes:a.attributes,data:s}),this}}},{name:function(t){return\"update\".concat(t,\"Attributes\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i){var o=Z(this,e,r,t,n,i),a=o[0],s=o[1];if(\"function\"!=typeof s)throw new B(\"Graph.\".concat(e,\": provided updater is not a function.\"));return a.attributes=s(a.attributes),this.emit(\"nodeAttributesUpdated\",{key:a.key,type:\"update\",attributes:a.attributes}),this}}}],Q=[{name:function(t){return\"get\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n){var i;if(\"mixed\"!==this.type&&\"mixed\"!==r&&r!==this.type)throw new q(\"Graph.\".concat(e,\": cannot find this type of edges in your \").concat(this.type,\" graph.\"));if(arguments.length>2){if(this.multi)throw new q(\"Graph.\".concat(e,\": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));var o=\"\"+t,a=\"\"+n;if(n=arguments[2],!(i=c(this,o,a,r)))throw new W(\"Graph.\".concat(e,': could not find an edge for the given path (\"').concat(o,'\" - \"').concat(a,'\").'))}else{if(\"mixed\"!==r)throw new q(\"Graph.\".concat(e,\": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));if(t=\"\"+t,!(i=this._edges.get(t)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(t,'\" edge in the graph.'))}return i.attributes[n]}}},{name:function(t){return\"get\".concat(t,\"Attributes\")},attacher:function(t,e,r){t.prototype[e]=function(t){var n;if(\"mixed\"!==this.type&&\"mixed\"!==r&&r!==this.type)throw new q(\"Graph.\".concat(e,\": cannot find this type of edges in your \").concat(this.type,\" graph.\"));if(arguments.length>1){if(this.multi)throw new q(\"Graph.\".concat(e,\": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));var i=\"\"+t,o=\"\"+arguments[1];if(!(n=c(this,i,o,r)))throw new W(\"Graph.\".concat(e,': could not find an edge for the given path (\"').concat(i,'\" - \"').concat(o,'\").'))}else{if(\"mixed\"!==r)throw new q(\"Graph.\".concat(e,\": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));if(t=\"\"+t,!(n=this._edges.get(t)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(t,'\" edge in the graph.'))}return n.attributes}}},{name:function(t){return\"has\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n){var i;if(\"mixed\"!==this.type&&\"mixed\"!==r&&r!==this.type)throw new q(\"Graph.\".concat(e,\": cannot find this type of edges in your \").concat(this.type,\" graph.\"));if(arguments.length>2){if(this.multi)throw new q(\"Graph.\".concat(e,\": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));var o=\"\"+t,a=\"\"+n;if(n=arguments[2],!(i=c(this,o,a,r)))throw new W(\"Graph.\".concat(e,': could not find an edge for the given path (\"').concat(o,'\" - \"').concat(a,'\").'))}else{if(\"mixed\"!==r)throw new q(\"Graph.\".concat(e,\": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));if(t=\"\"+t,!(i=this._edges.get(t)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(t,'\" edge in the graph.'))}return i.attributes.hasOwnProperty(n)}}},{name:function(t){return\"set\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i){var o;if(\"mixed\"!==this.type&&\"mixed\"!==r&&r!==this.type)throw new q(\"Graph.\".concat(e,\": cannot find this type of edges in your \").concat(this.type,\" graph.\"));if(arguments.length>3){if(this.multi)throw new q(\"Graph.\".concat(e,\": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));var a=\"\"+t,s=\"\"+n;if(n=arguments[2],i=arguments[3],!(o=c(this,a,s,r)))throw new W(\"Graph.\".concat(e,': could not find an edge for the given path (\"').concat(a,'\" - \"').concat(s,'\").'))}else{if(\"mixed\"!==r)throw new q(\"Graph.\".concat(e,\": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));if(t=\"\"+t,!(o=this._edges.get(t)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(t,'\" edge in the graph.'))}return o.attributes[n]=i,this.emit(\"edgeAttributesUpdated\",{key:o.key,type:\"set\",attributes:o.attributes,name:n}),this}}},{name:function(t){return\"update\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n,i){var o;if(\"mixed\"!==this.type&&\"mixed\"!==r&&r!==this.type)throw new q(\"Graph.\".concat(e,\": cannot find this type of edges in your \").concat(this.type,\" graph.\"));if(arguments.length>3){if(this.multi)throw new q(\"Graph.\".concat(e,\": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));var a=\"\"+t,s=\"\"+n;if(n=arguments[2],i=arguments[3],!(o=c(this,a,s,r)))throw new W(\"Graph.\".concat(e,': could not find an edge for the given path (\"').concat(a,'\" - \"').concat(s,'\").'))}else{if(\"mixed\"!==r)throw new q(\"Graph.\".concat(e,\": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));if(t=\"\"+t,!(o=this._edges.get(t)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(t,'\" edge in the graph.'))}if(\"function\"!=typeof i)throw new B(\"Graph.\".concat(e,\": updater should be a function.\"));return o.attributes[n]=i(o.attributes[n]),this.emit(\"edgeAttributesUpdated\",{key:o.key,type:\"set\",attributes:o.attributes,name:n}),this}}},{name:function(t){return\"remove\".concat(t,\"Attribute\")},attacher:function(t,e,r){t.prototype[e]=function(t,n){var i;if(\"mixed\"!==this.type&&\"mixed\"!==r&&r!==this.type)throw new q(\"Graph.\".concat(e,\": cannot find this type of edges in your \").concat(this.type,\" graph.\"));if(arguments.length>2){if(this.multi)throw new q(\"Graph.\".concat(e,\": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));var o=\"\"+t,a=\"\"+n;if(n=arguments[2],!(i=c(this,o,a,r)))throw new W(\"Graph.\".concat(e,': could not find an edge for the given path (\"').concat(o,'\" - \"').concat(a,'\").'))}else{if(\"mixed\"!==r)throw new q(\"Graph.\".concat(e,\": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));if(t=\"\"+t,!(i=this._edges.get(t)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(t,'\" edge in the graph.'))}return delete i.attributes[n],this.emit(\"edgeAttributesUpdated\",{key:i.key,type:\"remove\",attributes:i.attributes,name:n}),this}}},{name:function(t){return\"replace\".concat(t,\"Attributes\")},attacher:function(t,e,r){t.prototype[e]=function(t,n){var i;if(\"mixed\"!==this.type&&\"mixed\"!==r&&r!==this.type)throw new q(\"Graph.\".concat(e,\": cannot find this type of edges in your \").concat(this.type,\" graph.\"));if(arguments.length>2){if(this.multi)throw new q(\"Graph.\".concat(e,\": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));var o=\"\"+t,a=\"\"+n;if(n=arguments[2],!(i=c(this,o,a,r)))throw new W(\"Graph.\".concat(e,': could not find an edge for the given path (\"').concat(o,'\" - \"').concat(a,'\").'))}else{if(\"mixed\"!==r)throw new q(\"Graph.\".concat(e,\": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));if(t=\"\"+t,!(i=this._edges.get(t)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(t,'\" edge in the graph.'))}if(!h(n))throw new B(\"Graph.\".concat(e,\": provided attributes are not a plain object.\"));return i.attributes=n,this.emit(\"edgeAttributesUpdated\",{key:i.key,type:\"replace\",attributes:i.attributes}),this}}},{name:function(t){return\"merge\".concat(t,\"Attributes\")},attacher:function(t,e,r){t.prototype[e]=function(t,n){var i;if(\"mixed\"!==this.type&&\"mixed\"!==r&&r!==this.type)throw new q(\"Graph.\".concat(e,\": cannot find this type of edges in your \").concat(this.type,\" graph.\"));if(arguments.length>2){if(this.multi)throw new q(\"Graph.\".concat(e,\": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));var o=\"\"+t,a=\"\"+n;if(n=arguments[2],!(i=c(this,o,a,r)))throw new W(\"Graph.\".concat(e,': could not find an edge for the given path (\"').concat(o,'\" - \"').concat(a,'\").'))}else{if(\"mixed\"!==r)throw new q(\"Graph.\".concat(e,\": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));if(t=\"\"+t,!(i=this._edges.get(t)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(t,'\" edge in the graph.'))}if(!h(n))throw new B(\"Graph.\".concat(e,\": provided attributes are not a plain object.\"));return u(i.attributes,n),this.emit(\"edgeAttributesUpdated\",{key:i.key,type:\"merge\",attributes:i.attributes,data:n}),this}}},{name:function(t){return\"update\".concat(t,\"Attributes\")},attacher:function(t,e,r){t.prototype[e]=function(t,n){var i;if(\"mixed\"!==this.type&&\"mixed\"!==r&&r!==this.type)throw new q(\"Graph.\".concat(e,\": cannot find this type of edges in your \").concat(this.type,\" graph.\"));if(arguments.length>2){if(this.multi)throw new q(\"Graph.\".concat(e,\": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));var o=\"\"+t,a=\"\"+n;if(n=arguments[2],!(i=c(this,o,a,r)))throw new W(\"Graph.\".concat(e,': could not find an edge for the given path (\"').concat(o,'\" - \"').concat(a,'\").'))}else{if(\"mixed\"!==r)throw new q(\"Graph.\".concat(e,\": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));if(t=\"\"+t,!(i=this._edges.get(t)))throw new W(\"Graph.\".concat(e,': could not find the \"').concat(t,'\" edge in the graph.'))}if(\"function\"!=typeof n)throw new B(\"Graph.\".concat(e,\": provided updater is not a function.\"));return i.attributes=n(i.attributes),this.emit(\"edgeAttributesUpdated\",{key:i.key,type:\"update\",attributes:i.attributes}),this}}}],J=P,$=j,tt=function(){var t=arguments,e=null,r=-1;return new J((function(){for(var n=null;;){if(null===e){if(++r>=t.length)return{done:!0};e=$(t[r])}if(!0!==(n=e.next()).done)break;e=null}return n}))},et=[{name:\"edges\",type:\"mixed\"},{name:\"inEdges\",type:\"directed\",direction:\"in\"},{name:\"outEdges\",type:\"directed\",direction:\"out\"},{name:\"inboundEdges\",type:\"mixed\",direction:\"in\"},{name:\"outboundEdges\",type:\"mixed\",direction:\"out\"},{name:\"directedEdges\",type:\"directed\"},{name:\"undirectedEdges\",type:\"undirected\"}];function rt(t,e,r,n){var i=!1;for(var o in e)if(o!==n){var a=e[o];if(i=r(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),t&&i)return a.key}}function nt(t,e,r,n){var i,o,a,s=!1;for(var u in e)if(u!==n){i=e[u];do{if(o=i.source,a=i.target,s=r(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected),t&&s)return i.key;i=i.next}while(void 0!==i)}}function it(t,e){var r,n=Object.keys(t),i=n.length,o=0;return new P((function(){do{if(r)r=r.next;else{if(o>=i)return{done:!0};var a=n[o++];if(a===e){r=void 0;continue}r=t[a]}}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}}))}function ot(t,e,r,n){var i=e[r];if(i){var o=i.source,a=i.target;return n(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected)&&t?i.key:void 0}}function at(t,e,r,n){var i=e[r];if(i){var o=!1;do{if(o=n(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&o)return i.key;i=i.next}while(void 0!==i)}}function st(t,e){var r=t[e];return void 0!==r.next?new P((function(){if(!r)return{done:!0};var t={edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected};return r=r.next,{done:!1,value:t}})):P.of({edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected})}function ut(t,e){if(0===t.size)return[];if(\"mixed\"===e||e===t.type)return\"function\"==typeof Array.from?Array.from(t._edges.keys()):U(t._edges.keys(),t._edges.size);for(var r,n,i=\"undirected\"===e?t.undirectedSize:t.directedSize,o=new Array(i),a=\"undirected\"===e,s=t._edges.values(),u=0;!0!==(r=s.next()).done;)(n=r.value).undirected===a&&(o[u++]=n.key);return o}function ct(t,e,r,n){if(0!==e.size)for(var i,o,a=\"mixed\"!==r&&r!==e.type,s=\"undirected\"===r,u=!1,c=e._edges.values();!0!==(i=c.next()).done;)if(o=i.value,!a||o.undirected===s){var h=o,d=h.key,l=h.attributes,f=h.source,p=h.target;if(u=n(d,l,f.key,p.key,f.attributes,p.attributes,o.undirected),t&&u)return d}}function ht(t,e){if(0===t.size)return P.empty();var r=\"mixed\"!==e&&e!==t.type,n=\"undirected\"===e,i=t._edges.values();return new P((function(){for(var t,e;;){if((t=i.next()).done)return t;if(e=t.value,!r||e.undirected===n)break}return{value:{edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected},done:!1}}))}function dt(t,e,r,n,i,o){var a,s=e?nt:rt;if(\"undirected\"!==r){if(\"out\"!==n&&(a=s(t,i.in,o),t&&a))return a;if(\"in\"!==n&&(a=s(t,i.out,o,n?void 0:i.key),t&&a))return a}if(\"directed\"!==r&&(a=s(t,i.undirected,o),t&&a))return a}function lt(t,e,r,n){var i=[];return dt(!1,t,e,r,n,(function(t){i.push(t)})),i}function ft(t,e,r){var n=P.empty();return\"undirected\"!==t&&(\"out\"!==e&&void 0!==r.in&&(n=tt(n,it(r.in))),\"in\"!==e&&void 0!==r.out&&(n=tt(n,it(r.out,e?void 0:r.key)))),\"directed\"!==t&&void 0!==r.undirected&&(n=tt(n,it(r.undirected))),n}function pt(t,e,r,n,i,o,a){var s,u=r?at:ot;if(\"undirected\"!==e){if(void 0!==i.in&&\"out\"!==n&&(s=u(t,i.in,o,a),t&&s))return s;if(void 0!==i.out&&\"in\"!==n&&(n||i.key!==o)&&(s=u(t,i.out,o,a),t&&s))return s}if(\"directed\"!==e&&void 0!==i.undirected&&(s=u(t,i.undirected,o,a),t&&s))return s}function gt(t,e,r,n,i){var o=[];return pt(!1,t,e,r,n,i,(function(t){o.push(t)})),o}function yt(t,e,r,n){var i=P.empty();return\"undirected\"!==t&&(void 0!==r.in&&\"out\"!==e&&n in r.in&&(i=tt(i,st(r.in,n))),void 0!==r.out&&\"in\"!==e&&n in r.out&&(e||r.key!==n)&&(i=tt(i,st(r.out,n)))),\"directed\"!==t&&void 0!==r.undirected&&n in r.undirected&&(i=tt(i,st(r.undirected,n))),i}var mt=[{name:\"neighbors\",type:\"mixed\"},{name:\"inNeighbors\",type:\"directed\",direction:\"in\"},{name:\"outNeighbors\",type:\"directed\",direction:\"out\"},{name:\"inboundNeighbors\",type:\"mixed\",direction:\"in\"},{name:\"outboundNeighbors\",type:\"mixed\",direction:\"out\"},{name:\"directedNeighbors\",type:\"directed\"},{name:\"undirectedNeighbors\",type:\"undirected\"}];function vt(){this.A=null,this.B=null}function bt(t,e,r,n,i){for(var o in n){var a=n[o],s=a.source,u=a.target,c=s===r?u:s;if(!e||!e.has(c.key)){var h=i(c.key,c.attributes);if(t&&h)return c.key}}}function wt(t,e,r,n,i){if(\"mixed\"!==e){if(\"undirected\"===e)return bt(t,null,n,n.undirected,i);if(\"string\"==typeof r)return bt(t,null,n,n[r],i)}var o,a=new vt;if(\"undirected\"!==e){if(\"out\"!==r){if(o=bt(t,null,n,n.in,i),t&&o)return o;a.wrap(n.in)}if(\"in\"!==r){if(o=bt(t,a,n,n.out,i),t&&o)return o;a.wrap(n.out)}}if(\"directed\"!==e&&(o=bt(t,a,n,n.undirected,i),t&&o))return o}function _t(t,e,r){var n=Object.keys(r),i=n.length,o=0;return new P((function(){var a=null;do{if(o>=i)return t&&t.wrap(r),{done:!0};var s=r[n[o++]],u=s.source,c=s.target;a=u===e?c:u,t&&t.has(a.key)&&(a=null)}while(null===a);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}}))}function xt(t,e){var r=e.name,n=e.type,i=e.direction;t.prototype[r]=function(t){if(\"mixed\"!==n&&\"mixed\"!==this.type&&n!==this.type)return[];t=\"\"+t;var e=this._nodes.get(t);if(void 0===e)throw new W(\"Graph.\".concat(r,': could not find the \"').concat(t,'\" node in the graph.'));return function(t,e,r){if(\"mixed\"!==t){if(\"undirected\"===t)return Object.keys(r.undirected);if(\"string\"==typeof e)return Object.keys(r[e])}var n=[];return wt(!1,t,e,r,(function(t){n.push(t)})),n}(\"mixed\"===n?this.type:n,i,e)}}function Et(t,e){var r=e.name,n=e.type,i=e.direction,o=r.slice(0,-1)+\"Entries\";t.prototype[o]=function(t){if(\"mixed\"!==n&&\"mixed\"!==this.type&&n!==this.type)return P.empty();t=\"\"+t;var e=this._nodes.get(t);if(void 0===e)throw new W(\"Graph.\".concat(o,': could not find the \"').concat(t,'\" node in the graph.'));return function(t,e,r){if(\"mixed\"!==t){if(\"undirected\"===t)return _t(null,r,r.undirected);if(\"string\"==typeof e)return _t(null,r,r[e])}var n=P.empty(),i=new vt;return\"undirected\"!==t&&(\"out\"!==e&&(n=tt(n,_t(i,r,r.in))),\"in\"!==e&&(n=tt(n,_t(i,r,r.out)))),\"directed\"!==t&&(n=tt(n,_t(i,r,r.undirected))),n}(\"mixed\"===n?this.type:n,i,e)}}function Lt(t,e,r,n,i){for(var o,a,s,u,c,h,d,l=n._nodes.values(),f=n.type;!0!==(o=l.next()).done;){var p=!1;if(a=o.value,\"undirected\"!==f)for(s in u=a.out){c=u[s];do{if(h=c.target,p=!0,d=i(a.key,h.key,a.attributes,h.attributes,c.key,c.attributes,c.undirected),t&&d)return c;c=c.next}while(c)}if(\"directed\"!==f)for(s in u=a.undirected)if(!(e&&a.key>s)){c=u[s];do{if((h=c.target).key!==s&&(h=c.source),p=!0,d=i(a.key,h.key,a.attributes,h.attributes,c.key,c.attributes,c.undirected),t&&d)return c;c=c.next}while(c)}if(r&&!p&&(d=i(a.key,null,a.attributes,null,null,null,null),t&&d))return null}}function At(t){if(!h(t))throw new B('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a \"key\" property.');if(!(\"key\"in t))throw new B(\"Graph.import: serialized node is missing its key.\");if(\"attributes\"in t&&(!h(t.attributes)||null===t.attributes))throw new B(\"Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.\")}function kt(t){if(!h(t))throw new B('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a \"source\" & \"target\" property.');if(!(\"source\"in t))throw new B(\"Graph.import: serialized edge is missing its source.\");if(!(\"target\"in t))throw new B(\"Graph.import: serialized edge is missing its target.\");if(\"attributes\"in t&&(!h(t.attributes)||null===t.attributes))throw new B(\"Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.\");if(\"undirected\"in t&&\"boolean\"!=typeof t.undirected)throw new B(\"Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.\")}vt.prototype.wrap=function(t){null===this.A?this.A=t:null===this.B&&(this.B=t)},vt.prototype.has=function(t){return null!==this.A&&t in this.A||null!==this.B&&t in this.B};var St,Ct=(St=255&Math.floor(256*Math.random()),function(){return St++}),Dt=new Set([\"directed\",\"undirected\",\"mixed\"]),Gt=new Set([\"domain\",\"_events\",\"_eventsCount\",\"_maxListeners\"]),Ft={allowSelfLoops:!0,multi:!1,type:\"mixed\"};function Pt(t,e,r){var n=new t.NodeDataClass(e,r);return t._nodes.set(e,n),t.emit(\"nodeAdded\",{key:e,attributes:r}),n}function Tt(t,e,r,n,i,o,a,s){if(!n&&\"undirected\"===t.type)throw new q(\"Graph.\".concat(e,\": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.\"));if(n&&\"directed\"===t.type)throw new q(\"Graph.\".concat(e,\": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.\"));if(s&&!h(s))throw new B(\"Graph.\".concat(e,': invalid attributes. Expecting an object but got \"').concat(s,'\"'));if(o=\"\"+o,a=\"\"+a,s=s||{},!t.allowSelfLoops&&o===a)throw new q(\"Graph.\".concat(e,': source & target are the same (\"').concat(o,\"\\\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.\"));var u=t._nodes.get(o),c=t._nodes.get(a);if(!u)throw new W(\"Graph.\".concat(e,': source node \"').concat(o,'\" not found.'));if(!c)throw new W(\"Graph.\".concat(e,': target node \"').concat(a,'\" not found.'));var d={key:null,undirected:n,source:o,target:a,attributes:s};if(r)i=t._edgeKeyGenerator();else if(i=\"\"+i,t._edges.has(i))throw new q(\"Graph.\".concat(e,': the \"').concat(i,'\" edge already exists in the graph.'));if(!t.multi&&(n?void 0!==u.undirected[a]:void 0!==u.out[a]))throw new q(\"Graph.\".concat(e,': an edge linking \"').concat(o,'\" to \"').concat(a,\"\\\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.\"));var l=new K(n,i,u,c,s);t._edges.set(i,l);var f=o===a;return n?(u.undirectedDegree++,c.undirectedDegree++,f&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,c.inDegree++,f&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?l.attachMulti():l.attach(),n?t._undirectedSize++:t._directedSize++,d.key=i,t.emit(\"edgeAdded\",d),i}function Ot(t,e,r,n,i,o,a,s,c){if(!n&&\"undirected\"===t.type)throw new q(\"Graph.\".concat(e,\": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.\"));if(n&&\"directed\"===t.type)throw new q(\"Graph.\".concat(e,\": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.\"));if(s)if(c){if(\"function\"!=typeof s)throw new B(\"Graph.\".concat(e,': invalid updater function. Expecting a function but got \"').concat(s,'\"'))}else if(!h(s))throw new B(\"Graph.\".concat(e,': invalid attributes. Expecting an object but got \"').concat(s,'\"'));var d;if(o=\"\"+o,a=\"\"+a,c&&(d=s,s=void 0),!t.allowSelfLoops&&o===a)throw new q(\"Graph.\".concat(e,': source & target are the same (\"').concat(o,\"\\\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.\"));var l,f,p=t._nodes.get(o),g=t._nodes.get(a);if(!r&&(l=t._edges.get(i))){if(!(l.source.key===o&&l.target.key===a||n&&l.source.key===a&&l.target.key===o))throw new q(\"Graph.\".concat(e,': inconsistency detected when attempting to merge the \"').concat(i,'\" edge with \"').concat(o,'\" source & \"').concat(a,'\" target vs. (\"').concat(l.source.key,'\", \"').concat(l.target.key,'\").'));f=l}if(f||t.multi||!p||(f=n?p.undirected[a]:p.out[a]),f){var y=[f.key,!1,!1,!1];if(c?!d:!s)return y;if(c){var m=f.attributes;f.attributes=d(m),t.emit(\"edgeAttributesUpdated\",{type:\"replace\",key:f.key,attributes:f.attributes})}else u(f.attributes,s),t.emit(\"edgeAttributesUpdated\",{type:\"merge\",key:f.key,attributes:f.attributes,data:s});return y}s=s||{},c&&d&&(s=d(s));var v={key:null,undirected:n,source:o,target:a,attributes:s};if(r)i=t._edgeKeyGenerator();else if(i=\"\"+i,t._edges.has(i))throw new q(\"Graph.\".concat(e,': the \"').concat(i,'\" edge already exists in the graph.'));var b=!1,w=!1;p||(p=Pt(t,o,{}),b=!0,o===a&&(g=p,w=!0)),g||(g=Pt(t,a,{}),w=!0),l=new K(n,i,p,g,s),t._edges.set(i,l);var _=o===a;return n?(p.undirectedDegree++,g.undirectedDegree++,_&&(p.undirectedLoops++,t._undirectedSelfLoopCount++)):(p.outDegree++,g.inDegree++,_&&(p.directedLoops++,t._directedSelfLoopCount++)),t.multi?l.attachMulti():l.attach(),n?t._undirectedSize++:t._directedSize++,v.key=i,t.emit(\"edgeAdded\",v),[i,!0,b,w]}function Nt(t,e){t._edges.delete(e.key);var r=e.source,n=e.target,i=e.attributes,o=e.undirected,a=r===n;o?(r.undirectedDegree--,n.undirectedDegree--,a&&(r.undirectedLoops--,t._undirectedSelfLoopCount--)):(r.outDegree--,n.inDegree--,a&&(r.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit(\"edgeDropped\",{key:e.key,attributes:i,source:r.key,target:n.key,undirected:o})}var Mt=function(r){function n(t){var e;if(e=r.call(this)||this,\"boolean\"!=typeof(t=u({},Ft,t)).multi)throw new B(\"Graph.constructor: invalid 'multi' option. Expecting a boolean but got \\\"\".concat(t.multi,'\".'));if(!Dt.has(t.type))throw new B('Graph.constructor: invalid \\'type\\' option. Should be one of \"mixed\", \"directed\" or \"undirected\" but got \"'.concat(t.type,'\".'));if(\"boolean\"!=typeof t.allowSelfLoops)throw new B(\"Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \\\"\".concat(t.allowSelfLoops,'\".'));var n=\"mixed\"===t.type?H:\"directed\"===t.type?Y:V;l(s(e),\"NodeDataClass\",n);var i=\"geid_\"+Ct()+\"_\",o=0;return l(s(e),\"_attributes\",{}),l(s(e),\"_nodes\",new Map),l(s(e),\"_edges\",new Map),l(s(e),\"_directedSize\",0),l(s(e),\"_undirectedSize\",0),l(s(e),\"_directedSelfLoopCount\",0),l(s(e),\"_undirectedSelfLoopCount\",0),l(s(e),\"_edgeKeyGenerator\",(function(){var t;do{t=i+o++}while(e._edges.has(t));return t})),l(s(e),\"_options\",t),Gt.forEach((function(t){return l(s(e),t,e[t])})),f(s(e),\"order\",(function(){return e._nodes.size})),f(s(e),\"size\",(function(){return e._edges.size})),f(s(e),\"directedSize\",(function(){return e._directedSize})),f(s(e),\"undirectedSize\",(function(){return e._undirectedSize})),f(s(e),\"selfLoopCount\",(function(){return e._directedSelfLoopCount+e._undirectedSelfLoopCount})),f(s(e),\"directedSelfLoopCount\",(function(){return e._directedSelfLoopCount})),f(s(e),\"undirectedSelfLoopCount\",(function(){return e._undirectedSelfLoopCount})),f(s(e),\"multi\",e._options.multi),f(s(e),\"type\",e._options.type),f(s(e),\"allowSelfLoops\",e._options.allowSelfLoops),f(s(e),\"implementation\",(function(){return\"graphology\"})),e}e(n,r);var i=n.prototype;return i._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},i.hasNode=function(t){return this._nodes.has(\"\"+t)},i.hasDirectedEdge=function(t,e){if(\"undirected\"===this.type)return!1;if(1===arguments.length){var r=\"\"+t,n=this._edges.get(r);return!!n&&!n.undirected}if(2===arguments.length){t=\"\"+t,e=\"\"+e;var i=this._nodes.get(t);return!!i&&i.out.hasOwnProperty(e)}throw new B(\"Graph.hasDirectedEdge: invalid arity (\".concat(arguments.length,\", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.\"))},i.hasUndirectedEdge=function(t,e){if(\"directed\"===this.type)return!1;if(1===arguments.length){var r=\"\"+t,n=this._edges.get(r);return!!n&&n.undirected}if(2===arguments.length){t=\"\"+t,e=\"\"+e;var i=this._nodes.get(t);return!!i&&i.undirected.hasOwnProperty(e)}throw new B(\"Graph.hasDirectedEdge: invalid arity (\".concat(arguments.length,\", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.\"))},i.hasEdge=function(t,e){if(1===arguments.length){var r=\"\"+t;return this._edges.has(r)}if(2===arguments.length){t=\"\"+t,e=\"\"+e;var n=this._nodes.get(t);return!!n&&(void 0!==n.out&&n.out.hasOwnProperty(e)||void 0!==n.undirected&&n.undirected.hasOwnProperty(e))}throw new B(\"Graph.hasEdge: invalid arity (\".concat(arguments.length,\", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.\"))},i.directedEdge=function(t,e){if(\"undirected\"!==this.type){if(t=\"\"+t,e=\"\"+e,this.multi)throw new q(\"Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.\");var r=this._nodes.get(t);if(!r)throw new W('Graph.directedEdge: could not find the \"'.concat(t,'\" source node in the graph.'));if(!this._nodes.has(e))throw new W('Graph.directedEdge: could not find the \"'.concat(e,'\" target node in the graph.'));var n=r.out&&r.out[e]||void 0;return n?n.key:void 0}},i.undirectedEdge=function(t,e){if(\"directed\"!==this.type){if(t=\"\"+t,e=\"\"+e,this.multi)throw new q(\"Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.\");var r=this._nodes.get(t);if(!r)throw new W('Graph.undirectedEdge: could not find the \"'.concat(t,'\" source node in the graph.'));if(!this._nodes.has(e))throw new W('Graph.undirectedEdge: could not find the \"'.concat(e,'\" target node in the graph.'));var n=r.undirected&&r.undirected[e]||void 0;return n?n.key:void 0}},i.edge=function(t,e){if(this.multi)throw new q(\"Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.\");t=\"\"+t,e=\"\"+e;var r=this._nodes.get(t);if(!r)throw new W('Graph.edge: could not find the \"'.concat(t,'\" source node in the graph.'));if(!this._nodes.has(e))throw new W('Graph.edge: could not find the \"'.concat(e,'\" target node in the graph.'));var n=r.out&&r.out[e]||r.undirected&&r.undirected[e]||void 0;if(n)return n.key},i.areDirectedNeighbors=function(t,e){t=\"\"+t,e=\"\"+e;var r=this._nodes.get(t);if(!r)throw new W('Graph.areDirectedNeighbors: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"!==this.type&&(e in r.in||e in r.out)},i.areOutNeighbors=function(t,e){t=\"\"+t,e=\"\"+e;var r=this._nodes.get(t);if(!r)throw new W('Graph.areOutNeighbors: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"!==this.type&&e in r.out},i.areInNeighbors=function(t,e){t=\"\"+t,e=\"\"+e;var r=this._nodes.get(t);if(!r)throw new W('Graph.areInNeighbors: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"!==this.type&&e in r.in},i.areUndirectedNeighbors=function(t,e){t=\"\"+t,e=\"\"+e;var r=this._nodes.get(t);if(!r)throw new W('Graph.areUndirectedNeighbors: could not find the \"'.concat(t,'\" node in the graph.'));return\"directed\"!==this.type&&e in r.undirected},i.areNeighbors=function(t,e){t=\"\"+t,e=\"\"+e;var r=this._nodes.get(t);if(!r)throw new W('Graph.areNeighbors: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"!==this.type&&(e in r.in||e in r.out)||\"directed\"!==this.type&&e in r.undirected},i.areInboundNeighbors=function(t,e){t=\"\"+t,e=\"\"+e;var r=this._nodes.get(t);if(!r)throw new W('Graph.areInboundNeighbors: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"!==this.type&&e in r.in||\"directed\"!==this.type&&e in r.undirected},i.areOutboundNeighbors=function(t,e){t=\"\"+t,e=\"\"+e;var r=this._nodes.get(t);if(!r)throw new W('Graph.areOutboundNeighbors: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"!==this.type&&e in r.out||\"directed\"!==this.type&&e in r.undirected},i.inDegree=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.inDegree: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"===this.type?0:e.inDegree},i.outDegree=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.outDegree: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"===this.type?0:e.outDegree},i.directedDegree=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.directedDegree: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"===this.type?0:e.inDegree+e.outDegree},i.undirectedDegree=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.undirectedDegree: could not find the \"'.concat(t,'\" node in the graph.'));return\"directed\"===this.type?0:e.undirectedDegree},i.inboundDegree=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.inboundDegree: could not find the \"'.concat(t,'\" node in the graph.'));var r=0;return\"directed\"!==this.type&&(r+=e.undirectedDegree),\"undirected\"!==this.type&&(r+=e.inDegree),r},i.outboundDegree=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.outboundDegree: could not find the \"'.concat(t,'\" node in the graph.'));var r=0;return\"directed\"!==this.type&&(r+=e.undirectedDegree),\"undirected\"!==this.type&&(r+=e.outDegree),r},i.degree=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.degree: could not find the \"'.concat(t,'\" node in the graph.'));var r=0;return\"directed\"!==this.type&&(r+=e.undirectedDegree),\"undirected\"!==this.type&&(r+=e.inDegree+e.outDegree),r},i.inDegreeWithoutSelfLoops=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.inDegreeWithoutSelfLoops: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"===this.type?0:e.inDegree-e.directedLoops},i.outDegreeWithoutSelfLoops=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.outDegreeWithoutSelfLoops: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"===this.type?0:e.outDegree-e.directedLoops},i.directedDegreeWithoutSelfLoops=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.directedDegreeWithoutSelfLoops: could not find the \"'.concat(t,'\" node in the graph.'));return\"undirected\"===this.type?0:e.inDegree+e.outDegree-2*e.directedLoops},i.undirectedDegreeWithoutSelfLoops=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.undirectedDegreeWithoutSelfLoops: could not find the \"'.concat(t,'\" node in the graph.'));return\"directed\"===this.type?0:e.undirectedDegree-2*e.undirectedLoops},i.inboundDegreeWithoutSelfLoops=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.inboundDegreeWithoutSelfLoops: could not find the \"'.concat(t,'\" node in the graph.'));var r=0,n=0;return\"directed\"!==this.type&&(r+=e.undirectedDegree,n+=2*e.undirectedLoops),\"undirected\"!==this.type&&(r+=e.inDegree,n+=e.directedLoops),r-n},i.outboundDegreeWithoutSelfLoops=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.outboundDegreeWithoutSelfLoops: could not find the \"'.concat(t,'\" node in the graph.'));var r=0,n=0;return\"directed\"!==this.type&&(r+=e.undirectedDegree,n+=2*e.undirectedLoops),\"undirected\"!==this.type&&(r+=e.outDegree,n+=e.directedLoops),r-n},i.degreeWithoutSelfLoops=function(t){t=\"\"+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.degreeWithoutSelfLoops: could not find the \"'.concat(t,'\" node in the graph.'));var r=0,n=0;return\"directed\"!==this.type&&(r+=e.undirectedDegree,n+=2*e.undirectedLoops),\"undirected\"!==this.type&&(r+=e.inDegree+e.outDegree,n+=2*e.directedLoops),r-n},i.source=function(t){t=\"\"+t;var e=this._edges.get(t);if(!e)throw new W('Graph.source: could not find the \"'.concat(t,'\" edge in the graph.'));return e.source.key},i.target=function(t){t=\"\"+t;var e=this._edges.get(t);if(!e)throw new W('Graph.target: could not find the \"'.concat(t,'\" edge in the graph.'));return e.target.key},i.extremities=function(t){t=\"\"+t;var e=this._edges.get(t);if(!e)throw new W('Graph.extremities: could not find the \"'.concat(t,'\" edge in the graph.'));return[e.source.key,e.target.key]},i.opposite=function(t,e){t=\"\"+t,e=\"\"+e;var r=this._edges.get(e);if(!r)throw new W('Graph.opposite: could not find the \"'.concat(e,'\" edge in the graph.'));var n=r.source.key,i=r.target.key;if(t===n)return i;if(t===i)return n;throw new W('Graph.opposite: the \"'.concat(t,'\" node is not attached to the \"').concat(e,'\" edge (').concat(n,\", \").concat(i,\").\"))},i.hasExtremity=function(t,e){t=\"\"+t,e=\"\"+e;var r=this._edges.get(t);if(!r)throw new W('Graph.hasExtremity: could not find the \"'.concat(t,'\" edge in the graph.'));return r.source.key===e||r.target.key===e},i.isUndirected=function(t){t=\"\"+t;var e=this._edges.get(t);if(!e)throw new W('Graph.isUndirected: could not find the \"'.concat(t,'\" edge in the graph.'));return e.undirected},i.isDirected=function(t){t=\"\"+t;var e=this._edges.get(t);if(!e)throw new W('Graph.isDirected: could not find the \"'.concat(t,'\" edge in the graph.'));return!e.undirected},i.isSelfLoop=function(t){t=\"\"+t;var e=this._edges.get(t);if(!e)throw new W('Graph.isSelfLoop: could not find the \"'.concat(t,'\" edge in the graph.'));return e.source===e.target},i.addNode=function(t,e){var r=function(t,e,r){if(r&&!h(r))throw new B('Graph.addNode: invalid attributes. Expecting an object but got \"'.concat(r,'\"'));if(e=\"\"+e,r=r||{},t._nodes.has(e))throw new q('Graph.addNode: the \"'.concat(e,'\" node already exist in the graph.'));var n=new t.NodeDataClass(e,r);return t._nodes.set(e,n),t.emit(\"nodeAdded\",{key:e,attributes:r}),n}(this,t,e);return r.key},i.mergeNode=function(t,e){if(e&&!h(e))throw new B('Graph.mergeNode: invalid attributes. Expecting an object but got \"'.concat(e,'\"'));t=\"\"+t,e=e||{};var r=this._nodes.get(t);return r?(e&&(u(r.attributes,e),this.emit(\"nodeAttributesUpdated\",{type:\"merge\",key:t,attributes:r.attributes,data:e})),[t,!1]):(r=new this.NodeDataClass(t,e),this._nodes.set(t,r),this.emit(\"nodeAdded\",{key:t,attributes:e}),[t,!0])},i.updateNode=function(t,e){if(e&&\"function\"!=typeof e)throw new B('Graph.updateNode: invalid updater function. Expecting a function but got \"'.concat(e,'\"'));t=\"\"+t;var r=this._nodes.get(t);if(r){if(e){var n=r.attributes;r.attributes=e(n),this.emit(\"nodeAttributesUpdated\",{type:\"replace\",key:t,attributes:r.attributes})}return[t,!1]}var i=e?e({}):{};return r=new this.NodeDataClass(t,i),this._nodes.set(t,r),this.emit(\"nodeAdded\",{key:t,attributes:i}),[t,!0]},i.dropNode=function(t){t=\"\"+t;var e,r=this._nodes.get(t);if(!r)throw new W('Graph.dropNode: could not find the \"'.concat(t,'\" node in the graph.'));if(\"undirected\"!==this.type){for(var n in r.out){e=r.out[n];do{Nt(this,e),e=e.next}while(e)}for(var i in r.in){e=r.in[i];do{Nt(this,e),e=e.next}while(e)}}if(\"directed\"!==this.type)for(var o in r.undirected){e=r.undirected[o];do{Nt(this,e),e=e.next}while(e)}this._nodes.delete(t),this.emit(\"nodeDropped\",{key:t,attributes:r.attributes})},i.dropEdge=function(t){var e;if(arguments.length>1){var r=\"\"+arguments[0],n=\"\"+arguments[1];if(!(e=c(this,r,n,this.type)))throw new W('Graph.dropEdge: could not find the \"'.concat(r,'\" -> \"').concat(n,'\" edge in the graph.'))}else if(t=\"\"+t,!(e=this._edges.get(t)))throw new W('Graph.dropEdge: could not find the \"'.concat(t,'\" edge in the graph.'));return Nt(this,e),this},i.dropDirectedEdge=function(t,e){if(arguments.length<2)throw new q(\"Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.\");if(this.multi)throw new q(\"Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.\");var r=c(this,t=\"\"+t,e=\"\"+e,\"directed\");if(!r)throw new W('Graph.dropDirectedEdge: could not find a \"'.concat(t,'\" -> \"').concat(e,'\" edge in the graph.'));return Nt(this,r),this},i.dropUndirectedEdge=function(t,e){if(arguments.length<2)throw new q(\"Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.\");if(this.multi)throw new q(\"Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.\");var r=c(this,t,e,\"undirected\");if(!r)throw new W('Graph.dropUndirectedEdge: could not find a \"'.concat(t,'\" -> \"').concat(e,'\" edge in the graph.'));return Nt(this,r),this},i.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit(\"cleared\")},i.clearEdges=function(){for(var t,e=this._nodes.values();!0!==(t=e.next()).done;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit(\"edgesCleared\")},i.getAttribute=function(t){return this._attributes[t]},i.getAttributes=function(){return this._attributes},i.hasAttribute=function(t){return this._attributes.hasOwnProperty(t)},i.setAttribute=function(t,e){return this._attributes[t]=e,this.emit(\"attributesUpdated\",{type:\"set\",attributes:this._attributes,name:t}),this},i.updateAttribute=function(t,e){if(\"function\"!=typeof e)throw new B(\"Graph.updateAttribute: updater should be a function.\");var r=this._attributes[t];return this._attributes[t]=e(r),this.emit(\"attributesUpdated\",{type:\"set\",attributes:this._attributes,name:t}),this},i.removeAttribute=function(t){return delete this._attributes[t],this.emit(\"attributesUpdated\",{type:\"remove\",attributes:this._attributes,name:t}),this},i.replaceAttributes=function(t){if(!h(t))throw new B(\"Graph.replaceAttributes: provided attributes are not a plain object.\");return this._attributes=t,this.emit(\"attributesUpdated\",{type:\"replace\",attributes:this._attributes}),this},i.mergeAttributes=function(t){if(!h(t))throw new B(\"Graph.mergeAttributes: provided attributes are not a plain object.\");return u(this._attributes,t),this.emit(\"attributesUpdated\",{type:\"merge\",attributes:this._attributes,data:t}),this},i.updateAttributes=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.updateAttributes: provided updater is not a function.\");return this._attributes=t(this._attributes),this.emit(\"attributesUpdated\",{type:\"update\",attributes:this._attributes}),this},i.updateEachNodeAttributes=function(t,e){if(\"function\"!=typeof t)throw new B(\"Graph.updateEachNodeAttributes: expecting an updater function.\");if(e&&!p(e))throw new B(\"Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}\");for(var r,n,i=this._nodes.values();!0!==(r=i.next()).done;)(n=r.value).attributes=t(n.key,n.attributes);this.emit(\"eachNodeAttributesUpdated\",{hints:e||null})},i.updateEachEdgeAttributes=function(t,e){if(\"function\"!=typeof t)throw new B(\"Graph.updateEachEdgeAttributes: expecting an updater function.\");if(e&&!p(e))throw new B(\"Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}\");for(var r,n,i,o,a=this._edges.values();!0!==(r=a.next()).done;)i=(n=r.value).source,o=n.target,n.attributes=t(n.key,n.attributes,i.key,o.key,i.attributes,o.attributes,n.undirected);this.emit(\"eachEdgeAttributesUpdated\",{hints:e||null})},i.forEachAdjacencyEntry=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.forEachAdjacencyEntry: expecting a callback.\");Lt(!1,!1,!1,this,t)},i.forEachAdjacencyEntryWithOrphans=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.\");Lt(!1,!1,!0,this,t)},i.forEachAssymetricAdjacencyEntry=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.forEachAssymetricAdjacencyEntry: expecting a callback.\");Lt(!1,!0,!1,this,t)},i.forEachAssymetricAdjacencyEntryWithOrphans=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.\");Lt(!1,!0,!0,this,t)},i.nodes=function(){return\"function\"==typeof Array.from?Array.from(this._nodes.keys()):U(this._nodes.keys(),this._nodes.size)},i.forEachNode=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.forEachNode: expecting a callback.\");for(var e,r,n=this._nodes.values();!0!==(e=n.next()).done;)t((r=e.value).key,r.attributes)},i.findNode=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.findNode: expecting a callback.\");for(var e,r,n=this._nodes.values();!0!==(e=n.next()).done;)if(t((r=e.value).key,r.attributes))return r.key},i.mapNodes=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.mapNode: expecting a callback.\");for(var e,r,n=this._nodes.values(),i=new Array(this.order),o=0;!0!==(e=n.next()).done;)r=e.value,i[o++]=t(r.key,r.attributes);return i},i.someNode=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.someNode: expecting a callback.\");for(var e,r,n=this._nodes.values();!0!==(e=n.next()).done;)if(t((r=e.value).key,r.attributes))return!0;return!1},i.everyNode=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.everyNode: expecting a callback.\");for(var e,r,n=this._nodes.values();!0!==(e=n.next()).done;)if(!t((r=e.value).key,r.attributes))return!1;return!0},i.filterNodes=function(t){if(\"function\"!=typeof t)throw new B(\"Graph.filterNodes: expecting a callback.\");for(var e,r,n=this._nodes.values(),i=[];!0!==(e=n.next()).done;)t((r=e.value).key,r.attributes)&&i.push(r.key);return i},i.reduceNodes=function(t,e){if(\"function\"!=typeof t)throw new B(\"Graph.reduceNodes: expecting a callback.\");if(arguments.length<2)throw new B(\"Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.\");for(var r,n,i=e,o=this._nodes.values();!0!==(r=o.next()).done;)i=t(i,(n=r.value).key,n.attributes);return i},i.nodeEntries=function(){var t=this._nodes.values();return new P((function(){var e=t.next();if(e.done)return e;var r=e.value;return{value:{node:r.key,attributes:r.attributes},done:!1}}))},i.export=function(){var t=this,e=new Array(this._nodes.size),r=0;this._nodes.forEach((function(t,n){e[r++]=function(t,e){var r={key:t};return d(e.attributes)||(r.attributes=u({},e.attributes)),r}(n,t)}));var n=new Array(this._edges.size);return r=0,this._edges.forEach((function(e,i){n[r++]=function(t,e,r){var n={key:e,source:r.source.key,target:r.target.key};return d(r.attributes)||(n.attributes=u({},r.attributes)),\"mixed\"===t&&r.undirected&&(n.undirected=!0),n}(t.type,i,e)})),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:n}},i.import=function(t){var e,r,i,o,a,s=this,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t instanceof n)return t.forEachNode((function(t,e){u?s.mergeNode(t,e):s.addNode(t,e)})),t.forEachEdge((function(t,e,r,n,i,o,a){u?a?s.mergeUndirectedEdgeWithKey(t,r,n,e):s.mergeDirectedEdgeWithKey(t,r,n,e):a?s.addUndirectedEdgeWithKey(t,r,n,e):s.addDirectedEdgeWithKey(t,r,n,e)})),this;if(!h(t))throw new B(\"Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.\");if(t.attributes){if(!h(t.attributes))throw new B(\"Graph.import: invalid attributes. Expecting a plain object.\");u?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}if(t.nodes){if(i=t.nodes,!Array.isArray(i))throw new B(\"Graph.import: invalid nodes. Expecting an array.\");for(e=0,r=i.length;e<r;e++){At(o=i[e]);var c=o,d=c.key,l=c.attributes;u?this.mergeNode(d,l):this.addNode(d,l)}}if(t.edges){var f=!1;if(\"undirected\"===this.type&&(f=!0),i=t.edges,!Array.isArray(i))throw new B(\"Graph.import: invalid edges. Expecting an array.\");for(e=0,r=i.length;e<r;e++){kt(a=i[e]);var p=a,g=p.source,y=p.target,m=p.attributes,v=p.undirected,b=void 0===v?f:v;\"key\"in a?(u?b?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:b?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,a.key,g,y,m):(u?b?this.mergeUndirectedEdge:this.mergeDirectedEdge:b?this.addUndirectedEdge:this.addDirectedEdge).call(this,g,y,m)}}return this},i.nullCopy=function(t){var e=new n(u({},this._options,t));return e.replaceAttributes(u({},this.getAttributes())),e},i.emptyCopy=function(t){var e=this.nullCopy(t);return this._nodes.forEach((function(t,r){var n=u({},t.attributes);t=new e.NodeDataClass(r,n),e._nodes.set(r,t)})),e},i.copy=function(t){if(\"string\"==typeof(t=t||{}).type&&t.type!==this.type&&\"mixed\"!==t.type)throw new q('Graph.copy: cannot create an incompatible copy from \"'.concat(this.type,'\" type to \"').concat(t.type,'\" because this would mean losing information about the current graph.'));if(\"boolean\"==typeof t.multi&&t.multi!==this.multi&&!0!==t.multi)throw new q(\"Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.\");if(\"boolean\"==typeof t.allowSelfLoops&&t.allowSelfLoops!==this.allowSelfLoops&&!0!==t.allowSelfLoops)throw new q(\"Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.\");for(var e,r,n=this.emptyCopy(t),i=this._edges.values();!0!==(e=i.next()).done;)Tt(n,\"copy\",!1,(r=e.value).undirected,r.key,r.source.key,r.target.key,u({},r.attributes));return n},i.toJSON=function(){return this.export()},i.toString=function(){return\"[object Graph]\"},i.inspect=function(){var e=this,r={};this._nodes.forEach((function(t,e){r[e]=t.attributes}));var n={},i={};this._edges.forEach((function(t,r){var o,a=t.undirected?\"--\":\"->\",s=\"\",u=t.source.key,c=t.target.key;t.undirected&&u>c&&(o=u,u=c,c=o);var h=\"(\".concat(u,\")\").concat(a,\"(\").concat(c,\")\");r.startsWith(\"geid_\")?e.multi&&(void 0===i[h]?i[h]=0:i[h]++,s+=\"\".concat(i[h],\". \")):s+=\"[\".concat(r,\"]: \"),n[s+=h]=t.attributes}));var o={};for(var a in this)this.hasOwnProperty(a)&&!Gt.has(a)&&\"function\"!=typeof this[a]&&\"symbol\"!==t(a)&&(o[a]=this[a]);return o.attributes=this._attributes,o.nodes=r,o.edges=n,l(o,\"constructor\",this.constructor),o},n}(y.exports.EventEmitter);\"undefined\"!=typeof Symbol&&(Mt.prototype[Symbol.for(\"nodejs.util.inspect.custom\")]=Mt.prototype.inspect),[{name:function(t){return\"\".concat(t,\"Edge\")},generateKey:!0},{name:function(t){return\"\".concat(t,\"DirectedEdge\")},generateKey:!0,type:\"directed\"},{name:function(t){return\"\".concat(t,\"UndirectedEdge\")},generateKey:!0,type:\"undirected\"},{name:function(t){return\"\".concat(t,\"EdgeWithKey\")}},{name:function(t){return\"\".concat(t,\"DirectedEdgeWithKey\")},type:\"directed\"},{name:function(t){return\"\".concat(t,\"UndirectedEdgeWithKey\")},type:\"undirected\"}].forEach((function(t){[\"add\",\"merge\",\"update\"].forEach((function(e){var r=t.name(e),n=\"add\"===e?Tt:Ot;t.generateKey?Mt.prototype[r]=function(i,o,a){return n(this,r,!0,\"undirected\"===(t.type||this.type),null,i,o,a,\"update\"===e)}:Mt.prototype[r]=function(i,o,a,s){return n(this,r,!1,\"undirected\"===(t.type||this.type),i,o,a,s,\"update\"===e)}}))})),function(t){X.forEach((function(e){var r=e.name,n=e.attacher;n(t,r(\"Node\"),0),n(t,r(\"Source\"),1),n(t,r(\"Target\"),2),n(t,r(\"Opposite\"),3)}))}(Mt),function(t){Q.forEach((function(e){var r=e.name,n=e.attacher;n(t,r(\"Edge\"),\"mixed\"),n(t,r(\"DirectedEdge\"),\"directed\"),n(t,r(\"UndirectedEdge\"),\"undirected\")}))}(Mt),function(t){et.forEach((function(e){!function(t,e){var r=e.name,n=e.type,i=e.direction;t.prototype[r]=function(t,e){if(\"mixed\"!==n&&\"mixed\"!==this.type&&n!==this.type)return[];if(!arguments.length)return ut(this,n);if(1===arguments.length){t=\"\"+t;var o=this._nodes.get(t);if(void 0===o)throw new W(\"Graph.\".concat(r,': could not find the \"').concat(t,'\" node in the graph.'));return lt(this.multi,\"mixed\"===n?this.type:n,i,o)}if(2===arguments.length){t=\"\"+t,e=\"\"+e;var a=this._nodes.get(t);if(!a)throw new W(\"Graph.\".concat(r,':  could not find the \"').concat(t,'\" source node in the graph.'));if(!this._nodes.has(e))throw new W(\"Graph.\".concat(r,':  could not find the \"').concat(e,'\" target node in the graph.'));return gt(n,this.multi,i,a,e)}throw new B(\"Graph.\".concat(r,\": too many arguments (expecting 0, 1 or 2 and got \").concat(arguments.length,\").\"))}}(t,e),function(t,e){var r=e.name,n=e.type,i=e.direction,o=\"forEach\"+r[0].toUpperCase()+r.slice(1,-1);t.prototype[o]=function(t,e,r){if(\"mixed\"===n||\"mixed\"===this.type||n===this.type){if(1===arguments.length)return ct(!1,this,n,r=t);if(2===arguments.length){t=\"\"+t,r=e;var a=this._nodes.get(t);if(void 0===a)throw new W(\"Graph.\".concat(o,': could not find the \"').concat(t,'\" node in the graph.'));return dt(!1,this.multi,\"mixed\"===n?this.type:n,i,a,r)}if(3===arguments.length){t=\"\"+t,e=\"\"+e;var s=this._nodes.get(t);if(!s)throw new W(\"Graph.\".concat(o,':  could not find the \"').concat(t,'\" source node in the graph.'));if(!this._nodes.has(e))throw new W(\"Graph.\".concat(o,':  could not find the \"').concat(e,'\" target node in the graph.'));return pt(!1,n,this.multi,i,s,e,r)}throw new B(\"Graph.\".concat(o,\": too many arguments (expecting 1, 2 or 3 and got \").concat(arguments.length,\").\"))}};var a=\"map\"+r[0].toUpperCase()+r.slice(1);t.prototype[a]=function(){var t,e=Array.prototype.slice.call(arguments),r=e.pop();if(0===e.length){var i=0;\"directed\"!==n&&(i+=this.undirectedSize),\"undirected\"!==n&&(i+=this.directedSize),t=new Array(i);var a=0;e.push((function(e,n,i,o,s,u,c){t[a++]=r(e,n,i,o,s,u,c)}))}else t=[],e.push((function(e,n,i,o,a,s,u){t.push(r(e,n,i,o,a,s,u))}));return this[o].apply(this,e),t};var s=\"filter\"+r[0].toUpperCase()+r.slice(1);t.prototype[s]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),r=[];return t.push((function(t,n,i,o,a,s,u){e(t,n,i,o,a,s,u)&&r.push(t)})),this[o].apply(this,t),r};var u=\"reduce\"+r[0].toUpperCase()+r.slice(1);t.prototype[u]=function(){var t,e,r=Array.prototype.slice.call(arguments);if(r.length<2||r.length>4)throw new B(\"Graph.\".concat(u,\": invalid number of arguments (expecting 2, 3 or 4 and got \").concat(r.length,\").\"));if(\"function\"==typeof r[r.length-1]&&\"function\"!=typeof r[r.length-2])throw new B(\"Graph.\".concat(u,\": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.\"));2===r.length?(t=r[0],e=r[1],r=[]):3===r.length?(t=r[1],e=r[2],r=[r[0]]):4===r.length&&(t=r[2],e=r[3],r=[r[0],r[1]]);var n=e;return r.push((function(e,r,i,o,a,s,u){n=t(n,e,r,i,o,a,s,u)})),this[o].apply(this,r),n}}(t,e),function(t,e){var r=e.name,n=e.type,i=e.direction,o=\"find\"+r[0].toUpperCase()+r.slice(1,-1);t.prototype[o]=function(t,e,r){if(\"mixed\"!==n&&\"mixed\"!==this.type&&n!==this.type)return!1;if(1===arguments.length)return ct(!0,this,n,r=t);if(2===arguments.length){t=\"\"+t,r=e;var a=this._nodes.get(t);if(void 0===a)throw new W(\"Graph.\".concat(o,': could not find the \"').concat(t,'\" node in the graph.'));return dt(!0,this.multi,\"mixed\"===n?this.type:n,i,a,r)}if(3===arguments.length){t=\"\"+t,e=\"\"+e;var s=this._nodes.get(t);if(!s)throw new W(\"Graph.\".concat(o,':  could not find the \"').concat(t,'\" source node in the graph.'));if(!this._nodes.has(e))throw new W(\"Graph.\".concat(o,':  could not find the \"').concat(e,'\" target node in the graph.'));return pt(!0,n,this.multi,i,s,e,r)}throw new B(\"Graph.\".concat(o,\": too many arguments (expecting 1, 2 or 3 and got \").concat(arguments.length,\").\"))};var a=\"some\"+r[0].toUpperCase()+r.slice(1,-1);t.prototype[a]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop();return t.push((function(t,r,n,i,o,a,s){return e(t,r,n,i,o,a,s)})),!!this[o].apply(this,t)};var s=\"every\"+r[0].toUpperCase()+r.slice(1,-1);t.prototype[s]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop();return t.push((function(t,r,n,i,o,a,s){return!e(t,r,n,i,o,a,s)})),!this[o].apply(this,t)}}(t,e),function(t,e){var r=e.name,n=e.type,i=e.direction,o=r.slice(0,-1)+\"Entries\";t.prototype[o]=function(t,e){if(\"mixed\"!==n&&\"mixed\"!==this.type&&n!==this.type)return P.empty();if(!arguments.length)return ht(this,n);if(1===arguments.length){t=\"\"+t;var r=this._nodes.get(t);if(!r)throw new W(\"Graph.\".concat(o,': could not find the \"').concat(t,'\" node in the graph.'));return ft(n,i,r)}if(2===arguments.length){t=\"\"+t,e=\"\"+e;var a=this._nodes.get(t);if(!a)throw new W(\"Graph.\".concat(o,':  could not find the \"').concat(t,'\" source node in the graph.'));if(!this._nodes.has(e))throw new W(\"Graph.\".concat(o,':  could not find the \"').concat(e,'\" target node in the graph.'));return yt(n,i,a,e)}throw new B(\"Graph.\".concat(o,\": too many arguments (expecting 0, 1 or 2 and got \").concat(arguments.length,\").\"))}}(t,e)}))}(Mt),function(t){mt.forEach((function(e){xt(t,e),function(t,e){var r=e.name,n=e.type,i=e.direction,o=\"forEach\"+r[0].toUpperCase()+r.slice(1,-1);t.prototype[o]=function(t,e){if(\"mixed\"===n||\"mixed\"===this.type||n===this.type){t=\"\"+t;var r=this._nodes.get(t);if(void 0===r)throw new W(\"Graph.\".concat(o,': could not find the \"').concat(t,'\" node in the graph.'));wt(!1,\"mixed\"===n?this.type:n,i,r,e)}};var a=\"map\"+r[0].toUpperCase()+r.slice(1);t.prototype[a]=function(t,e){var r=[];return this[o](t,(function(t,n){r.push(e(t,n))})),r};var s=\"filter\"+r[0].toUpperCase()+r.slice(1);t.prototype[s]=function(t,e){var r=[];return this[o](t,(function(t,n){e(t,n)&&r.push(t)})),r};var u=\"reduce\"+r[0].toUpperCase()+r.slice(1);t.prototype[u]=function(t,e,r){if(arguments.length<3)throw new B(\"Graph.\".concat(u,\": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.\"));var n=r;return this[o](t,(function(t,r){n=e(n,t,r)})),n}}(t,e),function(t,e){var r=e.name,n=e.type,i=e.direction,o=r[0].toUpperCase()+r.slice(1,-1),a=\"find\"+o;t.prototype[a]=function(t,e){if(\"mixed\"===n||\"mixed\"===this.type||n===this.type){t=\"\"+t;var r=this._nodes.get(t);if(void 0===r)throw new W(\"Graph.\".concat(a,': could not find the \"').concat(t,'\" node in the graph.'));return wt(!0,\"mixed\"===n?this.type:n,i,r,e)}};var s=\"some\"+o;t.prototype[s]=function(t,e){return!!this[a](t,e)};var u=\"every\"+o;t.prototype[u]=function(t,e){return!this[a](t,(function(t,r){return!e(t,r)}))}}(t,e),Et(t,e)}))}(Mt);var Rt=function(t){function r(e){var r=u({type:\"directed\"},e);if(\"multi\"in r&&!1!==r.multi)throw new B(\"DirectedGraph.from: inconsistent indication that the graph should be multi in given options!\");if(\"directed\"!==r.type)throw new B('DirectedGraph.from: inconsistent \"'+r.type+'\" type in given options!');return t.call(this,r)||this}return e(r,t),r}(Mt),jt=function(t){function r(e){var r=u({type:\"undirected\"},e);if(\"multi\"in r&&!1!==r.multi)throw new B(\"UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!\");if(\"undirected\"!==r.type)throw new B('UndirectedGraph.from: inconsistent \"'+r.type+'\" type in given options!');return t.call(this,r)||this}return e(r,t),r}(Mt),zt=function(t){function r(e){var r=u({multi:!0},e);if(\"multi\"in r&&!0!==r.multi)throw new B(\"MultiGraph.from: inconsistent indication that the graph should be simple in given options!\");return t.call(this,r)||this}return e(r,t),r}(Mt),Ut=function(t){function r(e){var r=u({type:\"directed\",multi:!0},e);if(\"multi\"in r&&!0!==r.multi)throw new B(\"MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!\");if(\"directed\"!==r.type)throw new B('MultiDirectedGraph.from: inconsistent \"'+r.type+'\" type in given options!');return t.call(this,r)||this}return e(r,t),r}(Mt),It=function(t){function r(e){var r=u({type:\"undirected\",multi:!0},e);if(\"multi\"in r&&!0!==r.multi)throw new B(\"MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!\");if(\"undirected\"!==r.type)throw new B('MultiUndirectedGraph.from: inconsistent \"'+r.type+'\" type in given options!');return t.call(this,r)||this}return e(r,t),r}(Mt);function Bt(t){t.from=function(e,r){var n=u({},e.options,r),i=new t(n);return i.import(e),i}}return Bt(Mt),Bt(Rt),Bt(jt),Bt(zt),Bt(Ut),Bt(It),Mt.Graph=Mt,Mt.DirectedGraph=Rt,Mt.UndirectedGraph=jt,Mt.MultiGraph=zt,Mt.MultiDirectedGraph=Ut,Mt.MultiUndirectedGraph=It,Mt.InvalidArgumentsGraphError=B,Mt.NotFoundGraphError=W,Mt.UsageGraphError=q,Mt}()},function(t,e,r){e.parse=r(43),e.write=r(49)},,function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__values||function(t){var e=\"function\"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&\"number\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(r(5)),u=a(r(8)),c=a(r(10)),h=r(3),d=r(0),l=r(24),f=r(25),p=a(r(41)),g=r(6),y=r(42);function m(t,e,r){if(!r.hasOwnProperty(\"x\")||!r.hasOwnProperty(\"y\"))throw new Error('Sigma: could not find a valid position (x, y) for node \"'.concat(e,'\". All your nodes must have a number \"x\" and \"y\". Maybe your forgot to apply a layout or your \"nodeReducer\" is not returning the correct data?'));return r.color||(r.color=t.defaultNodeColor),r.label||\"\"===r.label||(r.label=null),void 0!==r.label&&null!==r.label?r.label=\"\"+r.label:r.label=null,r.size||(r.size=2),r.hasOwnProperty(\"hidden\")||(r.hidden=!1),r.hasOwnProperty(\"highlighted\")||(r.highlighted=!1),r.hasOwnProperty(\"forceLabel\")||(r.forceLabel=!1),r.type&&\"\"!==r.type||(r.type=t.defaultNodeType),r.zIndex||(r.zIndex=0),r}function v(t,e,r){return r.color||(r.color=t.defaultEdgeColor),r.label||(r.label=\"\"),r.size||(r.size=.5),r.hasOwnProperty(\"hidden\")||(r.hidden=!1),r.hasOwnProperty(\"forceLabel\")||(r.forceLabel=!1),r.type&&\"\"!==r.type||(r.type=t.defaultEdgeType),r.zIndex||(r.zIndex=0),r}var b=function(t){function e(e,r,n){void 0===n&&(n={});var i=t.call(this)||this;if(i.elements={},i.canvasContexts={},i.webGLContexts={},i.activeListeners={},i.quadtree=new c.default,i.labelGrid=new l.LabelGrid,i.nodeDataCache={},i.edgeDataCache={},i.nodesWithForcedLabels=[],i.edgesWithForcedLabels=[],i.nodeExtent={x:[0,1],y:[0,1]},i.matrix=(0,g.identity)(),i.invMatrix=(0,g.identity)(),i.correctionRatio=1,i.customBBox=null,i.normalizationFunction=(0,d.createNormalizationFunction)({x:[0,1],y:[0,1]}),i.cameraSizeRatio=1,i.width=0,i.height=0,i.pixelRatio=(0,d.getPixelRatio)(),i.displayedLabels=new Set,i.highlightedNodes=new Set,i.hoveredNode=null,i.hoveredEdge=null,i.renderFrame=null,i.renderHighlightedNodesFrame=null,i.needToProcess=!1,i.needToSoftProcess=!1,i.checkEdgesEventsFrame=null,i.nodePrograms={},i.hoverNodePrograms={},i.edgePrograms={},i.settings=(0,d.assign)({},f.DEFAULT_SETTINGS,n),(0,f.validateSettings)(i.settings),(0,d.validateGraph)(e),!(r instanceof HTMLElement))throw new Error(\"Sigma: container should be an html element.\");for(var o in i.graph=e,i.container=r,i.createWebGLContext(\"edges\",{preserveDrawingBuffer:!0}),i.createCanvasContext(\"edgeLabels\"),i.createWebGLContext(\"nodes\"),i.createCanvasContext(\"labels\"),i.createCanvasContext(\"hovers\"),i.createWebGLContext(\"hoverNodes\"),i.createCanvasContext(\"mouse\"),i.webGLContexts){var a=i.webGLContexts[o];a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.BLEND)}for(var h in i.settings.nodeProgramClasses){var y=i.settings.nodeProgramClasses[h];i.nodePrograms[h]=new y(i.webGLContexts.nodes,i),i.hoverNodePrograms[h]=new y(i.webGLContexts.hoverNodes,i)}for(var h in i.settings.edgeProgramClasses){var m=i.settings.edgeProgramClasses[h];i.edgePrograms[h]=new m(i.webGLContexts.edges,i)}return i.resize(),i.camera=new s.default,i.bindCameraHandlers(),i.mouseCaptor=new u.default(i.elements.mouse,i),i.touchCaptor=new p.default(i.elements.mouse,i),i.bindEventHandlers(),i.bindGraphHandlers(),i.handleSettingsUpdate(),i.process(),i.render(),i}return n(e,t),e.prototype.createCanvas=function(t){var e=(0,d.createElement)(\"canvas\",{position:\"absolute\"},{class:\"sigma-\".concat(t)});return this.elements[t]=e,this.container.appendChild(e),e},e.prototype.createCanvasContext=function(t){var e=this.createCanvas(t);return this.canvasContexts[t]=e.getContext(\"2d\",{preserveDrawingBuffer:!1,antialias:!1}),this},e.prototype.createWebGLContext=function(t,e){var r,n=this.createCanvas(t),o=i({preserveDrawingBuffer:!1,antialias:!1},e||{});return(r=n.getContext(\"webgl2\",o))||(r=n.getContext(\"webgl\",o)),r||(r=n.getContext(\"experimental-webgl\",o)),this.webGLContexts[t]=r,this},e.prototype.bindCameraHandlers=function(){var t=this;return this.activeListeners.camera=function(){t._scheduleRefresh()},this.camera.on(\"updated\",this.activeListeners.camera),this},e.prototype.mouseIsOnNode=function(t,e,r){var n=t.x,i=t.y,o=e.x,a=e.y;return n>o-r&&n<o+r&&i>a-r&&i<a+r&&Math.sqrt(Math.pow(n-o,2)+Math.pow(i-a,2))<r},e.prototype.getQuadNodes=function(t){var e=this.viewportToFramedGraph(t);return this.quadtree.point(e.x,1-e.y)},e.prototype.getNodeAtPosition=function(t){for(var e=t.x,r=t.y,n=this.getQuadNodes(t),i=1/0,o=null,a=0,s=n.length;a<s;a++){var u=n[a],c=this.nodeDataCache[u],h=this.framedGraphToViewport(c),d=this.scaleSize(c.size);if(!c.hidden&&this.mouseIsOnNode(t,h,d)){var l=Math.sqrt(Math.pow(e-h.x,2)+Math.pow(r-h.y,2));l<i&&(i=l,o=u)}}return o},e.prototype.bindEventHandlers=function(){var t=this;this.activeListeners.handleResize=function(){t.needToSoftProcess=!0,t._scheduleRefresh()},window.addEventListener(\"resize\",this.activeListeners.handleResize),this.activeListeners.handleMove=function(e){var r={event:e,preventSigmaDefault:function(){e.preventSigmaDefault()}},n=t.getNodeAtPosition(e);if(n&&t.hoveredNode!==n&&!t.nodeDataCache[n].hidden)return t.hoveredNode&&t.emit(\"leaveNode\",i(i({},r),{node:t.hoveredNode})),t.hoveredNode=n,t.emit(\"enterNode\",i(i({},r),{node:n})),void t.scheduleHighlightedNodesRender();if(t.hoveredNode){var o=t.nodeDataCache[t.hoveredNode],a=t.framedGraphToViewport(o),s=t.scaleSize(o.size);if(!t.mouseIsOnNode(e,a,s)){var u=t.hoveredNode;return t.hoveredNode=null,t.emit(\"leaveNode\",i(i({},r),{node:u})),void t.scheduleHighlightedNodesRender()}}!0===t.settings.enableEdgeHoverEvents?t.checkEdgeHoverEvents(r):\"debounce\"===t.settings.enableEdgeHoverEvents&&(t.checkEdgesEventsFrame||(t.checkEdgesEventsFrame=(0,d.requestFrame)((function(){t.checkEdgeHoverEvents(r),t.checkEdgesEventsFrame=null}))))};var e=function(e){return function(r){var n={event:r,preventSigmaDefault:function(){r.preventSigmaDefault()}},o=r.original.isFakeSigmaMouseEvent?t.getNodeAtPosition(r):t.hoveredNode;if(o)return t.emit(\"\".concat(e,\"Node\"),i(i({},n),{node:o}));if(\"wheel\"===e?t.settings.enableEdgeWheelEvents:t.settings.enableEdgeClickEvents){var a=t.getEdgeAtPoint(r.x,r.y);if(a)return t.emit(\"\".concat(e,\"Edge\"),i(i({},n),{edge:a}))}return t.emit(\"\".concat(e,\"Stage\"),n)}};return this.activeListeners.handleClick=e(\"click\"),this.activeListeners.handleRightClick=e(\"rightClick\"),this.activeListeners.handleDoubleClick=e(\"doubleClick\"),this.activeListeners.handleWheel=e(\"wheel\"),this.activeListeners.handleDown=e(\"down\"),this.mouseCaptor.on(\"mousemove\",this.activeListeners.handleMove),this.mouseCaptor.on(\"click\",this.activeListeners.handleClick),this.mouseCaptor.on(\"rightClick\",this.activeListeners.handleRightClick),this.mouseCaptor.on(\"doubleClick\",this.activeListeners.handleDoubleClick),this.mouseCaptor.on(\"wheel\",this.activeListeners.handleWheel),this.mouseCaptor.on(\"mousedown\",this.activeListeners.handleDown),this},e.prototype.bindGraphHandlers=function(){var t=this,e=this.graph;return this.activeListeners.graphUpdate=function(){t.needToProcess=!0,t._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){t.needToSoftProcess=!0,t._scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(e){delete t.nodeDataCache[e.key],t.hoveredNode===e.key&&(t.hoveredNode=null),t.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(e){delete t.edgeDataCache[e.key],t.hoveredEdge===e.key&&(t.hoveredEdge=null),t.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){t.edgeDataCache={},t.hoveredEdge=null,t.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){t.nodeDataCache={},t.hoveredNode=null,t.activeListeners.clearEdgesGraphUpdate()},e.on(\"nodeAdded\",this.activeListeners.graphUpdate),e.on(\"nodeDropped\",this.activeListeners.dropNodeGraphUpdate),e.on(\"nodeAttributesUpdated\",this.activeListeners.softGraphUpdate),e.on(\"eachNodeAttributesUpdated\",this.activeListeners.graphUpdate),e.on(\"edgeAdded\",this.activeListeners.graphUpdate),e.on(\"edgeDropped\",this.activeListeners.dropEdgeGraphUpdate),e.on(\"edgeAttributesUpdated\",this.activeListeners.softGraphUpdate),e.on(\"eachEdgeAttributesUpdated\",this.activeListeners.graphUpdate),e.on(\"edgesCleared\",this.activeListeners.clearEdgesGraphUpdate),e.on(\"cleared\",this.activeListeners.clearGraphUpdate),this},e.prototype.checkEdgeHoverEvents=function(t){var e=this.hoveredNode?null:this.getEdgeAtPoint(t.event.x,t.event.y);return e!==this.hoveredEdge&&(this.hoveredEdge&&this.emit(\"leaveEdge\",i(i({},t),{edge:this.hoveredEdge})),e&&this.emit(\"enterEdge\",i(i({},t),{edge:e})),this.hoveredEdge=e),this},e.prototype.getEdgeAtPoint=function(t,e){var r,n,i=this,a=this.edgeDataCache,s=this.nodeDataCache;if(!(0,y.isPixelColored)(this.webGLContexts.edges,t*this.pixelRatio,e*this.pixelRatio))return null;var u=this.viewportToGraph({x:t,y:e}),c=u.x,h=u.y,d=0;if(this.graph.someEdge((function(t,e,r,n,o,u){var c=o.x,h=o.y,l=u.x,f=u.y;if(a[t].hidden||s[r].hidden||s[n].hidden)return!1;if(c!==l||h!==f){var p=Math.sqrt(Math.pow(l-c,2)+Math.pow(f-h,2)),g=i.graphToViewport({x:c,y:h}),y=g.x,m=g.y,v=i.graphToViewport({x:l,y:f}),b=v.x,w=v.y,_=Math.sqrt(Math.pow(b-y,2)+Math.pow(w-m,2));return d=p/_,!0}})),!d)return null;var l=this.graph.filterEdges((function(t,e,r,n,o,u){return!(a[t].hidden||s[r].hidden||s[n].hidden)&&(!!(0,y.doEdgeCollideWithPoint)(c,h,o.x,o.y,u.x,u.y,a[t].size*d/i.cameraSizeRatio)||void 0)}));if(0===l.length)return null;var f=l[l.length-1],p=-1/0;try{for(var g=o(l),m=g.next();!m.done;m=g.next()){var v=m.value,b=this.graph.getEdgeAttribute(v,\"zIndex\");b>=p&&(f=v,p=b)}}catch(w){r={error:w}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}return f},e.prototype.process=function(t){var e=this;void 0===t&&(t=!1);var r=this.graph,n=this.settings,i=this.getDimensions(),o=[1/0,-1/0],a=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(i,n.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,d.graphExtent)(r),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var u=new s.default,c=(0,d.matrixFromCamera)(u.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting(\"stagePadding\")||0);this.normalizationFunction=(0,d.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var h={},l=r.nodes(),f=0,p=l.length;f<p;f++){var g=l[f],y=Object.assign({},r.getNodeAttributes(g));n.nodeReducer&&(y=n.nodeReducer(g,y)),h[(w=m(this.settings,g,y)).type]=(h[w.type]||0)+1,this.nodeDataCache[g]=w,this.normalizationFunction.applyTo(w),w.forceLabel&&this.nodesWithForcedLabels.push(g),this.settings.zIndex&&(w.zIndex<o[0]&&(o[0]=w.zIndex),w.zIndex>o[1]&&(o[1]=w.zIndex))}for(var b in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(b))throw new Error('Sigma: could not find a suitable program for node type \"'.concat(b,'\"!'));t||this.nodePrograms[b].allocate(h[b]||0),h[b]=0}this.settings.zIndex&&o[0]!==o[1]&&(l=(0,d.zIndexOrdering)(o,(function(t){return e.nodeDataCache[t].zIndex}),l));for(f=0,p=l.length;f<p;f++){g=l[f];var w=this.nodeDataCache[g];this.quadtree.add(g,w.x,1-w.y,w.size/this.width),\"string\"!==typeof w.label||w.hidden||this.labelGrid.add(g,w.size,this.framedGraphToViewport(w,{matrix:c})),this.nodePrograms[w.type].process(w,w.hidden,h[w.type]++),w.highlighted&&!w.hidden&&this.highlightedNodes.add(g)}this.labelGrid.organize();var _={},x=r.edges();for(f=0,p=x.length;f<p;f++){var E=x[f];y=Object.assign({},r.getEdgeAttributes(E));n.edgeReducer&&(y=n.edgeReducer(E,y)),_[(w=v(this.settings,0,y)).type]=(_[w.type]||0)+1,this.edgeDataCache[E]=w,w.forceLabel&&!w.hidden&&this.edgesWithForcedLabels.push(E),this.settings.zIndex&&(w.zIndex<a[0]&&(a[0]=w.zIndex),w.zIndex>a[1]&&(a[1]=w.zIndex))}for(var b in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(b))throw new Error('Sigma: could not find a suitable program for edge type \"'.concat(b,'\"!'));t||this.edgePrograms[b].allocate(_[b]||0),_[b]=0}this.settings.zIndex&&a[0]!==a[1]&&(x=(0,d.zIndexOrdering)(a,(function(t){return e.edgeDataCache[t].zIndex}),x));for(f=0,p=x.length;f<p;f++){E=x[f],w=this.edgeDataCache[E];var L=r.extremities(E),A=this.nodeDataCache[L[0]],k=this.nodeDataCache[L[1]],S=w.hidden||A.hidden||k.hidden;this.edgePrograms[w.type].process(A,k,w,S,_[w.type]++)}for(var b in this.edgePrograms){var C=this.edgePrograms[b];t||\"function\"!==typeof C.computeIndices||C.computeIndices()}return this},e.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},e.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},e.prototype._scheduleRefresh=function(){var t=this;return this.renderFrame||(this.renderFrame=(0,d.requestFrame)((function(){t._refresh(),t.renderFrame=null}))),this},e.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var t,e=this.camera.getState();if(e.ratio>=1)t=new Set(this.graph.nodes());else{var r=this.viewRectangle();t=new Set(this.quadtree.rectangle(r.x1,1-r.y1,r.x2,1-r.y2,r.height))}var n=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity).concat(this.nodesWithForcedLabels);this.displayedLabels=new Set;for(var o=this.canvasContexts.labels,a=0,s=n.length;a<s;a++){var u=n[a],c=this.nodeDataCache[u];if(!this.displayedLabels.has(u)&&!c.hidden){var h=this.framedGraphToViewport(c),d=h.x,l=h.y,f=this.scaleSize(c.size);!c.forceLabel&&f<this.settings.labelRenderedSizeThreshold||t.has(u)&&(this.displayedLabels.add(u),this.settings.labelRenderer(o,i(i({key:u},c),{size:f,x:d,y:l}),this.settings))}}return this},e.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var t=this.canvasContexts.edgeLabels;t.clearRect(0,0,this.width,this.height);for(var e=(0,l.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),r=new Set,n=0,o=e.length;n<o;n++){var a=e[n],s=this.graph.extremities(a),u=this.nodeDataCache[s[0]],c=this.nodeDataCache[s[1]],h=this.edgeDataCache[a];r.has(a)||(h.hidden||u.hidden||c.hidden||(this.settings.edgeLabelRenderer(t,i(i({key:a},h),{size:this.scaleSize(h.size)}),i(i(i({key:s[0]},u),this.framedGraphToViewport(u)),{size:this.scaleSize(u.size)}),i(i(i({key:s[1]},c),this.framedGraphToViewport(c)),{size:this.scaleSize(c.size)}),this.settings),r.add(a)))}return this},e.prototype.renderHighlightedNodes=function(){var t=this,e=this.canvasContexts.hovers;e.clearRect(0,0,this.width,this.height);var r=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&r.push(this.hoveredNode),this.highlightedNodes.forEach((function(e){e!==t.hoveredNode&&r.push(e)})),r.forEach((function(r){return function(r){var n=t.nodeDataCache[r],o=t.framedGraphToViewport(n),a=o.x,s=o.y,u=t.scaleSize(n.size);t.settings.hoverRenderer(e,i(i({key:r},n),{size:u,x:a,y:s}),t.settings)}(r)}));var n={};for(var o in r.forEach((function(e){var r=t.nodeDataCache[e].type;n[r]=(n[r]||0)+1})),this.hoverNodePrograms)this.hoverNodePrograms[o].allocate(n[o]||0),n[o]=0;for(var o in r.forEach((function(e){var r=t.nodeDataCache[e];t.hoverNodePrograms[r.type].process(r,r.hidden,n[r.type]++)})),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.hoverNodePrograms){var a=this.hoverNodePrograms[o];a.bind(),a.bufferData(),a.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:this.pixelRatio})}},e.prototype.scheduleHighlightedNodesRender=function(){var t=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,d.requestFrame)((function(){t.renderHighlightedNodesFrame=null,t.renderHighlightedNodes(),t.renderEdgeLabels()})))},e.prototype.render=function(){var t=this;this.emit(\"beforeRender\");var e=function(){return t.emit(\"afterRender\"),t};if(this.renderFrame&&((0,d.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return e();var r=this.mouseCaptor,n=this.camera.isAnimated()||r.isMoving||r.draggedEvents||r.currentWheelDirection,i=this.camera.getState(),o=this.getDimensions(),a=this.getGraphDimensions(),s=this.getSetting(\"stagePadding\")||0;for(var u in this.matrix=(0,d.matrixFromCamera)(i,o,a,s),this.invMatrix=(0,d.matrixFromCamera)(i,o,a,s,!0),this.correctionRatio=(0,d.getMatrixImpact)(this.matrix,i,o),this.nodePrograms){(c=this.nodePrograms[u]).bind(),c.bufferData(),c.render({matrix:this.matrix,width:this.width,height:this.height,ratio:i.ratio,correctionRatio:this.correctionRatio/i.ratio,scalingRatio:this.pixelRatio})}if(!this.settings.hideEdgesOnMove||!n)for(var u in this.edgePrograms){var c;(c=this.edgePrograms[u]).bind(),c.bufferData(),c.render({matrix:this.matrix,width:this.width,height:this.height,ratio:i.ratio,correctionRatio:this.correctionRatio/i.ratio,scalingRatio:this.pixelRatio})}return this.settings.hideLabelsOnMove&&n||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),e()},e.prototype.updateCachedValues=function(){var t=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(t)},e.prototype.getCamera=function(){return this.camera},e.prototype.getContainer=function(){return this.container},e.prototype.getGraph=function(){return this.graph},e.prototype.getMouseCaptor=function(){return this.mouseCaptor},e.prototype.getTouchCaptor=function(){return this.touchCaptor},e.prototype.getDimensions=function(){return{width:this.width,height:this.height}},e.prototype.getGraphDimensions=function(){var t=this.customBBox||this.nodeExtent;return{width:t.x[1]-t.x[0]||1,height:t.y[1]-t.y[0]||1}},e.prototype.getNodeDisplayData=function(t){var e=this.nodeDataCache[t];return e?Object.assign({},e):void 0},e.prototype.getEdgeDisplayData=function(t){var e=this.edgeDataCache[t];return e?Object.assign({},e):void 0},e.prototype.getSettings=function(){return i({},this.settings)},e.prototype.getSetting=function(t){return this.settings[t]},e.prototype.setSetting=function(t,e){return this.settings[t]=e,(0,f.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},e.prototype.updateSetting=function(t,e){return this.settings[t]=e(this.settings[t]),(0,f.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},e.prototype.resize=function(){var t=this.width,e=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,d.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error(\"Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.\");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error(\"Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.\");this.height=1}if(t===this.width&&e===this.height)return this;for(var r in this.emit(\"resize\"),this.elements){var n=this.elements[r];n.style.width=this.width+\"px\",n.style.height=this.height+\"px\"}for(var r in this.canvasContexts)this.elements[r].setAttribute(\"width\",this.width*this.pixelRatio+\"px\"),this.elements[r].setAttribute(\"height\",this.height*this.pixelRatio+\"px\"),1!==this.pixelRatio&&this.canvasContexts[r].scale(this.pixelRatio,this.pixelRatio);for(var r in this.webGLContexts)this.elements[r].setAttribute(\"width\",this.width*this.pixelRatio+\"px\"),this.elements[r].setAttribute(\"height\",this.height*this.pixelRatio+\"px\"),this.webGLContexts[r].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},e.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},e.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},e.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},e.prototype.getViewportZoomedState=function(t,e){var r=this.camera.getState(),n=r.ratio,i=r.angle,o=r.x,a=r.y,s=e/n,u={x:this.width/2,y:this.height/2},c=this.viewportToFramedGraph(t),h=this.viewportToFramedGraph(u);return{angle:i,x:(c.x-h.x)*(1-s)+o,y:(c.y-h.y)*(1-s)+a,ratio:e}},e.prototype.viewRectangle=function(){var t=0*this.width/8,e=0*this.height/8,r=this.viewportToFramedGraph({x:0-t,y:0-e}),n=this.viewportToFramedGraph({x:this.width+t,y:0-e}),i=this.viewportToFramedGraph({x:0,y:this.height+e});return{x1:r.x,y1:r.y,x2:n.x,y2:n.y,height:n.y-i.y}},e.prototype.framedGraphToViewport=function(t,e){void 0===e&&(e={});var r=!!e.cameraState||!!e.viewportDimensions||!!e.graphDimensions,n=e.matrix?e.matrix:r?(0,d.matrixFromCamera)(e.cameraState||this.camera.getState(),e.viewportDimensions||this.getDimensions(),e.graphDimensions||this.getGraphDimensions(),e.padding||this.getSetting(\"stagePadding\")||0):this.matrix,i=(0,g.multiplyVec2)(n,t);return{x:(1+i.x)*this.width/2,y:(1-i.y)*this.height/2}},e.prototype.viewportToFramedGraph=function(t,e){void 0===e&&(e={});var r=!!e.cameraState||!!e.viewportDimensions||!e.graphDimensions,n=e.matrix?e.matrix:r?(0,d.matrixFromCamera)(e.cameraState||this.camera.getState(),e.viewportDimensions||this.getDimensions(),e.graphDimensions||this.getGraphDimensions(),e.padding||this.getSetting(\"stagePadding\")||0,!0):this.invMatrix,i=(0,g.multiplyVec2)(n,{x:t.x/this.width*2-1,y:1-t.y/this.height*2});return isNaN(i.x)&&(i.x=0),isNaN(i.y)&&(i.y=0),i},e.prototype.viewportToGraph=function(t,e){return void 0===e&&(e={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(t,e))},e.prototype.graphToViewport=function(t,e){return void 0===e&&(e={}),this.framedGraphToViewport(this.normalizationFunction(t),e)},e.prototype.getBBox=function(){return(0,d.graphExtent)(this.graph)},e.prototype.getCustomBBox=function(){return this.customBBox},e.prototype.setCustomBBox=function(t){return this.customBBox=t,this._scheduleRefresh(),this},e.prototype.kill=function(){var t=this.graph;this.emit(\"kill\"),this.removeAllListeners(),this.camera.removeListener(\"updated\",this.activeListeners.camera),window.removeEventListener(\"resize\",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),t.removeListener(\"nodeAdded\",this.activeListeners.dropNodeGraphUpdate),t.removeListener(\"nodeDropped\",this.activeListeners.graphUpdate),t.removeListener(\"nodeAttributesUpdated\",this.activeListeners.softGraphUpdate),t.removeListener(\"eachNodeAttributesUpdated\",this.activeListeners.graphUpdate),t.removeListener(\"edgeAdded\",this.activeListeners.graphUpdate),t.removeListener(\"edgeDropped\",this.activeListeners.dropEdgeGraphUpdate),t.removeListener(\"edgeAttributesUpdated\",this.activeListeners.softGraphUpdate),t.removeListener(\"eachEdgeAttributesUpdated\",this.activeListeners.graphUpdate),t.removeListener(\"edgesCleared\",this.activeListeners.clearEdgesGraphUpdate),t.removeListener(\"cleared\",this.activeListeners.clearGraphUpdate),this.quadtree=new c.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,d.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,d.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},e.prototype.scaleSize=function(t){return t/this.cameraSizeRatio},e.prototype.getCanvases=function(){return i({},this.elements)},e}(h.TypedEventEmitter);e.default=b},function(t,e,r){\"use strict\";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0}),e.animateNodes=e.ANIMATE_DEFAULTS=void 0;var i=r(0),o=n(r(7));e.ANIMATE_DEFAULTS={easing:\"quadraticInOut\",duration:150},e.animateNodes=function(t,r,n,a){var s=Object.assign({},e.ANIMATE_DEFAULTS,n),u=\"function\"===typeof s.easing?s.easing:o.default[s.easing],c=Date.now(),h={};for(var d in r){var l=r[d];for(var f in h[d]={},l)h[d][f]=t.getNodeAttribute(d,f)}var p=null;return function e(){p=null;var n=(Date.now()-c)/s.duration;if(n>=1){for(var o in r){var d=r[o];for(var l in d)t.setNodeAttribute(o,l,d[l])}\"function\"===typeof a&&a()}else{for(var o in n=u(n),r){d=r[o];var f=h[o];for(var l in d)t.setNodeAttribute(o,l,d[l]*n+f[l]*(1-n))}p=(0,i.requestFrame)(e)}}(),function(){p&&(0,i.cancelFrame)(p)}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.HTML_COLORS=void 0,e.HTML_COLORS={black:\"#000000\",silver:\"#C0C0C0\",gray:\"#808080\",grey:\"#808080\",white:\"#FFFFFF\",maroon:\"#800000\",red:\"#FF0000\",purple:\"#800080\",fuchsia:\"#FF00FF\",green:\"#008000\",lime:\"#00FF00\",olive:\"#808000\",yellow:\"#FFFF00\",navy:\"#000080\",blue:\"#0000FF\",teal:\"#008080\",aqua:\"#00FFFF\",darkblue:\"#00008B\",mediumblue:\"#0000CD\",darkgreen:\"#006400\",darkcyan:\"#008B8B\",deepskyblue:\"#00BFFF\",darkturquoise:\"#00CED1\",mediumspringgreen:\"#00FA9A\",springgreen:\"#00FF7F\",cyan:\"#00FFFF\",midnightblue:\"#191970\",dodgerblue:\"#1E90FF\",lightseagreen:\"#20B2AA\",forestgreen:\"#228B22\",seagreen:\"#2E8B57\",darkslategray:\"#2F4F4F\",darkslategrey:\"#2F4F4F\",limegreen:\"#32CD32\",mediumseagreen:\"#3CB371\",turquoise:\"#40E0D0\",royalblue:\"#4169E1\",steelblue:\"#4682B4\",darkslateblue:\"#483D8B\",mediumturquoise:\"#48D1CC\",indigo:\"#4B0082\",darkolivegreen:\"#556B2F\",cadetblue:\"#5F9EA0\",cornflowerblue:\"#6495ED\",rebeccapurple:\"#663399\",mediumaquamarine:\"#66CDAA\",dimgray:\"#696969\",dimgrey:\"#696969\",slateblue:\"#6A5ACD\",olivedrab:\"#6B8E23\",slategray:\"#708090\",slategrey:\"#708090\",lightslategray:\"#778899\",lightslategrey:\"#778899\",mediumslateblue:\"#7B68EE\",lawngreen:\"#7CFC00\",chartreuse:\"#7FFF00\",aquamarine:\"#7FFFD4\",skyblue:\"#87CEEB\",lightskyblue:\"#87CEFA\",blueviolet:\"#8A2BE2\",darkred:\"#8B0000\",darkmagenta:\"#8B008B\",saddlebrown:\"#8B4513\",darkseagreen:\"#8FBC8F\",lightgreen:\"#90EE90\",mediumpurple:\"#9370DB\",darkviolet:\"#9400D3\",palegreen:\"#98FB98\",darkorchid:\"#9932CC\",yellowgreen:\"#9ACD32\",sienna:\"#A0522D\",brown:\"#A52A2A\",darkgray:\"#A9A9A9\",darkgrey:\"#A9A9A9\",lightblue:\"#ADD8E6\",greenyellow:\"#ADFF2F\",paleturquoise:\"#AFEEEE\",lightsteelblue:\"#B0C4DE\",powderblue:\"#B0E0E6\",firebrick:\"#B22222\",darkgoldenrod:\"#B8860B\",mediumorchid:\"#BA55D3\",rosybrown:\"#BC8F8F\",darkkhaki:\"#BDB76B\",mediumvioletred:\"#C71585\",indianred:\"#CD5C5C\",peru:\"#CD853F\",chocolate:\"#D2691E\",tan:\"#D2B48C\",lightgray:\"#D3D3D3\",lightgrey:\"#D3D3D3\",thistle:\"#D8BFD8\",orchid:\"#DA70D6\",goldenrod:\"#DAA520\",palevioletred:\"#DB7093\",crimson:\"#DC143C\",gainsboro:\"#DCDCDC\",plum:\"#DDA0DD\",burlywood:\"#DEB887\",lightcyan:\"#E0FFFF\",lavender:\"#E6E6FA\",darksalmon:\"#E9967A\",violet:\"#EE82EE\",palegoldenrod:\"#EEE8AA\",lightcoral:\"#F08080\",khaki:\"#F0E68C\",aliceblue:\"#F0F8FF\",honeydew:\"#F0FFF0\",azure:\"#F0FFFF\",sandybrown:\"#F4A460\",wheat:\"#F5DEB3\",beige:\"#F5F5DC\",whitesmoke:\"#F5F5F5\",mintcream:\"#F5FFFA\",ghostwhite:\"#F8F8FF\",salmon:\"#FA8072\",antiquewhite:\"#FAEBD7\",linen:\"#FAF0E6\",lightgoldenrodyellow:\"#FAFAD2\",oldlace:\"#FDF5E6\",magenta:\"#FF00FF\",deeppink:\"#FF1493\",orangered:\"#FF4500\",tomato:\"#FF6347\",hotpink:\"#FF69B4\",coral:\"#FF7F50\",darkorange:\"#FF8C00\",lightsalmon:\"#FFA07A\",orange:\"#FFA500\",lightpink:\"#FFB6C1\",pink:\"#FFC0CB\",gold:\"#FFD700\",peachpuff:\"#FFDAB9\",navajowhite:\"#FFDEAD\",moccasin:\"#FFE4B5\",bisque:\"#FFE4C4\",mistyrose:\"#FFE4E1\",blanchedalmond:\"#FFEBCD\",papayawhip:\"#FFEFD5\",lavenderblush:\"#FFF0F5\",seashell:\"#FFF5EE\",cornsilk:\"#FFF8DC\",lemonchiffon:\"#FFFACD\",floralwhite:\"#FFFAF0\",snow:\"#FFFAFA\",lightyellow:\"#FFFFE0\",ivory:\"#FFFFF0\"}},function(t,e,r){\"use strict\";var n,i=\"object\"===typeof Reflect?Reflect:null,o=i&&\"function\"===typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&\"function\"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!==t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){\"function\"===typeof t.removeListener&&t.removeListener(\"error\",i),r([].slice.call(arguments))}m(t,e,o,{once:!0}),\"error\"!==e&&function(t,e,r){\"function\"===typeof t.on&&m(t,\"error\",e,r)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if(\"function\"!==typeof t)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function d(t,e,r,n){var i,o,a,s;if(c(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit(\"newListener\",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if(\"function\"===typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=h(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error(\"Possible EventEmitter memory leak detected. \"+a.length+\" \"+String(e)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");u.name=\"MaxListenersExceededWarning\",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function p(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:\"function\"===typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):y(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var r=e[t];if(\"function\"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function m(t,e,r,n){if(\"function\"===typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if(\"function\"!==typeof t.addEventListener)throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(s,\"defaultMaxListeners\",{enumerable:!0,get:function(){return u},set:function(t){if(\"number\"!==typeof t||t<0||a(t))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+t+\".\");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if(\"number\"!==typeof t||t<0||a(t))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+t+\".\");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return h(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=\"error\"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error(\"Unhandled error.\"+(a?\" (\"+a.message+\")\":\"\"));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if(\"function\"===typeof u)o(u,this,e);else{var c=u.length,h=y(u,c);for(r=0;r<c;++r)o(h[r],this,e)}return!0},s.prototype.addListener=function(t,e){return d(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return d(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,n,i,o,a;if(c(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit(\"removeListener\",t,r.listener||e));else if(\"function\"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit(\"removeListener\",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)\"removeListener\"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"===typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return\"function\"===typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e){t.exports=function(t,e){var r=e.length;if(0!==r){var n=t.length;t.length+=r;for(var i=0;i<r;i++)t[n+i]=e[i]}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.edgeLabelsToDisplayFromNodes=e.LabelGrid=void 0;var n=function(){function t(t,e){this.key=t,this.size=e}return t.compare=function(t,e){return t.size>e.size?-1:t.size<e.size||t.key>e.key?1:-1},t}(),i=function(){function t(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return t.prototype.resizeAndClear=function(t,e){this.width=t.width,this.height=t.height,this.cellSize=e,this.columns=Math.ceil(t.width/e),this.rows=Math.ceil(t.height/e),this.cells={}},t.prototype.getIndex=function(t){var e=Math.floor(t.x/this.cellSize);return Math.floor(t.y/this.cellSize)*this.columns+e},t.prototype.add=function(t,e,r){var i=new n(t,e),o=this.getIndex(r),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(i)},t.prototype.organize=function(){for(var t in this.cells){this.cells[t].sort(n.compare)}},t.prototype.getLabelsToDisplay=function(t,e){var r=this.cellSize*this.cellSize,n=r/t/t*e/r,i=Math.ceil(n),o=[];for(var a in this.cells)for(var s=this.cells[a],u=0;u<Math.min(i,s.length);u++)o.push(s[u].key);return o},t}();e.LabelGrid=i,e.edgeLabelsToDisplayFromNodes=function(t){var e=t.graph,r=t.hoveredNode,n=t.highlightedNodes,i=t.displayedNodeLabels,o=[];return e.forEachEdge((function(t,e,a,s){(a===r||s===r||n.has(a)||n.has(s)||i.has(a)&&i.has(s))&&o.push(t)})),o}},function(t,e,r){\"use strict\";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0}),e.DEFAULT_SETTINGS=e.validateSettings=void 0;var i=n(r(11)),o=n(r(26)),a=n(r(27)),s=n(r(28)),u=n(r(33)),c=n(r(35));e.validateSettings=function(t){if(\"number\"!==typeof t.labelDensity||t.labelDensity<0)throw new Error(\"Settings: invalid `labelDensity`. Expecting a positive number.\");var e=t.minCameraRatio,r=t.maxCameraRatio;if(\"number\"===typeof e&&\"number\"===typeof r&&r<e)throw new Error(\"Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.\")},e.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:\"#999\",defaultNodeType:\"circle\",defaultEdgeColor:\"#ccc\",defaultEdgeType:\"line\",labelFont:\"Arial\",labelSize:14,labelWeight:\"normal\",labelColor:{color:\"#000\"},edgeLabelFont:\"Arial\",edgeLabelSize:14,edgeLabelWeight:\"normal\",edgeLabelColor:{attribute:\"color\"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:i.default,hoverRenderer:o.default,edgeLabelRenderer:a.default,allowInvalidContainer:!1,nodeProgramClasses:{circle:s.default},edgeProgramClasses:{arrow:c.default,line:u.default}}},function(t,e,r){\"use strict\";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0});var i=n(r(11));e.default=function(t,e,r){var n=r.labelSize,o=r.labelFont,a=r.labelWeight;if(t.font=\"\".concat(a,\" \").concat(n,\"px \").concat(o),t.fillStyle=\"#FFF\",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=\"#000\",\"string\"===typeof e.label){var s=t.measureText(e.label).width,u=Math.round(s+5),c=Math.round(n+4),h=Math.max(e.size,n/2)+2,d=Math.asin(c/2/h),l=Math.sqrt(Math.abs(Math.pow(h,2)-Math.pow(c/2,2)));t.beginPath(),t.moveTo(e.x+l,e.y+c/2),t.lineTo(e.x+h+u,e.y+c/2),t.lineTo(e.x+h+u,e.y-c/2),t.lineTo(e.x+l,e.y-c/2),t.arc(e.x,e.y,h,d,-d),t.closePath(),t.fill()}else t.beginPath(),t.arc(e.x,e.y,e.size+2,0,2*Math.PI),t.closePath(),t.fill();t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,(0,i.default)(t,e,r)}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t,e,r,n,i){var o=i.edgeLabelSize,a=i.edgeLabelFont,s=i.edgeLabelWeight,u=i.edgeLabelColor.attribute?e[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||\"#000\":i.edgeLabelColor.color,c=e.label;if(c){t.fillStyle=u,t.font=\"\".concat(s,\" \").concat(o,\"px \").concat(a);var h,d,l=r.size,f=n.size,p=r.x,g=r.y,y=n.x,m=n.y,v=y-p,b=m-g,w=Math.sqrt(v*v+b*b);if(!(w<l+f)){h=((p+=v*l/w)+(y-=v*f/w))/2,d=((g+=b*l/w)+(m-=b*f/w))/2,v=y-p,b=m-g,w=Math.sqrt(v*v+b*b);var _,x=t.measureText(c).width;if(x>w){for(c+=\"\\u2026\",x=t.measureText(c).width;x>w&&c.length>1;)c=c.slice(0,-2)+\"\\u2026\",x=t.measureText(c).width;if(c.length<4)return}_=v>0?b>0?Math.acos(v/w):Math.asin(b/w):b>0?Math.acos(v/w)+Math.PI:Math.asin(v/w)+Math.PI/2,t.save(),t.translate(h,d),t.rotate(_),t.fillText(c,-x/2,e.size/2+o),t.restore()}}}},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(0),a=i(r(29)),s=i(r(30)),u=r(31),c=function(t){function e(e){var r=t.call(this,e,a.default,s.default,1,4)||this;return r.bind(),r}return n(e,t),e.prototype.process=function(t,e,r){var n=this.array,i=1*r*4;if(e)return n[i++]=0,n[i++]=0,n[i++]=0,void(n[i++]=0);var a=(0,o.floatColor)(t.color);n[i++]=t.x,n[i++]=t.y,n[i++]=t.size,n[i]=a},e.prototype.render=function(t){if(!this.hasNothingToRender()){var e=this.gl,r=this.program;e.useProgram(r),e.uniform1f(this.ratioLocation,1/Math.sqrt(t.ratio)),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.drawArrays(e.POINTS,0,this.array.length/4)}},e}(u.AbstractNodeProgram);e.default=c},function(t,e){!function(){\"use strict\";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})}},r={};e.r(r),e.d(r,{default:function(){return n}});var n=\"attribute vec2 a_position;\\nattribute float a_size;\\nattribute vec4 a_color;\\n\\nuniform float u_ratio;\\nuniform float u_scale;\\nuniform mat3 u_matrix;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  gl_Position = vec4(\\n    (u_matrix * vec3(a_position, 1)).xy,\\n    0,\\n    1\\n  );\\n\\n  // Multiply the point size twice:\\n  //  - x SCALING_RATIO to correct the canvas scaling\\n  //  - x 2 to correct the formulae\\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\\n\\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";t.exports=r}()},function(t,e){!function(){\"use strict\";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})}},r={};e.r(r),e.d(r,{default:function(){return n}});var n=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float radius = 0.5;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\\n  float dist = radius - length(m);\\n\\n  float t = 0.0;\\n  if (dist > v_border)\\n    t = 1.0;\\n  else if (dist > 0.0)\\n    t = dist / v_border;\\n\\n  gl_FragColor = mix(transparent, v_color, t);\\n}\\n\";t.exports=r}()},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,\"__esModule\",{value:!0}),e.createNodeCompoundProgram=e.AbstractNodeProgram=void 0;var i=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,n,i,o)||this;a.positionLocation=e.getAttribLocation(a.program,\"a_position\"),a.sizeLocation=e.getAttribLocation(a.program,\"a_size\"),a.colorLocation=e.getAttribLocation(a.program,\"a_color\");var s=e.getUniformLocation(a.program,\"u_matrix\");if(null===s)throw new Error(\"AbstractNodeProgram: error while getting matrixLocation\");a.matrixLocation=s;var u=e.getUniformLocation(a.program,\"u_ratio\");if(null===u)throw new Error(\"AbstractNodeProgram: error while getting ratioLocation\");a.ratioLocation=u;var c=e.getUniformLocation(a.program,\"u_scale\");if(null===c)throw new Error(\"AbstractNodeProgram: error while getting scaleLocation\");return a.scaleLocation=c,a}return n(e,t),e.prototype.bind=function(){var t=this.gl;t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.sizeLocation),t.enableVertexAttribArray(this.colorLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.sizeLocation,1,t.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},e}(r(12).AbstractProgram);e.AbstractNodeProgram=i,e.createNodeCompoundProgram=function(t){return function(){function e(e,r){this.programs=t.map((function(t){return new t(e,r)}))}return e.prototype.bufferData=function(){this.programs.forEach((function(t){return t.bufferData()}))},e.prototype.allocate=function(t){this.programs.forEach((function(e){return e.allocate(t)}))},e.prototype.bind=function(){},e.prototype.render=function(t){this.programs.forEach((function(e){e.bind(),e.bufferData(),e.render(t)}))},e.prototype.process=function(t,e,r){this.programs.forEach((function(n){return n.process(t,e,r)}))},e}()}},function(t,e,r){\"use strict\";function n(t,e,r){var n=\"VERTEX\"===t?e.VERTEX_SHADER:e.FRAGMENT_SHADER,i=e.createShader(n);if(null===i)throw new Error(\"loadShader: error while creating the shader\");if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error(\"loadShader: error while compiling the shader:\\n\".concat(o,\"\\n\").concat(r))}return i}Object.defineProperty(e,\"__esModule\",{value:!0}),e.loadProgram=e.loadFragmentShader=e.loadVertexShader=void 0,e.loadVertexShader=function(t,e){return n(\"VERTEX\",t,e)},e.loadFragmentShader=function(t,e){return n(\"FRAGMENT\",t,e)},e.loadProgram=function(t,e){var r,n,i=t.createProgram();if(null===i)throw new Error(\"loadProgram: error while creating the program.\");for(r=0,n=e.length;r<n;r++)t.attachShader(i,e[r]);if(t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw t.deleteProgram(i),new Error(\"loadProgram: error while linking the program.\");return i}},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(0),a=i(r(34)),s=i(r(13)),u=r(2),c=function(t){function e(e){var r=t.call(this,e,a.default,s.default,4,5)||this,n=e.createBuffer();if(null===n)throw new Error(\"EdgeProgram: error while creating indicesBuffer\");r.indicesBuffer=n,r.positionLocation=e.getAttribLocation(r.program,\"a_position\"),r.colorLocation=e.getAttribLocation(r.program,\"a_color\"),r.normalLocation=e.getAttribLocation(r.program,\"a_normal\");var i=e.getUniformLocation(r.program,\"u_matrix\");if(null===i)throw new Error(\"EdgeProgram: error while getting matrixLocation\");r.matrixLocation=i;var u=e.getUniformLocation(r.program,\"u_correctionRatio\");if(null===u)throw new Error(\"EdgeProgram: error while getting correctionRatioLocation\");r.correctionRatioLocation=u;var c=e.getUniformLocation(r.program,\"u_sqrtZoomRatio\");if(null===c)throw new Error(\"EdgeProgram: error while getting sqrtZoomRatioLocation\");return r.sqrtZoomRatioLocation=c,r.canUse32BitsIndices=(0,o.canUse32BitsIndices)(e),r.IndicesArray=r.canUse32BitsIndices?Uint32Array:Uint16Array,r.indicesArray=new r.IndicesArray,r.indicesType=r.canUse32BitsIndices?e.UNSIGNED_INT:e.UNSIGNED_SHORT,r.bind(),r}return n(e,t),e.prototype.bind=function(){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.colorLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,5*Float32Array.BYTES_PER_ELEMENT,16)},e.prototype.computeIndices=function(){for(var t=this.array.length/5,e=t+t/2,r=new this.IndicesArray(e),n=0,i=0;n<t;n+=4)r[i++]=n,r[i++]=n+1,r[i++]=n+2,r[i++]=n+2,r[i++]=n+1,r[i++]=n+3;this.indicesArray=r},e.prototype.bufferData=function(){t.prototype.bufferData.call(this);var e=this.gl;e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indicesArray,e.STATIC_DRAW)},e.prototype.process=function(t,e,r,n,i){if(n)for(var a=20*i,s=a+20;a<s;a++)this.array[a]=0;else{var u=r.size||1,c=t.x,h=t.y,d=e.x,l=e.y,f=(0,o.floatColor)(r.color),p=d-c,g=l-h,y=p*p+g*g,m=0,v=0;y&&(m=-g*(y=1/Math.sqrt(y))*u,v=p*y*u);var b=20*i,w=this.array;w[b++]=c,w[b++]=h,w[b++]=m,w[b++]=v,w[b++]=f,w[b++]=c,w[b++]=h,w[b++]=-m,w[b++]=-v,w[b++]=f,w[b++]=d,w[b++]=l,w[b++]=m,w[b++]=v,w[b++]=f,w[b++]=d,w[b++]=l,w[b++]=-m,w[b++]=-v,w[b]=f}},e.prototype.render=function(t){if(!this.hasNothingToRender()){var e=this.gl,r=this.program;e.useProgram(r),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(t.ratio)),e.uniform1f(this.correctionRatioLocation,t.correctionRatio),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},e}(u.AbstractEdgeProgram);e.default=c},function(t,e){!function(){\"use strict\";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})}},r={};e.r(r),e.d(r,{default:function(){return n}});var n='attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // We require edges to be at least `minThickness` pixels thick *on screen*\\n  // (so we need to compensate the SQRT zoom ratio):\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n\\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\\n  // referential (in a ([0, 1], [0, 1]) space), using our \"magic\" correction\\n  // ratio:\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n\\n  // Finally, we adapt the edge thickness to the \"SQRT rule\" in sigma (so that\\n  // items are not too big when zoomed in, and not too small when zoomed out).\\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\\n  // it\\'s simpler like this:\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\\n\\n  // For the fragment shader though, we need a thickness that takes the \"magic\"\\n  // correction ratio into account (as in webGLThickness), but so that the\\n  // antialiasint effect does not depend on the zoom level. So here\\'s yet\\n  // another thickness version:\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n';t.exports=r}()},function(t,e,r){\"use strict\";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(2),o=n(r(36)),a=n(r(39)),s=(0,i.createEdgeCompoundProgram)([a.default,o.default]);e.default=s},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(0),a=i(r(37)),s=i(r(38)),u=r(2),c=function(t){function e(e){var r=t.call(this,e,a.default,s.default,3,9)||this;r.positionLocation=e.getAttribLocation(r.program,\"a_position\"),r.colorLocation=e.getAttribLocation(r.program,\"a_color\"),r.normalLocation=e.getAttribLocation(r.program,\"a_normal\"),r.radiusLocation=e.getAttribLocation(r.program,\"a_radius\"),r.barycentricLocation=e.getAttribLocation(r.program,\"a_barycentric\");var n=e.getUniformLocation(r.program,\"u_matrix\");if(null===n)throw new Error(\"EdgeArrowHeadProgram: error while getting matrixLocation\");r.matrixLocation=n;var i=e.getUniformLocation(r.program,\"u_sqrtZoomRatio\");if(null===i)throw new Error(\"EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation\");r.sqrtZoomRatioLocation=i;var o=e.getUniformLocation(r.program,\"u_correctionRatio\");if(null===o)throw new Error(\"EdgeArrowHeadProgram: error while getting correctionRatioLocation\");return r.correctionRatioLocation=o,r.bind(),r}return n(e,t),e.prototype.bind=function(){var t=this.gl;t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.radiusLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.barycentricLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,9*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.barycentricLocation,3,t.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,24)},e.prototype.computeIndices=function(){},e.prototype.process=function(t,e,r,n,i){if(n)for(var a=27*i,s=a+27;a<s;a++)this.array[a]=0;else{var u=r.size||1,c=e.size||1,h=t.x,d=t.y,l=e.x,f=e.y,p=(0,o.floatColor)(r.color),g=l-h,y=f-d,m=g*g+y*y,v=0,b=0;m&&(v=-y*(m=1/Math.sqrt(m))*u,b=g*m*u);var w=27*i,_=this.array;_[w++]=l,_[w++]=f,_[w++]=-v,_[w++]=-b,_[w++]=c,_[w++]=p,_[w++]=1,_[w++]=0,_[w++]=0,_[w++]=l,_[w++]=f,_[w++]=-v,_[w++]=-b,_[w++]=c,_[w++]=p,_[w++]=0,_[w++]=1,_[w++]=0,_[w++]=l,_[w++]=f,_[w++]=-v,_[w++]=-b,_[w++]=c,_[w++]=p,_[w++]=0,_[w++]=0,_[w]=1}},e.prototype.render=function(t){if(!this.hasNothingToRender()){var e=this.gl,r=this.program;e.useProgram(r),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(t.ratio)),e.uniform1f(this.correctionRatioLocation,t.correctionRatio),e.drawArrays(e.TRIANGLES,0,this.array.length/9)}},e}(u.AbstractEdgeProgram);e.default=c},function(t,e){!function(){\"use strict\";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})}},r={};e.r(r),e.d(r,{default:function(){return n}});var n=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_radius;\\nattribute vec4 a_color;\\nattribute vec3 a_barycentric;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadWidthLengthRatio = 0.66;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl and\\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\\n  // happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\\n\\n  float da = a_barycentric.x;\\n  float db = a_barycentric.y;\\n  float dc = a_barycentric.z;\\n\\n  vec2 delta = vec2(\\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\\n\\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n  );\\n\\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";t.exports=r}()},function(t,e){!function(){\"use strict\";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})}},r={};e.r(r),e.d(r,{default:function(){return n}});var n=\"precision mediump float;\\n\\nvarying vec4 v_color;\\n\\nvoid main(void) {\\n  gl_FragColor = v_color;\\n}\\n\";t.exports=r}()},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(2),a=r(0),s=i(r(40)),u=i(r(13)),c=function(t){function e(e){var r=t.call(this,e,s.default,u.default,4,6)||this,n=e.createBuffer();if(null===n)throw new Error(\"EdgeClampedProgram: error while getting resolutionLocation\");r.indicesBuffer=n,r.positionLocation=e.getAttribLocation(r.program,\"a_position\"),r.colorLocation=e.getAttribLocation(r.program,\"a_color\"),r.normalLocation=e.getAttribLocation(r.program,\"a_normal\"),r.radiusLocation=e.getAttribLocation(r.program,\"a_radius\");var i=e.getUniformLocation(r.program,\"u_matrix\");if(null===i)throw new Error(\"EdgeClampedProgram: error while getting matrixLocation\");r.matrixLocation=i;var o=e.getUniformLocation(r.program,\"u_sqrtZoomRatio\");if(null===o)throw new Error(\"EdgeClampedProgram: error while getting cameraRatioLocation\");r.sqrtZoomRatioLocation=o;var c=e.getUniformLocation(r.program,\"u_correctionRatio\");if(null===c)throw new Error(\"EdgeClampedProgram: error while getting viewportRatioLocation\");return r.correctionRatioLocation=c,r.canUse32BitsIndices=(0,a.canUse32BitsIndices)(e),r.IndicesArray=r.canUse32BitsIndices?Uint32Array:Uint16Array,r.indicesArray=new r.IndicesArray,r.indicesType=r.canUse32BitsIndices?e.UNSIGNED_INT:e.UNSIGNED_SHORT,r.bind(),r}return n(e,t),e.prototype.bind=function(){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.radiusLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,20)},e.prototype.process=function(t,e,r,n,i){if(n)for(var o=24*i,s=o+24;o<s;o++)this.array[o]=0;else{var u=r.size||1,c=t.x,h=t.y,d=e.x,l=e.y,f=e.size||1,p=(0,a.floatColor)(r.color),g=d-c,y=l-h,m=g*g+y*y,v=0,b=0;m&&(v=-y*(m=1/Math.sqrt(m))*u,b=g*m*u);var w=24*i,_=this.array;_[w++]=c,_[w++]=h,_[w++]=v,_[w++]=b,_[w++]=p,_[w++]=0,_[w++]=c,_[w++]=h,_[w++]=-v,_[w++]=-b,_[w++]=p,_[w++]=0,_[w++]=d,_[w++]=l,_[w++]=v,_[w++]=b,_[w++]=p,_[w++]=f,_[w++]=d,_[w++]=l,_[w++]=-v,_[w++]=-b,_[w++]=p,_[w]=-f}},e.prototype.computeIndices=function(){for(var t=this.array.length/6,e=t+t/2,r=new this.IndicesArray(e),n=0,i=0;n<t;n+=4)r[i++]=n,r[i++]=n+1,r[i++]=n+2,r[i++]=n+2,r[i++]=n+1,r[i++]=n+3;this.indicesArray=r},e.prototype.bufferData=function(){t.prototype.bufferData.call(this);var e=this.gl;e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indicesArray,e.STATIC_DRAW)},e.prototype.render=function(t){if(!this.hasNothingToRender()){var e=this.gl,r=this.program;e.useProgram(r),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(t.ratio)),e.uniform1f(this.correctionRatioLocation,t.correctionRatio),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},e}(o.AbstractEdgeProgram);e.default=c},function(t,e){!function(){\"use strict\";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})}},r={};e.r(r),e.d(r,{default:function(){return n}});var n=\"attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\nattribute float a_radius;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl. Please read it to\\n  // get better comments on what's happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here, we move the point to leave space for the arrow head:\\n  float direction = sign(a_radius);\\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n\\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\\n\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";t.exports=r}()},function(t,e,r){\"use strict\";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if(\"function\"!==typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,\"default\",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)\"default\"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},s=this&&this.__read||function(t,e){var r=\"function\"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,\"__esModule\",{value:!0});var u=a(r(9)),c=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.enabled=!0,n.isMoving=!1,n.touchMode=0,n.handleStart=n.handleStart.bind(n),n.handleLeave=n.handleLeave.bind(n),n.handleMove=n.handleMove.bind(n),e.addEventListener(\"touchstart\",n.handleStart,!1),e.addEventListener(\"touchend\",n.handleLeave,!1),e.addEventListener(\"touchcancel\",n.handleLeave,!1),e.addEventListener(\"touchmove\",n.handleMove,!1),n}return n(e,t),e.prototype.kill=function(){var t=this.container;t.removeEventListener(\"touchstart\",this.handleStart),t.removeEventListener(\"touchend\",this.handleLeave),t.removeEventListener(\"touchcancel\",this.handleLeave),t.removeEventListener(\"touchmove\",this.handleMove)},e.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},e.prototype.dispatchRelatedMouseEvent=function(t,e,r,n){var i=r||(0,u.getPosition)(e.touches[0],this.container),o=new MouseEvent(t,{clientX:i.x,clientY:i.y,altKey:e.altKey,ctrlKey:e.ctrlKey});o.isFakeSigmaMouseEvent=!0,(n||this.container).dispatchEvent(o)},e.prototype.handleStart=function(t){var e=this;if(this.enabled){t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent(\"mousedown\",t);var r=(0,u.getTouchesArray)(t.touches);if(this.isMoving=!0,this.touchMode=r.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=r.map((function(t){return(0,u.getPosition)(t,e.container)})),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var n=s(this.startTouchesPositions,2),i=n[0],o=i.x,a=i.y,c=n[1],h=c.x,d=c.y;this.startTouchesAngle=Math.atan2(d-a,h-o),this.startTouchesDistance=Math.sqrt(Math.pow(h-o,2)+Math.pow(d-a,2))}this.emit(\"touchdown\",(0,u.getTouchCoords)(t,this.container))}},e.prototype.handleLeave=function(t){if(this.enabled){switch(t.preventDefault(),0===t.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent(\"mouseup\",t,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent(\"click\",t,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===t.touches.length){this.handleStart(t),t.preventDefault();break}case 1:if(this.isMoving){var e=this.renderer.getCamera(),r=e.getState(),n=e.getPreviousState()||{x:0,y:0};e.animate({x:r.x+3*(r.x-n.x),y:r.y+3*(r.y-n.y)},{duration:200,easing:\"quadraticOut\"})}this.isMoving=!1,this.touchMode=0}this.emit(\"touchup\",(0,u.getTouchCoords)(t,this.container))}},e.prototype.handleMove=function(t){var e,r=this;if(this.enabled){t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent(\"mousemove\",t);var n=this.renderer.getCamera(),i=this.startCameraState,o=(0,u.getTouchesArray)(t.touches).map((function(t){return(0,u.getPosition)(t,r.container)}));switch(this.lastTouchesPositions=o,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){r.isMoving=!1}),200),this.touchMode){case 1:var a=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),c=a.x,h=a.y,d=this.renderer.viewportToFramedGraph(o[0]),l=d.x,f=d.y;n.setState({x:i.x+c-l,y:i.y+h-f});break;case 2:var p={},g=o[0],y=g.x,m=g.y,v=o[1],b=v.x,w=v.y,_=Math.atan2(w-m,b-y)-this.startTouchesAngle,x=Math.hypot(w-m,b-y)/this.startTouchesDistance,E=n.getBoundedRatio(i.ratio/x);p.ratio=E,p.angle=i.angle+_;var L=this.getDimensions(),A=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:i}),k=Math.min(L.width,L.height),S=k/L.width,C=E/k;f=m-k/2/(k/L.height);l=(e=s([(l=y-k/2/S)*Math.cos(-p.angle)-f*Math.sin(-p.angle),f*Math.cos(-p.angle)+l*Math.sin(-p.angle)],2))[0],f=e[1],p.x=A.x-l*C,p.y=A.y+f*C,n.setState(p)}this.emit(\"touchmove\",(0,u.getTouchCoords)(t,this.container))}},e}(u.default);e.default=c},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.doEdgeCollideWithPoint=e.isPixelColored=void 0,e.isPixelColored=function(t,e,r){var n=new Uint8Array(4);return t.readPixels(e,t.drawingBufferHeight-r,1,1,t.RGBA,t.UNSIGNED_BYTE,n),n[3]>0},e.doEdgeCollideWithPoint=function(t,e,r,n,i,o,a){return!(t<r-a&&t<i-a)&&(!(e<n-a&&e<o-a)&&(!(t>r+a&&t>i+a)&&(!(e>n+a&&e>o+a)&&Math.abs((i-r)*(n-e)-(r-t)*(o-n))/Math.sqrt(Math.pow(i-r,2)+Math.pow(o-n,2))<a/2)))}},function(t,e,r){var n=r(44);t.exports=n(DOMParser,Document)},function(t,e,r){var n=r(45),i=r(46).mergeEdge,o=r(47),a=r(48),s=r(14).cast;function u(t,e){var r=t.getElementsByTagName(\"viz:\"+e)[0];return r||(r=t.getElementsByTagNameNS(\"viz\",e)[0]),r||(r=t.getElementsByTagName(e)[0]),r}function c(t){for(var e,r,n,i,o={},a={},u=0,c=t.length;u<c;u++)o[n=(e=t[u]).getAttribute(\"id\")||e.getAttribute(\"for\")]={id:n,type:e.getAttribute(\"type\")||\"string\",title:(i=+n,i===i&&e.getAttribute(\"title\")||n)},(r=e.getElementsByTagName(\"default\")[0])&&(a[o[n].title]=s(o[n].type,r.textContent));return[o,a]}function h(t,e,r){var n={},i=r.getAttribute(\"label\"),o=r.getAttribute(\"weight\");i&&(n.label=i),o&&(n.weight=+o);for(var a,c,h,d=r.getElementsByTagName(\"attvalue\"),l=0,f=d.length;l<f;l++)n[t[c=(a=d[l]).getAttribute(\"id\")||a.getAttribute(\"for\")].title]=s(t[c].type,a.getAttribute(\"value\"));for(h in e)h in n||(n[h]=e[h]);var p,g,y,m=u(r,\"color\");return m&&(n.color=function(t){var e=t.getAttribute(\"a\"),r=t.getAttribute(\"r\"),n=t.getAttribute(\"g\"),i=t.getAttribute(\"b\");return e?\"rgba(\"+r+\",\"+n+\",\"+i+\",\"+e+\")\":\"rgb(\"+r+\",\"+n+\",\"+i+\")\"}(m)),(m=u(r,\"size\"))&&(n.size=+m.getAttribute(\"value\")),(m=u(r,\"position\"))&&(p=m.getAttribute(\"x\"),g=m.getAttribute(\"y\"),y=m.getAttribute(\"z\"),p&&(n.x=+p),g&&(n.y=+g),y&&(n.z=+y)),(m=u(r,\"shape\"))&&(n.shape=m.getAttribute(\"value\")),(m=u(r,\"thickness\"))&&(n.thickness=+m.getAttribute(\"value\")),n}t.exports=function(t,e){return function(r,s,u){var d,l,f,p,g,y,m,v,b,w,_=!0===(u=u||{}).addMissingNodes,x=s;if(!n(r))throw new Error(\"graphology-gexf/parser: invalid Graph constructor.\");if(\"string\"===typeof s&&(x=(new t).parseFromString(s,\"application/xml\")),!(x instanceof e))throw new Error(\"graphology-gexf/parser: source should either be a XML document or a string.\");var E=x.getElementsByTagName(\"graph\")[0],L=x.getElementsByTagName(\"meta\")[0],A=L&&L.childNodes||[],k=x.getElementsByTagName(\"node\"),S=x.getElementsByTagName(\"edge\"),C=x.getElementsByTagName(\"attributes\"),D=[],G=[];for(b=0,w=C.length;b<w;b++)\"node\"===(l=C[b]).getAttribute(\"class\")?D=l.getElementsByTagName(\"attribute\"):\"edge\"===l.getAttribute(\"class\")&&(G=l.getElementsByTagName(\"attribute\"));var F=E.getAttribute(\"defaultedgetype\")||\"undirected\";\"mutual\"===F&&(F=\"undirected\");var P=(f=c(D))[0],T=f[1],O=(f=c(G))[0],N=f[1],M=new r({type:S[0]?S[0].getAttribute(\"type\")||F:\"mixed\"}),R=function(t){for(var e,r={},n=0,i=t.length;n<i;n++)\"#text\"!==(e=t[n]).nodeName&&e.textContent.trim()&&(r[e.tagName.toLowerCase()]=e.textContent);return r}(A),j=L&&L.getAttribute(\"lastmodifieddate\");for(M.replaceAttributes(R),j&&M.setAttribute(\"lastModifiedDate\",j),b=0,w=k.length;b<w;b++)l=k[b],M.addNode(l.getAttribute(\"id\"),h(P,T,l));for(b=0,w=S.length;b<w;b++)if(y=(l=S[b]).getAttribute(\"id\"),p=l.getAttribute(\"type\")||F,m=l.getAttribute(\"source\"),v=l.getAttribute(\"target\"),g=h(O,N,l),p!==M.type&&\"mixed\"!==M.type&&(M=o(M)),!M.multi&&(\"directed\"===p&&M.hasDirectedEdge(m,v)||M.hasUndirectedEdge(m,v))&&(M=a(M)),d=i(M,\"directed\"!==p,y||null,m,v,g),!_&&(d[2]||d[3]))throw new Error(\"graphology-gexf/parser: one of your gexf file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.\");return M}}},function(t,e){t.exports=function(t){return null!==t&&\"function\"===typeof t&&\"object\"===typeof t.prototype&&\"function\"===typeof t.prototype.addUndirectedEdgeWithKey&&\"function\"===typeof t.prototype.dropNode}},function(t,e){e.addEdge=function(t,e,r,n,i,o){return e?null===r||void 0===r?t.addUndirectedEdge(n,i,o):t.addUndirectedEdgeWithKey(r,n,i,o):null===r||void 0===r?t.addDirectedEdge(n,i,o):t.addDirectedEdgeWithKey(r,n,i,o)},e.copyEdge=function(t,e,r,n,i,o){return o=Object.assign({},o),e?null===r||void 0===r?t.addUndirectedEdge(n,i,o):t.addUndirectedEdgeWithKey(r,n,i,o):null===r||void 0===r?t.addDirectedEdge(n,i,o):t.addDirectedEdgeWithKey(r,n,i,o)},e.mergeEdge=function(t,e,r,n,i,o){return e?null===r||void 0===r?t.mergeUndirectedEdge(n,i,o):t.mergeUndirectedEdgeWithKey(r,n,i,o):null===r||void 0===r?t.mergeDirectedEdge(n,i,o):t.mergeDirectedEdgeWithKey(r,n,i,o)},e.updateEdge=function(t,e,r,n,i,o){return e?null===r||void 0===r?t.updateUndirectedEdge(n,i,o):t.updateUndirectedEdgeWithKey(r,n,i,o):null===r||void 0===r?t.updateDirectedEdge(n,i,o):t.updateDirectedEdgeWithKey(r,n,i,o)}},function(t,e,r){var n=r(1);t.exports=function(t){if(!n(t))throw new Error(\"graphology-operators/to-mixed: expecting a valid graphology instance.\");return t.copy({type:\"mixed\"})}},function(t,e,r){var n=r(1);t.exports=function(t){if(!n(t))throw new Error(\"graphology-operators/to-multi: expecting a valid graphology instance.\");return t.copy({multi:!0})}},function(t,e,r){var n=r(1),i=r(50),o=r(51),a=r(14).sanitizeTagName,s=new Set([\"color\",\"size\",\"x\",\"y\",\"z\",\"shape\",\"thickness\"]),u=/^\\s*rgba?\\s*\\(/i,c=/^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*(?:,\\s*([.0-9]*))?\\)\\s*$/;function h(t){if(!t||\"string\"!==typeof t)return{};if(\"#\"===t[0])return 3===(t=t.slice(1)).length?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)}:{r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)};if(u.test(t)){var e={};return t=t.match(c),e.r=+t[1],e.g=+t[2],e.b=+t[3],t[4]&&(e.a=+t[4]),e}return{}}function d(t,e,r){var n,i={};for(n in r)\"label\"===n?i.label=r.label:\"edge\"===t&&\"weight\"===n?i.weight=r.weight:s.has(n)?(i.viz=i.viz||{},i.viz[n]=r[n]):(i.attributes=i.attributes||{},i.attributes[n]=r[n]);return i}function l(t){return\"undefined\"===typeof t||null===t||\"\"===t||t!==t}function f(t){return l(t)?\"empty\":Array.isArray(t)?\"liststring\":\"boolean\"===typeof t?\"boolean\":\"object\"===typeof t?\"string\":\"number\"===typeof t?t===(0|t)?(e=t)<=2147483647&&e>=-2147483647?\"integer\":\"long\":\"double\":\"string\";var e}function p(t,e){return\"liststring\"===t&&Array.isArray(e)?e.join(\"|\"):\"\"+e}function g(t){for(var e,r,n,i={},o=0,a=t.length;o<a;o++)if(e=t[o].attributes)for(n in e)\"empty\"!==(r=f(e[n]))&&(i[n]?\"integer\"===i[n]&&\"long\"===r?i[n]=r:i[n]!==r&&(i[n]=\"string\"):i[n]=r);return i}function y(t,e,r){var n;if(Object.keys(e).length){for(n in t.startElement(\"attributes\"),t.writeAttribute(\"class\",r),e)t.startElement(\"attribute\"),t.writeAttribute(\"id\",n),t.writeAttribute(\"title\",n),t.writeAttribute(\"type\",e[n]),t.endElement();t.endElement()}}function m(t,e,r,n){var i,o,a,s,u,c,d,f,g,y,m,v=!Object.keys(r).length;for(t.startElement(e+\"s\"),y=0,m=n.length;y<m;y++){if(c=(i=n[y]).attributes,f=i.viz,t.startElement(e),t.writeAttribute(\"id\",i.key),\"edge\"===e&&((u=i.undirected?\"undirected\":\"directed\")!==t.defaultEdgeType&&t.writeAttribute(\"type\",u),t.writeAttribute(\"source\",i.source),t.writeAttribute(\"target\",i.target),(\"number\"===typeof(d=i.weight)&&!isNaN(d)||\"string\"===typeof d)&&t.writeAttribute(\"weight\",i.weight)),i.label&&t.writeAttribute(\"label\",i.label),!v&&c){for(o in t.startElement(\"attvalues\"),r)if(o in c){if(l(s=c[o]))continue;t.startElement(\"attvalue\"),t.writeAttribute(\"for\",o),t.writeAttribute(\"value\",p(r[o],s)),t.endElement()}t.endElement()}if(f){if(f.color){for(g in a=h(f.color),t.startElementNS(\"viz\",\"color\"),a)t.writeAttribute(g,a[g]);t.endElement()}\"size\"in f&&(t.startElementNS(\"viz\",\"size\"),t.writeAttribute(\"value\",f.size),t.endElement()),(\"x\"in f||\"y\"in f||\"z\"in f)&&(t.startElementNS(\"viz\",\"position\"),\"x\"in f&&t.writeAttribute(\"x\",f.x),\"y\"in f&&t.writeAttribute(\"y\",f.y),\"z\"in f&&t.writeAttribute(\"z\",f.z),t.endElement()),f.shape&&(t.startElementNS(\"viz\",\"shape\"),t.writeAttribute(\"value\",f.shape),t.endElement()),\"thickness\"in f&&(t.startElementNS(\"viz\",\"thickness\"),t.writeAttribute(\"value\",f.thickness),t.endElement())}t.endElement()}t.endElement()}var v={encoding:\"UTF-8\",pretty:!0,formatNode:d.bind(null,\"node\"),formatEdge:d.bind(null,\"edge\")};t.exports=function(t,e){if(!n(t))throw new Error(\"graphology-gexf/writer: invalid graphology instance.\");var r=!1!==(e=e||{}).pretty&&\"  \",s=e.formatNode||v.formatNode,u=e.formatEdge||v.formatEdge,c=new o(r);c.startDocument(\"1.0\",e.encoding||v.encoding),c.startElement(\"gexf\"),c.writeAttribute(\"version\",\"1.2\"),c.writeAttribute(\"xmlns\",\"http://www.gexf.net/1.2draft\"),c.writeAttribute(\"xmlns:viz\",\"http:///www.gexf.net/1.1draft/viz\"),c.startElement(\"meta\");var h,d,l=t.getAttributes();for(var f in l.lastModifiedDate&&c.writeAttribute(\"lastmodifieddate\",l.lastModifiedDate),l)\"lastModifiedDate\"!==f&&(h=a(f))&&(\"string\"!==typeof(d=l[f])&&\"number\"!==typeof d&&\"boolean\"!==typeof d||c.writeElement(h,\"\"+d));c.endElement(),c.startElement(\"graph\");var p=i(t);c.defaultEdgeType=\"mixed\"===p?\"directed\":p,c.writeAttribute(\"defaultedgetype\",c.defaultEdgeType);var b=function(t,e){var r=new Array(t.order),n=0;return t.forEachNode((function(t,i){var o=e(t,i);o.key=t,r[n++]=o})),r}(t,s),w=function(t,e){var r=new Array(t.size),n=0;return t.forEachEdge((function(t,i,o,a,s,u,c){var h=e(t,i);h.key=t,h.source=o,h.target=a,h.undirected=c,r[n++]=h})),r}(t,u),_=g(b);y(c,_,\"node\");var x=g(w);return y(c,x,\"edge\"),m(c,\"node\",_,b),m(c,\"edge\",x,w),c.toString()}},function(t,e,r){var n=r(1);t.exports=function(t){if(!n(t))throw new Error(\"graphology-utils/infer-type: expecting a valid graphology instance.\");var e=t.type;return\"mixed\"!==e?e:0===t.directedSize&&0===t.undirectedSize||t.directedSize>0&&t.undirectedSize>0?\"mixed\":t.directedSize>0?\"directed\":\"undirected\"}},function(t,e,r){t.exports=r(52)},function(t,e){function r(t){return\"number\"!==typeof t&&!t}function n(t){if(\"string\"==typeof t)return t;if(\"number\"==typeof t)return t+\"\";if(\"function\"==typeof t)return t();if(t instanceof i)return t.toString();throw Error(\"Bad Parameter\")}function i(t,e){if(!(this instanceof i))return new i;this.name_regex=/[_:A-Za-z][-._:A-Za-z0-9]*/,this.indent=!!t,this.indentString=this.indent&&\"string\"===typeof t?t:\"    \",this.output=\"\",this.stack=[],this.tags=0,this.attributes=0,this.attribute=0,this.texts=0,this.comment=0,this.dtd=0,this.root=\"\",this.pi=0,this.cdata=0,this.started_write=!1,this.writer,this.writer_encoding=\"UTF-8\",this.writer=\"function\"==typeof e?e:function(t,e){this.output+=t}}i.prototype={toString:function(){return this.flush(),this.output},indenter:function(){if(this.indent){this.write(\"\\n\");for(var t=1;t<this.tags;t++)this.write(this.indentString)}},write:function(){for(var t=0;t<arguments.length;t++)this.writer(arguments[t],this.writer_encoding)},flush:function(){for(var t=this.tags;t>0;t--)this.endElement();this.tags=0},startDocument:function(t,e,r){return this.tags||this.attributes||(this.startPI(\"xml\"),this.startAttribute(\"version\"),this.text(\"string\"==typeof t?t:\"1.0\"),this.endAttribute(),\"string\"==typeof e&&(this.startAttribute(\"encoding\"),this.text(e),this.endAttribute(),this.writer_encoding=e),r&&(this.startAttribute(\"standalone\"),this.text(\"yes\"),this.endAttribute()),this.endPI(),this.indent||this.write(\"\\n\")),this},endDocument:function(){return this.attributes&&this.endAttributes(),this},writeElement:function(t,e){return this.startElement(t).text(e).endElement()},writeElementNS:function(t,e,r,n){return n||(n=r),this.startElementNS(t,e,r).text(n).endElement()},startElement:function(t){if(!(t=n(t)).match(this.name_regex))throw Error(\"Invalid Parameter\");if(0===this.tags&&this.root&&this.root!==t)throw Error(\"Invalid Parameter\");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:t,tags:this.tags}),this.started_write&&this.indenter(),this.write(\"<\",t),this.startAttributes(),this.started_write=!0,this},startElementNS:function(t,e,r){if(t=n(t),e=n(e),!t.match(this.name_regex))throw Error(\"Invalid Parameter\");if(!e.match(this.name_regex))throw Error(\"Invalid Parameter\");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:t+\":\"+e,tags:this.tags}),this.started_write&&this.indenter(),this.write(\"<\",t+\":\"+e),this.startAttributes(),this.started_write=!0,this},endElement:function(){if(!this.tags)return this;var t=this.stack.pop();return this.attributes>0?(this.attribute&&(this.texts&&this.endAttribute(),this.endAttribute()),this.write(\"/\"),this.endAttributes()):(t.containsTag&&this.indenter(),this.write(\"</\",t.name,\">\")),--this.tags,this.texts=0,this},writeAttribute:function(t,e){return\"function\"==typeof e&&(e=e()),r(e)?this:this.startAttribute(t).text(e).endAttribute()},writeAttributeNS:function(t,e,n,i){return i||(i=n),\"function\"==typeof i&&(i=i()),r(i)?this:this.startAttributeNS(t,e,n).text(i).endAttribute()},startAttributes:function(){return this.attributes=1,this},endAttributes:function(){return this.attributes?(this.attribute&&this.endAttribute(),this.attributes=0,this.attribute=0,this.texts=0,this.write(\">\"),this):this},startAttribute:function(t){if(!(t=n(t)).match(this.name_regex))throw Error(\"Invalid Parameter\");return this.attributes||this.pi?(this.attribute||(this.attribute=1,this.write(\" \",t,'=\"')),this):this},startAttributeNS:function(t,e,r){if(t=n(t),e=n(e),!t.match(this.name_regex))throw Error(\"Invalid Parameter\");if(!e.match(this.name_regex))throw Error(\"Invalid Parameter\");return this.attributes||this.pi?(this.attribute||(this.attribute=1,this.write(\" \",t+\":\"+e,'=\"')),this):this},endAttribute:function(){return this.attribute?(this.attribute=0,this.texts=0,this.write('\"'),this):this},text:function(t){return t=n(t),this.tags||this.comment||this.pi||this.cdata?this.attributes&&this.attribute?(++this.texts,this.write(t.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/\"/g,\"&quot;\").replace(/\\t/g,\"&#x9;\").replace(/\\n/g,\"&#xA;\").replace(/\\r/g,\"&#xD;\")),this):(this.attributes&&!this.attribute&&this.endAttributes(),this.comment||this.cdata?this.write(t):this.write(t.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")),++this.texts,this.started_write=!0,this):this},writeComment:function(t){return this.startComment().text(t).endComment()},startComment:function(){return this.comment||(this.attributes&&this.endAttributes(),this.indenter(),this.write(\"\\x3c!--\"),this.comment=1,this.started_write=!0),this},endComment:function(){return this.comment?(this.write(\"--\\x3e\"),this.comment=0,this):this},writeDocType:function(t,e,r,n){return this.startDocType(t,e,r,n).endDocType()},startDocType:function(t,e,r,i){if(this.dtd||this.tags)return this;if(t=n(t),e=e?n(e):e,r=r?n(r):r,i=i?n(i):i,!t.match(this.name_regex))throw Error(\"Invalid Parameter\");if(e&&!e.match(/^[\\w\\-][\\w\\s\\-\\/\\+\\:\\.]*/))throw Error(\"Invalid Parameter\");if(r&&!r.match(/^[\\w\\.][\\w\\-\\/\\\\\\:\\.]*/))throw Error(\"Invalid Parameter\");if(i&&!i.match(/[\\w\\s\\<\\>\\+\\.\\!\\#\\-\\?\\*\\,\\(\\)\\|]*/))throw Error(\"Invalid Parameter\");return e=e?' PUBLIC \"'+e+'\"':r?\" SYSTEM\":\"\",r=r?' \"'+r+'\"':\"\",i=i?\" [\"+i+\"]\":\"\",this.started_write&&this.indenter(),this.write(\"<!DOCTYPE \",t,e,r,i),this.root=t,this.dtd=1,this.started_write=!0,this},endDocType:function(){return this.dtd?(this.write(\">\"),this):this},writePI:function(t,e){return this.startPI(t).text(e).endPI()},startPI:function(t){if(!(t=n(t)).match(this.name_regex))throw Error(\"Invalid Parameter\");return this.pi||(this.attributes&&this.endAttributes(),this.started_write&&this.indenter(),this.write(\"<?\",t),this.pi=1,this.started_write=!0),this},endPI:function(){return this.pi?(this.write(\"?>\"),this.pi=0,this):this},writeCData:function(t){return this.startCData().text(t).endCData()},startCData:function(){return this.cdata||(this.attributes&&this.endAttributes(),this.indenter(),this.write(\"<![CDATA[\"),this.cdata=1,this.started_write=!0),this},endCData:function(){return this.cdata?(this.write(\"]]>\"),this.cdata=0,this):this},writeRaw:function(t){return t=n(t),this.tags||this.comment||this.pi||this.cdata?this.attributes&&this.attribute?(++this.texts,this.write(t.replace(\"&\",\"&amp;\").replace('\"',\"&quot;\")),this):(this.attributes&&!this.attribute&&this.endAttributes(),++this.texts,this.write(t),this.started_write=!0,this):this}},t.exports=i}]]);","name":"static/js/2.da7d10c1.chunk.js","map":{"version":3,"names":["this","push","module","exports","__webpack_require__","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","value","error","__importDefault","mod","__esModule","default","Object","defineProperty","validateGraph","canUse32BitsIndices","extractPixel","getMatrixImpact","matrixFromCamera","getCorrectionRatio","floatColor","floatArrayColor","parseColor","zIndexOrdering","createNormalizationFunction","graphExtent","getPixelRatio","createElement","cancelFrame","requestFrame","assignDeep","assign","isPlainObject","is_graph_1","matrices_1","data_1","constructor","target","objects","_i","arguments","length","l","k","requestAnimationFrame","callback","setTimeout","cancelAnimationFrame","requestID","clearTimeout","tag","style","attributes","element","document","setAttribute","window","devicePixelRatio","graph","order","x","y","xMin","Infinity","xMax","yMin","yMax","forEachNode","_","attr","extent","_a","minX","maxX","_b","minY","maxY","ratio","Math","max","dX","dY","abs","isNaN","fn","data","applyTo","inverse","getter","elements","sort","a","b","zA","zB","INT8","Int8Array","INT32","Int32Array","buffer","FLOAT32","Float32Array","RGBA_TEST_REGEX","RGBA_EXTRACT_REGEX","val","g","parseInt","charAt","test","match","FLOAT_COLOR_CACHE","htmlColor","HTML_COLORS","parsed","color","viewportDimensions","graphDimensions","viewportRatio","height","width","graphRatio","min","state","padding","angle","matrix","identity","smallestDimension","correctionRatio","multiply","translate","scale","rotate","cameraState","multiplyVec2","cos","sin","sqrt","pow","gl","array","Uint8Array","readPixels","RGBA","UNSIGNED_BYTE","WebGL2RenderingContext","getExtension","Error","key","Number","isFinite","concat","addUndirectedEdgeWithKey","dropNode","multi","__extends","_extendStatics","d","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","TypeError","String","__","create","createEdgeCompoundProgram","AbstractEdgeProgram","_super","vertexShaderSource","fragmentShaderSource","points","AbstractProgram","programClasses","EdgeCompoundProgram","renderer","programs","map","ProgramClass","bufferData","forEach","program","allocate","capacity","bind","computeIndices","render","params","process","sourceData","targetData","hidden","offset","TypedEventEmitter","_this","rawEmitter","EventEmitter","__webpack_exports__","_defineProperty","obj","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","source","getOwnPropertyDescriptors","defineProperties","animate_1","easings_1","utils_1","types_1","DEFAULT_ZOOMING_RATIO","Camera","minRatio","maxRatio","nextFrame","previousState","enabled","getState","from","setState","enable","disable","hasState","getPreviousState","getBoundedRatio","validateState","validatedState","isAnimated","validState","emit","animate","opts","options","ANIMATE_DEFAULTS","easing","start","Date","now","initialState","t","duration","animationCallback","undefined","coefficient","newState","animatedZoom","factorOrOptions","factor","animatedUnzoom","animatedReset","copy","of","s","c","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","z","b0","b1","cubicInOut","cubicOut","cubicIn","quadraticInOut","quadraticOut","quadraticIn","linear","easings","__createBinding","k2","get","__setModuleDefault","v","__importStar","result","captor_1","MouseCaptor","container","draggedEvents","downStartTime","lastMouseX","lastMouseY","isMouseDown","isMoving","movingTimeout","startCameraState","clicks","doubleClickTimeout","currentWheelDirection","handleClick","handleRightClick","handleDown","handleUp","handleMove","handleWheel","handleOut","addEventListener","kill","removeEventListener","handleDoubleClick","getMouseCoords","preventDefault","stopPropagation","mouseCoords","sigmaDefaultPrevented","camera","getCamera","newRatio","getViewportZoomedState","getPosition","previousCameraState","refresh","eX","eY","lastMouse","viewportToFramedGraph","mouse","offsetX","offsetY","delta","getWheelDelta","wheelCoords","getWheelCoords","ratioDiff","wheelDirection","lastWheelTriggerTime","MOUSE_ZOOM_DURATION","__assign","getTouchCoords","getTouchesArray","dom","bbox","getBoundingClientRect","clientX","left","clientY","top","res","preventSigmaDefault","original","touches","arr","deltaY","detail","touch","Captor","__spreadArray","to","pack","slice","rectangleCollidesWithQuad","squareCollidesWithQuad","getCircumscribedAlignedRectangle","isRectangleAligned","extend_1","hasWarnedTooMuchOutside","rect","x1","x2","y1","y2","heightVector","tl","tr","bl","br","xL","xR","yT","w","qx","qy","qw","qh","h","pointIsInQuad","QuadTree","containers","cache","lastRectangle","L","boundaries","resize","add","size","maxLevel","level","block","topLeftBlock","topRightBlock","bottomLeftBlock","bottomRightBlock","collidingWithTopLeft","collidingWithTopRight","collidingWithBottomLeft","collidingWithBottomRight","collisions","reduce","acc","current","console","warn","insertNode","clear","stack","pop","hw","hh","buildQuadrants","point","nodes","rectangle","lr","collectedNodes","getNodesInAxisAlignedRectangleArea","context","settings","label","labelSize","font","labelFont","weight","labelWeight","labelColor","attribute","fillStyle","fillText","createBuffer","bindBuffer","ARRAY_BUFFER","vertexShader","loadVertexShader","fragmentShader","loadFragmentShader","loadProgram","DYNAMIC_DRAW","hasNothingToRender","toStringTag","cast","type","split","SANITIZE_PATTERN","sanitizeTagName","tagName","replace","trim","Sigma","sigma_1","camera_1","quadtree_1","mouse_1","getPrototypeOf","Reflect","construct","sham","Proxy","Boolean","valueOf","Function","Map","toString","indexOf","has","set","ReferenceError","u","_nodes","out","undirected","f","isArray","getOwnPropertyNames","init","once","Promise","removeListener","U","on","_events","_eventsCount","_maxListeners","G","defaultMaxListeners","newListener","listener","unshift","warned","name","emitter","count","E","fired","wrapFn","A","D","S","N","RangeError","setMaxListeners","getMaxListeners","message","addListener","prependListener","prependOnceListener","shift","off","removeAllListeners","listeners","rawListeners","listenerCount","eventNames","empty","fromSequence","is","O","j","ARRAY_BUFFER_SUPPORT","ArrayBuffer","SYMBOL_SUPPORT","C","M","W","P","isView","R","K","T","B","captureStackTrace","F","I","Y","q","J","V","H","_edges","inDegree","outDegree","undirectedDegree","undirectedLoops","directedLoops","in","attach","attachMulti","previous","detach","detachMulti","Q","attacher","X","Z","$","tt","et","direction","nt","rt","it","edge","sourceAttributes","targetAttributes","ot","at","ct","ut","undirectedSize","directedSize","values","dt","st","ht","pt","ft","lt","gt","yt","wt","vt","bt","mt","wrap","kt","neighbor","_t","Gt","xt","Et","At","Lt","St","floor","random","Dt","Set","Ut","Nt","allowSelfLoops","Ot","NodeDataClass","jt","_edgeKeyGenerator","_undirectedSelfLoopCount","_directedSelfLoopCount","_undirectedSize","_directedSize","Ct","Mt","delete","zt","_options","_resetInstanceCounters","hasNode","hasDirectedEdge","hasUndirectedEdge","hasEdge","directedEdge","undirectedEdge","areDirectedNeighbors","areOutNeighbors","areInNeighbors","areUndirectedNeighbors","areNeighbors","areInboundNeighbors","areOutboundNeighbors","directedDegree","inboundDegree","outboundDegree","degree","inDegreeWithoutSelfLoops","outDegreeWithoutSelfLoops","directedDegreeWithoutSelfLoops","undirectedDegreeWithoutSelfLoops","inboundDegreeWithoutSelfLoops","outboundDegreeWithoutSelfLoops","degreeWithoutSelfLoops","extremities","opposite","hasExtremity","isUndirected","isDirected","isSelfLoop","addNode","mergeNode","updateNode","dropEdge","dropDirectedEdge","dropUndirectedEdge","clearEdges","getAttribute","_attributes","getAttributes","hasAttribute","updateAttribute","removeAttribute","replaceAttributes","mergeAttributes","updateAttributes","updateEachNodeAttributes","hints","updateEachEdgeAttributes","forEachAdjacencyEntry","forEachAdjacencyEntryWithOrphans","forEachAssymetricAdjacencyEntry","forEachAssymetricAdjacencyEntryWithOrphans","findNode","mapNodes","someNode","everyNode","filterNodes","reduceNodes","nodeEntries","node","export","edges","import","forEachEdge","mergeUndirectedEdgeWithKey","mergeDirectedEdgeWithKey","addDirectedEdgeWithKey","mergeUndirectedEdge","mergeDirectedEdge","addUndirectedEdge","addDirectedEdge","nullCopy","emptyCopy","toJSON","inspect","startsWith","for","generateKey","toUpperCase","Wt","Pt","Rt","Kt","Tt","Bt","Graph","DirectedGraph","UndirectedGraph","MultiGraph","MultiDirectedGraph","MultiUndirectedGraph","InvalidArgumentsGraphError","NotFoundGraphError","UsageGraphError","parse","write","__values","labels_1","settings_1","touch_1","edge_collisions_1","applyNodeDefaults","defaultNodeColor","highlighted","forceLabel","defaultNodeType","zIndex","applyEdgeDefaults","defaultEdgeColor","defaultEdgeType","canvasContexts","webGLContexts","activeListeners","quadtree","labelGrid","LabelGrid","nodeDataCache","edgeDataCache","nodesWithForcedLabels","edgesWithForcedLabels","nodeExtent","invMatrix","customBBox","normalizationFunction","cameraSizeRatio","pixelRatio","displayedLabels","highlightedNodes","hoveredNode","hoveredEdge","renderFrame","renderHighlightedNodesFrame","needToProcess","needToSoftProcess","checkEdgesEventsFrame","nodePrograms","hoverNodePrograms","edgePrograms","DEFAULT_SETTINGS","validateSettings","HTMLElement","createWebGLContext","preserveDrawingBuffer","createCanvasContext","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","BLEND","nodeProgramClasses","NodeProgramClass","hoverNodes","edgeProgramClasses","EdgeProgramClass","bindCameraHandlers","mouseCaptor","touchCaptor","bindEventHandlers","bindGraphHandlers","handleSettingsUpdate","createCanvas","id","canvas","position","class","appendChild","getContext","antialias","contextOptions","_scheduleRefresh","mouseIsOnNode","nodeX","nodeY","getQuadNodes","mouseGraphPosition","getNodeAtPosition","quadNodes","minDistance","nodeAtPosition","nodePosition","framedGraphToViewport","scaleSize","distance","handleResize","baseEvent","event","nodeToHover","scheduleHighlightedNodesRender","pos","enableEdgeHoverEvents","checkEdgeHoverEvents","createMouseListener","eventType","isFakeSigmaMouseEvent","enableEdgeWheelEvents","enableEdgeClickEvents","getEdgeAtPoint","graphUpdate","softGraphUpdate","dropNodeGraphUpdate","dropEdgeGraphUpdate","clearEdgesGraphUpdate","clearGraphUpdate","payload","edgeToHover","e_1","isPixelColored","_c","viewportToGraph","graphX","graphY","transformationRatio","someEdge","sourceId","targetId","xs","ys","graphLength","graphToViewport","vp_xs","vp_ys","_d","vp_xt","vp_yt","viewportLength","filterEdges","edgeAttributes","sourcePosition","targetPosition","doEdgeCollideWithPoint","selectedEdge","highestZIndex","edges_1","edges_1_1","getEdgeAttribute","e_1_1","return","keepArrays","dimensions","getDimensions","nodeZExtent","edgeZExtent","resizeAndClear","labelGridCellSize","nullCamera","nullCameraMatrix","getGraphDimensions","getSetting","nodesPerPrograms","getNodeAttributes","nodeReducer","organize","edgesPerPrograms","getEdgeAttributes","edgeReducer","minCameraRatio","maxCameraRatio","_refresh","renderLabels","visibleNodes","viewRectangle","labelsToDisplay","getLabelsToDisplay","labelDensity","labels","labelRenderedSizeThreshold","labelRenderer","renderEdgeLabels","edgeLabels","clearRect","edgeLabelsToDisplay","edgeLabelsToDisplayFromNodes","displayedNodeLabels","edgeData","edgeLabelRenderer","renderHighlightedNodes","hovers","nodesToRender","hoverRenderer","COLOR_BUFFER_BIT","scalingRatio","handleEscape","updateCachedValues","moving","hideEdgesOnMove","hideLabelsOnMove","getContainer","getGraph","getMouseCaptor","getTouchCaptor","getNodeDisplayData","getEdgeDisplayData","getSettings","setSetting","updateSetting","updater","previousWidth","previousHeight","offsetWidth","offsetHeight","allowInvalidContainer","viewport","scheduleRefresh","viewportTarget","center","graphMousePosition","graphCenterPosition","marginX","marginY","p1","p2","coordinates","override","recomputeMatrix","viewportPos","viewportPoint","graphPoint","getBBox","getCustomBBox","setCustomBBox","firstChild","removeChild","getCanvases","animateNodes","index_1","targets","startPositions","attrs","getNodeAttribute","frame","step","setNodeAttribute","black","silver","gray","grey","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","darkblue","mediumblue","darkgreen","darkcyan","deepskyblue","darkturquoise","mediumspringgreen","springgreen","cyan","midnightblue","dodgerblue","lightseagreen","forestgreen","seagreen","darkslategray","darkslategrey","limegreen","mediumseagreen","turquoise","royalblue","steelblue","darkslateblue","mediumturquoise","indigo","darkolivegreen","cadetblue","cornflowerblue","rebeccapurple","mediumaquamarine","dimgray","dimgrey","slateblue","olivedrab","slategray","slategrey","lightslategray","lightslategrey","mediumslateblue","lawngreen","chartreuse","aquamarine","skyblue","lightskyblue","blueviolet","darkred","darkmagenta","saddlebrown","darkseagreen","lightgreen","mediumpurple","darkviolet","palegreen","darkorchid","yellowgreen","sienna","brown","darkgray","darkgrey","lightblue","greenyellow","paleturquoise","lightsteelblue","powderblue","firebrick","darkgoldenrod","mediumorchid","rosybrown","darkkhaki","mediumvioletred","indianred","peru","chocolate","tan","lightgray","lightgrey","thistle","orchid","goldenrod","palevioletred","crimson","gainsboro","plum","burlywood","lightcyan","lavender","darksalmon","violet","palegoldenrod","lightcoral","khaki","aliceblue","honeydew","azure","sandybrown","wheat","beige","whitesmoke","mintcream","ghostwhite","salmon","antiquewhite","linen","lightgoldenrodyellow","oldlace","magenta","deeppink","orangered","tomato","hotpink","coral","darkorange","lightsalmon","orange","lightpink","pink","gold","peachpuff","navajowhite","moccasin","bisque","mistyrose","blanchedalmond","papayawhip","lavenderblush","seashell","cornsilk","lemonchiffon","floralwhite","snow","lightyellow","ivory","ReflectOwnKeys","ReflectApply","receiver","args","NumberIsNaN","resolve","reject","errorListener","err","resolver","eventTargetAgnosticAddListener","handler","flags","addErrorHandlerIfEventEmitter","checkListener","_getMaxListeners","that","_addListener","prepend","events","existing","warning","onceWrapper","_onceWrap","wrapped","_listeners","unwrap","evlistener","ret","unwrapListeners","arrayClone","wrapListener","arg","doError","er","len","list","originalListener","index","spliceOne","l2","l1","LabelCandidate","compare","first","second","cellSize","columns","rows","cells","ceil","getIndex","xIndex","candidate","cell","density","cellArea","scaledDensity","labelsToDisplayPerCell","worthyEdges","label_1","hover_1","edge_label_1","node_fast_1","edge_1","edge_arrow_1","edgeLabelFont","edgeLabelSize","edgeLabelWeight","edgeLabelColor","stagePadding","circle","arrow","line","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","textWidth","measureText","boxWidth","round","boxHeight","radius","angleRadian","asin","xDeltaCoord","beginPath","moveTo","lineTo","arc","closePath","fill","PI","cx","cy","sSize","tSize","sx","sy","tx","ty","dx","dy","textLength","acos","save","restore","node_fast_vert_glsl_1","node_fast_frag_glsl_1","node_1","NodeFastProgram","useProgram","uniform1f","ratioLocation","scaleLocation","uniformMatrix3fv","matrixLocation","drawArrays","POINTS","AbstractNodeProgram","_o","createNodeCompoundProgram","positionLocation","getAttribLocation","sizeLocation","colorLocation","getUniformLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","NodeCompoundProgram","loadShader","glType","VERTEX_SHADER","FRAGMENT_SHADER","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","infoLog","getShaderInfoLog","deleteShader","shaders","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","deleteProgram","edge_vert_glsl_1","edge_frag_glsl_1","EdgeProgram","indicesBuffer","normalLocation","correctionRatioLocation","sqrtZoomRatioLocation","IndicesArray","Uint32Array","Uint16Array","indicesArray","indicesType","UNSIGNED_INT","UNSIGNED_SHORT","ELEMENT_ARRAY_BUFFER","indices","STATIC_DRAW","i_1","thickness","n1","n2","drawElements","TRIANGLES","edge_arrowHead_1","edge_clamped_1","EdgeArrowProgram","edge_arrowHead_vert_glsl_1","edge_arrowHead_frag_glsl_1","EdgeArrowHeadProgram","radiusLocation","barycentricLocation","edge_clamped_vert_glsl_1","EdgeClampedProgram","TouchCaptor","touchMode","handleStart","handleLeave","dispatchRelatedMouseEvent","mousePosition","mouseEvent","MouseEvent","altKey","ctrlKey","dispatchEvent","startTouchesPositions","lastTouchesPositions","x0","y0","startTouchesAngle","atan2","startTouchesDistance","touchesPositions","xStart","yStart","newCameraState","_e","angleDiff","hypot","touchGraphPosition","pixels","drawingBufferHeight","xS","yS","xT","createParserFunction","DOMParser","Document","isGraphConstructor","mergeEdge","toMixed","toMulti","getFirstMatchingVizTag","vizElement","getElementsByTagName","getElementsByTagNameNS","extractModel","defaultElement","model","defaults","title","textContent","collectAttributes","valueElement","valueElements","toRGBString","shape","mergeResult","addMissingNodes","xmlDoc","parseFromString","GRAPH_ELEMENT","META_ELEMENT","META_ELEMENTS","childNodes","NODE_ELEMENTS","EDGE_ELEMENTS","MODEL_ELEMENTS","NODE_MODEL_ELEMENTS","EDGE_MODEL_ELEMENTS","DEFAULT_EDGE_TYPE","NODE_MODEL","NODE_DEFAULT_ATTRIBUTES","EDGE_MODEL","EDGE_DEFAULT_ATTRIBUTES","meta","nodeName","toLowerCase","collectMeta","lastModifiedDate","addEdge","copyEdge","updateEdge","updateUndirectedEdge","updateUndirectedEdgeWithKey","updateDirectedEdge","updateDirectedEdgeWithKey","isGraph","inferType","XMLWriter","VIZ_RESERVED_NAMES","RGBA_TEST","RGBA_MATCH","CSSColorToRGBA","DEFAULT_ELEMENT_FORMATTER","output","viz","isEmptyValue","detectValueType","number","join","inferModel","writeModel","writer","modelClass","startElement","writeAttribute","endElement","writeElements","edgeType","emptyModel","startElementNS","DEFAULTS","encoding","pretty","formatNode","formatEdge","indent","startDocument","metaTagName","graphAttribute","graphAttributes","writeElement","format","collectNodeData","reducer","_sa","_ta","collectEdgeData","nodeModel","edgeModel","declaredType","isFalse","strval","name_regex","indentString","tags","texts","comment","dtd","root","pi","cdata","started_write","writer_encoding","flush","indenter","version","standalone","startPI","startAttribute","text","endAttribute","endPI","endDocument","endAttributes","content","writeElementNS","prefix","uri","containsTag","startAttributes","writeAttributeNS","startAttributeNS","writeComment","startComment","endComment","writeDocType","pubid","sysid","subset","startDocType","endDocType","writePI","writeCData","startCData","endCData","writeRaw"],"sources":["static/js/2.da7d10c1.chunk.js"],"mappings":"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"},"input":"(this[\"webpackJsonpnew-flare\"] = this[\"webpackJsonpnew-flare\"] || []).push([[2],[\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateGraph = exports.canUse32BitsIndices = exports.extractPixel = exports.getMatrixImpact = exports.matrixFromCamera = exports.getCorrectionRatio = exports.floatColor = exports.floatArrayColor = exports.parseColor = exports.zIndexOrdering = exports.createNormalizationFunction = exports.graphExtent = exports.getPixelRatio = exports.createElement = exports.cancelFrame = exports.requestFrame = exports.assignDeep = exports.assign = exports.isPlainObject = void 0;\nvar is_graph_1 = __importDefault(__webpack_require__(1));\nvar matrices_1 = __webpack_require__(6);\nvar data_1 = __webpack_require__(21);\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nfunction isPlainObject(value) {\n  return typeof value === \"object\" && value !== null && value.constructor === Object;\n}\nexports.isPlainObject = isPlainObject;\n/**\n * Helper to use Object.assign with more than two objects.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assign(target) {\n  var objects = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    objects[_i - 1] = arguments[_i];\n  }\n  target = target || {};\n  for (var i = 0, l = objects.length; i < l; i++) {\n    var o = objects[i];\n    if (!o) continue;\n    Object.assign(target, o);\n  }\n  return target;\n}\nexports.assign = assign;\n/**\n * Very simple recursive Object.assign-like function.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignDeep(target) {\n  var objects = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    objects[_i - 1] = arguments[_i];\n  }\n  target = target || {};\n  for (var i = 0, l = objects.length; i < l; i++) {\n    var o = objects[i];\n    if (!o) continue;\n    for (var k in o) {\n      if (isPlainObject(o[k])) {\n        target[k] = assignDeep(target[k], o[k]);\n      } else {\n        target[k] = o[k];\n      }\n    }\n  }\n  return target;\n}\nexports.assignDeep = assignDeep;\n/**\n * Just some dirty trick to make requestAnimationFrame and cancelAnimationFrame \"work\" in Node.js, for unit tests:\n */\nexports.requestFrame = typeof requestAnimationFrame !== \"undefined\" ? function (callback) {\n  return requestAnimationFrame(callback);\n} : function (callback) {\n  return setTimeout(callback, 0);\n};\nexports.cancelFrame = typeof cancelAnimationFrame !== \"undefined\" ? function (requestID) {\n  return cancelAnimationFrame(requestID);\n} : function (requestID) {\n  return clearTimeout(requestID);\n};\n/**\n * Function used to create DOM elements easily.\n *\n * @param  {string} tag        - Tag name of the element to create.\n * @param  {object} style      - Styles map.\n * @param  {object} attributes - Attributes map.\n * @return {HTMLElement}\n */\nfunction createElement(tag, style, attributes) {\n  var element = document.createElement(tag);\n  if (style) {\n    for (var k in style) {\n      element.style[k] = style[k];\n    }\n  }\n  if (attributes) {\n    for (var k in attributes) {\n      element.setAttribute(k, attributes[k]);\n    }\n  }\n  return element;\n}\nexports.createElement = createElement;\n/**\n * Function returning the browser's pixel ratio.\n *\n * @return {number}\n */\nfunction getPixelRatio() {\n  if (typeof window.devicePixelRatio !== \"undefined\") return window.devicePixelRatio;\n  return 1;\n}\nexports.getPixelRatio = getPixelRatio;\n/**\n * Function returning the graph's node extent in x & y.\n *\n * @param  {Graph}\n * @return {object}\n */\nfunction graphExtent(graph) {\n  if (!graph.order) return {\n    x: [0, 1],\n    y: [0, 1]\n  };\n  var xMin = Infinity;\n  var xMax = -Infinity;\n  var yMin = Infinity;\n  var yMax = -Infinity;\n  graph.forEachNode(function (_, attr) {\n    var x = attr.x,\n      y = attr.y;\n    if (x < xMin) xMin = x;\n    if (x > xMax) xMax = x;\n    if (y < yMin) yMin = y;\n    if (y > yMax) yMax = y;\n  });\n  return {\n    x: [xMin, xMax],\n    y: [yMin, yMax]\n  };\n}\nexports.graphExtent = graphExtent;\nfunction createNormalizationFunction(extent) {\n  var _a = __read(extent.x, 2),\n    minX = _a[0],\n    maxX = _a[1],\n    _b = __read(extent.y, 2),\n    minY = _b[0],\n    maxY = _b[1];\n  var ratio = Math.max(maxX - minX, maxY - minY),\n    dX = (maxX + minX) / 2,\n    dY = (maxY + minY) / 2;\n  if (ratio === 0 || Math.abs(ratio) === Infinity || isNaN(ratio)) ratio = 1;\n  if (isNaN(dX)) dX = 0;\n  if (isNaN(dY)) dY = 0;\n  var fn = function fn(data) {\n    return {\n      x: 0.5 + (data.x - dX) / ratio,\n      y: 0.5 + (data.y - dY) / ratio\n    };\n  };\n  // TODO: possibility to apply this in batch over array of indices\n  fn.applyTo = function (data) {\n    data.x = 0.5 + (data.x - dX) / ratio;\n    data.y = 0.5 + (data.y - dY) / ratio;\n  };\n  fn.inverse = function (data) {\n    return {\n      x: dX + ratio * (data.x - 0.5),\n      y: dY + ratio * (data.y - 0.5)\n    };\n  };\n  fn.ratio = ratio;\n  return fn;\n}\nexports.createNormalizationFunction = createNormalizationFunction;\n/**\n * Function ordering the given elements in reverse z-order so they drawn\n * the correct way.\n *\n * @param  {number}   extent   - [min, max] z values.\n * @param  {function} getter   - Z attribute getter function.\n * @param  {array}    elements - The array to sort.\n * @return {array} - The sorted array.\n */\nfunction zIndexOrdering(extent, getter, elements) {\n  // If k is > n, we'll use a standard sort\n  return elements.sort(function (a, b) {\n    var zA = getter(a) || 0,\n      zB = getter(b) || 0;\n    if (zA < zB) return -1;\n    if (zA > zB) return 1;\n    return 0;\n  });\n  // TODO: counting sort optimization\n}\n\nexports.zIndexOrdering = zIndexOrdering;\n/**\n * WebGL utils\n * ===========\n */\n/**\n * Memoized function returning a float-encoded color from various string\n * formats describing colors.\n */\nvar INT8 = new Int8Array(4);\nvar INT32 = new Int32Array(INT8.buffer, 0, 1);\nvar FLOAT32 = new Float32Array(INT8.buffer, 0, 1);\nvar RGBA_TEST_REGEX = /^\\s*rgba?\\s*\\(/;\nvar RGBA_EXTRACT_REGEX = /^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)(?:\\s*,\\s*(.*)?)?\\)\\s*$/;\nfunction parseColor(val) {\n  var r = 0; // byte\n  var g = 0; // byte\n  var b = 0; // byte\n  var a = 1; // float\n  // Handling hexadecimal notation\n  if (val[0] === \"#\") {\n    if (val.length === 4) {\n      r = parseInt(val.charAt(1) + val.charAt(1), 16);\n      g = parseInt(val.charAt(2) + val.charAt(2), 16);\n      b = parseInt(val.charAt(3) + val.charAt(3), 16);\n    } else {\n      r = parseInt(val.charAt(1) + val.charAt(2), 16);\n      g = parseInt(val.charAt(3) + val.charAt(4), 16);\n      b = parseInt(val.charAt(5) + val.charAt(6), 16);\n    }\n    // TODO: parse hex with alpha?\n  }\n  // Handling rgb notation\n  else if (RGBA_TEST_REGEX.test(val)) {\n    var match = val.match(RGBA_EXTRACT_REGEX);\n    if (match) {\n      r = +match[1];\n      g = +match[2];\n      b = +match[3];\n      if (match[4]) a = +match[4];\n    }\n  }\n  return {\n    r: r,\n    g: g,\n    b: b,\n    a: a\n  };\n}\nexports.parseColor = parseColor;\nvar FLOAT_COLOR_CACHE = {};\nfor (var htmlColor in data_1.HTML_COLORS) {\n  FLOAT_COLOR_CACHE[htmlColor] = floatColor(data_1.HTML_COLORS[htmlColor]);\n  // Replicating cache for hex values for free\n  FLOAT_COLOR_CACHE[data_1.HTML_COLORS[htmlColor]] = FLOAT_COLOR_CACHE[htmlColor];\n}\nfunction floatArrayColor(val) {\n  val = data_1.HTML_COLORS[val] || val;\n  // NOTE: this variant is not cached because it is mostly used for uniforms\n  var _a = parseColor(val),\n    r = _a.r,\n    g = _a.g,\n    b = _a.b,\n    a = _a.a;\n  return new Float32Array([r / 255, g / 255, b / 255, a]);\n}\nexports.floatArrayColor = floatArrayColor;\nfunction floatColor(val) {\n  // If the color is already computed, we yield it\n  if (typeof FLOAT_COLOR_CACHE[val] !== \"undefined\") return FLOAT_COLOR_CACHE[val];\n  var parsed = parseColor(val);\n  var r = parsed.r,\n    g = parsed.g,\n    b = parsed.b;\n  var a = parsed.a;\n  a = a * 255 | 0;\n  INT32[0] = (a << 24 | b << 16 | g << 8 | r) & 0xfeffffff;\n  var color = FLOAT32[0];\n  FLOAT_COLOR_CACHE[val] = color;\n  return color;\n}\nexports.floatColor = floatColor;\n/**\n * In sigma, the graph is normalized into a [0, 1], [0, 1] square, before being given to the various renderers. This\n * helps dealing with quadtree in particular.\n * But at some point, we need to rescale it so that it takes the best place in the screen, ie. we always want to see two\n * nodes \"touching\" opposite sides of the graph, with the camera being at its default state.\n *\n * This function determines this ratio.\n */\nfunction getCorrectionRatio(viewportDimensions, graphDimensions) {\n  var viewportRatio = viewportDimensions.height / viewportDimensions.width;\n  var graphRatio = graphDimensions.height / graphDimensions.width;\n  // If the stage and the graphs are in different directions (such as the graph being wider that tall while the stage\n  // is taller than wide), we can stop here to have indeed nodes touching opposite sides:\n  if (viewportRatio < 1 && graphRatio > 1 || viewportRatio > 1 && graphRatio < 1) {\n    return 1;\n  }\n  // Else, we need to fit the graph inside the stage:\n  // 1. If the graph is \"squarer\" (ie. with a ratio closer to 1), we need to make the largest sides touch;\n  // 2. If the stage is \"squarer\", we need to make the smallest sides touch.\n  return Math.min(Math.max(graphRatio, 1 / graphRatio), Math.max(1 / viewportRatio, viewportRatio));\n}\nexports.getCorrectionRatio = getCorrectionRatio;\n/**\n * Function returning a matrix from the current state of the camera.\n */\n// TODO: it's possible to optimize this drastically!\nfunction matrixFromCamera(state, viewportDimensions, graphDimensions, padding, inverse) {\n  var angle = state.angle,\n    ratio = state.ratio,\n    x = state.x,\n    y = state.y;\n  var width = viewportDimensions.width,\n    height = viewportDimensions.height;\n  var matrix = (0, matrices_1.identity)();\n  var smallestDimension = Math.min(width, height) - 2 * padding;\n  var correctionRatio = getCorrectionRatio(viewportDimensions, graphDimensions);\n  if (!inverse) {\n    (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), 2 * (smallestDimension / width) * correctionRatio, 2 * (smallestDimension / height) * correctionRatio));\n    (0, matrices_1.multiply)(matrix, (0, matrices_1.rotate)((0, matrices_1.identity)(), -angle));\n    (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), 1 / ratio));\n    (0, matrices_1.multiply)(matrix, (0, matrices_1.translate)((0, matrices_1.identity)(), -x, -y));\n  } else {\n    (0, matrices_1.multiply)(matrix, (0, matrices_1.translate)((0, matrices_1.identity)(), x, y));\n    (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), ratio));\n    (0, matrices_1.multiply)(matrix, (0, matrices_1.rotate)((0, matrices_1.identity)(), angle));\n    (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), width / smallestDimension / 2 / correctionRatio, height / smallestDimension / 2 / correctionRatio));\n  }\n  return matrix;\n}\nexports.matrixFromCamera = matrixFromCamera;\n/**\n * All these transformations we apply on the matrix to get it rescale the graph\n * as we want make it very hard to get pixel-perfect distances in WebGL. This\n * function returns a factor that properly cancels the matrix effect on lengths.\n *\n * [jacomyal]\n * To be fully honest, I can't really explain happens here... I notice that the\n * following ratio works (ie. it correctly compensates the matrix impact on all\n * camera states I could try):\n * > `R = size(V) / size(M * V) / W`\n * as long as `M * V` is in the direction of W (ie. parallel to (Ox)). It works\n * as well with H and a vector that transforms into something parallel to (Oy).\n *\n * Also, note that we use `angle` and not `-angle` (that would seem logical,\n * since we want to anticipate the rotation), because of the fact that in WebGL,\n * the image is vertically swapped.\n */\nfunction getMatrixImpact(matrix, cameraState, viewportDimensions) {\n  var _a = (0, matrices_1.multiplyVec2)(matrix, {\n      x: Math.cos(cameraState.angle),\n      y: Math.sin(cameraState.angle)\n    }, 0),\n    x = _a.x,\n    y = _a.y;\n  return 1 / Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2)) / viewportDimensions.width;\n}\nexports.getMatrixImpact = getMatrixImpact;\n/**\n * Function extracting the color at the given pixel.\n */\nfunction extractPixel(gl, x, y, array) {\n  var data = array || new Uint8Array(4);\n  gl.readPixels(x, y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, data);\n  return data;\n}\nexports.extractPixel = extractPixel;\n/**\n * Function used to know whether given webgl context can use 32 bits indices.\n */\nfunction canUse32BitsIndices(gl) {\n  var webgl2 = typeof WebGL2RenderingContext !== \"undefined\" && gl instanceof WebGL2RenderingContext;\n  return webgl2 || !!gl.getExtension(\"OES_element_index_uint\");\n}\nexports.canUse32BitsIndices = canUse32BitsIndices;\n/**\n * Check if the graph variable is a valid graph, and if sigma can render it.\n */\nfunction validateGraph(graph) {\n  // check if it's a valid graphology instance\n  if (!(0, is_graph_1.default)(graph)) throw new Error(\"Sigma: invalid graph instance.\");\n  // check if nodes have x/y attributes\n  graph.forEachNode(function (key, attributes) {\n    if (!Number.isFinite(attributes.x) || !Number.isFinite(attributes.y)) {\n      throw new Error(\"Sigma: Coordinates of node \".concat(key, \" are invalid. A node must have a numeric 'x' and 'y' attribute.\"));\n    }\n  });\n}\nexports.validateGraph = validateGraph;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/**\n * Graphology isGraph\n * ===================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology instance.\n */\n\n/**\n * Checking the value is a graphology instance.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraph(value) {\n  return value !== null && typeof value === 'object' && typeof value.addUndirectedEdgeWithKey === 'function' && typeof value.dropNode === 'function' && typeof value.multi === 'boolean';\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createEdgeCompoundProgram = exports.AbstractEdgeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Edge Program\n * =====================================\n *\n * @module\n */\nvar program_1 = __webpack_require__(12);\n/**\n * Edge Program class.\n *\n * @constructor\n */\nvar AbstractEdgeProgram = /** @class */function (_super) {\n  __extends(AbstractEdgeProgram, _super);\n  function AbstractEdgeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n    return _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n  }\n  return AbstractEdgeProgram;\n}(program_1.AbstractProgram);\nexports.AbstractEdgeProgram = AbstractEdgeProgram;\nfunction createEdgeCompoundProgram(programClasses) {\n  return (/** @class */function () {\n      function EdgeCompoundProgram(gl, renderer) {\n        this.programs = programClasses.map(function (ProgramClass) {\n          return new ProgramClass(gl, renderer);\n        });\n      }\n      EdgeCompoundProgram.prototype.bufferData = function () {\n        this.programs.forEach(function (program) {\n          return program.bufferData();\n        });\n      };\n      EdgeCompoundProgram.prototype.allocate = function (capacity) {\n        this.programs.forEach(function (program) {\n          return program.allocate(capacity);\n        });\n      };\n      EdgeCompoundProgram.prototype.bind = function () {\n        // nothing todo, it's already done in each program constructor\n      };\n      EdgeCompoundProgram.prototype.computeIndices = function () {\n        this.programs.forEach(function (program) {\n          return program.computeIndices();\n        });\n      };\n      EdgeCompoundProgram.prototype.render = function (params) {\n        this.programs.forEach(function (program) {\n          program.bind();\n          program.bufferData();\n          program.render(params);\n        });\n      };\n      EdgeCompoundProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        this.programs.forEach(function (program) {\n          return program.process(sourceData, targetData, data, hidden, offset);\n        });\n      };\n      return EdgeCompoundProgram;\n    }()\n  );\n}\nexports.createEdgeCompoundProgram = createEdgeCompoundProgram;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TypedEventEmitter = void 0;\n/**\n * Sigma.js Types\n * ===============\n *\n * Various type declarations used throughout the library.\n * @module\n */\nvar events_1 = __webpack_require__(22);\nvar TypedEventEmitter = /** @class */function (_super) {\n  __extends(TypedEventEmitter, _super);\n  function TypedEventEmitter() {\n    var _this = _super.call(this) || this;\n    _this.rawEmitter = _this;\n    return _this;\n  }\n  return TypedEventEmitter;\n}(events_1.EventEmitter);\nexports.TypedEventEmitter = TypedEventEmitter;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ _objectSpread2; });\n\n// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Sigma.js Camera Class\n * ======================\n *\n * Class designed to store camera information & used to update it.\n * @module\n */\nvar animate_1 = __webpack_require__(20);\nvar easings_1 = __importDefault(__webpack_require__(7));\nvar utils_1 = __webpack_require__(0);\nvar types_1 = __webpack_require__(3);\n/**\n * Defaults.\n */\nvar DEFAULT_ZOOMING_RATIO = 1.5;\n/**\n * Camera class\n *\n * @constructor\n */\nvar Camera = /** @class */function (_super) {\n  __extends(Camera, _super);\n  function Camera() {\n    var _this = _super.call(this) || this;\n    _this.x = 0.5;\n    _this.y = 0.5;\n    _this.angle = 0;\n    _this.ratio = 1;\n    _this.minRatio = null;\n    _this.maxRatio = null;\n    _this.nextFrame = null;\n    _this.previousState = null;\n    _this.enabled = true;\n    // State\n    _this.previousState = _this.getState();\n    return _this;\n  }\n  /**\n   * Static method used to create a Camera object with a given state.\n   *\n   * @param state\n   * @return {Camera}\n   */\n  Camera.from = function (state) {\n    var camera = new Camera();\n    return camera.setState(state);\n  };\n  /**\n   * Method used to enable the camera.\n   *\n   * @return {Camera}\n   */\n  Camera.prototype.enable = function () {\n    this.enabled = true;\n    return this;\n  };\n  /**\n   * Method used to disable the camera.\n   *\n   * @return {Camera}\n   */\n  Camera.prototype.disable = function () {\n    this.enabled = false;\n    return this;\n  };\n  /**\n   * Method used to retrieve the camera's current state.\n   *\n   * @return {object}\n   */\n  Camera.prototype.getState = function () {\n    return {\n      x: this.x,\n      y: this.y,\n      angle: this.angle,\n      ratio: this.ratio\n    };\n  };\n  /**\n   * Method used to check whether the camera has the given state.\n   *\n   * @return {object}\n   */\n  Camera.prototype.hasState = function (state) {\n    return this.x === state.x && this.y === state.y && this.ratio === state.ratio && this.angle === state.angle;\n  };\n  /**\n   * Method used to retrieve the camera's previous state.\n   *\n   * @return {object}\n   */\n  Camera.prototype.getPreviousState = function () {\n    var state = this.previousState;\n    if (!state) return null;\n    return {\n      x: state.x,\n      y: state.y,\n      angle: state.angle,\n      ratio: state.ratio\n    };\n  };\n  /**\n   * Method used to check minRatio and maxRatio values.\n   *\n   * @param ratio\n   * @return {number}\n   */\n  Camera.prototype.getBoundedRatio = function (ratio) {\n    var r = ratio;\n    if (typeof this.minRatio === \"number\") r = Math.max(r, this.minRatio);\n    if (typeof this.maxRatio === \"number\") r = Math.min(r, this.maxRatio);\n    return r;\n  };\n  /**\n   * Method used to check various things to return a legit state candidate.\n   *\n   * @param state\n   * @return {object}\n   */\n  Camera.prototype.validateState = function (state) {\n    var validatedState = {};\n    if (typeof state.x === \"number\") validatedState.x = state.x;\n    if (typeof state.y === \"number\") validatedState.y = state.y;\n    if (typeof state.angle === \"number\") validatedState.angle = state.angle;\n    if (typeof state.ratio === \"number\") validatedState.ratio = this.getBoundedRatio(state.ratio);\n    return validatedState;\n  };\n  /**\n   * Method used to check whether the camera is currently being animated.\n   *\n   * @return {boolean}\n   */\n  Camera.prototype.isAnimated = function () {\n    return !!this.nextFrame;\n  };\n  /**\n   * Method used to set the camera's state.\n   *\n   * @param  {object} state - New state.\n   * @return {Camera}\n   */\n  Camera.prototype.setState = function (state) {\n    if (!this.enabled) return this;\n    // TODO: update by function\n    // Keeping track of last state\n    this.previousState = this.getState();\n    var validState = this.validateState(state);\n    if (typeof validState.x === \"number\") this.x = validState.x;\n    if (typeof validState.y === \"number\") this.y = validState.y;\n    if (typeof validState.angle === \"number\") this.angle = validState.angle;\n    if (typeof validState.ratio === \"number\") this.ratio = validState.ratio;\n    // Emitting\n    if (!this.hasState(this.previousState)) this.emit(\"updated\", this.getState());\n    return this;\n  };\n  /**\n   * Method used to animate the camera.\n   *\n   * @param  {object}                    state      - State to reach eventually.\n   * @param  {object}                    opts       - Options:\n   * @param  {number}                      duration - Duration of the animation.\n   * @param  {string | number => number}   easing   - Easing function or name of an existing one\n   * @param  {function}                  callback   - Callback\n   */\n  Camera.prototype.animate = function (state, opts, callback) {\n    var _this = this;\n    if (!this.enabled) return;\n    var options = Object.assign({}, animate_1.ANIMATE_DEFAULTS, opts);\n    var validState = this.validateState(state);\n    var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n    // State\n    var start = Date.now(),\n      initialState = this.getState();\n    // Function performing the animation\n    var fn = function fn() {\n      var t = (Date.now() - start) / options.duration;\n      // The animation is over:\n      if (t >= 1) {\n        _this.nextFrame = null;\n        _this.setState(validState);\n        if (_this.animationCallback) {\n          _this.animationCallback.call(null);\n          _this.animationCallback = undefined;\n        }\n        return;\n      }\n      var coefficient = easing(t);\n      var newState = {};\n      if (typeof validState.x === \"number\") newState.x = initialState.x + (validState.x - initialState.x) * coefficient;\n      if (typeof validState.y === \"number\") newState.y = initialState.y + (validState.y - initialState.y) * coefficient;\n      if (typeof validState.angle === \"number\") newState.angle = initialState.angle + (validState.angle - initialState.angle) * coefficient;\n      if (typeof validState.ratio === \"number\") newState.ratio = initialState.ratio + (validState.ratio - initialState.ratio) * coefficient;\n      _this.setState(newState);\n      _this.nextFrame = (0, utils_1.requestFrame)(fn);\n    };\n    if (this.nextFrame) {\n      (0, utils_1.cancelFrame)(this.nextFrame);\n      if (this.animationCallback) this.animationCallback.call(null);\n      this.nextFrame = (0, utils_1.requestFrame)(fn);\n    } else {\n      fn();\n    }\n    this.animationCallback = callback;\n  };\n  /**\n   * Method used to zoom the camera.\n   *\n   * @param  {number|object} factorOrOptions - Factor or options.\n   * @return {function}\n   */\n  Camera.prototype.animatedZoom = function (factorOrOptions) {\n    if (!factorOrOptions) {\n      this.animate({\n        ratio: this.ratio / DEFAULT_ZOOMING_RATIO\n      });\n    } else {\n      if (typeof factorOrOptions === \"number\") return this.animate({\n        ratio: this.ratio / factorOrOptions\n      });else this.animate({\n        ratio: this.ratio / (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO)\n      }, factorOrOptions);\n    }\n  };\n  /**\n   * Method used to unzoom the camera.\n   *\n   * @param  {number|object} factorOrOptions - Factor or options.\n   */\n  Camera.prototype.animatedUnzoom = function (factorOrOptions) {\n    if (!factorOrOptions) {\n      this.animate({\n        ratio: this.ratio * DEFAULT_ZOOMING_RATIO\n      });\n    } else {\n      if (typeof factorOrOptions === \"number\") return this.animate({\n        ratio: this.ratio * factorOrOptions\n      });else this.animate({\n        ratio: this.ratio * (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO)\n      }, factorOrOptions);\n    }\n  };\n  /**\n   * Method used to reset the camera.\n   *\n   * @param  {object} options - Options.\n   */\n  Camera.prototype.animatedReset = function (options) {\n    this.animate({\n      x: 0.5,\n      y: 0.5,\n      ratio: 1,\n      angle: 0\n    }, options);\n  };\n  /**\n   * Returns a new Camera instance, with the same state as the current camera.\n   *\n   * @return {Camera}\n   */\n  Camera.prototype.copy = function () {\n    return Camera.from(this.getState());\n  };\n  return Camera;\n}(types_1.TypedEventEmitter);\nexports.default = Camera;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.multiplyVec2 = exports.multiply = exports.translate = exports.rotate = exports.scale = exports.identity = void 0;\nfunction identity() {\n  return Float32Array.of(1, 0, 0, 0, 1, 0, 0, 0, 1);\n}\nexports.identity = identity;\n// TODO: optimize\nfunction scale(m, x, y) {\n  m[0] = x;\n  m[4] = typeof y === \"number\" ? y : x;\n  return m;\n}\nexports.scale = scale;\nfunction rotate(m, r) {\n  var s = Math.sin(r),\n    c = Math.cos(r);\n  m[0] = c;\n  m[1] = s;\n  m[3] = -s;\n  m[4] = c;\n  return m;\n}\nexports.rotate = rotate;\nfunction translate(m, x, y) {\n  m[6] = x;\n  m[7] = y;\n  return m;\n}\nexports.translate = translate;\nfunction multiply(a, b) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  var a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  var a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n  var b00 = b[0],\n    b01 = b[1],\n    b02 = b[2];\n  var b10 = b[3],\n    b11 = b[4],\n    b12 = b[5];\n  var b20 = b[6],\n    b21 = b[7],\n    b22 = b[8];\n  a[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  a[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  a[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  a[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  a[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  a[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  a[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  a[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  a[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return a;\n}\nexports.multiply = multiply;\nfunction multiplyVec2(a, b, z) {\n  if (z === void 0) {\n    z = 1;\n  }\n  var a00 = a[0];\n  var a01 = a[1];\n  var a10 = a[3];\n  var a11 = a[4];\n  var a20 = a[6];\n  var a21 = a[7];\n  var b0 = b.x;\n  var b1 = b.y;\n  return {\n    x: b0 * a00 + b1 * a10 + a20 * z,\n    y: b0 * a01 + b1 * a11 + a21 * z\n  };\n}\nexports.multiplyVec2 = multiplyVec2;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cubicInOut = exports.cubicOut = exports.cubicIn = exports.quadraticInOut = exports.quadraticOut = exports.quadraticIn = exports.linear = void 0;\n/**\n * Sigma.js Easings\n * =================\n *\n * Handy collection of easing functions.\n * @module\n */\nvar linear = function linear(k) {\n  return k;\n};\nexports.linear = linear;\nvar quadraticIn = function quadraticIn(k) {\n  return k * k;\n};\nexports.quadraticIn = quadraticIn;\nvar quadraticOut = function quadraticOut(k) {\n  return k * (2 - k);\n};\nexports.quadraticOut = quadraticOut;\nvar quadraticInOut = function quadraticInOut(k) {\n  if ((k *= 2) < 1) return 0.5 * k * k;\n  return -0.5 * (--k * (k - 2) - 1);\n};\nexports.quadraticInOut = quadraticInOut;\nvar cubicIn = function cubicIn(k) {\n  return k * k * k;\n};\nexports.cubicIn = cubicIn;\nvar cubicOut = function cubicOut(k) {\n  return --k * k * k + 1;\n};\nexports.cubicOut = cubicOut;\nvar cubicInOut = function cubicInOut(k) {\n  if ((k *= 2) < 1) return 0.5 * k * k * k;\n  return 0.5 * ((k -= 2) * k * k + 2);\n};\nexports.cubicInOut = cubicInOut;\nvar easings = {\n  linear: exports.linear,\n  quadraticIn: exports.quadraticIn,\n  quadraticOut: exports.quadraticOut,\n  quadraticInOut: exports.quadraticInOut,\n  cubicIn: exports.cubicIn,\n  cubicOut: exports.cubicOut,\n  cubicInOut: exports.cubicInOut\n};\nexports.default = easings;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar captor_1 = __importStar(__webpack_require__(9));\n/**\n * Constants.\n */\nvar DRAG_TIMEOUT = 100;\nvar DRAGGED_EVENTS_TOLERANCE = 3;\nvar MOUSE_INERTIA_DURATION = 200;\nvar MOUSE_INERTIA_RATIO = 3;\nvar MOUSE_ZOOM_DURATION = 250;\nvar ZOOMING_RATIO = 1.7;\nvar DOUBLE_CLICK_TIMEOUT = 300;\nvar DOUBLE_CLICK_ZOOMING_RATIO = 2.2;\nvar DOUBLE_CLICK_ZOOMING_DURATION = 200;\n/**\n * Mouse captor class.\n *\n * @constructor\n */\nvar MouseCaptor = /** @class */function (_super) {\n  __extends(MouseCaptor, _super);\n  function MouseCaptor(container, renderer) {\n    var _this = _super.call(this, container, renderer) || this;\n    // State\n    _this.enabled = true;\n    _this.draggedEvents = 0;\n    _this.downStartTime = null;\n    _this.lastMouseX = null;\n    _this.lastMouseY = null;\n    _this.isMouseDown = false;\n    _this.isMoving = false;\n    _this.movingTimeout = null;\n    _this.startCameraState = null;\n    _this.clicks = 0;\n    _this.doubleClickTimeout = null;\n    _this.currentWheelDirection = 0;\n    // Binding methods\n    _this.handleClick = _this.handleClick.bind(_this);\n    _this.handleRightClick = _this.handleRightClick.bind(_this);\n    _this.handleDown = _this.handleDown.bind(_this);\n    _this.handleUp = _this.handleUp.bind(_this);\n    _this.handleMove = _this.handleMove.bind(_this);\n    _this.handleWheel = _this.handleWheel.bind(_this);\n    _this.handleOut = _this.handleOut.bind(_this);\n    // Binding events\n    container.addEventListener(\"click\", _this.handleClick, false);\n    container.addEventListener(\"contextmenu\", _this.handleRightClick, false);\n    container.addEventListener(\"mousedown\", _this.handleDown, false);\n    container.addEventListener(\"wheel\", _this.handleWheel, false);\n    container.addEventListener(\"mouseout\", _this.handleOut, false);\n    document.addEventListener(\"mousemove\", _this.handleMove, false);\n    document.addEventListener(\"mouseup\", _this.handleUp, false);\n    return _this;\n  }\n  MouseCaptor.prototype.kill = function () {\n    var container = this.container;\n    container.removeEventListener(\"click\", this.handleClick);\n    container.removeEventListener(\"contextmenu\", this.handleRightClick);\n    container.removeEventListener(\"mousedown\", this.handleDown);\n    container.removeEventListener(\"wheel\", this.handleWheel);\n    container.removeEventListener(\"mouseout\", this.handleOut);\n    document.removeEventListener(\"mousemove\", this.handleMove);\n    document.removeEventListener(\"mouseup\", this.handleUp);\n  };\n  MouseCaptor.prototype.handleClick = function (e) {\n    var _this = this;\n    if (!this.enabled) return;\n    this.clicks++;\n    if (this.clicks === 2) {\n      this.clicks = 0;\n      if (typeof this.doubleClickTimeout === \"number\") {\n        clearTimeout(this.doubleClickTimeout);\n        this.doubleClickTimeout = null;\n      }\n      return this.handleDoubleClick(e);\n    }\n    setTimeout(function () {\n      _this.clicks = 0;\n      _this.doubleClickTimeout = null;\n    }, DOUBLE_CLICK_TIMEOUT);\n    // NOTE: this is here to prevent click events on drag\n    if (this.draggedEvents < DRAGGED_EVENTS_TOLERANCE) this.emit(\"click\", (0, captor_1.getMouseCoords)(e, this.container));\n  };\n  MouseCaptor.prototype.handleRightClick = function (e) {\n    if (!this.enabled) return;\n    this.emit(\"rightClick\", (0, captor_1.getMouseCoords)(e, this.container));\n  };\n  MouseCaptor.prototype.handleDoubleClick = function (e) {\n    if (!this.enabled) return;\n    e.preventDefault();\n    e.stopPropagation();\n    var mouseCoords = (0, captor_1.getMouseCoords)(e, this.container);\n    this.emit(\"doubleClick\", mouseCoords);\n    if (mouseCoords.sigmaDefaultPrevented) return;\n    // default behavior\n    var camera = this.renderer.getCamera();\n    var newRatio = camera.getBoundedRatio(camera.getState().ratio / DOUBLE_CLICK_ZOOMING_RATIO);\n    camera.animate(this.renderer.getViewportZoomedState((0, captor_1.getPosition)(e, this.container), newRatio), {\n      easing: \"quadraticInOut\",\n      duration: DOUBLE_CLICK_ZOOMING_DURATION\n    });\n  };\n  MouseCaptor.prototype.handleDown = function (e) {\n    if (!this.enabled) return;\n    this.startCameraState = this.renderer.getCamera().getState();\n    var _a = (0, captor_1.getPosition)(e, this.container),\n      x = _a.x,\n      y = _a.y;\n    this.lastMouseX = x;\n    this.lastMouseY = y;\n    this.draggedEvents = 0;\n    this.downStartTime = Date.now();\n    // TODO: dispatch events\n    // Left button pressed\n    this.isMouseDown = true;\n    this.emit(\"mousedown\", (0, captor_1.getMouseCoords)(e, this.container));\n  };\n  MouseCaptor.prototype.handleUp = function (e) {\n    var _this = this;\n    if (!this.enabled || !this.isMouseDown) return;\n    var camera = this.renderer.getCamera();\n    this.isMouseDown = false;\n    if (typeof this.movingTimeout === \"number\") {\n      clearTimeout(this.movingTimeout);\n      this.movingTimeout = null;\n    }\n    var _a = (0, captor_1.getPosition)(e, this.container),\n      x = _a.x,\n      y = _a.y;\n    var cameraState = camera.getState(),\n      previousCameraState = camera.getPreviousState() || {\n        x: 0,\n        y: 0\n      };\n    if (this.isMoving) {\n      camera.animate({\n        x: cameraState.x + MOUSE_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n        y: cameraState.y + MOUSE_INERTIA_RATIO * (cameraState.y - previousCameraState.y)\n      }, {\n        duration: MOUSE_INERTIA_DURATION,\n        easing: \"quadraticOut\"\n      });\n    } else if (this.lastMouseX !== x || this.lastMouseY !== y) {\n      camera.setState({\n        x: cameraState.x,\n        y: cameraState.y\n      });\n    }\n    this.isMoving = false;\n    setTimeout(function () {\n      _this.draggedEvents = 0;\n      _this.renderer.refresh();\n    }, 0);\n    this.emit(\"mouseup\", (0, captor_1.getMouseCoords)(e, this.container));\n  };\n  MouseCaptor.prototype.handleMove = function (e) {\n    var _this = this;\n    if (!this.enabled) return;\n    var mouseCoords = (0, captor_1.getMouseCoords)(e, this.container);\n    // Always trigger a \"mousemovebody\" event, so that it is possible to develop\n    // a drag-and-drop effect that works even when the mouse is out of the\n    // container:\n    this.emit(\"mousemovebody\", mouseCoords);\n    // Only trigger the \"mousemove\" event when the mouse is actually hovering\n    // the container, to avoid weirdly hovering nodes and/or edges when the\n    // mouse is not hover the container:\n    if (e.target === this.container) {\n      this.emit(\"mousemove\", mouseCoords);\n    }\n    if (mouseCoords.sigmaDefaultPrevented) return;\n    // Handle the case when \"isMouseDown\" all the time, to allow dragging the\n    // stage while the mouse is not hover the container:\n    if (this.isMouseDown) {\n      this.isMoving = true;\n      this.draggedEvents++;\n      if (typeof this.movingTimeout === \"number\") {\n        clearTimeout(this.movingTimeout);\n      }\n      this.movingTimeout = window.setTimeout(function () {\n        _this.movingTimeout = null;\n        _this.isMoving = false;\n      }, DRAG_TIMEOUT);\n      var camera = this.renderer.getCamera();\n      var _a = (0, captor_1.getPosition)(e, this.container),\n        eX = _a.x,\n        eY = _a.y;\n      var lastMouse = this.renderer.viewportToFramedGraph({\n        x: this.lastMouseX,\n        y: this.lastMouseY\n      });\n      var mouse = this.renderer.viewportToFramedGraph({\n        x: eX,\n        y: eY\n      });\n      var offsetX = lastMouse.x - mouse.x,\n        offsetY = lastMouse.y - mouse.y;\n      var cameraState = camera.getState();\n      var x = cameraState.x + offsetX,\n        y = cameraState.y + offsetY;\n      camera.setState({\n        x: x,\n        y: y\n      });\n      this.lastMouseX = eX;\n      this.lastMouseY = eY;\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n  MouseCaptor.prototype.handleWheel = function (e) {\n    var _this = this;\n    if (!this.enabled) return;\n    e.preventDefault();\n    e.stopPropagation();\n    var delta = (0, captor_1.getWheelDelta)(e);\n    if (!delta) return;\n    var wheelCoords = (0, captor_1.getWheelCoords)(e, this.container);\n    this.emit(\"wheel\", wheelCoords);\n    if (wheelCoords.sigmaDefaultPrevented) return;\n    // Default behavior\n    var ratioDiff = delta > 0 ? 1 / ZOOMING_RATIO : ZOOMING_RATIO;\n    var camera = this.renderer.getCamera();\n    var newRatio = camera.getBoundedRatio(camera.getState().ratio * ratioDiff);\n    var wheelDirection = delta > 0 ? 1 : -1;\n    var now = Date.now();\n    // Cancel events that are too close too each other and in the same direction:\n    if (this.currentWheelDirection === wheelDirection && this.lastWheelTriggerTime && now - this.lastWheelTriggerTime < MOUSE_ZOOM_DURATION / 5) {\n      return;\n    }\n    camera.animate(this.renderer.getViewportZoomedState((0, captor_1.getPosition)(e, this.container), newRatio), {\n      easing: \"quadraticOut\",\n      duration: MOUSE_ZOOM_DURATION\n    }, function () {\n      _this.currentWheelDirection = 0;\n    });\n    this.currentWheelDirection = wheelDirection;\n    this.lastWheelTriggerTime = now;\n  };\n  MouseCaptor.prototype.handleOut = function () {\n    // TODO: dispatch event\n  };\n  return MouseCaptor;\n}(captor_1.default);\nexports.default = MouseCaptor;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getWheelDelta = exports.getTouchCoords = exports.getTouchesArray = exports.getWheelCoords = exports.getMouseCoords = exports.getPosition = void 0;\n/**\n * Sigma.js Captor Class\n * ======================\n * @module\n */\nvar types_1 = __webpack_require__(3);\n/**\n * Captor utils functions\n * ======================\n */\n/**\n * Extract the local X and Y coordinates from a mouse event or touch object. If\n * a DOM element is given, it uses this element's offset to compute the position\n * (this allows using events that are not bound to the container itself and\n * still have a proper position).\n *\n * @param  {event}       e - A mouse event or touch object.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {number}      The local Y value of the mouse.\n */\nfunction getPosition(e, dom) {\n  var bbox = dom.getBoundingClientRect();\n  return {\n    x: e.clientX - bbox.left,\n    y: e.clientY - bbox.top\n  };\n}\nexports.getPosition = getPosition;\n/**\n * Convert mouse coords to sigma coords.\n *\n * @param  {event}       e   - A mouse event or touch object.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getMouseCoords(e, dom) {\n  var res = __assign(__assign({}, getPosition(e, dom)), {\n    sigmaDefaultPrevented: false,\n    preventSigmaDefault: function preventSigmaDefault() {\n      res.sigmaDefaultPrevented = true;\n    },\n    original: e\n  });\n  return res;\n}\nexports.getMouseCoords = getMouseCoords;\n/**\n * Convert mouse wheel event coords to sigma coords.\n *\n * @param  {event}       e   - A wheel mouse event.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getWheelCoords(e, dom) {\n  return __assign(__assign({}, getMouseCoords(e, dom)), {\n    delta: getWheelDelta(e)\n  });\n}\nexports.getWheelCoords = getWheelCoords;\nvar MAX_TOUCHES = 2;\nfunction getTouchesArray(touches) {\n  var arr = [];\n  for (var i = 0, l = Math.min(touches.length, MAX_TOUCHES); i < l; i++) {\n    arr.push(touches[i]);\n  }\n  return arr;\n}\nexports.getTouchesArray = getTouchesArray;\n/**\n * Convert touch coords to sigma coords.\n *\n * @param  {event}       e   - A touch event.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getTouchCoords(e, dom) {\n  return {\n    touches: getTouchesArray(e.touches).map(function (touch) {\n      return getPosition(touch, dom);\n    }),\n    original: e\n  };\n}\nexports.getTouchCoords = getTouchCoords;\n/**\n * Extract the wheel delta from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The wheel delta of the mouse.\n */\nfunction getWheelDelta(e) {\n  // TODO: check those ratios again to ensure a clean Chrome/Firefox compat\n  if (typeof e.deltaY !== \"undefined\") return e.deltaY * -3 / 360;\n  if (typeof e.detail !== \"undefined\") return e.detail / -9;\n  throw new Error(\"Captor: could not extract delta from event.\");\n}\nexports.getWheelDelta = getWheelDelta;\n/**\n * Abstract class representing a captor like the user's mouse or touch controls.\n */\nvar Captor = /** @class */function (_super) {\n  __extends(Captor, _super);\n  function Captor(container, renderer) {\n    var _this = _super.call(this) || this;\n    // Properties\n    _this.container = container;\n    _this.renderer = renderer;\n    return _this;\n  }\n  return Captor;\n}(types_1.TypedEventEmitter);\nexports.default = Captor;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.rectangleCollidesWithQuad = exports.squareCollidesWithQuad = exports.getCircumscribedAlignedRectangle = exports.isRectangleAligned = void 0;\n/**\n * Sigma.js Quad Tree Class\n * =========================\n *\n * Class implementing the quad tree data structure used to solve hovers and\n * determine which elements are currently in the scope of the camera so that\n * we don't waste time rendering things the user cannot see anyway.\n * @module\n */\n/* eslint no-nested-ternary: 0 */\n/* eslint no-constant-condition: 0 */\nvar extend_1 = __importDefault(__webpack_require__(23));\n// TODO: should not ask the quadtree when the camera has the whole graph in\n// sight.\n// TODO: a square can be represented as topleft + width, saying for the quad blocks (reduce mem)\n// TODO: jsdoc\n// TODO: be sure we can handle cases overcoming boundaries (because of size) or use a maxed size\n// TODO: filtering unwanted labels beforehand through the filter function\n// NOTE: this is basically a MX-CIF Quadtree at this point\n// NOTE: need to explore R-Trees for edges\n// NOTE: need to explore 2d segment tree for edges\n// NOTE: probably can do faster using spatial hashing\n/**\n * Constants.\n *\n * Note that since we are representing a static 4-ary tree, the indices of the\n * quadrants are the following:\n *   - TOP_LEFT:     4i + b\n *   - TOP_RIGHT:    4i + 2b\n *   - BOTTOM_LEFT:  4i + 3b\n *   - BOTTOM_RIGHT: 4i + 4b\n */\nvar BLOCKS = 4,\n  MAX_LEVEL = 5;\nvar OUTSIDE_BLOCK = \"outside\";\nvar X_OFFSET = 0,\n  Y_OFFSET = 1,\n  WIDTH_OFFSET = 2,\n  HEIGHT_OFFSET = 3;\nvar TOP_LEFT = 1,\n  TOP_RIGHT = 2,\n  BOTTOM_LEFT = 3,\n  BOTTOM_RIGHT = 4;\nvar hasWarnedTooMuchOutside = false;\n/**\n * Geometry helpers.\n */\n/**\n * Function returning whether the given rectangle is axis-aligned.\n *\n * @param  {Rectangle} rect\n * @return {boolean}\n */\nfunction isRectangleAligned(rect) {\n  return rect.x1 === rect.x2 || rect.y1 === rect.y2;\n}\nexports.isRectangleAligned = isRectangleAligned;\n/**\n * Function returning the smallest rectangle that contains the given rectangle, and that is aligned with the axis.\n *\n * @param {Rectangle} rect\n * @return {Rectangle}\n */\nfunction getCircumscribedAlignedRectangle(rect) {\n  var width = Math.sqrt(Math.pow(rect.x2 - rect.x1, 2) + Math.pow(rect.y2 - rect.y1, 2));\n  var heightVector = {\n    x: (rect.y1 - rect.y2) * rect.height / width,\n    y: (rect.x2 - rect.x1) * rect.height / width\n  };\n  // Compute all corners:\n  var tl = {\n    x: rect.x1,\n    y: rect.y1\n  };\n  var tr = {\n    x: rect.x2,\n    y: rect.y2\n  };\n  var bl = {\n    x: rect.x1 + heightVector.x,\n    y: rect.y1 + heightVector.y\n  };\n  var br = {\n    x: rect.x2 + heightVector.x,\n    y: rect.y2 + heightVector.y\n  };\n  var xL = Math.min(tl.x, tr.x, bl.x, br.x);\n  var xR = Math.max(tl.x, tr.x, bl.x, br.x);\n  var yT = Math.min(tl.y, tr.y, bl.y, br.y);\n  var yB = Math.max(tl.y, tr.y, bl.y, br.y);\n  return {\n    x1: xL,\n    y1: yT,\n    x2: xR,\n    y2: yT,\n    height: yB - yT\n  };\n}\nexports.getCircumscribedAlignedRectangle = getCircumscribedAlignedRectangle;\n/**\n *\n * @param x1\n * @param y1\n * @param w\n * @param qx\n * @param qy\n * @param qw\n * @param qh\n */\nfunction squareCollidesWithQuad(x1, y1, w, qx, qy, qw, qh) {\n  return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + w > qy;\n}\nexports.squareCollidesWithQuad = squareCollidesWithQuad;\nfunction rectangleCollidesWithQuad(x1, y1, w, h, qx, qy, qw, qh) {\n  return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + h > qy;\n}\nexports.rectangleCollidesWithQuad = rectangleCollidesWithQuad;\nfunction pointIsInQuad(x, y, qx, qy, qw, qh) {\n  var xmp = qx + qw / 2,\n    ymp = qy + qh / 2,\n    top = y < ymp,\n    left = x < xmp;\n  return top ? left ? TOP_LEFT : TOP_RIGHT : left ? BOTTOM_LEFT : BOTTOM_RIGHT;\n}\n/**\n * Helper functions that are not bound to the class so an external user\n * cannot mess with them.\n */\nfunction buildQuadrants(maxLevel, data) {\n  // [block, level]\n  var stack = [0, 0];\n  while (stack.length) {\n    var level = stack.pop(),\n      block = stack.pop();\n    var topLeftBlock = 4 * block + BLOCKS,\n      topRightBlock = 4 * block + 2 * BLOCKS,\n      bottomLeftBlock = 4 * block + 3 * BLOCKS,\n      bottomRightBlock = 4 * block + 4 * BLOCKS;\n    var x = data[block + X_OFFSET],\n      y = data[block + Y_OFFSET],\n      width = data[block + WIDTH_OFFSET],\n      height = data[block + HEIGHT_OFFSET],\n      hw = width / 2,\n      hh = height / 2;\n    data[topLeftBlock + X_OFFSET] = x;\n    data[topLeftBlock + Y_OFFSET] = y;\n    data[topLeftBlock + WIDTH_OFFSET] = hw;\n    data[topLeftBlock + HEIGHT_OFFSET] = hh;\n    data[topRightBlock + X_OFFSET] = x + hw;\n    data[topRightBlock + Y_OFFSET] = y;\n    data[topRightBlock + WIDTH_OFFSET] = hw;\n    data[topRightBlock + HEIGHT_OFFSET] = hh;\n    data[bottomLeftBlock + X_OFFSET] = x;\n    data[bottomLeftBlock + Y_OFFSET] = y + hh;\n    data[bottomLeftBlock + WIDTH_OFFSET] = hw;\n    data[bottomLeftBlock + HEIGHT_OFFSET] = hh;\n    data[bottomRightBlock + X_OFFSET] = x + hw;\n    data[bottomRightBlock + Y_OFFSET] = y + hh;\n    data[bottomRightBlock + WIDTH_OFFSET] = hw;\n    data[bottomRightBlock + HEIGHT_OFFSET] = hh;\n    if (level < maxLevel - 1) {\n      stack.push(bottomRightBlock, level + 1);\n      stack.push(bottomLeftBlock, level + 1);\n      stack.push(topRightBlock, level + 1);\n      stack.push(topLeftBlock, level + 1);\n    }\n  }\n}\nfunction insertNode(maxLevel, data, containers, key, x, y, size) {\n  var x1 = x - size,\n    y1 = y - size,\n    w = size * 2;\n  var level = 0,\n    block = 0;\n  while (true) {\n    // If we reached max level\n    if (level >= maxLevel) {\n      containers[block] = containers[block] || [];\n      containers[block].push(key);\n      return;\n    }\n    var topLeftBlock = 4 * block + BLOCKS,\n      topRightBlock = 4 * block + 2 * BLOCKS,\n      bottomLeftBlock = 4 * block + 3 * BLOCKS,\n      bottomRightBlock = 4 * block + 4 * BLOCKS;\n    var collidingWithTopLeft = squareCollidesWithQuad(x1, y1, w, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n    var collidingWithTopRight = squareCollidesWithQuad(x1, y1, w, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n    var collidingWithBottomLeft = squareCollidesWithQuad(x1, y1, w, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n    var collidingWithBottomRight = squareCollidesWithQuad(x1, y1, w, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n    var collisions = [collidingWithTopLeft, collidingWithTopRight, collidingWithBottomLeft, collidingWithBottomRight].reduce(function (acc, current) {\n      if (current) return acc + 1;else return acc;\n    }, 0);\n    // If we have no collision at root level, inject node in the outside block\n    if (collisions === 0 && level === 0) {\n      containers[OUTSIDE_BLOCK].push(key);\n      if (!hasWarnedTooMuchOutside && containers[OUTSIDE_BLOCK].length >= 5) {\n        hasWarnedTooMuchOutside = true;\n        console.warn(\"sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. \" + \"You might have a problem with the normalization function or the custom bounding box.\");\n      }\n      return;\n    }\n    // If we don't have at least a collision but deeper, there is an issue\n    if (collisions === 0) throw new Error(\"sigma/quadtree.insertNode: no collision (level: \".concat(level, \", key: \").concat(key, \", x: \").concat(x, \", y: \").concat(y, \", size: \").concat(size, \").\"));\n    // If we have 3 collisions, we have a geometry problem obviously\n    if (collisions === 3) throw new Error(\"sigma/quadtree.insertNode: 3 impossible collisions (level: \".concat(level, \", key: \").concat(key, \", x: \").concat(x, \", y: \").concat(y, \", size: \").concat(size, \").\"));\n    // If we have more that one collision, we stop here and store the node\n    // in the relevant containers\n    if (collisions > 1) {\n      containers[block] = containers[block] || [];\n      containers[block].push(key);\n      return;\n    } else {\n      level++;\n    }\n    // Else we recurse into the correct quads\n    if (collidingWithTopLeft) block = topLeftBlock;\n    if (collidingWithTopRight) block = topRightBlock;\n    if (collidingWithBottomLeft) block = bottomLeftBlock;\n    if (collidingWithBottomRight) block = bottomRightBlock;\n  }\n}\nfunction getNodesInAxisAlignedRectangleArea(maxLevel, data, containers, x1, y1, w, h) {\n  // [block, level]\n  var stack = [0, 0];\n  var collectedNodes = [];\n  var container;\n  while (stack.length) {\n    var level = stack.pop(),\n      block = stack.pop();\n    // Collecting nodes\n    container = containers[block];\n    if (container) (0, extend_1.default)(collectedNodes, container);\n    // If we reached max level\n    if (level >= maxLevel) continue;\n    var topLeftBlock = 4 * block + BLOCKS,\n      topRightBlock = 4 * block + 2 * BLOCKS,\n      bottomLeftBlock = 4 * block + 3 * BLOCKS,\n      bottomRightBlock = 4 * block + 4 * BLOCKS;\n    var collidingWithTopLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n    var collidingWithTopRight = rectangleCollidesWithQuad(x1, y1, w, h, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n    var collidingWithBottomLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n    var collidingWithBottomRight = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n    if (collidingWithTopLeft) stack.push(topLeftBlock, level + 1);\n    if (collidingWithTopRight) stack.push(topRightBlock, level + 1);\n    if (collidingWithBottomLeft) stack.push(bottomLeftBlock, level + 1);\n    if (collidingWithBottomRight) stack.push(bottomRightBlock, level + 1);\n  }\n  return collectedNodes;\n}\n/**\n * QuadTree class.\n *\n * @constructor\n * @param {object} boundaries - The graph boundaries.\n */\nvar QuadTree = /** @class */function () {\n  function QuadTree(params) {\n    var _a;\n    if (params === void 0) {\n      params = {};\n    }\n    this.containers = (_a = {}, _a[OUTSIDE_BLOCK] = [], _a);\n    this.cache = null;\n    this.lastRectangle = null;\n    // Allocating the underlying byte array\n    var L = Math.pow(4, MAX_LEVEL);\n    this.data = new Float32Array(BLOCKS * ((4 * L - 1) / 3));\n    if (params.boundaries) this.resize(params.boundaries);else this.resize({\n      x: 0,\n      y: 0,\n      width: 1,\n      height: 1\n    });\n  }\n  QuadTree.prototype.add = function (key, x, y, size) {\n    insertNode(MAX_LEVEL, this.data, this.containers, key, x, y, size);\n    return this;\n  };\n  QuadTree.prototype.resize = function (boundaries) {\n    this.clear();\n    // Building the quadrants\n    this.data[X_OFFSET] = boundaries.x;\n    this.data[Y_OFFSET] = boundaries.y;\n    this.data[WIDTH_OFFSET] = boundaries.width;\n    this.data[HEIGHT_OFFSET] = boundaries.height;\n    buildQuadrants(MAX_LEVEL, this.data);\n  };\n  QuadTree.prototype.clear = function () {\n    var _a;\n    this.containers = (_a = {}, _a[OUTSIDE_BLOCK] = [], _a);\n    return this;\n  };\n  QuadTree.prototype.point = function (x, y) {\n    var nodes = this.containers[OUTSIDE_BLOCK];\n    var block = 0,\n      level = 0;\n    do {\n      if (this.containers[block]) nodes.push.apply(nodes, __spreadArray([], __read(this.containers[block]), false));\n      var quad = pointIsInQuad(x, y, this.data[block + X_OFFSET], this.data[block + Y_OFFSET], this.data[block + WIDTH_OFFSET], this.data[block + HEIGHT_OFFSET]);\n      block = 4 * block + quad * BLOCKS;\n      level++;\n    } while (level <= MAX_LEVEL);\n    return nodes;\n  };\n  QuadTree.prototype.rectangle = function (x1, y1, x2, y2, height) {\n    var _a;\n    var lr = this.lastRectangle;\n    if (lr && x1 === lr.x1 && x2 === lr.x2 && y1 === lr.y1 && y2 === lr.y2 && height === lr.height) {\n      return this.cache;\n    }\n    this.lastRectangle = {\n      x1: x1,\n      y1: y1,\n      x2: x2,\n      y2: y2,\n      height: height\n    };\n    // If the rectangle is shifted, we use the smallest aligned rectangle that contains the shifted one:\n    if (!isRectangleAligned(this.lastRectangle)) this.lastRectangle = getCircumscribedAlignedRectangle(this.lastRectangle);\n    this.cache = getNodesInAxisAlignedRectangleArea(MAX_LEVEL, this.data, this.containers, x1, y1, Math.abs(x1 - x2) || Math.abs(y1 - y2), height);\n    // Add all the nodes in the outside block, since they might be relevant, and since they should be very few:\n    (_a = this.cache).push.apply(_a, __spreadArray([], __read(this.containers[OUTSIDE_BLOCK]), false));\n    return this.cache;\n  };\n  return QuadTree;\n}();\nexports.default = QuadTree;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction drawLabel(context, data, settings) {\n  if (!data.label) return;\n  var size = settings.labelSize,\n    font = settings.labelFont,\n    weight = settings.labelWeight,\n    color = settings.labelColor.attribute ? data[settings.labelColor.attribute] || settings.labelColor.color || \"#000\" : settings.labelColor.color;\n  context.fillStyle = color;\n  context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n  context.fillText(data.label, data.x + data.size + 3, data.y + size / 3);\n}\nexports.default = drawLabel;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractProgram = void 0;\n/**\n * Sigma.js WebGL Renderer Program\n * ================================\n *\n * Class representing a single WebGL program used by sigma's WebGL renderer.\n * @module\n */\nvar utils_1 = __webpack_require__(32);\n/**\n * Abstract Program class.\n *\n * @constructor\n */\nvar AbstractProgram = /** @class */function () {\n  function AbstractProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n    this.array = new Float32Array();\n    this.points = points;\n    this.attributes = attributes;\n    this.gl = gl;\n    this.vertexShaderSource = vertexShaderSource;\n    this.fragmentShaderSource = fragmentShaderSource;\n    var buffer = gl.createBuffer();\n    if (buffer === null) throw new Error(\"AbstractProgram: error while creating the buffer\");\n    this.buffer = buffer;\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    this.vertexShader = (0, utils_1.loadVertexShader)(gl, this.vertexShaderSource);\n    this.fragmentShader = (0, utils_1.loadFragmentShader)(gl, this.fragmentShaderSource);\n    this.program = (0, utils_1.loadProgram)(gl, [this.vertexShader, this.fragmentShader]);\n  }\n  AbstractProgram.prototype.bufferData = function () {\n    var gl = this.gl;\n    gl.bufferData(gl.ARRAY_BUFFER, this.array, gl.DYNAMIC_DRAW);\n  };\n  AbstractProgram.prototype.allocate = function (capacity) {\n    this.array = new Float32Array(this.points * this.attributes * capacity);\n  };\n  AbstractProgram.prototype.hasNothingToRender = function () {\n    return this.array.length === 0;\n  };\n  return AbstractProgram;\n}();\nexports.AbstractProgram = AbstractProgram;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n(function () {\n  \"use strict\";\n\n  var e = {\n      d: function d(n, t) {\n        for (var o in t) {\n          e.o(t, o) && !e.o(n, o) && Object.defineProperty(n, o, {\n            enumerable: !0,\n            get: t[o]\n          });\n        }\n      },\n      o: function o(e, n) {\n        return Object.prototype.hasOwnProperty.call(e, n);\n      },\n      r: function r(e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(e, \"__esModule\", {\n          value: !0\n        });\n      }\n    },\n    n = {};\n  e.r(n), e.d(n, {\n    default: function _default() {\n      return t;\n    }\n  });\n  var t = \"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float feather = 0.001;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  float dist = length(v_normal) * v_thickness;\\n\\n  float t = smoothstep(\\n    v_thickness - feather,\\n    v_thickness,\\n    dist\\n  );\\n\\n  gl_FragColor = mix(v_color, transparent, t);\\n}\\n\";\n  module.exports = n;\n})();\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n/**\n * Graphology Common GEXF Helpers\n * ===============================\n *\n * Miscellaneous helpers used by both instance of the code.\n */\n\n/**\n * Function used to cast a string value to the desired type.\n *\n * @param  {string} type - Value type.\n * @param  {string} type - String value.\n * @return {any}         - Parsed type.\n */\nexports.cast = function (type, value) {\n  switch (type) {\n    case 'boolean':\n      value = value === 'true';\n      break;\n    case 'integer':\n    case 'long':\n    case 'float':\n    case 'double':\n      value = +value;\n      break;\n    case 'liststring':\n      value = value ? value.split('|') : [];\n      break;\n    default:\n  }\n  return value;\n};\n\n/**\n * Function deleting illegal characters from a potential tag name to avoid\n * generating invalid XML.\n *\n * @param  {string} type - Tag name.\n * @return {string}\n */\nvar SANITIZE_PATTERN = /[\"'<>&\\s]/g;\nexports.sanitizeTagName = function sanitizeTagName(tagName) {\n  return tagName.replace(SANITIZE_PATTERN, '').trim();\n};\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Sigma = exports.MouseCaptor = exports.QuadTree = exports.Camera = void 0;\n/**\n * Sigma.js Library Endpoint\n * =========================\n *\n * The library endpoint.\n * @module\n */\nvar sigma_1 = __importDefault(__webpack_require__(19));\nexports.Sigma = sigma_1.default;\nvar camera_1 = __importDefault(__webpack_require__(5));\nexports.Camera = camera_1.default;\nvar quadtree_1 = __importDefault(__webpack_require__(10));\nexports.QuadTree = quadtree_1.default;\nvar mouse_1 = __importDefault(__webpack_require__(8));\nexports.MouseCaptor = mouse_1.default;\nexports.default = sigma_1.default;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function (t, e) {\n   true ? module.exports = e() : undefined;\n}(this, function () {\n  \"use strict\";\n\n  function t(e) {\n    return t = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (t) {\n      return typeof t;\n    } : function (t) {\n      return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t;\n    }, t(e);\n  }\n  function e(t, e) {\n    t.prototype = Object.create(e.prototype), t.prototype.constructor = t, r(t, e);\n  }\n  function n(t) {\n    return n = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n      return t.__proto__ || Object.getPrototypeOf(t);\n    }, n(t);\n  }\n  function r(t, e) {\n    return r = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n      return t.__proto__ = e, t;\n    }, r(t, e);\n  }\n  function i() {\n    if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n    if (Reflect.construct.sham) return !1;\n    if (\"function\" == typeof Proxy) return !0;\n    try {\n      return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;\n    } catch (t) {\n      return !1;\n    }\n  }\n  function o(t, e, n) {\n    return o = i() ? Reflect.construct.bind() : function (t, e, n) {\n      var i = [null];\n      i.push.apply(i, e);\n      var o = new (Function.bind.apply(t, i))();\n      return n && r(o, n.prototype), o;\n    }, o.apply(null, arguments);\n  }\n  function a(t) {\n    var e = \"function\" == typeof Map ? new Map() : void 0;\n    return a = function a(t) {\n      if (null === t || (i = t, -1 === Function.toString.call(i).indexOf(\"[native code]\"))) return t;\n      var i;\n      if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\");\n      if (void 0 !== e) {\n        if (e.has(t)) return e.get(t);\n        e.set(t, a);\n      }\n      function a() {\n        return o(t, arguments, n(this).constructor);\n      }\n      return a.prototype = Object.create(t.prototype, {\n        constructor: {\n          value: a,\n          enumerable: !1,\n          writable: !0,\n          configurable: !0\n        }\n      }), r(a, t);\n    }, a(t);\n  }\n  function c(t) {\n    if (void 0 === t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    return t;\n  }\n  var u = function u() {\n    for (var t = arguments[0], e = 1, n = arguments.length; e < n; e++) {\n      if (arguments[e]) for (var r in arguments[e]) {\n        t[r] = arguments[e][r];\n      }\n    }\n    return t;\n  };\n  function d(t, e, n, r) {\n    var i = t._nodes.get(e),\n      o = null;\n    return i ? o = \"mixed\" === r ? i.out && i.out[n] || i.undirected && i.undirected[n] : \"directed\" === r ? i.out && i.out[n] : i.undirected && i.undirected[n] : o;\n  }\n  function s(e) {\n    return \"object\" === t(e) && null !== e && e.constructor === Object;\n  }\n  function h(t) {\n    var e;\n    for (e in t) {\n      return !1;\n    }\n    return !0;\n  }\n  function p(t, e, n) {\n    Object.defineProperty(t, e, {\n      enumerable: !1,\n      configurable: !1,\n      writable: !0,\n      value: n\n    });\n  }\n  function f(t, e, n) {\n    var r = {\n      enumerable: !0,\n      configurable: !0\n    };\n    \"function\" == typeof n ? r.get = n : (r.value = n, r.writable = !1), Object.defineProperty(t, e, r);\n  }\n  function l(t) {\n    return !!s(t) && !(t.attributes && !Array.isArray(t.attributes));\n  }\n  \"function\" == typeof Object.assign && (u = Object.assign);\n  var g,\n    y = {\n      exports: {}\n    },\n    w = \"object\" == typeof Reflect ? Reflect : null,\n    v = w && \"function\" == typeof w.apply ? w.apply : function (t, e, n) {\n      return Function.prototype.apply.call(t, e, n);\n    };\n  g = w && \"function\" == typeof w.ownKeys ? w.ownKeys : Object.getOwnPropertySymbols ? function (t) {\n    return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t));\n  } : function (t) {\n    return Object.getOwnPropertyNames(t);\n  };\n  var b = Number.isNaN || function (t) {\n    return t != t;\n  };\n  function m() {\n    m.init.call(this);\n  }\n  y.exports = m, y.exports.once = function (t, e) {\n    return new Promise(function (n, r) {\n      function i(n) {\n        t.removeListener(e, o), r(n);\n      }\n      function o() {\n        \"function\" == typeof t.removeListener && t.removeListener(\"error\", i), n([].slice.call(arguments));\n      }\n      U(t, e, o, {\n        once: !0\n      }), \"error\" !== e && function (t, e, n) {\n        \"function\" == typeof t.on && U(t, \"error\", e, n);\n      }(t, i, {\n        once: !0\n      });\n    });\n  }, m.EventEmitter = m, m.prototype._events = void 0, m.prototype._eventsCount = 0, m.prototype._maxListeners = void 0;\n  var k = 10;\n  function _(t) {\n    if (\"function\" != typeof t) throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof t);\n  }\n  function G(t) {\n    return void 0 === t._maxListeners ? m.defaultMaxListeners : t._maxListeners;\n  }\n  function x(t, e, n, r) {\n    var i, o, a, c;\n    if (_(n), void 0 === (o = t._events) ? (o = t._events = Object.create(null), t._eventsCount = 0) : (void 0 !== o.newListener && (t.emit(\"newListener\", e, n.listener ? n.listener : n), o = t._events), a = o[e]), void 0 === a) a = o[e] = n, ++t._eventsCount;else if (\"function\" == typeof a ? a = o[e] = r ? [n, a] : [a, n] : r ? a.unshift(n) : a.push(n), (i = G(t)) > 0 && a.length > i && !a.warned) {\n      a.warned = !0;\n      var u = new Error(\"Possible EventEmitter memory leak detected. \" + a.length + \" \" + String(e) + \" listeners added. Use emitter.setMaxListeners() to increase limit\");\n      u.name = \"MaxListenersExceededWarning\", u.emitter = t, u.type = e, u.count = a.length, c = u, console && console.warn && console.warn(c);\n    }\n    return t;\n  }\n  function E() {\n    if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, 0 === arguments.length ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);\n  }\n  function A(t, e, n) {\n    var r = {\n        fired: !1,\n        wrapFn: void 0,\n        target: t,\n        type: e,\n        listener: n\n      },\n      i = E.bind(r);\n    return i.listener = n, r.wrapFn = i, i;\n  }\n  function L(t, e, n) {\n    var r = t._events;\n    if (void 0 === r) return [];\n    var i = r[e];\n    return void 0 === i ? [] : \"function\" == typeof i ? n ? [i.listener || i] : [i] : n ? function (t) {\n      for (var e = new Array(t.length), n = 0; n < e.length; ++n) {\n        e[n] = t[n].listener || t[n];\n      }\n      return e;\n    }(i) : D(i, i.length);\n  }\n  function S(t) {\n    var e = this._events;\n    if (void 0 !== e) {\n      var n = e[t];\n      if (\"function\" == typeof n) return 1;\n      if (void 0 !== n) return n.length;\n    }\n    return 0;\n  }\n  function D(t, e) {\n    for (var n = new Array(e), r = 0; r < e; ++r) {\n      n[r] = t[r];\n    }\n    return n;\n  }\n  function U(t, e, n, r) {\n    if (\"function\" == typeof t.on) r.once ? t.once(e, n) : t.on(e, n);else {\n      if (\"function\" != typeof t.addEventListener) throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof t);\n      t.addEventListener(e, function i(o) {\n        r.once && t.removeEventListener(e, i), n(o);\n      });\n    }\n  }\n  function N(t) {\n    if (\"function\" != typeof t) throw new Error(\"obliterator/iterator: expecting a function!\");\n    this.next = t;\n  }\n  Object.defineProperty(m, \"defaultMaxListeners\", {\n    enumerable: !0,\n    get: function get() {\n      return k;\n    },\n    set: function set(t) {\n      if (\"number\" != typeof t || t < 0 || b(t)) throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + t + \".\");\n      k = t;\n    }\n  }), m.init = function () {\n    void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;\n  }, m.prototype.setMaxListeners = function (t) {\n    if (\"number\" != typeof t || t < 0 || b(t)) throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + t + \".\");\n    return this._maxListeners = t, this;\n  }, m.prototype.getMaxListeners = function () {\n    return G(this);\n  }, m.prototype.emit = function (t) {\n    for (var e = [], n = 1; n < arguments.length; n++) {\n      e.push(arguments[n]);\n    }\n    var r = \"error\" === t,\n      i = this._events;\n    if (void 0 !== i) r = r && void 0 === i.error;else if (!r) return !1;\n    if (r) {\n      var o;\n      if (e.length > 0 && (o = e[0]), o instanceof Error) throw o;\n      var a = new Error(\"Unhandled error.\" + (o ? \" (\" + o.message + \")\" : \"\"));\n      throw a.context = o, a;\n    }\n    var c = i[t];\n    if (void 0 === c) return !1;\n    if (\"function\" == typeof c) v(c, this, e);else {\n      var u = c.length,\n        d = D(c, u);\n      for (n = 0; n < u; ++n) {\n        v(d[n], this, e);\n      }\n    }\n    return !0;\n  }, m.prototype.addListener = function (t, e) {\n    return x(this, t, e, !1);\n  }, m.prototype.on = m.prototype.addListener, m.prototype.prependListener = function (t, e) {\n    return x(this, t, e, !0);\n  }, m.prototype.once = function (t, e) {\n    return _(e), this.on(t, A(this, t, e)), this;\n  }, m.prototype.prependOnceListener = function (t, e) {\n    return _(e), this.prependListener(t, A(this, t, e)), this;\n  }, m.prototype.removeListener = function (t, e) {\n    var n, r, i, o, a;\n    if (_(e), void 0 === (r = this._events)) return this;\n    if (void 0 === (n = r[t])) return this;\n    if (n === e || n.listener === e) 0 == --this._eventsCount ? this._events = Object.create(null) : (delete r[t], r.removeListener && this.emit(\"removeListener\", t, n.listener || e));else if (\"function\" != typeof n) {\n      for (i = -1, o = n.length - 1; o >= 0; o--) {\n        if (n[o] === e || n[o].listener === e) {\n          a = n[o].listener, i = o;\n          break;\n        }\n      }\n      if (i < 0) return this;\n      0 === i ? n.shift() : function (t, e) {\n        for (; e + 1 < t.length; e++) {\n          t[e] = t[e + 1];\n        }\n        t.pop();\n      }(n, i), 1 === n.length && (r[t] = n[0]), void 0 !== r.removeListener && this.emit(\"removeListener\", t, a || e);\n    }\n    return this;\n  }, m.prototype.off = m.prototype.removeListener, m.prototype.removeAllListeners = function (t) {\n    var e, n, r;\n    if (void 0 === (n = this._events)) return this;\n    if (void 0 === n.removeListener) return 0 === arguments.length ? (this._events = Object.create(null), this._eventsCount = 0) : void 0 !== n[t] && (0 == --this._eventsCount ? this._events = Object.create(null) : delete n[t]), this;\n    if (0 === arguments.length) {\n      var i,\n        o = Object.keys(n);\n      for (r = 0; r < o.length; ++r) {\n        \"removeListener\" !== (i = o[r]) && this.removeAllListeners(i);\n      }\n      return this.removeAllListeners(\"removeListener\"), this._events = Object.create(null), this._eventsCount = 0, this;\n    }\n    if (\"function\" == typeof (e = n[t])) this.removeListener(t, e);else if (void 0 !== e) for (r = e.length - 1; r >= 0; r--) {\n      this.removeListener(t, e[r]);\n    }\n    return this;\n  }, m.prototype.listeners = function (t) {\n    return L(this, t, !0);\n  }, m.prototype.rawListeners = function (t) {\n    return L(this, t, !1);\n  }, m.listenerCount = function (t, e) {\n    return \"function\" == typeof t.listenerCount ? t.listenerCount(e) : S.call(t, e);\n  }, m.prototype.listenerCount = S, m.prototype.eventNames = function () {\n    return this._eventsCount > 0 ? g(this._events) : [];\n  }, \"undefined\" != typeof Symbol && (N.prototype[Symbol.iterator] = function () {\n    return this;\n  }), N.of = function () {\n    var t = arguments,\n      e = t.length,\n      n = 0;\n    return new N(function () {\n      return n >= e ? {\n        done: !0\n      } : {\n        done: !1,\n        value: t[n++]\n      };\n    });\n  }, N.empty = function () {\n    return new N(function () {\n      return {\n        done: !0\n      };\n    });\n  }, N.fromSequence = function (t) {\n    var e = 0,\n      n = t.length;\n    return new N(function () {\n      return e >= n ? {\n        done: !0\n      } : {\n        done: !1,\n        value: t[e++]\n      };\n    });\n  }, N.is = function (t) {\n    return t instanceof N || \"object\" == typeof t && null !== t && \"function\" == typeof t.next;\n  };\n  var O = N,\n    j = {};\n  j.ARRAY_BUFFER_SUPPORT = \"undefined\" != typeof ArrayBuffer, j.SYMBOL_SUPPORT = \"undefined\" != typeof Symbol;\n  var C = O,\n    M = j,\n    z = M.ARRAY_BUFFER_SUPPORT,\n    W = M.SYMBOL_SUPPORT;\n  var P = function P(t) {\n      var e = function (t) {\n        return \"string\" == typeof t || Array.isArray(t) || z && ArrayBuffer.isView(t) ? C.fromSequence(t) : \"object\" != typeof t || null === t ? null : W && \"function\" == typeof t[Symbol.iterator] ? t[Symbol.iterator]() : \"function\" == typeof t.next ? t : null;\n      }(t);\n      if (!e) throw new Error(\"obliterator: target is not iterable nor a valid iterator.\");\n      return e;\n    },\n    R = P,\n    K = function K(t, e) {\n      for (var n, r = arguments.length > 1 ? e : 1 / 0, i = r !== 1 / 0 ? new Array(r) : [], o = 0, a = R(t);;) {\n        if (o === r) return i;\n        if ((n = a.next()).done) return o !== e && (i.length = o), i;\n        i[o++] = n.value;\n      }\n    },\n    T = function (t) {\n      function n(e) {\n        var n;\n        return (n = t.call(this) || this).name = \"GraphError\", n.message = e, n;\n      }\n      return e(n, t), n;\n    }(a(Error)),\n    B = function (t) {\n      function n(e) {\n        var r;\n        return (r = t.call(this, e) || this).name = \"InvalidArgumentsGraphError\", \"function\" == typeof Error.captureStackTrace && Error.captureStackTrace(c(r), n.prototype.constructor), r;\n      }\n      return e(n, t), n;\n    }(T),\n    F = function (t) {\n      function n(e) {\n        var r;\n        return (r = t.call(this, e) || this).name = \"NotFoundGraphError\", \"function\" == typeof Error.captureStackTrace && Error.captureStackTrace(c(r), n.prototype.constructor), r;\n      }\n      return e(n, t), n;\n    }(T),\n    I = function (t) {\n      function n(e) {\n        var r;\n        return (r = t.call(this, e) || this).name = \"UsageGraphError\", \"function\" == typeof Error.captureStackTrace && Error.captureStackTrace(c(r), n.prototype.constructor), r;\n      }\n      return e(n, t), n;\n    }(T);\n  function Y(t, e) {\n    this.key = t, this.attributes = e, this.clear();\n  }\n  function q(t, e) {\n    this.key = t, this.attributes = e, this.clear();\n  }\n  function J(t, e) {\n    this.key = t, this.attributes = e, this.clear();\n  }\n  function V(t, e, n, r, i) {\n    this.key = e, this.attributes = i, this.undirected = t, this.source = n, this.target = r;\n  }\n  Y.prototype.clear = function () {\n    this.inDegree = 0, this.outDegree = 0, this.undirectedDegree = 0, this.undirectedLoops = 0, this.directedLoops = 0, this.in = {}, this.out = {}, this.undirected = {};\n  }, q.prototype.clear = function () {\n    this.inDegree = 0, this.outDegree = 0, this.directedLoops = 0, this.in = {}, this.out = {};\n  }, J.prototype.clear = function () {\n    this.undirectedDegree = 0, this.undirectedLoops = 0, this.undirected = {};\n  }, V.prototype.attach = function () {\n    var t = \"out\",\n      e = \"in\";\n    this.undirected && (t = e = \"undirected\");\n    var n = this.source.key,\n      r = this.target.key;\n    this.source[t][r] = this, this.undirected && n === r || (this.target[e][n] = this);\n  }, V.prototype.attachMulti = function () {\n    var t = \"out\",\n      e = \"in\",\n      n = this.source.key,\n      r = this.target.key;\n    this.undirected && (t = e = \"undirected\");\n    var i = this.source[t],\n      o = i[r];\n    if (void 0 === o) return i[r] = this, void (this.undirected && n === r || (this.target[e][n] = this));\n    o.previous = this, this.next = o, i[r] = this, this.target[e][n] = this;\n  }, V.prototype.detach = function () {\n    var t = this.source.key,\n      e = this.target.key,\n      n = \"out\",\n      r = \"in\";\n    this.undirected && (n = r = \"undirected\"), delete this.source[n][e], delete this.target[r][t];\n  }, V.prototype.detachMulti = function () {\n    var t = this.source.key,\n      e = this.target.key,\n      n = \"out\",\n      r = \"in\";\n    this.undirected && (n = r = \"undirected\"), void 0 === this.previous ? void 0 === this.next ? (delete this.source[n][e], delete this.target[r][t]) : (this.next.previous = void 0, this.source[n][e] = this.next, this.target[r][t] = this.next) : (this.previous.next = this.next, void 0 !== this.next && (this.next.previous = this.previous));\n  };\n  function H(t, e, n, r, i, o, a) {\n    var c, u, d, s;\n    if (r = \"\" + r, 0 === n) {\n      if (!(c = t._nodes.get(r))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(r, '\" node in the graph.'));\n      d = i, s = o;\n    } else if (3 === n) {\n      if (i = \"\" + i, !(u = t._edges.get(i))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(i, '\" edge in the graph.'));\n      var h = u.source.key,\n        p = u.target.key;\n      if (r === h) c = u.target;else {\n        if (r !== p) throw new F(\"Graph.\".concat(e, ': the \"').concat(r, '\" node is not attached to the \"').concat(i, '\" edge (').concat(h, \", \").concat(p, \").\"));\n        c = u.source;\n      }\n      d = o, s = a;\n    } else {\n      if (!(u = t._edges.get(r))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(r, '\" edge in the graph.'));\n      c = 1 === n ? u.source : u.target, d = i, s = o;\n    }\n    return [c, d, s];\n  }\n  var Q = [{\n    name: function name(t) {\n      return \"get\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i) {\n        var o = H(this, e, n, t, r, i),\n          a = o[0],\n          c = o[1];\n        return a.attributes[c];\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"get\".concat(t, \"Attributes\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r) {\n        return H(this, e, n, t, r)[0].attributes;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"has\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i) {\n        var o = H(this, e, n, t, r, i),\n          a = o[0],\n          c = o[1];\n        return a.attributes.hasOwnProperty(c);\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"set\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i, o) {\n        var a = H(this, e, n, t, r, i, o),\n          c = a[0],\n          u = a[1],\n          d = a[2];\n        return c.attributes[u] = d, this.emit(\"nodeAttributesUpdated\", {\n          key: c.key,\n          type: \"set\",\n          attributes: c.attributes,\n          name: u\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"update\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i, o) {\n        var a = H(this, e, n, t, r, i, o),\n          c = a[0],\n          u = a[1],\n          d = a[2];\n        if (\"function\" != typeof d) throw new B(\"Graph.\".concat(e, \": updater should be a function.\"));\n        var s = c.attributes,\n          h = d(s[u]);\n        return s[u] = h, this.emit(\"nodeAttributesUpdated\", {\n          key: c.key,\n          type: \"set\",\n          attributes: c.attributes,\n          name: u\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"remove\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i) {\n        var o = H(this, e, n, t, r, i),\n          a = o[0],\n          c = o[1];\n        return delete a.attributes[c], this.emit(\"nodeAttributesUpdated\", {\n          key: a.key,\n          type: \"remove\",\n          attributes: a.attributes,\n          name: c\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"replace\".concat(t, \"Attributes\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i) {\n        var o = H(this, e, n, t, r, i),\n          a = o[0],\n          c = o[1];\n        if (!s(c)) throw new B(\"Graph.\".concat(e, \": provided attributes are not a plain object.\"));\n        return a.attributes = c, this.emit(\"nodeAttributesUpdated\", {\n          key: a.key,\n          type: \"replace\",\n          attributes: a.attributes\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"merge\".concat(t, \"Attributes\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i) {\n        var o = H(this, e, n, t, r, i),\n          a = o[0],\n          c = o[1];\n        if (!s(c)) throw new B(\"Graph.\".concat(e, \": provided attributes are not a plain object.\"));\n        return u(a.attributes, c), this.emit(\"nodeAttributesUpdated\", {\n          key: a.key,\n          type: \"merge\",\n          attributes: a.attributes,\n          data: c\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"update\".concat(t, \"Attributes\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i) {\n        var o = H(this, e, n, t, r, i),\n          a = o[0],\n          c = o[1];\n        if (\"function\" != typeof c) throw new B(\"Graph.\".concat(e, \": provided updater is not a function.\"));\n        return a.attributes = c(a.attributes), this.emit(\"nodeAttributesUpdated\", {\n          key: a.key,\n          type: \"update\",\n          attributes: a.attributes\n        }), this;\n      };\n    }\n  }];\n  var X = [{\n    name: function name(t) {\n      return \"get\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r) {\n        var i;\n        if (\"mixed\" !== this.type && \"mixed\" !== n && n !== this.type) throw new I(\"Graph.\".concat(e, \": cannot find this type of edges in your \").concat(this.type, \" graph.\"));\n        if (arguments.length > 2) {\n          if (this.multi) throw new I(\"Graph.\".concat(e, \": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));\n          var o = \"\" + t,\n            a = \"\" + r;\n          if (r = arguments[2], !(i = d(this, o, a, n))) throw new F(\"Graph.\".concat(e, ': could not find an edge for the given path (\"').concat(o, '\" - \"').concat(a, '\").'));\n        } else {\n          if (\"mixed\" !== n) throw new I(\"Graph.\".concat(e, \": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));\n          if (t = \"\" + t, !(i = this._edges.get(t))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(t, '\" edge in the graph.'));\n        }\n        return i.attributes[r];\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"get\".concat(t, \"Attributes\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t) {\n        var r;\n        if (\"mixed\" !== this.type && \"mixed\" !== n && n !== this.type) throw new I(\"Graph.\".concat(e, \": cannot find this type of edges in your \").concat(this.type, \" graph.\"));\n        if (arguments.length > 1) {\n          if (this.multi) throw new I(\"Graph.\".concat(e, \": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));\n          var i = \"\" + t,\n            o = \"\" + arguments[1];\n          if (!(r = d(this, i, o, n))) throw new F(\"Graph.\".concat(e, ': could not find an edge for the given path (\"').concat(i, '\" - \"').concat(o, '\").'));\n        } else {\n          if (\"mixed\" !== n) throw new I(\"Graph.\".concat(e, \": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));\n          if (t = \"\" + t, !(r = this._edges.get(t))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(t, '\" edge in the graph.'));\n        }\n        return r.attributes;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"has\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r) {\n        var i;\n        if (\"mixed\" !== this.type && \"mixed\" !== n && n !== this.type) throw new I(\"Graph.\".concat(e, \": cannot find this type of edges in your \").concat(this.type, \" graph.\"));\n        if (arguments.length > 2) {\n          if (this.multi) throw new I(\"Graph.\".concat(e, \": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));\n          var o = \"\" + t,\n            a = \"\" + r;\n          if (r = arguments[2], !(i = d(this, o, a, n))) throw new F(\"Graph.\".concat(e, ': could not find an edge for the given path (\"').concat(o, '\" - \"').concat(a, '\").'));\n        } else {\n          if (\"mixed\" !== n) throw new I(\"Graph.\".concat(e, \": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));\n          if (t = \"\" + t, !(i = this._edges.get(t))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(t, '\" edge in the graph.'));\n        }\n        return i.attributes.hasOwnProperty(r);\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"set\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i) {\n        var o;\n        if (\"mixed\" !== this.type && \"mixed\" !== n && n !== this.type) throw new I(\"Graph.\".concat(e, \": cannot find this type of edges in your \").concat(this.type, \" graph.\"));\n        if (arguments.length > 3) {\n          if (this.multi) throw new I(\"Graph.\".concat(e, \": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));\n          var a = \"\" + t,\n            c = \"\" + r;\n          if (r = arguments[2], i = arguments[3], !(o = d(this, a, c, n))) throw new F(\"Graph.\".concat(e, ': could not find an edge for the given path (\"').concat(a, '\" - \"').concat(c, '\").'));\n        } else {\n          if (\"mixed\" !== n) throw new I(\"Graph.\".concat(e, \": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));\n          if (t = \"\" + t, !(o = this._edges.get(t))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(t, '\" edge in the graph.'));\n        }\n        return o.attributes[r] = i, this.emit(\"edgeAttributesUpdated\", {\n          key: o.key,\n          type: \"set\",\n          attributes: o.attributes,\n          name: r\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"update\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r, i) {\n        var o;\n        if (\"mixed\" !== this.type && \"mixed\" !== n && n !== this.type) throw new I(\"Graph.\".concat(e, \": cannot find this type of edges in your \").concat(this.type, \" graph.\"));\n        if (arguments.length > 3) {\n          if (this.multi) throw new I(\"Graph.\".concat(e, \": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));\n          var a = \"\" + t,\n            c = \"\" + r;\n          if (r = arguments[2], i = arguments[3], !(o = d(this, a, c, n))) throw new F(\"Graph.\".concat(e, ': could not find an edge for the given path (\"').concat(a, '\" - \"').concat(c, '\").'));\n        } else {\n          if (\"mixed\" !== n) throw new I(\"Graph.\".concat(e, \": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));\n          if (t = \"\" + t, !(o = this._edges.get(t))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(t, '\" edge in the graph.'));\n        }\n        if (\"function\" != typeof i) throw new B(\"Graph.\".concat(e, \": updater should be a function.\"));\n        return o.attributes[r] = i(o.attributes[r]), this.emit(\"edgeAttributesUpdated\", {\n          key: o.key,\n          type: \"set\",\n          attributes: o.attributes,\n          name: r\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"remove\".concat(t, \"Attribute\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r) {\n        var i;\n        if (\"mixed\" !== this.type && \"mixed\" !== n && n !== this.type) throw new I(\"Graph.\".concat(e, \": cannot find this type of edges in your \").concat(this.type, \" graph.\"));\n        if (arguments.length > 2) {\n          if (this.multi) throw new I(\"Graph.\".concat(e, \": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));\n          var o = \"\" + t,\n            a = \"\" + r;\n          if (r = arguments[2], !(i = d(this, o, a, n))) throw new F(\"Graph.\".concat(e, ': could not find an edge for the given path (\"').concat(o, '\" - \"').concat(a, '\").'));\n        } else {\n          if (\"mixed\" !== n) throw new I(\"Graph.\".concat(e, \": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));\n          if (t = \"\" + t, !(i = this._edges.get(t))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(t, '\" edge in the graph.'));\n        }\n        return delete i.attributes[r], this.emit(\"edgeAttributesUpdated\", {\n          key: i.key,\n          type: \"remove\",\n          attributes: i.attributes,\n          name: r\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"replace\".concat(t, \"Attributes\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r) {\n        var i;\n        if (\"mixed\" !== this.type && \"mixed\" !== n && n !== this.type) throw new I(\"Graph.\".concat(e, \": cannot find this type of edges in your \").concat(this.type, \" graph.\"));\n        if (arguments.length > 2) {\n          if (this.multi) throw new I(\"Graph.\".concat(e, \": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));\n          var o = \"\" + t,\n            a = \"\" + r;\n          if (r = arguments[2], !(i = d(this, o, a, n))) throw new F(\"Graph.\".concat(e, ': could not find an edge for the given path (\"').concat(o, '\" - \"').concat(a, '\").'));\n        } else {\n          if (\"mixed\" !== n) throw new I(\"Graph.\".concat(e, \": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));\n          if (t = \"\" + t, !(i = this._edges.get(t))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(t, '\" edge in the graph.'));\n        }\n        if (!s(r)) throw new B(\"Graph.\".concat(e, \": provided attributes are not a plain object.\"));\n        return i.attributes = r, this.emit(\"edgeAttributesUpdated\", {\n          key: i.key,\n          type: \"replace\",\n          attributes: i.attributes\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"merge\".concat(t, \"Attributes\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r) {\n        var i;\n        if (\"mixed\" !== this.type && \"mixed\" !== n && n !== this.type) throw new I(\"Graph.\".concat(e, \": cannot find this type of edges in your \").concat(this.type, \" graph.\"));\n        if (arguments.length > 2) {\n          if (this.multi) throw new I(\"Graph.\".concat(e, \": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));\n          var o = \"\" + t,\n            a = \"\" + r;\n          if (r = arguments[2], !(i = d(this, o, a, n))) throw new F(\"Graph.\".concat(e, ': could not find an edge for the given path (\"').concat(o, '\" - \"').concat(a, '\").'));\n        } else {\n          if (\"mixed\" !== n) throw new I(\"Graph.\".concat(e, \": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));\n          if (t = \"\" + t, !(i = this._edges.get(t))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(t, '\" edge in the graph.'));\n        }\n        if (!s(r)) throw new B(\"Graph.\".concat(e, \": provided attributes are not a plain object.\"));\n        return u(i.attributes, r), this.emit(\"edgeAttributesUpdated\", {\n          key: i.key,\n          type: \"merge\",\n          attributes: i.attributes,\n          data: r\n        }), this;\n      };\n    }\n  }, {\n    name: function name(t) {\n      return \"update\".concat(t, \"Attributes\");\n    },\n    attacher: function attacher(t, e, n) {\n      t.prototype[e] = function (t, r) {\n        var i;\n        if (\"mixed\" !== this.type && \"mixed\" !== n && n !== this.type) throw new I(\"Graph.\".concat(e, \": cannot find this type of edges in your \").concat(this.type, \" graph.\"));\n        if (arguments.length > 2) {\n          if (this.multi) throw new I(\"Graph.\".concat(e, \": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.\"));\n          var o = \"\" + t,\n            a = \"\" + r;\n          if (r = arguments[2], !(i = d(this, o, a, n))) throw new F(\"Graph.\".concat(e, ': could not find an edge for the given path (\"').concat(o, '\" - \"').concat(a, '\").'));\n        } else {\n          if (\"mixed\" !== n) throw new I(\"Graph.\".concat(e, \": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.\"));\n          if (t = \"\" + t, !(i = this._edges.get(t))) throw new F(\"Graph.\".concat(e, ': could not find the \"').concat(t, '\" edge in the graph.'));\n        }\n        if (\"function\" != typeof r) throw new B(\"Graph.\".concat(e, \": provided updater is not a function.\"));\n        return i.attributes = r(i.attributes), this.emit(\"edgeAttributesUpdated\", {\n          key: i.key,\n          type: \"update\",\n          attributes: i.attributes\n        }), this;\n      };\n    }\n  }];\n  var Z = O,\n    $ = P,\n    tt = function tt() {\n      var t = arguments,\n        e = null,\n        n = -1;\n      return new Z(function () {\n        for (var r = null;;) {\n          if (null === e) {\n            if (++n >= t.length) return {\n              done: !0\n            };\n            e = $(t[n]);\n          }\n          if (!0 !== (r = e.next()).done) break;\n          e = null;\n        }\n        return r;\n      });\n    },\n    et = [{\n      name: \"edges\",\n      type: \"mixed\"\n    }, {\n      name: \"inEdges\",\n      type: \"directed\",\n      direction: \"in\"\n    }, {\n      name: \"outEdges\",\n      type: \"directed\",\n      direction: \"out\"\n    }, {\n      name: \"inboundEdges\",\n      type: \"mixed\",\n      direction: \"in\"\n    }, {\n      name: \"outboundEdges\",\n      type: \"mixed\",\n      direction: \"out\"\n    }, {\n      name: \"directedEdges\",\n      type: \"directed\"\n    }, {\n      name: \"undirectedEdges\",\n      type: \"undirected\"\n    }];\n  function nt(t, e, n, r) {\n    var i = !1;\n    for (var o in e) {\n      if (o !== r) {\n        var a = e[o];\n        if (i = n(a.key, a.attributes, a.source.key, a.target.key, a.source.attributes, a.target.attributes, a.undirected), t && i) return a.key;\n      }\n    }\n  }\n  function rt(t, e, n, r) {\n    var i,\n      o,\n      a,\n      c = !1;\n    for (var u in e) {\n      if (u !== r) {\n        i = e[u];\n        do {\n          if (o = i.source, a = i.target, c = n(i.key, i.attributes, o.key, a.key, o.attributes, a.attributes, i.undirected), t && c) return i.key;\n          i = i.next;\n        } while (void 0 !== i);\n      }\n    }\n  }\n  function it(t, e) {\n    var n,\n      r = Object.keys(t),\n      i = r.length,\n      o = 0;\n    return new O(function () {\n      do {\n        if (n) n = n.next;else {\n          if (o >= i) return {\n            done: !0\n          };\n          var a = r[o++];\n          if (a === e) {\n            n = void 0;\n            continue;\n          }\n          n = t[a];\n        }\n      } while (!n);\n      return {\n        done: !1,\n        value: {\n          edge: n.key,\n          attributes: n.attributes,\n          source: n.source.key,\n          target: n.target.key,\n          sourceAttributes: n.source.attributes,\n          targetAttributes: n.target.attributes,\n          undirected: n.undirected\n        }\n      };\n    });\n  }\n  function ot(t, e, n, r) {\n    var i = e[n];\n    if (i) {\n      var o = i.source,\n        a = i.target;\n      return r(i.key, i.attributes, o.key, a.key, o.attributes, a.attributes, i.undirected) && t ? i.key : void 0;\n    }\n  }\n  function at(t, e, n, r) {\n    var i = e[n];\n    if (i) {\n      var o = !1;\n      do {\n        if (o = r(i.key, i.attributes, i.source.key, i.target.key, i.source.attributes, i.target.attributes, i.undirected), t && o) return i.key;\n        i = i.next;\n      } while (void 0 !== i);\n    }\n  }\n  function ct(t, e) {\n    var n = t[e];\n    return void 0 !== n.next ? new O(function () {\n      if (!n) return {\n        done: !0\n      };\n      var t = {\n        edge: n.key,\n        attributes: n.attributes,\n        source: n.source.key,\n        target: n.target.key,\n        sourceAttributes: n.source.attributes,\n        targetAttributes: n.target.attributes,\n        undirected: n.undirected\n      };\n      return n = n.next, {\n        done: !1,\n        value: t\n      };\n    }) : O.of({\n      edge: n.key,\n      attributes: n.attributes,\n      source: n.source.key,\n      target: n.target.key,\n      sourceAttributes: n.source.attributes,\n      targetAttributes: n.target.attributes,\n      undirected: n.undirected\n    });\n  }\n  function ut(t, e) {\n    if (0 === t.size) return [];\n    if (\"mixed\" === e || e === t.type) return \"function\" == typeof Array.from ? Array.from(t._edges.keys()) : K(t._edges.keys(), t._edges.size);\n    for (var n, r, i = \"undirected\" === e ? t.undirectedSize : t.directedSize, o = new Array(i), a = \"undirected\" === e, c = t._edges.values(), u = 0; !0 !== (n = c.next()).done;) {\n      (r = n.value).undirected === a && (o[u++] = r.key);\n    }\n    return o;\n  }\n  function dt(t, e, n, r) {\n    if (0 !== e.size) for (var i, o, a = \"mixed\" !== n && n !== e.type, c = \"undirected\" === n, u = !1, d = e._edges.values(); !0 !== (i = d.next()).done;) {\n      if (o = i.value, !a || o.undirected === c) {\n        var s = o,\n          h = s.key,\n          p = s.attributes,\n          f = s.source,\n          l = s.target;\n        if (u = r(h, p, f.key, l.key, f.attributes, l.attributes, o.undirected), t && u) return h;\n      }\n    }\n  }\n  function st(t, e) {\n    if (0 === t.size) return O.empty();\n    var n = \"mixed\" !== e && e !== t.type,\n      r = \"undirected\" === e,\n      i = t._edges.values();\n    return new O(function () {\n      for (var t, e;;) {\n        if ((t = i.next()).done) return t;\n        if (e = t.value, !n || e.undirected === r) break;\n      }\n      return {\n        value: {\n          edge: e.key,\n          attributes: e.attributes,\n          source: e.source.key,\n          target: e.target.key,\n          sourceAttributes: e.source.attributes,\n          targetAttributes: e.target.attributes,\n          undirected: e.undirected\n        },\n        done: !1\n      };\n    });\n  }\n  function ht(t, e, n, r, i, o) {\n    var a,\n      c = e ? rt : nt;\n    if (\"undirected\" !== n) {\n      if (\"out\" !== r && (a = c(t, i.in, o), t && a)) return a;\n      if (\"in\" !== r && (a = c(t, i.out, o, r ? void 0 : i.key), t && a)) return a;\n    }\n    if (\"directed\" !== n && (a = c(t, i.undirected, o), t && a)) return a;\n  }\n  function pt(t, e, n, r) {\n    var i = [];\n    return ht(!1, t, e, n, r, function (t) {\n      i.push(t);\n    }), i;\n  }\n  function ft(t, e, n) {\n    var r = O.empty();\n    return \"undirected\" !== t && (\"out\" !== e && void 0 !== n.in && (r = tt(r, it(n.in))), \"in\" !== e && void 0 !== n.out && (r = tt(r, it(n.out, e ? void 0 : n.key)))), \"directed\" !== t && void 0 !== n.undirected && (r = tt(r, it(n.undirected))), r;\n  }\n  function lt(t, e, n, r, i, o, a) {\n    var c,\n      u = n ? at : ot;\n    if (\"undirected\" !== e) {\n      if (void 0 !== i.in && \"out\" !== r && (c = u(t, i.in, o, a), t && c)) return c;\n      if (void 0 !== i.out && \"in\" !== r && (r || i.key !== o) && (c = u(t, i.out, o, a), t && c)) return c;\n    }\n    if (\"directed\" !== e && void 0 !== i.undirected && (c = u(t, i.undirected, o, a), t && c)) return c;\n  }\n  function gt(t, e, n, r, i) {\n    var o = [];\n    return lt(!1, t, e, n, r, i, function (t) {\n      o.push(t);\n    }), o;\n  }\n  function yt(t, e, n, r) {\n    var i = O.empty();\n    return \"undirected\" !== t && (void 0 !== n.in && \"out\" !== e && r in n.in && (i = tt(i, ct(n.in, r))), void 0 !== n.out && \"in\" !== e && r in n.out && (e || n.key !== r) && (i = tt(i, ct(n.out, r)))), \"directed\" !== t && void 0 !== n.undirected && r in n.undirected && (i = tt(i, ct(n.undirected, r))), i;\n  }\n  var wt = [{\n    name: \"neighbors\",\n    type: \"mixed\"\n  }, {\n    name: \"inNeighbors\",\n    type: \"directed\",\n    direction: \"in\"\n  }, {\n    name: \"outNeighbors\",\n    type: \"directed\",\n    direction: \"out\"\n  }, {\n    name: \"inboundNeighbors\",\n    type: \"mixed\",\n    direction: \"in\"\n  }, {\n    name: \"outboundNeighbors\",\n    type: \"mixed\",\n    direction: \"out\"\n  }, {\n    name: \"directedNeighbors\",\n    type: \"directed\"\n  }, {\n    name: \"undirectedNeighbors\",\n    type: \"undirected\"\n  }];\n  function vt() {\n    this.A = null, this.B = null;\n  }\n  function bt(t, e, n, r, i) {\n    for (var o in r) {\n      var a = r[o],\n        c = a.source,\n        u = a.target,\n        d = c === n ? u : c;\n      if (!e || !e.has(d.key)) {\n        var s = i(d.key, d.attributes);\n        if (t && s) return d.key;\n      }\n    }\n  }\n  function mt(t, e, n, r, i) {\n    if (\"mixed\" !== e) {\n      if (\"undirected\" === e) return bt(t, null, r, r.undirected, i);\n      if (\"string\" == typeof n) return bt(t, null, r, r[n], i);\n    }\n    var o,\n      a = new vt();\n    if (\"undirected\" !== e) {\n      if (\"out\" !== n) {\n        if (o = bt(t, null, r, r.in, i), t && o) return o;\n        a.wrap(r.in);\n      }\n      if (\"in\" !== n) {\n        if (o = bt(t, a, r, r.out, i), t && o) return o;\n        a.wrap(r.out);\n      }\n    }\n    if (\"directed\" !== e && (o = bt(t, a, r, r.undirected, i), t && o)) return o;\n  }\n  function kt(t, e, n) {\n    var r = Object.keys(n),\n      i = r.length,\n      o = 0;\n    return new O(function () {\n      var a = null;\n      do {\n        if (o >= i) return t && t.wrap(n), {\n          done: !0\n        };\n        var c = n[r[o++]],\n          u = c.source,\n          d = c.target;\n        a = u === e ? d : u, t && t.has(a.key) && (a = null);\n      } while (null === a);\n      return {\n        done: !1,\n        value: {\n          neighbor: a.key,\n          attributes: a.attributes\n        }\n      };\n    });\n  }\n  function _t(t, e) {\n    var n = e.name,\n      r = e.type,\n      i = e.direction;\n    t.prototype[n] = function (t) {\n      if (\"mixed\" !== r && \"mixed\" !== this.type && r !== this.type) return [];\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (void 0 === e) throw new F(\"Graph.\".concat(n, ': could not find the \"').concat(t, '\" node in the graph.'));\n      return function (t, e, n) {\n        if (\"mixed\" !== t) {\n          if (\"undirected\" === t) return Object.keys(n.undirected);\n          if (\"string\" == typeof e) return Object.keys(n[e]);\n        }\n        var r = [];\n        return mt(!1, t, e, n, function (t) {\n          r.push(t);\n        }), r;\n      }(\"mixed\" === r ? this.type : r, i, e);\n    };\n  }\n  function Gt(t, e) {\n    var n = e.name,\n      r = e.type,\n      i = e.direction,\n      o = n.slice(0, -1) + \"Entries\";\n    t.prototype[o] = function (t) {\n      if (\"mixed\" !== r && \"mixed\" !== this.type && r !== this.type) return O.empty();\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (void 0 === e) throw new F(\"Graph.\".concat(o, ': could not find the \"').concat(t, '\" node in the graph.'));\n      return function (t, e, n) {\n        if (\"mixed\" !== t) {\n          if (\"undirected\" === t) return kt(null, n, n.undirected);\n          if (\"string\" == typeof e) return kt(null, n, n[e]);\n        }\n        var r = O.empty(),\n          i = new vt();\n        return \"undirected\" !== t && (\"out\" !== e && (r = tt(r, kt(i, n, n.in))), \"in\" !== e && (r = tt(r, kt(i, n, n.out)))), \"directed\" !== t && (r = tt(r, kt(i, n, n.undirected))), r;\n      }(\"mixed\" === r ? this.type : r, i, e);\n    };\n  }\n  function xt(t, e, n, r, i) {\n    for (var o, a, c, u, d, s, h, p = r._nodes.values(), f = r.type; !0 !== (o = p.next()).done;) {\n      var l = !1;\n      if (a = o.value, \"undirected\" !== f) for (c in u = a.out) {\n        d = u[c];\n        do {\n          if (s = d.target, l = !0, h = i(a.key, s.key, a.attributes, s.attributes, d.key, d.attributes, d.undirected), t && h) return d;\n          d = d.next;\n        } while (d);\n      }\n      if (\"directed\" !== f) for (c in u = a.undirected) {\n        if (!(e && a.key > c)) {\n          d = u[c];\n          do {\n            if ((s = d.target).key !== c && (s = d.source), l = !0, h = i(a.key, s.key, a.attributes, s.attributes, d.key, d.attributes, d.undirected), t && h) return d;\n            d = d.next;\n          } while (d);\n        }\n      }\n      if (n && !l && (h = i(a.key, null, a.attributes, null, null, null, null), t && h)) return null;\n    }\n  }\n  function Et(t) {\n    if (!s(t)) throw new B('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a \"key\" property.');\n    if (!(\"key\" in t)) throw new B(\"Graph.import: serialized node is missing its key.\");\n    if (\"attributes\" in t && (!s(t.attributes) || null === t.attributes)) throw new B(\"Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.\");\n  }\n  function At(t) {\n    if (!s(t)) throw new B('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a \"source\" & \"target\" property.');\n    if (!(\"source\" in t)) throw new B(\"Graph.import: serialized edge is missing its source.\");\n    if (!(\"target\" in t)) throw new B(\"Graph.import: serialized edge is missing its target.\");\n    if (\"attributes\" in t && (!s(t.attributes) || null === t.attributes)) throw new B(\"Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.\");\n    if (\"undirected\" in t && \"boolean\" != typeof t.undirected) throw new B(\"Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.\");\n  }\n  vt.prototype.wrap = function (t) {\n    null === this.A ? this.A = t : null === this.B && (this.B = t);\n  }, vt.prototype.has = function (t) {\n    return null !== this.A && t in this.A || null !== this.B && t in this.B;\n  };\n  var Lt,\n    St = (Lt = 255 & Math.floor(256 * Math.random()), function () {\n      return Lt++;\n    }),\n    Dt = new Set([\"directed\", \"undirected\", \"mixed\"]),\n    Ut = new Set([\"domain\", \"_events\", \"_eventsCount\", \"_maxListeners\"]),\n    Nt = {\n      allowSelfLoops: !0,\n      multi: !1,\n      type: \"mixed\"\n    };\n  function Ot(t, e, n) {\n    var r = new t.NodeDataClass(e, n);\n    return t._nodes.set(e, r), t.emit(\"nodeAdded\", {\n      key: e,\n      attributes: n\n    }), r;\n  }\n  function jt(t, e, n, r, i, o, a, c) {\n    if (!r && \"undirected\" === t.type) throw new I(\"Graph.\".concat(e, \": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.\"));\n    if (r && \"directed\" === t.type) throw new I(\"Graph.\".concat(e, \": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.\"));\n    if (c && !s(c)) throw new B(\"Graph.\".concat(e, ': invalid attributes. Expecting an object but got \"').concat(c, '\"'));\n    if (o = \"\" + o, a = \"\" + a, c = c || {}, !t.allowSelfLoops && o === a) throw new I(\"Graph.\".concat(e, ': source & target are the same (\"').concat(o, \"\\\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.\"));\n    var u = t._nodes.get(o),\n      d = t._nodes.get(a);\n    if (!u) throw new F(\"Graph.\".concat(e, ': source node \"').concat(o, '\" not found.'));\n    if (!d) throw new F(\"Graph.\".concat(e, ': target node \"').concat(a, '\" not found.'));\n    var h = {\n      key: null,\n      undirected: r,\n      source: o,\n      target: a,\n      attributes: c\n    };\n    if (n) i = t._edgeKeyGenerator();else if (i = \"\" + i, t._edges.has(i)) throw new I(\"Graph.\".concat(e, ': the \"').concat(i, '\" edge already exists in the graph.'));\n    if (!t.multi && (r ? void 0 !== u.undirected[a] : void 0 !== u.out[a])) throw new I(\"Graph.\".concat(e, ': an edge linking \"').concat(o, '\" to \"').concat(a, \"\\\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.\"));\n    var p = new V(r, i, u, d, c);\n    t._edges.set(i, p);\n    var f = o === a;\n    return r ? (u.undirectedDegree++, d.undirectedDegree++, f && (u.undirectedLoops++, t._undirectedSelfLoopCount++)) : (u.outDegree++, d.inDegree++, f && (u.directedLoops++, t._directedSelfLoopCount++)), t.multi ? p.attachMulti() : p.attach(), r ? t._undirectedSize++ : t._directedSize++, h.key = i, t.emit(\"edgeAdded\", h), i;\n  }\n  function Ct(t, e, n, r, i, o, a, c, d) {\n    if (!r && \"undirected\" === t.type) throw new I(\"Graph.\".concat(e, \": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.\"));\n    if (r && \"directed\" === t.type) throw new I(\"Graph.\".concat(e, \": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.\"));\n    if (c) if (d) {\n      if (\"function\" != typeof c) throw new B(\"Graph.\".concat(e, ': invalid updater function. Expecting a function but got \"').concat(c, '\"'));\n    } else if (!s(c)) throw new B(\"Graph.\".concat(e, ': invalid attributes. Expecting an object but got \"').concat(c, '\"'));\n    var h;\n    if (o = \"\" + o, a = \"\" + a, d && (h = c, c = void 0), !t.allowSelfLoops && o === a) throw new I(\"Graph.\".concat(e, ': source & target are the same (\"').concat(o, \"\\\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.\"));\n    var p,\n      f,\n      l = t._nodes.get(o),\n      g = t._nodes.get(a);\n    if (!n && (p = t._edges.get(i))) {\n      if (!(p.source.key === o && p.target.key === a || r && p.source.key === a && p.target.key === o)) throw new I(\"Graph.\".concat(e, ': inconsistency detected when attempting to merge the \"').concat(i, '\" edge with \"').concat(o, '\" source & \"').concat(a, '\" target vs. (\"').concat(p.source.key, '\", \"').concat(p.target.key, '\").'));\n      f = p;\n    }\n    if (f || t.multi || !l || (f = r ? l.undirected[a] : l.out[a]), f) {\n      var y = [f.key, !1, !1, !1];\n      if (d ? !h : !c) return y;\n      if (d) {\n        var w = f.attributes;\n        f.attributes = h(w), t.emit(\"edgeAttributesUpdated\", {\n          type: \"replace\",\n          key: f.key,\n          attributes: f.attributes\n        });\n      } else u(f.attributes, c), t.emit(\"edgeAttributesUpdated\", {\n        type: \"merge\",\n        key: f.key,\n        attributes: f.attributes,\n        data: c\n      });\n      return y;\n    }\n    c = c || {}, d && h && (c = h(c));\n    var v = {\n      key: null,\n      undirected: r,\n      source: o,\n      target: a,\n      attributes: c\n    };\n    if (n) i = t._edgeKeyGenerator();else if (i = \"\" + i, t._edges.has(i)) throw new I(\"Graph.\".concat(e, ': the \"').concat(i, '\" edge already exists in the graph.'));\n    var b = !1,\n      m = !1;\n    l || (l = Ot(t, o, {}), b = !0, o === a && (g = l, m = !0)), g || (g = Ot(t, a, {}), m = !0), p = new V(r, i, l, g, c), t._edges.set(i, p);\n    var k = o === a;\n    return r ? (l.undirectedDegree++, g.undirectedDegree++, k && (l.undirectedLoops++, t._undirectedSelfLoopCount++)) : (l.outDegree++, g.inDegree++, k && (l.directedLoops++, t._directedSelfLoopCount++)), t.multi ? p.attachMulti() : p.attach(), r ? t._undirectedSize++ : t._directedSize++, v.key = i, t.emit(\"edgeAdded\", v), [i, !0, b, m];\n  }\n  function Mt(t, e) {\n    t._edges.delete(e.key);\n    var n = e.source,\n      r = e.target,\n      i = e.attributes,\n      o = e.undirected,\n      a = n === r;\n    o ? (n.undirectedDegree--, r.undirectedDegree--, a && (n.undirectedLoops--, t._undirectedSelfLoopCount--)) : (n.outDegree--, r.inDegree--, a && (n.directedLoops--, t._directedSelfLoopCount--)), t.multi ? e.detachMulti() : e.detach(), o ? t._undirectedSize-- : t._directedSize--, t.emit(\"edgeDropped\", {\n      key: e.key,\n      attributes: i,\n      source: n.key,\n      target: r.key,\n      undirected: o\n    });\n  }\n  var zt = function (n) {\n    function r(t) {\n      var e;\n      if (e = n.call(this) || this, \"boolean\" != typeof (t = u({}, Nt, t)).multi) throw new B(\"Graph.constructor: invalid 'multi' option. Expecting a boolean but got \\\"\".concat(t.multi, '\".'));\n      if (!Dt.has(t.type)) throw new B('Graph.constructor: invalid \\'type\\' option. Should be one of \"mixed\", \"directed\" or \"undirected\" but got \"'.concat(t.type, '\".'));\n      if (\"boolean\" != typeof t.allowSelfLoops) throw new B(\"Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \\\"\".concat(t.allowSelfLoops, '\".'));\n      var r = \"mixed\" === t.type ? Y : \"directed\" === t.type ? q : J;\n      p(c(e), \"NodeDataClass\", r);\n      var i = \"geid_\" + St() + \"_\",\n        o = 0;\n      return p(c(e), \"_attributes\", {}), p(c(e), \"_nodes\", new Map()), p(c(e), \"_edges\", new Map()), p(c(e), \"_directedSize\", 0), p(c(e), \"_undirectedSize\", 0), p(c(e), \"_directedSelfLoopCount\", 0), p(c(e), \"_undirectedSelfLoopCount\", 0), p(c(e), \"_edgeKeyGenerator\", function () {\n        var t;\n        do {\n          t = i + o++;\n        } while (e._edges.has(t));\n        return t;\n      }), p(c(e), \"_options\", t), Ut.forEach(function (t) {\n        return p(c(e), t, e[t]);\n      }), f(c(e), \"order\", function () {\n        return e._nodes.size;\n      }), f(c(e), \"size\", function () {\n        return e._edges.size;\n      }), f(c(e), \"directedSize\", function () {\n        return e._directedSize;\n      }), f(c(e), \"undirectedSize\", function () {\n        return e._undirectedSize;\n      }), f(c(e), \"selfLoopCount\", function () {\n        return e._directedSelfLoopCount + e._undirectedSelfLoopCount;\n      }), f(c(e), \"directedSelfLoopCount\", function () {\n        return e._directedSelfLoopCount;\n      }), f(c(e), \"undirectedSelfLoopCount\", function () {\n        return e._undirectedSelfLoopCount;\n      }), f(c(e), \"multi\", e._options.multi), f(c(e), \"type\", e._options.type), f(c(e), \"allowSelfLoops\", e._options.allowSelfLoops), f(c(e), \"implementation\", function () {\n        return \"graphology\";\n      }), e;\n    }\n    e(r, n);\n    var i = r.prototype;\n    return i._resetInstanceCounters = function () {\n      this._directedSize = 0, this._undirectedSize = 0, this._directedSelfLoopCount = 0, this._undirectedSelfLoopCount = 0;\n    }, i.hasNode = function (t) {\n      return this._nodes.has(\"\" + t);\n    }, i.hasDirectedEdge = function (t, e) {\n      if (\"undirected\" === this.type) return !1;\n      if (1 === arguments.length) {\n        var n = \"\" + t,\n          r = this._edges.get(n);\n        return !!r && !r.undirected;\n      }\n      if (2 === arguments.length) {\n        t = \"\" + t, e = \"\" + e;\n        var i = this._nodes.get(t);\n        return !!i && i.out.hasOwnProperty(e);\n      }\n      throw new B(\"Graph.hasDirectedEdge: invalid arity (\".concat(arguments.length, \", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.\"));\n    }, i.hasUndirectedEdge = function (t, e) {\n      if (\"directed\" === this.type) return !1;\n      if (1 === arguments.length) {\n        var n = \"\" + t,\n          r = this._edges.get(n);\n        return !!r && r.undirected;\n      }\n      if (2 === arguments.length) {\n        t = \"\" + t, e = \"\" + e;\n        var i = this._nodes.get(t);\n        return !!i && i.undirected.hasOwnProperty(e);\n      }\n      throw new B(\"Graph.hasDirectedEdge: invalid arity (\".concat(arguments.length, \", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.\"));\n    }, i.hasEdge = function (t, e) {\n      if (1 === arguments.length) {\n        var n = \"\" + t;\n        return this._edges.has(n);\n      }\n      if (2 === arguments.length) {\n        t = \"\" + t, e = \"\" + e;\n        var r = this._nodes.get(t);\n        return !!r && (void 0 !== r.out && r.out.hasOwnProperty(e) || void 0 !== r.undirected && r.undirected.hasOwnProperty(e));\n      }\n      throw new B(\"Graph.hasEdge: invalid arity (\".concat(arguments.length, \", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.\"));\n    }, i.directedEdge = function (t, e) {\n      if (\"undirected\" !== this.type) {\n        if (t = \"\" + t, e = \"\" + e, this.multi) throw new I(\"Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.\");\n        var n = this._nodes.get(t);\n        if (!n) throw new F('Graph.directedEdge: could not find the \"'.concat(t, '\" source node in the graph.'));\n        if (!this._nodes.has(e)) throw new F('Graph.directedEdge: could not find the \"'.concat(e, '\" target node in the graph.'));\n        var r = n.out && n.out[e] || void 0;\n        return r ? r.key : void 0;\n      }\n    }, i.undirectedEdge = function (t, e) {\n      if (\"directed\" !== this.type) {\n        if (t = \"\" + t, e = \"\" + e, this.multi) throw new I(\"Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.\");\n        var n = this._nodes.get(t);\n        if (!n) throw new F('Graph.undirectedEdge: could not find the \"'.concat(t, '\" source node in the graph.'));\n        if (!this._nodes.has(e)) throw new F('Graph.undirectedEdge: could not find the \"'.concat(e, '\" target node in the graph.'));\n        var r = n.undirected && n.undirected[e] || void 0;\n        return r ? r.key : void 0;\n      }\n    }, i.edge = function (t, e) {\n      if (this.multi) throw new I(\"Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.\");\n      t = \"\" + t, e = \"\" + e;\n      var n = this._nodes.get(t);\n      if (!n) throw new F('Graph.edge: could not find the \"'.concat(t, '\" source node in the graph.'));\n      if (!this._nodes.has(e)) throw new F('Graph.edge: could not find the \"'.concat(e, '\" target node in the graph.'));\n      var r = n.out && n.out[e] || n.undirected && n.undirected[e] || void 0;\n      if (r) return r.key;\n    }, i.areDirectedNeighbors = function (t, e) {\n      t = \"\" + t, e = \"\" + e;\n      var n = this._nodes.get(t);\n      if (!n) throw new F('Graph.areDirectedNeighbors: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" !== this.type && (e in n.in || e in n.out);\n    }, i.areOutNeighbors = function (t, e) {\n      t = \"\" + t, e = \"\" + e;\n      var n = this._nodes.get(t);\n      if (!n) throw new F('Graph.areOutNeighbors: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" !== this.type && e in n.out;\n    }, i.areInNeighbors = function (t, e) {\n      t = \"\" + t, e = \"\" + e;\n      var n = this._nodes.get(t);\n      if (!n) throw new F('Graph.areInNeighbors: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" !== this.type && e in n.in;\n    }, i.areUndirectedNeighbors = function (t, e) {\n      t = \"\" + t, e = \"\" + e;\n      var n = this._nodes.get(t);\n      if (!n) throw new F('Graph.areUndirectedNeighbors: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"directed\" !== this.type && e in n.undirected;\n    }, i.areNeighbors = function (t, e) {\n      t = \"\" + t, e = \"\" + e;\n      var n = this._nodes.get(t);\n      if (!n) throw new F('Graph.areNeighbors: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" !== this.type && (e in n.in || e in n.out) || \"directed\" !== this.type && e in n.undirected;\n    }, i.areInboundNeighbors = function (t, e) {\n      t = \"\" + t, e = \"\" + e;\n      var n = this._nodes.get(t);\n      if (!n) throw new F('Graph.areInboundNeighbors: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" !== this.type && e in n.in || \"directed\" !== this.type && e in n.undirected;\n    }, i.areOutboundNeighbors = function (t, e) {\n      t = \"\" + t, e = \"\" + e;\n      var n = this._nodes.get(t);\n      if (!n) throw new F('Graph.areOutboundNeighbors: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" !== this.type && e in n.out || \"directed\" !== this.type && e in n.undirected;\n    }, i.inDegree = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.inDegree: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" === this.type ? 0 : e.inDegree;\n    }, i.outDegree = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.outDegree: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" === this.type ? 0 : e.outDegree;\n    }, i.directedDegree = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.directedDegree: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" === this.type ? 0 : e.inDegree + e.outDegree;\n    }, i.undirectedDegree = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.undirectedDegree: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"directed\" === this.type ? 0 : e.undirectedDegree;\n    }, i.inboundDegree = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.inboundDegree: could not find the \"'.concat(t, '\" node in the graph.'));\n      var n = 0;\n      return \"directed\" !== this.type && (n += e.undirectedDegree), \"undirected\" !== this.type && (n += e.inDegree), n;\n    }, i.outboundDegree = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.outboundDegree: could not find the \"'.concat(t, '\" node in the graph.'));\n      var n = 0;\n      return \"directed\" !== this.type && (n += e.undirectedDegree), \"undirected\" !== this.type && (n += e.outDegree), n;\n    }, i.degree = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.degree: could not find the \"'.concat(t, '\" node in the graph.'));\n      var n = 0;\n      return \"directed\" !== this.type && (n += e.undirectedDegree), \"undirected\" !== this.type && (n += e.inDegree + e.outDegree), n;\n    }, i.inDegreeWithoutSelfLoops = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.inDegreeWithoutSelfLoops: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" === this.type ? 0 : e.inDegree - e.directedLoops;\n    }, i.outDegreeWithoutSelfLoops = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.outDegreeWithoutSelfLoops: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" === this.type ? 0 : e.outDegree - e.directedLoops;\n    }, i.directedDegreeWithoutSelfLoops = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.directedDegreeWithoutSelfLoops: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"undirected\" === this.type ? 0 : e.inDegree + e.outDegree - 2 * e.directedLoops;\n    }, i.undirectedDegreeWithoutSelfLoops = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.undirectedDegreeWithoutSelfLoops: could not find the \"'.concat(t, '\" node in the graph.'));\n      return \"directed\" === this.type ? 0 : e.undirectedDegree - 2 * e.undirectedLoops;\n    }, i.inboundDegreeWithoutSelfLoops = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.inboundDegreeWithoutSelfLoops: could not find the \"'.concat(t, '\" node in the graph.'));\n      var n = 0,\n        r = 0;\n      return \"directed\" !== this.type && (n += e.undirectedDegree, r += 2 * e.undirectedLoops), \"undirected\" !== this.type && (n += e.inDegree, r += e.directedLoops), n - r;\n    }, i.outboundDegreeWithoutSelfLoops = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.outboundDegreeWithoutSelfLoops: could not find the \"'.concat(t, '\" node in the graph.'));\n      var n = 0,\n        r = 0;\n      return \"directed\" !== this.type && (n += e.undirectedDegree, r += 2 * e.undirectedLoops), \"undirected\" !== this.type && (n += e.outDegree, r += e.directedLoops), n - r;\n    }, i.degreeWithoutSelfLoops = function (t) {\n      t = \"\" + t;\n      var e = this._nodes.get(t);\n      if (!e) throw new F('Graph.degreeWithoutSelfLoops: could not find the \"'.concat(t, '\" node in the graph.'));\n      var n = 0,\n        r = 0;\n      return \"directed\" !== this.type && (n += e.undirectedDegree, r += 2 * e.undirectedLoops), \"undirected\" !== this.type && (n += e.inDegree + e.outDegree, r += 2 * e.directedLoops), n - r;\n    }, i.source = function (t) {\n      t = \"\" + t;\n      var e = this._edges.get(t);\n      if (!e) throw new F('Graph.source: could not find the \"'.concat(t, '\" edge in the graph.'));\n      return e.source.key;\n    }, i.target = function (t) {\n      t = \"\" + t;\n      var e = this._edges.get(t);\n      if (!e) throw new F('Graph.target: could not find the \"'.concat(t, '\" edge in the graph.'));\n      return e.target.key;\n    }, i.extremities = function (t) {\n      t = \"\" + t;\n      var e = this._edges.get(t);\n      if (!e) throw new F('Graph.extremities: could not find the \"'.concat(t, '\" edge in the graph.'));\n      return [e.source.key, e.target.key];\n    }, i.opposite = function (t, e) {\n      t = \"\" + t, e = \"\" + e;\n      var n = this._edges.get(e);\n      if (!n) throw new F('Graph.opposite: could not find the \"'.concat(e, '\" edge in the graph.'));\n      var r = n.source.key,\n        i = n.target.key;\n      if (t === r) return i;\n      if (t === i) return r;\n      throw new F('Graph.opposite: the \"'.concat(t, '\" node is not attached to the \"').concat(e, '\" edge (').concat(r, \", \").concat(i, \").\"));\n    }, i.hasExtremity = function (t, e) {\n      t = \"\" + t, e = \"\" + e;\n      var n = this._edges.get(t);\n      if (!n) throw new F('Graph.hasExtremity: could not find the \"'.concat(t, '\" edge in the graph.'));\n      return n.source.key === e || n.target.key === e;\n    }, i.isUndirected = function (t) {\n      t = \"\" + t;\n      var e = this._edges.get(t);\n      if (!e) throw new F('Graph.isUndirected: could not find the \"'.concat(t, '\" edge in the graph.'));\n      return e.undirected;\n    }, i.isDirected = function (t) {\n      t = \"\" + t;\n      var e = this._edges.get(t);\n      if (!e) throw new F('Graph.isDirected: could not find the \"'.concat(t, '\" edge in the graph.'));\n      return !e.undirected;\n    }, i.isSelfLoop = function (t) {\n      t = \"\" + t;\n      var e = this._edges.get(t);\n      if (!e) throw new F('Graph.isSelfLoop: could not find the \"'.concat(t, '\" edge in the graph.'));\n      return e.source === e.target;\n    }, i.addNode = function (t, e) {\n      var n = function (t, e, n) {\n        if (n && !s(n)) throw new B('Graph.addNode: invalid attributes. Expecting an object but got \"'.concat(n, '\"'));\n        if (e = \"\" + e, n = n || {}, t._nodes.has(e)) throw new I('Graph.addNode: the \"'.concat(e, '\" node already exist in the graph.'));\n        var r = new t.NodeDataClass(e, n);\n        return t._nodes.set(e, r), t.emit(\"nodeAdded\", {\n          key: e,\n          attributes: n\n        }), r;\n      }(this, t, e);\n      return n.key;\n    }, i.mergeNode = function (t, e) {\n      if (e && !s(e)) throw new B('Graph.mergeNode: invalid attributes. Expecting an object but got \"'.concat(e, '\"'));\n      t = \"\" + t, e = e || {};\n      var n = this._nodes.get(t);\n      return n ? (e && (u(n.attributes, e), this.emit(\"nodeAttributesUpdated\", {\n        type: \"merge\",\n        key: t,\n        attributes: n.attributes,\n        data: e\n      })), [t, !1]) : (n = new this.NodeDataClass(t, e), this._nodes.set(t, n), this.emit(\"nodeAdded\", {\n        key: t,\n        attributes: e\n      }), [t, !0]);\n    }, i.updateNode = function (t, e) {\n      if (e && \"function\" != typeof e) throw new B('Graph.updateNode: invalid updater function. Expecting a function but got \"'.concat(e, '\"'));\n      t = \"\" + t;\n      var n = this._nodes.get(t);\n      if (n) {\n        if (e) {\n          var r = n.attributes;\n          n.attributes = e(r), this.emit(\"nodeAttributesUpdated\", {\n            type: \"replace\",\n            key: t,\n            attributes: n.attributes\n          });\n        }\n        return [t, !1];\n      }\n      var i = e ? e({}) : {};\n      return n = new this.NodeDataClass(t, i), this._nodes.set(t, n), this.emit(\"nodeAdded\", {\n        key: t,\n        attributes: i\n      }), [t, !0];\n    }, i.dropNode = function (t) {\n      t = \"\" + t;\n      var e,\n        n = this._nodes.get(t);\n      if (!n) throw new F('Graph.dropNode: could not find the \"'.concat(t, '\" node in the graph.'));\n      if (\"undirected\" !== this.type) {\n        for (var r in n.out) {\n          e = n.out[r];\n          do {\n            Mt(this, e), e = e.next;\n          } while (e);\n        }\n        for (var i in n.in) {\n          e = n.in[i];\n          do {\n            Mt(this, e), e = e.next;\n          } while (e);\n        }\n      }\n      if (\"directed\" !== this.type) for (var o in n.undirected) {\n        e = n.undirected[o];\n        do {\n          Mt(this, e), e = e.next;\n        } while (e);\n      }\n      this._nodes.delete(t), this.emit(\"nodeDropped\", {\n        key: t,\n        attributes: n.attributes\n      });\n    }, i.dropEdge = function (t) {\n      var e;\n      if (arguments.length > 1) {\n        var n = \"\" + arguments[0],\n          r = \"\" + arguments[1];\n        if (!(e = d(this, n, r, this.type))) throw new F('Graph.dropEdge: could not find the \"'.concat(n, '\" -> \"').concat(r, '\" edge in the graph.'));\n      } else if (t = \"\" + t, !(e = this._edges.get(t))) throw new F('Graph.dropEdge: could not find the \"'.concat(t, '\" edge in the graph.'));\n      return Mt(this, e), this;\n    }, i.dropDirectedEdge = function (t, e) {\n      if (arguments.length < 2) throw new I(\"Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.\");\n      if (this.multi) throw new I(\"Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.\");\n      var n = d(this, t = \"\" + t, e = \"\" + e, \"directed\");\n      if (!n) throw new F('Graph.dropDirectedEdge: could not find a \"'.concat(t, '\" -> \"').concat(e, '\" edge in the graph.'));\n      return Mt(this, n), this;\n    }, i.dropUndirectedEdge = function (t, e) {\n      if (arguments.length < 2) throw new I(\"Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.\");\n      if (this.multi) throw new I(\"Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.\");\n      var n = d(this, t, e, \"undirected\");\n      if (!n) throw new F('Graph.dropUndirectedEdge: could not find a \"'.concat(t, '\" -> \"').concat(e, '\" edge in the graph.'));\n      return Mt(this, n), this;\n    }, i.clear = function () {\n      this._edges.clear(), this._nodes.clear(), this._resetInstanceCounters(), this.emit(\"cleared\");\n    }, i.clearEdges = function () {\n      for (var t, e = this._nodes.values(); !0 !== (t = e.next()).done;) {\n        t.value.clear();\n      }\n      this._edges.clear(), this._resetInstanceCounters(), this.emit(\"edgesCleared\");\n    }, i.getAttribute = function (t) {\n      return this._attributes[t];\n    }, i.getAttributes = function () {\n      return this._attributes;\n    }, i.hasAttribute = function (t) {\n      return this._attributes.hasOwnProperty(t);\n    }, i.setAttribute = function (t, e) {\n      return this._attributes[t] = e, this.emit(\"attributesUpdated\", {\n        type: \"set\",\n        attributes: this._attributes,\n        name: t\n      }), this;\n    }, i.updateAttribute = function (t, e) {\n      if (\"function\" != typeof e) throw new B(\"Graph.updateAttribute: updater should be a function.\");\n      var n = this._attributes[t];\n      return this._attributes[t] = e(n), this.emit(\"attributesUpdated\", {\n        type: \"set\",\n        attributes: this._attributes,\n        name: t\n      }), this;\n    }, i.removeAttribute = function (t) {\n      return delete this._attributes[t], this.emit(\"attributesUpdated\", {\n        type: \"remove\",\n        attributes: this._attributes,\n        name: t\n      }), this;\n    }, i.replaceAttributes = function (t) {\n      if (!s(t)) throw new B(\"Graph.replaceAttributes: provided attributes are not a plain object.\");\n      return this._attributes = t, this.emit(\"attributesUpdated\", {\n        type: \"replace\",\n        attributes: this._attributes\n      }), this;\n    }, i.mergeAttributes = function (t) {\n      if (!s(t)) throw new B(\"Graph.mergeAttributes: provided attributes are not a plain object.\");\n      return u(this._attributes, t), this.emit(\"attributesUpdated\", {\n        type: \"merge\",\n        attributes: this._attributes,\n        data: t\n      }), this;\n    }, i.updateAttributes = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.updateAttributes: provided updater is not a function.\");\n      return this._attributes = t(this._attributes), this.emit(\"attributesUpdated\", {\n        type: \"update\",\n        attributes: this._attributes\n      }), this;\n    }, i.updateEachNodeAttributes = function (t, e) {\n      if (\"function\" != typeof t) throw new B(\"Graph.updateEachNodeAttributes: expecting an updater function.\");\n      if (e && !l(e)) throw new B(\"Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}\");\n      for (var n, r, i = this._nodes.values(); !0 !== (n = i.next()).done;) {\n        (r = n.value).attributes = t(r.key, r.attributes);\n      }\n      this.emit(\"eachNodeAttributesUpdated\", {\n        hints: e || null\n      });\n    }, i.updateEachEdgeAttributes = function (t, e) {\n      if (\"function\" != typeof t) throw new B(\"Graph.updateEachEdgeAttributes: expecting an updater function.\");\n      if (e && !l(e)) throw new B(\"Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}\");\n      for (var n, r, i, o, a = this._edges.values(); !0 !== (n = a.next()).done;) {\n        i = (r = n.value).source, o = r.target, r.attributes = t(r.key, r.attributes, i.key, o.key, i.attributes, o.attributes, r.undirected);\n      }\n      this.emit(\"eachEdgeAttributesUpdated\", {\n        hints: e || null\n      });\n    }, i.forEachAdjacencyEntry = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.forEachAdjacencyEntry: expecting a callback.\");\n      xt(!1, !1, !1, this, t);\n    }, i.forEachAdjacencyEntryWithOrphans = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.\");\n      xt(!1, !1, !0, this, t);\n    }, i.forEachAssymetricAdjacencyEntry = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.forEachAssymetricAdjacencyEntry: expecting a callback.\");\n      xt(!1, !0, !1, this, t);\n    }, i.forEachAssymetricAdjacencyEntryWithOrphans = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.\");\n      xt(!1, !0, !0, this, t);\n    }, i.nodes = function () {\n      return \"function\" == typeof Array.from ? Array.from(this._nodes.keys()) : K(this._nodes.keys(), this._nodes.size);\n    }, i.forEachNode = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.forEachNode: expecting a callback.\");\n      for (var e, n, r = this._nodes.values(); !0 !== (e = r.next()).done;) {\n        t((n = e.value).key, n.attributes);\n      }\n    }, i.findNode = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.findNode: expecting a callback.\");\n      for (var e, n, r = this._nodes.values(); !0 !== (e = r.next()).done;) {\n        if (t((n = e.value).key, n.attributes)) return n.key;\n      }\n    }, i.mapNodes = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.mapNode: expecting a callback.\");\n      for (var e, n, r = this._nodes.values(), i = new Array(this.order), o = 0; !0 !== (e = r.next()).done;) {\n        n = e.value, i[o++] = t(n.key, n.attributes);\n      }\n      return i;\n    }, i.someNode = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.someNode: expecting a callback.\");\n      for (var e, n, r = this._nodes.values(); !0 !== (e = r.next()).done;) {\n        if (t((n = e.value).key, n.attributes)) return !0;\n      }\n      return !1;\n    }, i.everyNode = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.everyNode: expecting a callback.\");\n      for (var e, n, r = this._nodes.values(); !0 !== (e = r.next()).done;) {\n        if (!t((n = e.value).key, n.attributes)) return !1;\n      }\n      return !0;\n    }, i.filterNodes = function (t) {\n      if (\"function\" != typeof t) throw new B(\"Graph.filterNodes: expecting a callback.\");\n      for (var e, n, r = this._nodes.values(), i = []; !0 !== (e = r.next()).done;) {\n        t((n = e.value).key, n.attributes) && i.push(n.key);\n      }\n      return i;\n    }, i.reduceNodes = function (t, e) {\n      if (\"function\" != typeof t) throw new B(\"Graph.reduceNodes: expecting a callback.\");\n      if (arguments.length < 2) throw new B(\"Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.\");\n      for (var n, r, i = e, o = this._nodes.values(); !0 !== (n = o.next()).done;) {\n        i = t(i, (r = n.value).key, r.attributes);\n      }\n      return i;\n    }, i.nodeEntries = function () {\n      var t = this._nodes.values();\n      return new O(function () {\n        var e = t.next();\n        if (e.done) return e;\n        var n = e.value;\n        return {\n          value: {\n            node: n.key,\n            attributes: n.attributes\n          },\n          done: !1\n        };\n      });\n    }, i.export = function () {\n      var t = this,\n        e = new Array(this._nodes.size),\n        n = 0;\n      this._nodes.forEach(function (t, r) {\n        e[n++] = function (t, e) {\n          var n = {\n            key: t\n          };\n          return h(e.attributes) || (n.attributes = u({}, e.attributes)), n;\n        }(r, t);\n      });\n      var r = new Array(this._edges.size);\n      return n = 0, this._edges.forEach(function (e, i) {\n        r[n++] = function (t, e, n) {\n          var r = {\n            key: e,\n            source: n.source.key,\n            target: n.target.key\n          };\n          return h(n.attributes) || (r.attributes = u({}, n.attributes)), \"mixed\" === t && n.undirected && (r.undirected = !0), r;\n        }(t.type, i, e);\n      }), {\n        options: {\n          type: this.type,\n          multi: this.multi,\n          allowSelfLoops: this.allowSelfLoops\n        },\n        attributes: this.getAttributes(),\n        nodes: e,\n        edges: r\n      };\n    }, i.import = function (t) {\n      var e,\n        n,\n        i,\n        o,\n        a,\n        c = this,\n        u = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];\n      if (t instanceof r) return t.forEachNode(function (t, e) {\n        u ? c.mergeNode(t, e) : c.addNode(t, e);\n      }), t.forEachEdge(function (t, e, n, r, i, o, a) {\n        u ? a ? c.mergeUndirectedEdgeWithKey(t, n, r, e) : c.mergeDirectedEdgeWithKey(t, n, r, e) : a ? c.addUndirectedEdgeWithKey(t, n, r, e) : c.addDirectedEdgeWithKey(t, n, r, e);\n      }), this;\n      if (!s(t)) throw new B(\"Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.\");\n      if (t.attributes) {\n        if (!s(t.attributes)) throw new B(\"Graph.import: invalid attributes. Expecting a plain object.\");\n        u ? this.mergeAttributes(t.attributes) : this.replaceAttributes(t.attributes);\n      }\n      if (t.nodes) {\n        if (i = t.nodes, !Array.isArray(i)) throw new B(\"Graph.import: invalid nodes. Expecting an array.\");\n        for (e = 0, n = i.length; e < n; e++) {\n          Et(o = i[e]);\n          var d = o,\n            h = d.key,\n            p = d.attributes;\n          u ? this.mergeNode(h, p) : this.addNode(h, p);\n        }\n      }\n      if (t.edges) {\n        var f = !1;\n        if (\"undirected\" === this.type && (f = !0), i = t.edges, !Array.isArray(i)) throw new B(\"Graph.import: invalid edges. Expecting an array.\");\n        for (e = 0, n = i.length; e < n; e++) {\n          At(a = i[e]);\n          var l = a,\n            g = l.source,\n            y = l.target,\n            w = l.attributes,\n            v = l.undirected,\n            b = void 0 === v ? f : v;\n          \"key\" in a ? (u ? b ? this.mergeUndirectedEdgeWithKey : this.mergeDirectedEdgeWithKey : b ? this.addUndirectedEdgeWithKey : this.addDirectedEdgeWithKey).call(this, a.key, g, y, w) : (u ? b ? this.mergeUndirectedEdge : this.mergeDirectedEdge : b ? this.addUndirectedEdge : this.addDirectedEdge).call(this, g, y, w);\n        }\n      }\n      return this;\n    }, i.nullCopy = function (t) {\n      var e = new r(u({}, this._options, t));\n      return e.replaceAttributes(u({}, this.getAttributes())), e;\n    }, i.emptyCopy = function (t) {\n      var e = this.nullCopy(t);\n      return this._nodes.forEach(function (t, n) {\n        var r = u({}, t.attributes);\n        t = new e.NodeDataClass(n, r), e._nodes.set(n, t);\n      }), e;\n    }, i.copy = function (t) {\n      if (\"string\" == typeof (t = t || {}).type && t.type !== this.type && \"mixed\" !== t.type) throw new I('Graph.copy: cannot create an incompatible copy from \"'.concat(this.type, '\" type to \"').concat(t.type, '\" because this would mean losing information about the current graph.'));\n      if (\"boolean\" == typeof t.multi && t.multi !== this.multi && !0 !== t.multi) throw new I(\"Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.\");\n      if (\"boolean\" == typeof t.allowSelfLoops && t.allowSelfLoops !== this.allowSelfLoops && !0 !== t.allowSelfLoops) throw new I(\"Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.\");\n      for (var e, n, r = this.emptyCopy(t), i = this._edges.values(); !0 !== (e = i.next()).done;) {\n        jt(r, \"copy\", !1, (n = e.value).undirected, n.key, n.source.key, n.target.key, u({}, n.attributes));\n      }\n      return r;\n    }, i.toJSON = function () {\n      return this.export();\n    }, i.toString = function () {\n      return \"[object Graph]\";\n    }, i.inspect = function () {\n      var e = this,\n        n = {};\n      this._nodes.forEach(function (t, e) {\n        n[e] = t.attributes;\n      });\n      var r = {},\n        i = {};\n      this._edges.forEach(function (t, n) {\n        var o,\n          a = t.undirected ? \"--\" : \"->\",\n          c = \"\",\n          u = t.source.key,\n          d = t.target.key;\n        t.undirected && u > d && (o = u, u = d, d = o);\n        var s = \"(\".concat(u, \")\").concat(a, \"(\").concat(d, \")\");\n        n.startsWith(\"geid_\") ? e.multi && (void 0 === i[s] ? i[s] = 0 : i[s]++, c += \"\".concat(i[s], \". \")) : c += \"[\".concat(n, \"]: \"), r[c += s] = t.attributes;\n      });\n      var o = {};\n      for (var a in this) {\n        this.hasOwnProperty(a) && !Ut.has(a) && \"function\" != typeof this[a] && \"symbol\" !== t(a) && (o[a] = this[a]);\n      }\n      return o.attributes = this._attributes, o.nodes = n, o.edges = r, p(o, \"constructor\", this.constructor), o;\n    }, r;\n  }(y.exports.EventEmitter);\n  \"undefined\" != typeof Symbol && (zt.prototype[Symbol.for(\"nodejs.util.inspect.custom\")] = zt.prototype.inspect), [{\n    name: function name(t) {\n      return \"\".concat(t, \"Edge\");\n    },\n    generateKey: !0\n  }, {\n    name: function name(t) {\n      return \"\".concat(t, \"DirectedEdge\");\n    },\n    generateKey: !0,\n    type: \"directed\"\n  }, {\n    name: function name(t) {\n      return \"\".concat(t, \"UndirectedEdge\");\n    },\n    generateKey: !0,\n    type: \"undirected\"\n  }, {\n    name: function name(t) {\n      return \"\".concat(t, \"EdgeWithKey\");\n    }\n  }, {\n    name: function name(t) {\n      return \"\".concat(t, \"DirectedEdgeWithKey\");\n    },\n    type: \"directed\"\n  }, {\n    name: function name(t) {\n      return \"\".concat(t, \"UndirectedEdgeWithKey\");\n    },\n    type: \"undirected\"\n  }].forEach(function (t) {\n    [\"add\", \"merge\", \"update\"].forEach(function (e) {\n      var n = t.name(e),\n        r = \"add\" === e ? jt : Ct;\n      t.generateKey ? zt.prototype[n] = function (i, o, a) {\n        return r(this, n, !0, \"undirected\" === (t.type || this.type), null, i, o, a, \"update\" === e);\n      } : zt.prototype[n] = function (i, o, a, c) {\n        return r(this, n, !1, \"undirected\" === (t.type || this.type), i, o, a, c, \"update\" === e);\n      };\n    });\n  }), function (t) {\n    Q.forEach(function (e) {\n      var n = e.name,\n        r = e.attacher;\n      r(t, n(\"Node\"), 0), r(t, n(\"Source\"), 1), r(t, n(\"Target\"), 2), r(t, n(\"Opposite\"), 3);\n    });\n  }(zt), function (t) {\n    X.forEach(function (e) {\n      var n = e.name,\n        r = e.attacher;\n      r(t, n(\"Edge\"), \"mixed\"), r(t, n(\"DirectedEdge\"), \"directed\"), r(t, n(\"UndirectedEdge\"), \"undirected\");\n    });\n  }(zt), function (t) {\n    et.forEach(function (e) {\n      !function (t, e) {\n        var n = e.name,\n          r = e.type,\n          i = e.direction;\n        t.prototype[n] = function (t, e) {\n          if (\"mixed\" !== r && \"mixed\" !== this.type && r !== this.type) return [];\n          if (!arguments.length) return ut(this, r);\n          if (1 === arguments.length) {\n            t = \"\" + t;\n            var o = this._nodes.get(t);\n            if (void 0 === o) throw new F(\"Graph.\".concat(n, ': could not find the \"').concat(t, '\" node in the graph.'));\n            return pt(this.multi, \"mixed\" === r ? this.type : r, i, o);\n          }\n          if (2 === arguments.length) {\n            t = \"\" + t, e = \"\" + e;\n            var a = this._nodes.get(t);\n            if (!a) throw new F(\"Graph.\".concat(n, ':  could not find the \"').concat(t, '\" source node in the graph.'));\n            if (!this._nodes.has(e)) throw new F(\"Graph.\".concat(n, ':  could not find the \"').concat(e, '\" target node in the graph.'));\n            return gt(r, this.multi, i, a, e);\n          }\n          throw new B(\"Graph.\".concat(n, \": too many arguments (expecting 0, 1 or 2 and got \").concat(arguments.length, \").\"));\n        };\n      }(t, e), function (t, e) {\n        var n = e.name,\n          r = e.type,\n          i = e.direction,\n          o = \"forEach\" + n[0].toUpperCase() + n.slice(1, -1);\n        t.prototype[o] = function (t, e, n) {\n          if (\"mixed\" === r || \"mixed\" === this.type || r === this.type) {\n            if (1 === arguments.length) return dt(!1, this, r, n = t);\n            if (2 === arguments.length) {\n              t = \"\" + t, n = e;\n              var a = this._nodes.get(t);\n              if (void 0 === a) throw new F(\"Graph.\".concat(o, ': could not find the \"').concat(t, '\" node in the graph.'));\n              return ht(!1, this.multi, \"mixed\" === r ? this.type : r, i, a, n);\n            }\n            if (3 === arguments.length) {\n              t = \"\" + t, e = \"\" + e;\n              var c = this._nodes.get(t);\n              if (!c) throw new F(\"Graph.\".concat(o, ':  could not find the \"').concat(t, '\" source node in the graph.'));\n              if (!this._nodes.has(e)) throw new F(\"Graph.\".concat(o, ':  could not find the \"').concat(e, '\" target node in the graph.'));\n              return lt(!1, r, this.multi, i, c, e, n);\n            }\n            throw new B(\"Graph.\".concat(o, \": too many arguments (expecting 1, 2 or 3 and got \").concat(arguments.length, \").\"));\n          }\n        };\n        var a = \"map\" + n[0].toUpperCase() + n.slice(1);\n        t.prototype[a] = function () {\n          var t,\n            e = Array.prototype.slice.call(arguments),\n            n = e.pop();\n          if (0 === e.length) {\n            var i = 0;\n            \"directed\" !== r && (i += this.undirectedSize), \"undirected\" !== r && (i += this.directedSize), t = new Array(i);\n            var a = 0;\n            e.push(function (e, r, i, o, c, u, d) {\n              t[a++] = n(e, r, i, o, c, u, d);\n            });\n          } else t = [], e.push(function (e, r, i, o, a, c, u) {\n            t.push(n(e, r, i, o, a, c, u));\n          });\n          return this[o].apply(this, e), t;\n        };\n        var c = \"filter\" + n[0].toUpperCase() + n.slice(1);\n        t.prototype[c] = function () {\n          var t = Array.prototype.slice.call(arguments),\n            e = t.pop(),\n            n = [];\n          return t.push(function (t, r, i, o, a, c, u) {\n            e(t, r, i, o, a, c, u) && n.push(t);\n          }), this[o].apply(this, t), n;\n        };\n        var u = \"reduce\" + n[0].toUpperCase() + n.slice(1);\n        t.prototype[u] = function () {\n          var t,\n            e,\n            n = Array.prototype.slice.call(arguments);\n          if (n.length < 2 || n.length > 4) throw new B(\"Graph.\".concat(u, \": invalid number of arguments (expecting 2, 3 or 4 and got \").concat(n.length, \").\"));\n          if (\"function\" == typeof n[n.length - 1] && \"function\" != typeof n[n.length - 2]) throw new B(\"Graph.\".concat(u, \": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.\"));\n          2 === n.length ? (t = n[0], e = n[1], n = []) : 3 === n.length ? (t = n[1], e = n[2], n = [n[0]]) : 4 === n.length && (t = n[2], e = n[3], n = [n[0], n[1]]);\n          var r = e;\n          return n.push(function (e, n, i, o, a, c, u) {\n            r = t(r, e, n, i, o, a, c, u);\n          }), this[o].apply(this, n), r;\n        };\n      }(t, e), function (t, e) {\n        var n = e.name,\n          r = e.type,\n          i = e.direction,\n          o = \"find\" + n[0].toUpperCase() + n.slice(1, -1);\n        t.prototype[o] = function (t, e, n) {\n          if (\"mixed\" !== r && \"mixed\" !== this.type && r !== this.type) return !1;\n          if (1 === arguments.length) return dt(!0, this, r, n = t);\n          if (2 === arguments.length) {\n            t = \"\" + t, n = e;\n            var a = this._nodes.get(t);\n            if (void 0 === a) throw new F(\"Graph.\".concat(o, ': could not find the \"').concat(t, '\" node in the graph.'));\n            return ht(!0, this.multi, \"mixed\" === r ? this.type : r, i, a, n);\n          }\n          if (3 === arguments.length) {\n            t = \"\" + t, e = \"\" + e;\n            var c = this._nodes.get(t);\n            if (!c) throw new F(\"Graph.\".concat(o, ':  could not find the \"').concat(t, '\" source node in the graph.'));\n            if (!this._nodes.has(e)) throw new F(\"Graph.\".concat(o, ':  could not find the \"').concat(e, '\" target node in the graph.'));\n            return lt(!0, r, this.multi, i, c, e, n);\n          }\n          throw new B(\"Graph.\".concat(o, \": too many arguments (expecting 1, 2 or 3 and got \").concat(arguments.length, \").\"));\n        };\n        var a = \"some\" + n[0].toUpperCase() + n.slice(1, -1);\n        t.prototype[a] = function () {\n          var t = Array.prototype.slice.call(arguments),\n            e = t.pop();\n          return t.push(function (t, n, r, i, o, a, c) {\n            return e(t, n, r, i, o, a, c);\n          }), !!this[o].apply(this, t);\n        };\n        var c = \"every\" + n[0].toUpperCase() + n.slice(1, -1);\n        t.prototype[c] = function () {\n          var t = Array.prototype.slice.call(arguments),\n            e = t.pop();\n          return t.push(function (t, n, r, i, o, a, c) {\n            return !e(t, n, r, i, o, a, c);\n          }), !this[o].apply(this, t);\n        };\n      }(t, e), function (t, e) {\n        var n = e.name,\n          r = e.type,\n          i = e.direction,\n          o = n.slice(0, -1) + \"Entries\";\n        t.prototype[o] = function (t, e) {\n          if (\"mixed\" !== r && \"mixed\" !== this.type && r !== this.type) return O.empty();\n          if (!arguments.length) return st(this, r);\n          if (1 === arguments.length) {\n            t = \"\" + t;\n            var n = this._nodes.get(t);\n            if (!n) throw new F(\"Graph.\".concat(o, ': could not find the \"').concat(t, '\" node in the graph.'));\n            return ft(r, i, n);\n          }\n          if (2 === arguments.length) {\n            t = \"\" + t, e = \"\" + e;\n            var a = this._nodes.get(t);\n            if (!a) throw new F(\"Graph.\".concat(o, ':  could not find the \"').concat(t, '\" source node in the graph.'));\n            if (!this._nodes.has(e)) throw new F(\"Graph.\".concat(o, ':  could not find the \"').concat(e, '\" target node in the graph.'));\n            return yt(r, i, a, e);\n          }\n          throw new B(\"Graph.\".concat(o, \": too many arguments (expecting 0, 1 or 2 and got \").concat(arguments.length, \").\"));\n        };\n      }(t, e);\n    });\n  }(zt), function (t) {\n    wt.forEach(function (e) {\n      _t(t, e), function (t, e) {\n        var n = e.name,\n          r = e.type,\n          i = e.direction,\n          o = \"forEach\" + n[0].toUpperCase() + n.slice(1, -1);\n        t.prototype[o] = function (t, e) {\n          if (\"mixed\" === r || \"mixed\" === this.type || r === this.type) {\n            t = \"\" + t;\n            var n = this._nodes.get(t);\n            if (void 0 === n) throw new F(\"Graph.\".concat(o, ': could not find the \"').concat(t, '\" node in the graph.'));\n            mt(!1, \"mixed\" === r ? this.type : r, i, n, e);\n          }\n        };\n        var a = \"map\" + n[0].toUpperCase() + n.slice(1);\n        t.prototype[a] = function (t, e) {\n          var n = [];\n          return this[o](t, function (t, r) {\n            n.push(e(t, r));\n          }), n;\n        };\n        var c = \"filter\" + n[0].toUpperCase() + n.slice(1);\n        t.prototype[c] = function (t, e) {\n          var n = [];\n          return this[o](t, function (t, r) {\n            e(t, r) && n.push(t);\n          }), n;\n        };\n        var u = \"reduce\" + n[0].toUpperCase() + n.slice(1);\n        t.prototype[u] = function (t, e, n) {\n          if (arguments.length < 3) throw new B(\"Graph.\".concat(u, \": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.\"));\n          var r = n;\n          return this[o](t, function (t, n) {\n            r = e(r, t, n);\n          }), r;\n        };\n      }(t, e), function (t, e) {\n        var n = e.name,\n          r = e.type,\n          i = e.direction,\n          o = n[0].toUpperCase() + n.slice(1, -1),\n          a = \"find\" + o;\n        t.prototype[a] = function (t, e) {\n          if (\"mixed\" === r || \"mixed\" === this.type || r === this.type) {\n            t = \"\" + t;\n            var n = this._nodes.get(t);\n            if (void 0 === n) throw new F(\"Graph.\".concat(a, ': could not find the \"').concat(t, '\" node in the graph.'));\n            return mt(!0, \"mixed\" === r ? this.type : r, i, n, e);\n          }\n        };\n        var c = \"some\" + o;\n        t.prototype[c] = function (t, e) {\n          return !!this[a](t, e);\n        };\n        var u = \"every\" + o;\n        t.prototype[u] = function (t, e) {\n          return !this[a](t, function (t, n) {\n            return !e(t, n);\n          });\n        };\n      }(t, e), Gt(t, e);\n    });\n  }(zt);\n  var Wt = function (t) {\n      function n(e) {\n        var n = u({\n          type: \"directed\"\n        }, e);\n        if (\"multi\" in n && !1 !== n.multi) throw new B(\"DirectedGraph.from: inconsistent indication that the graph should be multi in given options!\");\n        if (\"directed\" !== n.type) throw new B('DirectedGraph.from: inconsistent \"' + n.type + '\" type in given options!');\n        return t.call(this, n) || this;\n      }\n      return e(n, t), n;\n    }(zt),\n    Pt = function (t) {\n      function n(e) {\n        var n = u({\n          type: \"undirected\"\n        }, e);\n        if (\"multi\" in n && !1 !== n.multi) throw new B(\"UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!\");\n        if (\"undirected\" !== n.type) throw new B('UndirectedGraph.from: inconsistent \"' + n.type + '\" type in given options!');\n        return t.call(this, n) || this;\n      }\n      return e(n, t), n;\n    }(zt),\n    Rt = function (t) {\n      function n(e) {\n        var n = u({\n          multi: !0\n        }, e);\n        if (\"multi\" in n && !0 !== n.multi) throw new B(\"MultiGraph.from: inconsistent indication that the graph should be simple in given options!\");\n        return t.call(this, n) || this;\n      }\n      return e(n, t), n;\n    }(zt),\n    Kt = function (t) {\n      function n(e) {\n        var n = u({\n          type: \"directed\",\n          multi: !0\n        }, e);\n        if (\"multi\" in n && !0 !== n.multi) throw new B(\"MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!\");\n        if (\"directed\" !== n.type) throw new B('MultiDirectedGraph.from: inconsistent \"' + n.type + '\" type in given options!');\n        return t.call(this, n) || this;\n      }\n      return e(n, t), n;\n    }(zt),\n    Tt = function (t) {\n      function n(e) {\n        var n = u({\n          type: \"undirected\",\n          multi: !0\n        }, e);\n        if (\"multi\" in n && !0 !== n.multi) throw new B(\"MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!\");\n        if (\"undirected\" !== n.type) throw new B('MultiUndirectedGraph.from: inconsistent \"' + n.type + '\" type in given options!');\n        return t.call(this, n) || this;\n      }\n      return e(n, t), n;\n    }(zt);\n  function Bt(t) {\n    t.from = function (e, n) {\n      var r = u({}, e.options, n),\n        i = new t(r);\n      return i.import(e), i;\n    };\n  }\n  return Bt(zt), Bt(Wt), Bt(Pt), Bt(Rt), Bt(Kt), Bt(Tt), zt.Graph = zt, zt.DirectedGraph = Wt, zt.UndirectedGraph = Pt, zt.MultiGraph = Rt, zt.MultiDirectedGraph = Kt, zt.MultiUndirectedGraph = Tt, zt.InvalidArgumentsGraphError = B, zt.NotFoundGraphError = F, zt.UsageGraphError = I, zt;\n});\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Graphology Browser GEXF Endpoint\n * =================================\n *\n * Endpoint gathering both parser & writer for the browser.\n */\nexports.parse = __webpack_require__(43);\nexports.write = __webpack_require__(49);\n\n/***/ }),\n/* 18 */,\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar camera_1 = __importDefault(__webpack_require__(5));\nvar mouse_1 = __importDefault(__webpack_require__(8));\nvar quadtree_1 = __importDefault(__webpack_require__(10));\nvar types_1 = __webpack_require__(3);\nvar utils_1 = __webpack_require__(0);\nvar labels_1 = __webpack_require__(24);\nvar settings_1 = __webpack_require__(25);\nvar touch_1 = __importDefault(__webpack_require__(41));\nvar matrices_1 = __webpack_require__(6);\nvar edge_collisions_1 = __webpack_require__(42);\n/**\n * Important functions.\n */\nfunction applyNodeDefaults(settings, key, data) {\n  if (!data.hasOwnProperty(\"x\") || !data.hasOwnProperty(\"y\")) throw new Error(\"Sigma: could not find a valid position (x, y) for node \\\"\".concat(key, \"\\\". All your nodes must have a number \\\"x\\\" and \\\"y\\\". Maybe your forgot to apply a layout or your \\\"nodeReducer\\\" is not returning the correct data?\"));\n  if (!data.color) data.color = settings.defaultNodeColor;\n  if (!data.label && data.label !== \"\") data.label = null;\n  if (data.label !== undefined && data.label !== null) data.label = \"\" + data.label;else data.label = null;\n  if (!data.size) data.size = 2;\n  if (!data.hasOwnProperty(\"hidden\")) data.hidden = false;\n  if (!data.hasOwnProperty(\"highlighted\")) data.highlighted = false;\n  if (!data.hasOwnProperty(\"forceLabel\")) data.forceLabel = false;\n  if (!data.type || data.type === \"\") data.type = settings.defaultNodeType;\n  if (!data.zIndex) data.zIndex = 0;\n  return data;\n}\nfunction applyEdgeDefaults(settings, key, data) {\n  if (!data.color) data.color = settings.defaultEdgeColor;\n  if (!data.label) data.label = \"\";\n  if (!data.size) data.size = 0.5;\n  if (!data.hasOwnProperty(\"hidden\")) data.hidden = false;\n  if (!data.hasOwnProperty(\"forceLabel\")) data.forceLabel = false;\n  if (!data.type || data.type === \"\") data.type = settings.defaultEdgeType;\n  if (!data.zIndex) data.zIndex = 0;\n  return data;\n}\n/**\n * Main class.\n *\n * @constructor\n * @param {Graph}       graph     - Graph to render.\n * @param {HTMLElement} container - DOM container in which to render.\n * @param {object}      settings  - Optional settings.\n */\nvar Sigma = /** @class */function (_super) {\n  __extends(Sigma, _super);\n  function Sigma(graph, container, settings) {\n    if (settings === void 0) {\n      settings = {};\n    }\n    var _this = _super.call(this) || this;\n    _this.elements = {};\n    _this.canvasContexts = {};\n    _this.webGLContexts = {};\n    _this.activeListeners = {};\n    _this.quadtree = new quadtree_1.default();\n    _this.labelGrid = new labels_1.LabelGrid();\n    _this.nodeDataCache = {};\n    _this.edgeDataCache = {};\n    _this.nodesWithForcedLabels = [];\n    _this.edgesWithForcedLabels = [];\n    _this.nodeExtent = {\n      x: [0, 1],\n      y: [0, 1]\n    };\n    _this.matrix = (0, matrices_1.identity)();\n    _this.invMatrix = (0, matrices_1.identity)();\n    _this.correctionRatio = 1;\n    _this.customBBox = null;\n    _this.normalizationFunction = (0, utils_1.createNormalizationFunction)({\n      x: [0, 1],\n      y: [0, 1]\n    });\n    // Cache:\n    _this.cameraSizeRatio = 1;\n    // Starting dimensions and pixel ratio\n    _this.width = 0;\n    _this.height = 0;\n    _this.pixelRatio = (0, utils_1.getPixelRatio)();\n    // State\n    _this.displayedLabels = new Set();\n    _this.highlightedNodes = new Set();\n    _this.hoveredNode = null;\n    _this.hoveredEdge = null;\n    _this.renderFrame = null;\n    _this.renderHighlightedNodesFrame = null;\n    _this.needToProcess = false;\n    _this.needToSoftProcess = false;\n    _this.checkEdgesEventsFrame = null;\n    // Programs\n    _this.nodePrograms = {};\n    _this.hoverNodePrograms = {};\n    _this.edgePrograms = {};\n    _this.settings = (0, utils_1.assign)({}, settings_1.DEFAULT_SETTINGS, settings);\n    // Validating\n    (0, settings_1.validateSettings)(_this.settings);\n    (0, utils_1.validateGraph)(graph);\n    if (!(container instanceof HTMLElement)) throw new Error(\"Sigma: container should be an html element.\");\n    // Properties\n    _this.graph = graph;\n    _this.container = container;\n    // Initializing contexts\n    _this.createWebGLContext(\"edges\", {\n      preserveDrawingBuffer: true\n    });\n    _this.createCanvasContext(\"edgeLabels\");\n    _this.createWebGLContext(\"nodes\");\n    _this.createCanvasContext(\"labels\");\n    _this.createCanvasContext(\"hovers\");\n    _this.createWebGLContext(\"hoverNodes\");\n    _this.createCanvasContext(\"mouse\");\n    // Blending\n    for (var key in _this.webGLContexts) {\n      var gl = _this.webGLContexts[key];\n      gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n      gl.enable(gl.BLEND);\n    }\n    // Loading programs\n    for (var type in _this.settings.nodeProgramClasses) {\n      var NodeProgramClass = _this.settings.nodeProgramClasses[type];\n      _this.nodePrograms[type] = new NodeProgramClass(_this.webGLContexts.nodes, _this);\n      _this.hoverNodePrograms[type] = new NodeProgramClass(_this.webGLContexts.hoverNodes, _this);\n    }\n    for (var type in _this.settings.edgeProgramClasses) {\n      var EdgeProgramClass = _this.settings.edgeProgramClasses[type];\n      _this.edgePrograms[type] = new EdgeProgramClass(_this.webGLContexts.edges, _this);\n    }\n    // Initial resize\n    _this.resize();\n    // Initializing the camera\n    _this.camera = new camera_1.default();\n    // Binding camera events\n    _this.bindCameraHandlers();\n    // Initializing captors\n    _this.mouseCaptor = new mouse_1.default(_this.elements.mouse, _this);\n    _this.touchCaptor = new touch_1.default(_this.elements.mouse, _this);\n    // Binding event handlers\n    _this.bindEventHandlers();\n    // Binding graph handlers\n    _this.bindGraphHandlers();\n    // Trigger eventual settings-related things\n    _this.handleSettingsUpdate();\n    // Processing data for the first time & render\n    _this.process();\n    _this.render();\n    return _this;\n  }\n  /**---------------------------------------------------------------------------\n   * Internal methods.\n   **---------------------------------------------------------------------------\n   */\n  /**\n   * Internal function used to create a canvas element.\n   * @param  {string} id - Context's id.\n   * @return {Sigma}\n   */\n  Sigma.prototype.createCanvas = function (id) {\n    var canvas = (0, utils_1.createElement)(\"canvas\", {\n      position: \"absolute\"\n    }, {\n      class: \"sigma-\".concat(id)\n    });\n    this.elements[id] = canvas;\n    this.container.appendChild(canvas);\n    return canvas;\n  };\n  /**\n   * Internal function used to create a canvas context and add the relevant\n   * DOM elements.\n   *\n   * @param  {string} id - Context's id.\n   * @return {Sigma}\n   */\n  Sigma.prototype.createCanvasContext = function (id) {\n    var canvas = this.createCanvas(id);\n    var contextOptions = {\n      preserveDrawingBuffer: false,\n      antialias: false\n    };\n    this.canvasContexts[id] = canvas.getContext(\"2d\", contextOptions);\n    return this;\n  };\n  /**\n   * Internal function used to create a canvas context and add the relevant\n   * DOM elements.\n   *\n   * @param  {string}  id      - Context's id.\n   * @param  {object?} options - #getContext params to override (optional)\n   * @return {Sigma}\n   */\n  Sigma.prototype.createWebGLContext = function (id, options) {\n    var canvas = this.createCanvas(id);\n    var contextOptions = __assign({\n      preserveDrawingBuffer: false,\n      antialias: false\n    }, options || {});\n    var context;\n    // First we try webgl2 for an easy performance boost\n    context = canvas.getContext(\"webgl2\", contextOptions);\n    // Else we fall back to webgl\n    if (!context) context = canvas.getContext(\"webgl\", contextOptions);\n    // Edge, I am looking right at you...\n    if (!context) context = canvas.getContext(\"experimental-webgl\", contextOptions);\n    this.webGLContexts[id] = context;\n    return this;\n  };\n  /**\n   * Method binding camera handlers.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.bindCameraHandlers = function () {\n    var _this = this;\n    this.activeListeners.camera = function () {\n      _this._scheduleRefresh();\n    };\n    this.camera.on(\"updated\", this.activeListeners.camera);\n    return this;\n  };\n  /**\n   * Method that checks whether or not a node collides with a given position.\n   */\n  Sigma.prototype.mouseIsOnNode = function (_a, _b, size) {\n    var x = _a.x,\n      y = _a.y;\n    var nodeX = _b.x,\n      nodeY = _b.y;\n    return x > nodeX - size && x < nodeX + size && y > nodeY - size && y < nodeY + size && Math.sqrt(Math.pow(x - nodeX, 2) + Math.pow(y - nodeY, 2)) < size;\n  };\n  /**\n   * Method that returns all nodes in quad at a given position.\n   */\n  Sigma.prototype.getQuadNodes = function (position) {\n    var mouseGraphPosition = this.viewportToFramedGraph(position);\n    return this.quadtree.point(mouseGraphPosition.x, 1 - mouseGraphPosition.y);\n  };\n  /**\n   * Method that returns the closest node to a given position.\n   */\n  Sigma.prototype.getNodeAtPosition = function (position) {\n    var x = position.x,\n      y = position.y;\n    var quadNodes = this.getQuadNodes(position);\n    // We will hover the node whose center is closest to mouse\n    var minDistance = Infinity,\n      nodeAtPosition = null;\n    for (var i = 0, l = quadNodes.length; i < l; i++) {\n      var node = quadNodes[i];\n      var data = this.nodeDataCache[node];\n      var nodePosition = this.framedGraphToViewport(data);\n      var size = this.scaleSize(data.size);\n      if (!data.hidden && this.mouseIsOnNode(position, nodePosition, size)) {\n        var distance = Math.sqrt(Math.pow(x - nodePosition.x, 2) + Math.pow(y - nodePosition.y, 2));\n        // TODO: sort by min size also for cases where center is the same\n        if (distance < minDistance) {\n          minDistance = distance;\n          nodeAtPosition = node;\n        }\n      }\n    }\n    return nodeAtPosition;\n  };\n  /**\n   * Method binding event handlers.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.bindEventHandlers = function () {\n    var _this = this;\n    // Handling window resize\n    this.activeListeners.handleResize = function () {\n      _this.needToSoftProcess = true;\n      _this._scheduleRefresh();\n    };\n    window.addEventListener(\"resize\", this.activeListeners.handleResize);\n    // Handling mouse move\n    this.activeListeners.handleMove = function (e) {\n      var baseEvent = {\n        event: e,\n        preventSigmaDefault: function preventSigmaDefault() {\n          e.preventSigmaDefault();\n        }\n      };\n      var nodeToHover = _this.getNodeAtPosition(e);\n      if (nodeToHover && _this.hoveredNode !== nodeToHover && !_this.nodeDataCache[nodeToHover].hidden) {\n        // Handling passing from one node to the other directly\n        if (_this.hoveredNode) _this.emit(\"leaveNode\", __assign(__assign({}, baseEvent), {\n          node: _this.hoveredNode\n        }));\n        _this.hoveredNode = nodeToHover;\n        _this.emit(\"enterNode\", __assign(__assign({}, baseEvent), {\n          node: nodeToHover\n        }));\n        _this.scheduleHighlightedNodesRender();\n        return;\n      }\n      // Checking if the hovered node is still hovered\n      if (_this.hoveredNode) {\n        var data = _this.nodeDataCache[_this.hoveredNode];\n        var pos = _this.framedGraphToViewport(data);\n        var size = _this.scaleSize(data.size);\n        if (!_this.mouseIsOnNode(e, pos, size)) {\n          var node = _this.hoveredNode;\n          _this.hoveredNode = null;\n          _this.emit(\"leaveNode\", __assign(__assign({}, baseEvent), {\n            node: node\n          }));\n          _this.scheduleHighlightedNodesRender();\n          return;\n        }\n      }\n      if (_this.settings.enableEdgeHoverEvents === true) {\n        _this.checkEdgeHoverEvents(baseEvent);\n      } else if (_this.settings.enableEdgeHoverEvents === \"debounce\") {\n        if (!_this.checkEdgesEventsFrame) _this.checkEdgesEventsFrame = (0, utils_1.requestFrame)(function () {\n          _this.checkEdgeHoverEvents(baseEvent);\n          _this.checkEdgesEventsFrame = null;\n        });\n      }\n    };\n    // Handling click\n    var createMouseListener = function createMouseListener(eventType) {\n      return function (e) {\n        var baseEvent = {\n          event: e,\n          preventSigmaDefault: function preventSigmaDefault() {\n            e.preventSigmaDefault();\n          }\n        };\n        var isFakeSigmaMouseEvent = e.original.isFakeSigmaMouseEvent;\n        var nodeAtPosition = isFakeSigmaMouseEvent ? _this.getNodeAtPosition(e) : _this.hoveredNode;\n        if (nodeAtPosition) return _this.emit(\"\".concat(eventType, \"Node\"), __assign(__assign({}, baseEvent), {\n          node: nodeAtPosition\n        }));\n        if (eventType === \"wheel\" ? _this.settings.enableEdgeWheelEvents : _this.settings.enableEdgeClickEvents) {\n          var edge = _this.getEdgeAtPoint(e.x, e.y);\n          if (edge) return _this.emit(\"\".concat(eventType, \"Edge\"), __assign(__assign({}, baseEvent), {\n            edge: edge\n          }));\n        }\n        return _this.emit(\"\".concat(eventType, \"Stage\"), baseEvent);\n      };\n    };\n    this.activeListeners.handleClick = createMouseListener(\"click\");\n    this.activeListeners.handleRightClick = createMouseListener(\"rightClick\");\n    this.activeListeners.handleDoubleClick = createMouseListener(\"doubleClick\");\n    this.activeListeners.handleWheel = createMouseListener(\"wheel\");\n    this.activeListeners.handleDown = createMouseListener(\"down\");\n    this.mouseCaptor.on(\"mousemove\", this.activeListeners.handleMove);\n    this.mouseCaptor.on(\"click\", this.activeListeners.handleClick);\n    this.mouseCaptor.on(\"rightClick\", this.activeListeners.handleRightClick);\n    this.mouseCaptor.on(\"doubleClick\", this.activeListeners.handleDoubleClick);\n    this.mouseCaptor.on(\"wheel\", this.activeListeners.handleWheel);\n    this.mouseCaptor.on(\"mousedown\", this.activeListeners.handleDown);\n    // TODO\n    // Deal with Touch captor events\n    return this;\n  };\n  /**\n   * Method binding graph handlers\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.bindGraphHandlers = function () {\n    var _this = this;\n    var graph = this.graph;\n    this.activeListeners.graphUpdate = function () {\n      _this.needToProcess = true;\n      _this._scheduleRefresh();\n    };\n    this.activeListeners.softGraphUpdate = function () {\n      _this.needToSoftProcess = true;\n      _this._scheduleRefresh();\n    };\n    this.activeListeners.dropNodeGraphUpdate = function (e) {\n      delete _this.nodeDataCache[e.key];\n      if (_this.hoveredNode === e.key) _this.hoveredNode = null;\n      _this.activeListeners.graphUpdate();\n    };\n    this.activeListeners.dropEdgeGraphUpdate = function (e) {\n      delete _this.edgeDataCache[e.key];\n      if (_this.hoveredEdge === e.key) _this.hoveredEdge = null;\n      _this.activeListeners.graphUpdate();\n    };\n    this.activeListeners.clearEdgesGraphUpdate = function () {\n      _this.edgeDataCache = {};\n      _this.hoveredEdge = null;\n      _this.activeListeners.graphUpdate();\n    };\n    this.activeListeners.clearGraphUpdate = function () {\n      _this.nodeDataCache = {};\n      _this.hoveredNode = null;\n      _this.activeListeners.clearEdgesGraphUpdate();\n    };\n    graph.on(\"nodeAdded\", this.activeListeners.graphUpdate);\n    graph.on(\"nodeDropped\", this.activeListeners.dropNodeGraphUpdate);\n    graph.on(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n    graph.on(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n    graph.on(\"edgeAdded\", this.activeListeners.graphUpdate);\n    graph.on(\"edgeDropped\", this.activeListeners.dropEdgeGraphUpdate);\n    graph.on(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n    graph.on(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n    graph.on(\"edgesCleared\", this.activeListeners.clearEdgesGraphUpdate);\n    graph.on(\"cleared\", this.activeListeners.clearGraphUpdate);\n    return this;\n  };\n  /**\n   * Method dealing with \"leaveEdge\" and \"enterEdge\" events.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.checkEdgeHoverEvents = function (payload) {\n    var edgeToHover = this.hoveredNode ? null : this.getEdgeAtPoint(payload.event.x, payload.event.y);\n    if (edgeToHover !== this.hoveredEdge) {\n      if (this.hoveredEdge) this.emit(\"leaveEdge\", __assign(__assign({}, payload), {\n        edge: this.hoveredEdge\n      }));\n      if (edgeToHover) this.emit(\"enterEdge\", __assign(__assign({}, payload), {\n        edge: edgeToHover\n      }));\n      this.hoveredEdge = edgeToHover;\n    }\n    return this;\n  };\n  /**\n   * Method looking for an edge colliding with a given point at (x, y). Returns\n   * the key of the edge if any, or null else.\n   */\n  Sigma.prototype.getEdgeAtPoint = function (x, y) {\n    var e_1, _a;\n    var _this = this;\n    var _b = this,\n      edgeDataCache = _b.edgeDataCache,\n      nodeDataCache = _b.nodeDataCache;\n    // Check first that pixel is colored:\n    // Note that mouse positions must be corrected by pixel ratio to correctly\n    // index the drawing buffer.\n    if (!(0, edge_collisions_1.isPixelColored)(this.webGLContexts.edges, x * this.pixelRatio, y * this.pixelRatio)) return null;\n    // Check for each edge if it collides with the point:\n    var _c = this.viewportToGraph({\n        x: x,\n        y: y\n      }),\n      graphX = _c.x,\n      graphY = _c.y;\n    // To translate edge thicknesses to the graph system, we observe by how much\n    // the length of a non-null edge is transformed to between the graph system\n    // and the viewport system:\n    var transformationRatio = 0;\n    this.graph.someEdge(function (key, _, sourceId, targetId, _a, _b) {\n      var xs = _a.x,\n        ys = _a.y;\n      var xt = _b.x,\n        yt = _b.y;\n      if (edgeDataCache[key].hidden || nodeDataCache[sourceId].hidden || nodeDataCache[targetId].hidden) return false;\n      if (xs !== xt || ys !== yt) {\n        var graphLength = Math.sqrt(Math.pow(xt - xs, 2) + Math.pow(yt - ys, 2));\n        var _c = _this.graphToViewport({\n            x: xs,\n            y: ys\n          }),\n          vp_xs = _c.x,\n          vp_ys = _c.y;\n        var _d = _this.graphToViewport({\n            x: xt,\n            y: yt\n          }),\n          vp_xt = _d.x,\n          vp_yt = _d.y;\n        var viewportLength = Math.sqrt(Math.pow(vp_xt - vp_xs, 2) + Math.pow(vp_yt - vp_ys, 2));\n        transformationRatio = graphLength / viewportLength;\n        return true;\n      }\n    });\n    // If no non-null edge has been found, return null:\n    if (!transformationRatio) return null;\n    // Now we can look for matching edges:\n    var edges = this.graph.filterEdges(function (key, edgeAttributes, sourceId, targetId, sourcePosition, targetPosition) {\n      if (edgeDataCache[key].hidden || nodeDataCache[sourceId].hidden || nodeDataCache[targetId].hidden) return false;\n      if ((0, edge_collisions_1.doEdgeCollideWithPoint)(graphX, graphY, sourcePosition.x, sourcePosition.y, targetPosition.x, targetPosition.y,\n      // Adapt the edge size to the zoom ratio:\n      edgeDataCache[key].size * transformationRatio / _this.cameraSizeRatio)) {\n        return true;\n      }\n    });\n    if (edges.length === 0) return null; // no edges found\n    // if none of the edges have a zIndex, selected the most recently created one to match the rendering order\n    var selectedEdge = edges[edges.length - 1];\n    // otherwise select edge with highest zIndex\n    var highestZIndex = -Infinity;\n    try {\n      for (var edges_1 = __values(edges), edges_1_1 = edges_1.next(); !edges_1_1.done; edges_1_1 = edges_1.next()) {\n        var edge = edges_1_1.value;\n        var zIndex = this.graph.getEdgeAttribute(edge, \"zIndex\");\n        if (zIndex >= highestZIndex) {\n          selectedEdge = edge;\n          highestZIndex = zIndex;\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (edges_1_1 && !edges_1_1.done && (_a = edges_1.return)) _a.call(edges_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    return selectedEdge;\n  };\n  /**\n   * Method used to process the whole graph's data.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.process = function (keepArrays) {\n    var _this = this;\n    if (keepArrays === void 0) {\n      keepArrays = false;\n    }\n    var graph = this.graph;\n    var settings = this.settings;\n    var dimensions = this.getDimensions();\n    var nodeZExtent = [Infinity, -Infinity];\n    var edgeZExtent = [Infinity, -Infinity];\n    // Clearing the quad\n    this.quadtree.clear();\n    // Resetting the label grid\n    // TODO: it's probably better to do this explicitly or on resizes for layout and anims\n    this.labelGrid.resizeAndClear(dimensions, settings.labelGridCellSize);\n    // Clear the highlightedNodes\n    this.highlightedNodes = new Set();\n    // Computing extents\n    this.nodeExtent = (0, utils_1.graphExtent)(graph);\n    // Resetting `forceLabel` indices\n    this.nodesWithForcedLabels = [];\n    this.edgesWithForcedLabels = [];\n    // NOTE: it is important to compute this matrix after computing the node's extent\n    // because #.getGraphDimensions relies on it\n    var nullCamera = new camera_1.default();\n    var nullCameraMatrix = (0, utils_1.matrixFromCamera)(nullCamera.getState(), this.getDimensions(), this.getGraphDimensions(), this.getSetting(\"stagePadding\") || 0);\n    // Rescaling function\n    this.normalizationFunction = (0, utils_1.createNormalizationFunction)(this.customBBox || this.nodeExtent);\n    var nodesPerPrograms = {};\n    var nodes = graph.nodes();\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      var node = nodes[i];\n      // Node display data resolution:\n      //   1. First we get the node's attributes\n      //   2. We optionally reduce them using the function provided by the user\n      //      Note that this function must return a total object and won't be merged\n      //   3. We apply our defaults, while running some vital checks\n      //   4. We apply the normalization function\n      // We shallow copy node data to avoid dangerous behaviors from reducers\n      var attr = Object.assign({}, graph.getNodeAttributes(node));\n      if (settings.nodeReducer) attr = settings.nodeReducer(node, attr);\n      var data = applyNodeDefaults(this.settings, node, attr);\n      nodesPerPrograms[data.type] = (nodesPerPrograms[data.type] || 0) + 1;\n      this.nodeDataCache[node] = data;\n      this.normalizationFunction.applyTo(data);\n      if (data.forceLabel) this.nodesWithForcedLabels.push(node);\n      if (this.settings.zIndex) {\n        if (data.zIndex < nodeZExtent[0]) nodeZExtent[0] = data.zIndex;\n        if (data.zIndex > nodeZExtent[1]) nodeZExtent[1] = data.zIndex;\n      }\n    }\n    for (var type in this.nodePrograms) {\n      if (!this.nodePrograms.hasOwnProperty(type)) {\n        throw new Error(\"Sigma: could not find a suitable program for node type \\\"\".concat(type, \"\\\"!\"));\n      }\n      if (!keepArrays) this.nodePrograms[type].allocate(nodesPerPrograms[type] || 0);\n      // We reset that count here, so that we can reuse it while calling the Program#process methods:\n      nodesPerPrograms[type] = 0;\n    }\n    // Handling node z-index\n    // TODO: z-index needs us to compute display data before hand\n    if (this.settings.zIndex && nodeZExtent[0] !== nodeZExtent[1]) nodes = (0, utils_1.zIndexOrdering)(nodeZExtent, function (node) {\n      return _this.nodeDataCache[node].zIndex;\n    }, nodes);\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      var node = nodes[i];\n      var data = this.nodeDataCache[node];\n      this.quadtree.add(node, data.x, 1 - data.y, data.size / this.width);\n      if (typeof data.label === \"string\" && !data.hidden) this.labelGrid.add(node, data.size, this.framedGraphToViewport(data, {\n        matrix: nullCameraMatrix\n      }));\n      this.nodePrograms[data.type].process(data, data.hidden, nodesPerPrograms[data.type]++);\n      // Save the node in the highlighted set if needed\n      if (data.highlighted && !data.hidden) this.highlightedNodes.add(node);\n    }\n    this.labelGrid.organize();\n    var edgesPerPrograms = {};\n    var edges = graph.edges();\n    for (var i = 0, l = edges.length; i < l; i++) {\n      var edge = edges[i];\n      // Edge display data resolution:\n      //   1. First we get the edge's attributes\n      //   2. We optionally reduce them using the function provided by the user\n      //      Note that this function must return a total object and won't be merged\n      //   3. We apply our defaults, while running some vital checks\n      // We shallow copy edge data to avoid dangerous behaviors from reducers\n      var attr = Object.assign({}, graph.getEdgeAttributes(edge));\n      if (settings.edgeReducer) attr = settings.edgeReducer(edge, attr);\n      var data = applyEdgeDefaults(this.settings, edge, attr);\n      edgesPerPrograms[data.type] = (edgesPerPrograms[data.type] || 0) + 1;\n      this.edgeDataCache[edge] = data;\n      if (data.forceLabel && !data.hidden) this.edgesWithForcedLabels.push(edge);\n      if (this.settings.zIndex) {\n        if (data.zIndex < edgeZExtent[0]) edgeZExtent[0] = data.zIndex;\n        if (data.zIndex > edgeZExtent[1]) edgeZExtent[1] = data.zIndex;\n      }\n    }\n    for (var type in this.edgePrograms) {\n      if (!this.edgePrograms.hasOwnProperty(type)) {\n        throw new Error(\"Sigma: could not find a suitable program for edge type \\\"\".concat(type, \"\\\"!\"));\n      }\n      if (!keepArrays) this.edgePrograms[type].allocate(edgesPerPrograms[type] || 0);\n      // We reset that count here, so that we can reuse it while calling the Program#process methods:\n      edgesPerPrograms[type] = 0;\n    }\n    // Handling edge z-index\n    if (this.settings.zIndex && edgeZExtent[0] !== edgeZExtent[1]) edges = (0, utils_1.zIndexOrdering)(edgeZExtent, function (edge) {\n      return _this.edgeDataCache[edge].zIndex;\n    }, edges);\n    for (var i = 0, l = edges.length; i < l; i++) {\n      var edge = edges[i];\n      var data = this.edgeDataCache[edge];\n      var extremities = graph.extremities(edge),\n        sourceData = this.nodeDataCache[extremities[0]],\n        targetData = this.nodeDataCache[extremities[1]];\n      var hidden = data.hidden || sourceData.hidden || targetData.hidden;\n      this.edgePrograms[data.type].process(sourceData, targetData, data, hidden, edgesPerPrograms[data.type]++);\n    }\n    for (var type in this.edgePrograms) {\n      var program = this.edgePrograms[type];\n      if (!keepArrays && typeof program.computeIndices === \"function\") program.computeIndices();\n    }\n    return this;\n  };\n  /**\n   * Method that backports potential settings updates where it's needed.\n   * @private\n   */\n  Sigma.prototype.handleSettingsUpdate = function () {\n    this.camera.minRatio = this.settings.minCameraRatio;\n    this.camera.maxRatio = this.settings.maxCameraRatio;\n    this.camera.setState(this.camera.validateState(this.camera.getState()));\n    return this;\n  };\n  /**\n   * Method that decides whether to reprocess graph or not, and then render the\n   * graph.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype._refresh = function () {\n    // Do we need to process data?\n    if (this.needToProcess) {\n      this.process();\n    } else if (this.needToSoftProcess) {\n      this.process(true);\n    }\n    // Resetting state\n    this.needToProcess = false;\n    this.needToSoftProcess = false;\n    // Rendering\n    this.render();\n    return this;\n  };\n  /**\n   * Method that schedules a `_refresh` call if none has been scheduled yet. It\n   * will then be processed next available frame.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype._scheduleRefresh = function () {\n    var _this = this;\n    if (!this.renderFrame) {\n      this.renderFrame = (0, utils_1.requestFrame)(function () {\n        _this._refresh();\n        _this.renderFrame = null;\n      });\n    }\n    return this;\n  };\n  /**\n   * Method used to render labels.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.renderLabels = function () {\n    if (!this.settings.renderLabels) return this;\n    var cameraState = this.camera.getState();\n    // Finding visible nodes to display their labels\n    var visibleNodes;\n    if (cameraState.ratio >= 1) {\n      // Camera is unzoomed so no need to ask the quadtree for visible nodes\n      visibleNodes = new Set(this.graph.nodes());\n    } else {\n      // Let's ask the quadtree\n      var viewRectangle = this.viewRectangle();\n      visibleNodes = new Set(this.quadtree.rectangle(viewRectangle.x1, 1 - viewRectangle.y1, viewRectangle.x2, 1 - viewRectangle.y2, viewRectangle.height));\n    }\n    // Selecting labels to draw\n    // TODO: drop gridsettings likewise\n    // TODO: optimize through visible nodes\n    var labelsToDisplay = this.labelGrid.getLabelsToDisplay(cameraState.ratio, this.settings.labelDensity).concat(this.nodesWithForcedLabels);\n    this.displayedLabels = new Set();\n    // Drawing labels\n    var context = this.canvasContexts.labels;\n    for (var i = 0, l = labelsToDisplay.length; i < l; i++) {\n      var node = labelsToDisplay[i];\n      var data = this.nodeDataCache[node];\n      // If the node was already drawn (like if it is eligible AND has\n      // `forceLabel`), we don't want to draw it again\n      if (this.displayedLabels.has(node)) continue;\n      // If the node is hidden, we don't need to display its label obviously\n      if (data.hidden) continue;\n      var _a = this.framedGraphToViewport(data),\n        x = _a.x,\n        y = _a.y;\n      // TODO: we can cache the labels we need to render until the camera's ratio changes\n      // TODO: this should be computed in the canvas components?\n      var size = this.scaleSize(data.size);\n      if (!data.forceLabel && size < this.settings.labelRenderedSizeThreshold) continue;\n      if (!visibleNodes.has(node)) continue;\n      // TODO:\n      // Because displayed edge labels depend directly on actually rendered node\n      // labels, we need to only add to this.displayedLabels nodes whose label\n      // is rendered.\n      // This makes this.displayedLabels depend on viewport, which might become\n      // an issue once we start memoizing getLabelsToDisplay.\n      this.displayedLabels.add(node);\n      this.settings.labelRenderer(context, __assign(__assign({\n        key: node\n      }, data), {\n        size: size,\n        x: x,\n        y: y\n      }), this.settings);\n    }\n    return this;\n  };\n  /**\n   * Method used to render edge labels, based on which node labels were\n   * rendered.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.renderEdgeLabels = function () {\n    if (!this.settings.renderEdgeLabels) return this;\n    var context = this.canvasContexts.edgeLabels;\n    // Clearing\n    context.clearRect(0, 0, this.width, this.height);\n    var edgeLabelsToDisplay = (0, labels_1.edgeLabelsToDisplayFromNodes)({\n      graph: this.graph,\n      hoveredNode: this.hoveredNode,\n      displayedNodeLabels: this.displayedLabels,\n      highlightedNodes: this.highlightedNodes\n    }).concat(this.edgesWithForcedLabels);\n    var displayedLabels = new Set();\n    for (var i = 0, l = edgeLabelsToDisplay.length; i < l; i++) {\n      var edge = edgeLabelsToDisplay[i],\n        extremities = this.graph.extremities(edge),\n        sourceData = this.nodeDataCache[extremities[0]],\n        targetData = this.nodeDataCache[extremities[1]],\n        edgeData = this.edgeDataCache[edge];\n      // If the edge was already drawn (like if it is eligible AND has\n      // `forceLabel`), we don't want to draw it again\n      if (displayedLabels.has(edge)) continue;\n      // If the edge is hidden we don't need to display its label\n      // NOTE: the test on sourceData & targetData is probably paranoid at this point?\n      if (edgeData.hidden || sourceData.hidden || targetData.hidden) {\n        continue;\n      }\n      this.settings.edgeLabelRenderer(context, __assign(__assign({\n        key: edge\n      }, edgeData), {\n        size: this.scaleSize(edgeData.size)\n      }), __assign(__assign(__assign({\n        key: extremities[0]\n      }, sourceData), this.framedGraphToViewport(sourceData)), {\n        size: this.scaleSize(sourceData.size)\n      }), __assign(__assign(__assign({\n        key: extremities[1]\n      }, targetData), this.framedGraphToViewport(targetData)), {\n        size: this.scaleSize(targetData.size)\n      }), this.settings);\n      displayedLabels.add(edge);\n    }\n    return this;\n  };\n  /**\n   * Method used to render the highlighted nodes.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.renderHighlightedNodes = function () {\n    var _this = this;\n    var context = this.canvasContexts.hovers;\n    // Clearing\n    context.clearRect(0, 0, this.width, this.height);\n    // Rendering\n    var render = function render(node) {\n      var data = _this.nodeDataCache[node];\n      var _a = _this.framedGraphToViewport(data),\n        x = _a.x,\n        y = _a.y;\n      var size = _this.scaleSize(data.size);\n      _this.settings.hoverRenderer(context, __assign(__assign({\n        key: node\n      }, data), {\n        size: size,\n        x: x,\n        y: y\n      }), _this.settings);\n    };\n    var nodesToRender = [];\n    if (this.hoveredNode && !this.nodeDataCache[this.hoveredNode].hidden) {\n      nodesToRender.push(this.hoveredNode);\n    }\n    this.highlightedNodes.forEach(function (node) {\n      // The hovered node has already been highlighted\n      if (node !== _this.hoveredNode) nodesToRender.push(node);\n    });\n    // Draw labels:\n    nodesToRender.forEach(function (node) {\n      return render(node);\n    });\n    // Draw WebGL nodes on top of the labels:\n    var nodesPerPrograms = {};\n    // 1. Count nodes per type:\n    nodesToRender.forEach(function (node) {\n      var type = _this.nodeDataCache[node].type;\n      nodesPerPrograms[type] = (nodesPerPrograms[type] || 0) + 1;\n    });\n    // 2. Allocate for each type for the proper number of nodes\n    for (var type in this.hoverNodePrograms) {\n      this.hoverNodePrograms[type].allocate(nodesPerPrograms[type] || 0);\n      // Also reset count, to use when rendering:\n      nodesPerPrograms[type] = 0;\n    }\n    // 3. Process all nodes to render:\n    nodesToRender.forEach(function (node) {\n      var data = _this.nodeDataCache[node];\n      _this.hoverNodePrograms[data.type].process(data, data.hidden, nodesPerPrograms[data.type]++);\n    });\n    // 4. Clear hovered nodes layer:\n    this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);\n    // 5. Render:\n    for (var type in this.hoverNodePrograms) {\n      var program = this.hoverNodePrograms[type];\n      program.bind();\n      program.bufferData();\n      program.render({\n        matrix: this.matrix,\n        width: this.width,\n        height: this.height,\n        ratio: this.camera.ratio,\n        correctionRatio: this.correctionRatio / this.camera.ratio,\n        scalingRatio: this.pixelRatio\n      });\n    }\n  };\n  /**\n   * Method used to schedule a hover render.\n   *\n   */\n  Sigma.prototype.scheduleHighlightedNodesRender = function () {\n    var _this = this;\n    if (this.renderHighlightedNodesFrame || this.renderFrame) return;\n    this.renderHighlightedNodesFrame = (0, utils_1.requestFrame)(function () {\n      // Resetting state\n      _this.renderHighlightedNodesFrame = null;\n      // Rendering\n      _this.renderHighlightedNodes();\n      _this.renderEdgeLabels();\n    });\n  };\n  /**\n   * Method used to render.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.render = function () {\n    var _this = this;\n    this.emit(\"beforeRender\");\n    var handleEscape = function handleEscape() {\n      _this.emit(\"afterRender\");\n      return _this;\n    };\n    // If a render was scheduled, we cancel it\n    if (this.renderFrame) {\n      (0, utils_1.cancelFrame)(this.renderFrame);\n      this.renderFrame = null;\n      this.needToProcess = false;\n      this.needToSoftProcess = false;\n    }\n    // First we need to resize\n    this.resize();\n    // Clearing the canvases\n    this.clear();\n    // Recomputing useful camera-related values:\n    this.updateCachedValues();\n    // If we have no nodes we can stop right there\n    if (!this.graph.order) return handleEscape();\n    // TODO: improve this heuristic or move to the captor itself?\n    // TODO: deal with the touch captor here as well\n    var mouseCaptor = this.mouseCaptor;\n    var moving = this.camera.isAnimated() || mouseCaptor.isMoving || mouseCaptor.draggedEvents || mouseCaptor.currentWheelDirection;\n    // Then we need to extract a matrix from the camera\n    var cameraState = this.camera.getState();\n    var viewportDimensions = this.getDimensions();\n    var graphDimensions = this.getGraphDimensions();\n    var padding = this.getSetting(\"stagePadding\") || 0;\n    this.matrix = (0, utils_1.matrixFromCamera)(cameraState, viewportDimensions, graphDimensions, padding);\n    this.invMatrix = (0, utils_1.matrixFromCamera)(cameraState, viewportDimensions, graphDimensions, padding, true);\n    this.correctionRatio = (0, utils_1.getMatrixImpact)(this.matrix, cameraState, viewportDimensions);\n    // Drawing nodes\n    for (var type in this.nodePrograms) {\n      var program = this.nodePrograms[type];\n      program.bind();\n      program.bufferData();\n      program.render({\n        matrix: this.matrix,\n        width: this.width,\n        height: this.height,\n        ratio: cameraState.ratio,\n        correctionRatio: this.correctionRatio / cameraState.ratio,\n        scalingRatio: this.pixelRatio\n      });\n    }\n    // Drawing edges\n    if (!this.settings.hideEdgesOnMove || !moving) {\n      for (var type in this.edgePrograms) {\n        var program = this.edgePrograms[type];\n        program.bind();\n        program.bufferData();\n        program.render({\n          matrix: this.matrix,\n          width: this.width,\n          height: this.height,\n          ratio: cameraState.ratio,\n          correctionRatio: this.correctionRatio / cameraState.ratio,\n          scalingRatio: this.pixelRatio\n        });\n      }\n    }\n    // Do not display labels on move per setting\n    if (this.settings.hideLabelsOnMove && moving) return handleEscape();\n    this.renderLabels();\n    this.renderEdgeLabels();\n    this.renderHighlightedNodes();\n    return handleEscape();\n  };\n  /**\n   * Internal method used to update expensive and therefore cached values\n   * each time the camera state is updated.\n   */\n  Sigma.prototype.updateCachedValues = function () {\n    var ratio = this.camera.getState().ratio;\n    this.cameraSizeRatio = Math.sqrt(ratio);\n  };\n  /**---------------------------------------------------------------------------\n   * Public API.\n   **---------------------------------------------------------------------------\n   */\n  /**\n   * Method returning the renderer's camera.\n   *\n   * @return {Camera}\n   */\n  Sigma.prototype.getCamera = function () {\n    return this.camera;\n  };\n  /**\n   * Method returning the container DOM element.\n   *\n   * @return {HTMLElement}\n   */\n  Sigma.prototype.getContainer = function () {\n    return this.container;\n  };\n  /**\n   * Method returning the renderer's graph.\n   *\n   * @return {Graph}\n   */\n  Sigma.prototype.getGraph = function () {\n    return this.graph;\n  };\n  /**\n   * Method returning the mouse captor.\n   *\n   * @return {MouseCaptor}\n   */\n  Sigma.prototype.getMouseCaptor = function () {\n    return this.mouseCaptor;\n  };\n  /**\n   * Method returning the touch captor.\n   *\n   * @return {TouchCaptor}\n   */\n  Sigma.prototype.getTouchCaptor = function () {\n    return this.touchCaptor;\n  };\n  /**\n   * Method returning the current renderer's dimensions.\n   *\n   * @return {Dimensions}\n   */\n  Sigma.prototype.getDimensions = function () {\n    return {\n      width: this.width,\n      height: this.height\n    };\n  };\n  /**\n   * Method returning the current graph's dimensions.\n   *\n   * @return {Dimensions}\n   */\n  Sigma.prototype.getGraphDimensions = function () {\n    var extent = this.customBBox || this.nodeExtent;\n    return {\n      width: extent.x[1] - extent.x[0] || 1,\n      height: extent.y[1] - extent.y[0] || 1\n    };\n  };\n  /**\n   * Method used to get all the sigma node attributes.\n   * It's usefull for example to get the position of a node\n   * and to get values that are set by the nodeReducer\n   *\n   * @param  {string} key - The node's key.\n   * @return {NodeDisplayData | undefined} A copy of the desired node's attribute or undefined if not found\n   */\n  Sigma.prototype.getNodeDisplayData = function (key) {\n    var node = this.nodeDataCache[key];\n    return node ? Object.assign({}, node) : undefined;\n  };\n  /**\n   * Method used to get all the sigma edge attributes.\n   * It's usefull for example to get values that are set by the edgeReducer.\n   *\n   * @param  {string} key - The edge's key.\n   * @return {EdgeDisplayData | undefined} A copy of the desired edge's attribute or undefined if not found\n   */\n  Sigma.prototype.getEdgeDisplayData = function (key) {\n    var edge = this.edgeDataCache[key];\n    return edge ? Object.assign({}, edge) : undefined;\n  };\n  /**\n   * Method returning a copy of the settings collection.\n   *\n   * @return {Settings} A copy of the settings collection.\n   */\n  Sigma.prototype.getSettings = function () {\n    return __assign({}, this.settings);\n  };\n  /**\n   * Method returning the current value for a given setting key.\n   *\n   * @param  {string} key - The setting key to get.\n   * @return {any} The value attached to this setting key or undefined if not found\n   */\n  Sigma.prototype.getSetting = function (key) {\n    return this.settings[key];\n  };\n  /**\n   * Method setting the value of a given setting key. Note that this will schedule\n   * a new render next frame.\n   *\n   * @param  {string} key - The setting key to set.\n   * @param  {any}    value - The value to set.\n   * @return {Sigma}\n   */\n  Sigma.prototype.setSetting = function (key, value) {\n    this.settings[key] = value;\n    (0, settings_1.validateSettings)(this.settings);\n    this.handleSettingsUpdate();\n    this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n    this._scheduleRefresh();\n    return this;\n  };\n  /**\n   * Method updating the value of a given setting key using the provided function.\n   * Note that this will schedule a new render next frame.\n   *\n   * @param  {string}   key     - The setting key to set.\n   * @param  {function} updater - The update function.\n   * @return {Sigma}\n   */\n  Sigma.prototype.updateSetting = function (key, updater) {\n    this.settings[key] = updater(this.settings[key]);\n    (0, settings_1.validateSettings)(this.settings);\n    this.handleSettingsUpdate();\n    this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n    this._scheduleRefresh();\n    return this;\n  };\n  /**\n   * Method used to resize the renderer.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.resize = function () {\n    var previousWidth = this.width,\n      previousHeight = this.height;\n    this.width = this.container.offsetWidth;\n    this.height = this.container.offsetHeight;\n    this.pixelRatio = (0, utils_1.getPixelRatio)();\n    if (this.width === 0) {\n      if (this.settings.allowInvalidContainer) this.width = 1;else throw new Error(\"Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.\");\n    }\n    if (this.height === 0) {\n      if (this.settings.allowInvalidContainer) this.height = 1;else throw new Error(\"Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.\");\n    }\n    // If nothing has changed, we can stop right here\n    if (previousWidth === this.width && previousHeight === this.height) return this;\n    this.emit(\"resize\");\n    // Sizing dom elements\n    for (var id in this.elements) {\n      var element = this.elements[id];\n      element.style.width = this.width + \"px\";\n      element.style.height = this.height + \"px\";\n    }\n    // Sizing canvas contexts\n    for (var id in this.canvasContexts) {\n      this.elements[id].setAttribute(\"width\", this.width * this.pixelRatio + \"px\");\n      this.elements[id].setAttribute(\"height\", this.height * this.pixelRatio + \"px\");\n      if (this.pixelRatio !== 1) this.canvasContexts[id].scale(this.pixelRatio, this.pixelRatio);\n    }\n    // Sizing WebGL contexts\n    for (var id in this.webGLContexts) {\n      this.elements[id].setAttribute(\"width\", this.width * this.pixelRatio + \"px\");\n      this.elements[id].setAttribute(\"height\", this.height * this.pixelRatio + \"px\");\n      this.webGLContexts[id].viewport(0, 0, this.width * this.pixelRatio, this.height * this.pixelRatio);\n    }\n    return this;\n  };\n  /**\n   * Method used to clear all the canvases.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.clear = function () {\n    this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT);\n    this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT);\n    this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);\n    this.canvasContexts.labels.clearRect(0, 0, this.width, this.height);\n    this.canvasContexts.hovers.clearRect(0, 0, this.width, this.height);\n    this.canvasContexts.edgeLabels.clearRect(0, 0, this.width, this.height);\n    return this;\n  };\n  /**\n   * Method used to refresh all computed data.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.refresh = function () {\n    this.needToProcess = true;\n    this._refresh();\n    return this;\n  };\n  /**\n   * Method used to refresh all computed data, at the next available frame.\n   * If this method has already been called this frame, then it will only render once at the next available frame.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.scheduleRefresh = function () {\n    this.needToProcess = true;\n    this._scheduleRefresh();\n    return this;\n  };\n  /**\n   * Method used to (un)zoom, while preserving the position of a viewport point.\n   * Used for instance to zoom \"on the mouse cursor\".\n   *\n   * @param viewportTarget\n   * @param newRatio\n   * @return {CameraState}\n   */\n  Sigma.prototype.getViewportZoomedState = function (viewportTarget, newRatio) {\n    var _a = this.camera.getState(),\n      ratio = _a.ratio,\n      angle = _a.angle,\n      x = _a.x,\n      y = _a.y;\n    // TODO: handle max zoom\n    var ratioDiff = newRatio / ratio;\n    var center = {\n      x: this.width / 2,\n      y: this.height / 2\n    };\n    var graphMousePosition = this.viewportToFramedGraph(viewportTarget);\n    var graphCenterPosition = this.viewportToFramedGraph(center);\n    return {\n      angle: angle,\n      x: (graphMousePosition.x - graphCenterPosition.x) * (1 - ratioDiff) + x,\n      y: (graphMousePosition.y - graphCenterPosition.y) * (1 - ratioDiff) + y,\n      ratio: newRatio\n    };\n  };\n  /**\n   * Method returning the abstract rectangle containing the graph according\n   * to the camera's state.\n   *\n   * @return {object} - The view's rectangle.\n   */\n  Sigma.prototype.viewRectangle = function () {\n    // TODO: reduce relative margin?\n    var marginX = 0 * this.width / 8,\n      marginY = 0 * this.height / 8;\n    var p1 = this.viewportToFramedGraph({\n        x: 0 - marginX,\n        y: 0 - marginY\n      }),\n      p2 = this.viewportToFramedGraph({\n        x: this.width + marginX,\n        y: 0 - marginY\n      }),\n      h = this.viewportToFramedGraph({\n        x: 0,\n        y: this.height + marginY\n      });\n    return {\n      x1: p1.x,\n      y1: p1.y,\n      x2: p2.x,\n      y2: p2.y,\n      height: p2.y - h.y\n    };\n  };\n  /**\n   * Method returning the coordinates of a point from the framed graph system to the viewport system. It allows\n   * overriding anything that is used to get the translation matrix, or even the matrix itself.\n   *\n   * Be careful if overriding dimensions, padding or cameraState, as the computation of the matrix is not the lightest\n   * of computations.\n   */\n  Sigma.prototype.framedGraphToViewport = function (coordinates, override) {\n    if (override === void 0) {\n      override = {};\n    }\n    var recomputeMatrix = !!override.cameraState || !!override.viewportDimensions || !!override.graphDimensions;\n    var matrix = override.matrix ? override.matrix : recomputeMatrix ? (0, utils_1.matrixFromCamera)(override.cameraState || this.camera.getState(), override.viewportDimensions || this.getDimensions(), override.graphDimensions || this.getGraphDimensions(), override.padding || this.getSetting(\"stagePadding\") || 0) : this.matrix;\n    var viewportPos = (0, matrices_1.multiplyVec2)(matrix, coordinates);\n    return {\n      x: (1 + viewportPos.x) * this.width / 2,\n      y: (1 - viewportPos.y) * this.height / 2\n    };\n  };\n  /**\n   * Method returning the coordinates of a point from the viewport system to the framed graph system. It allows\n   * overriding anything that is used to get the translation matrix, or even the matrix itself.\n   *\n   * Be careful if overriding dimensions, padding or cameraState, as the computation of the matrix is not the lightest\n   * of computations.\n   */\n  Sigma.prototype.viewportToFramedGraph = function (coordinates, override) {\n    if (override === void 0) {\n      override = {};\n    }\n    var recomputeMatrix = !!override.cameraState || !!override.viewportDimensions || !override.graphDimensions;\n    var invMatrix = override.matrix ? override.matrix : recomputeMatrix ? (0, utils_1.matrixFromCamera)(override.cameraState || this.camera.getState(), override.viewportDimensions || this.getDimensions(), override.graphDimensions || this.getGraphDimensions(), override.padding || this.getSetting(\"stagePadding\") || 0, true) : this.invMatrix;\n    var res = (0, matrices_1.multiplyVec2)(invMatrix, {\n      x: coordinates.x / this.width * 2 - 1,\n      y: 1 - coordinates.y / this.height * 2\n    });\n    if (isNaN(res.x)) res.x = 0;\n    if (isNaN(res.y)) res.y = 0;\n    return res;\n  };\n  /**\n   * Method used to translate a point's coordinates from the viewport system (pixel distance from the top-left of the\n   * stage) to the graph system (the reference system of data as they are in the given graph instance).\n   *\n   * This method accepts an optional camera which can be useful if you need to translate coordinates\n   * based on a different view than the one being currently being displayed on screen.\n   *\n   * @param {Coordinates}                  viewportPoint\n   * @param {CoordinateConversionOverride} override\n   */\n  Sigma.prototype.viewportToGraph = function (viewportPoint, override) {\n    if (override === void 0) {\n      override = {};\n    }\n    return this.normalizationFunction.inverse(this.viewportToFramedGraph(viewportPoint, override));\n  };\n  /**\n   * Method used to translate a point's coordinates from the graph system (the reference system of data as they are in\n   * the given graph instance) to the viewport system (pixel distance from the top-left of the stage).\n   *\n   * This method accepts an optional camera which can be useful if you need to translate coordinates\n   * based on a different view than the one being currently being displayed on screen.\n   *\n   * @param {Coordinates}                  graphPoint\n   * @param {CoordinateConversionOverride} override\n   */\n  Sigma.prototype.graphToViewport = function (graphPoint, override) {\n    if (override === void 0) {\n      override = {};\n    }\n    return this.framedGraphToViewport(this.normalizationFunction(graphPoint), override);\n  };\n  /**\n   * Method returning the graph's bounding box.\n   *\n   * @return {{ x: Extent, y: Extent }}\n   */\n  Sigma.prototype.getBBox = function () {\n    return (0, utils_1.graphExtent)(this.graph);\n  };\n  /**\n   * Method returning the graph's custom bounding box, if any.\n   *\n   * @return {{ x: Extent, y: Extent } | null}\n   */\n  Sigma.prototype.getCustomBBox = function () {\n    return this.customBBox;\n  };\n  /**\n   * Method used to override the graph's bounding box with a custom one. Give `null` as the argument to stop overriding.\n   *\n   * @return {Sigma}\n   */\n  Sigma.prototype.setCustomBBox = function (customBBox) {\n    this.customBBox = customBBox;\n    this._scheduleRefresh();\n    return this;\n  };\n  /**\n   * Method used to shut the container & release event listeners.\n   *\n   * @return {undefined}\n   */\n  Sigma.prototype.kill = function () {\n    var graph = this.graph;\n    // Emitting \"kill\" events so that plugins and such can cleanup\n    this.emit(\"kill\");\n    // Releasing events\n    this.removeAllListeners();\n    // Releasing camera handlers\n    this.camera.removeListener(\"updated\", this.activeListeners.camera);\n    // Releasing DOM events & captors\n    window.removeEventListener(\"resize\", this.activeListeners.handleResize);\n    this.mouseCaptor.kill();\n    this.touchCaptor.kill();\n    // Releasing graph handlers\n    graph.removeListener(\"nodeAdded\", this.activeListeners.dropNodeGraphUpdate);\n    graph.removeListener(\"nodeDropped\", this.activeListeners.graphUpdate);\n    graph.removeListener(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n    graph.removeListener(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n    graph.removeListener(\"edgeAdded\", this.activeListeners.graphUpdate);\n    graph.removeListener(\"edgeDropped\", this.activeListeners.dropEdgeGraphUpdate);\n    graph.removeListener(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n    graph.removeListener(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n    graph.removeListener(\"edgesCleared\", this.activeListeners.clearEdgesGraphUpdate);\n    graph.removeListener(\"cleared\", this.activeListeners.clearGraphUpdate);\n    // Releasing cache & state\n    this.quadtree = new quadtree_1.default();\n    this.nodeDataCache = {};\n    this.edgeDataCache = {};\n    this.nodesWithForcedLabels = [];\n    this.edgesWithForcedLabels = [];\n    this.highlightedNodes.clear();\n    // Clearing frames\n    if (this.renderFrame) {\n      (0, utils_1.cancelFrame)(this.renderFrame);\n      this.renderFrame = null;\n    }\n    if (this.renderHighlightedNodesFrame) {\n      (0, utils_1.cancelFrame)(this.renderHighlightedNodesFrame);\n      this.renderHighlightedNodesFrame = null;\n    }\n    // Destroying canvases\n    var container = this.container;\n    while (container.firstChild) {\n      container.removeChild(container.firstChild);\n    }\n  };\n  /**\n   * Method used to scale the given size according to the camera's ratio, i.e.\n   * zooming state.\n   *\n   * @param  {number} size - The size to scale (node size, edge thickness etc.).\n   * @return {number}      - The scaled size.\n   */\n  Sigma.prototype.scaleSize = function (size) {\n    return size / this.cameraSizeRatio;\n  };\n  /**\n   * Method that returns the collection of all used canvases.\n   * At the moment, the instantiated canvases are the following, and in the\n   * following order in the DOM:\n   * - `edges`\n   * - `nodes`\n   * - `edgeLabels`\n   * - `labels`\n   * - `hovers`\n   * - `hoverNodes`\n   * - `mouse`\n   *\n   * @return {PlainObject<HTMLCanvasElement>} - The collection of canvases.\n   */\n  Sigma.prototype.getCanvases = function () {\n    return __assign({}, this.elements);\n  };\n  return Sigma;\n}(types_1.TypedEventEmitter);\nexports.default = Sigma;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.animateNodes = exports.ANIMATE_DEFAULTS = void 0;\nvar index_1 = __webpack_require__(0);\nvar easings_1 = __importDefault(__webpack_require__(7));\nexports.ANIMATE_DEFAULTS = {\n  easing: \"quadraticInOut\",\n  duration: 150\n};\n/**\n * Function used to animate the nodes.\n */\nfunction animateNodes(graph, targets, opts, callback) {\n  var options = Object.assign({}, exports.ANIMATE_DEFAULTS, opts);\n  var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n  var start = Date.now();\n  var startPositions = {};\n  for (var node in targets) {\n    var attrs = targets[node];\n    startPositions[node] = {};\n    for (var k in attrs) {\n      startPositions[node][k] = graph.getNodeAttribute(node, k);\n    }\n  }\n  var frame = null;\n  var step = function step() {\n    frame = null;\n    var p = (Date.now() - start) / options.duration;\n    if (p >= 1) {\n      // Animation is done\n      for (var node in targets) {\n        var attrs = targets[node];\n        // We use given values to avoid precision issues and for convenience\n        for (var k in attrs) {\n          graph.setNodeAttribute(node, k, attrs[k]);\n        }\n      }\n      if (typeof callback === \"function\") callback();\n      return;\n    }\n    p = easing(p);\n    for (var node in targets) {\n      var attrs = targets[node];\n      var s = startPositions[node];\n      for (var k in attrs) {\n        graph.setNodeAttribute(node, k, attrs[k] * p + s[k] * (1 - p));\n      }\n    }\n    frame = (0, index_1.requestFrame)(step);\n  };\n  step();\n  return function () {\n    if (frame) (0, index_1.cancelFrame)(frame);\n  };\n}\nexports.animateNodes = animateNodes;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HTML_COLORS = void 0;\nexports.HTML_COLORS = {\n  black: \"#000000\",\n  silver: \"#C0C0C0\",\n  gray: \"#808080\",\n  grey: \"#808080\",\n  white: \"#FFFFFF\",\n  maroon: \"#800000\",\n  red: \"#FF0000\",\n  purple: \"#800080\",\n  fuchsia: \"#FF00FF\",\n  green: \"#008000\",\n  lime: \"#00FF00\",\n  olive: \"#808000\",\n  yellow: \"#FFFF00\",\n  navy: \"#000080\",\n  blue: \"#0000FF\",\n  teal: \"#008080\",\n  aqua: \"#00FFFF\",\n  darkblue: \"#00008B\",\n  mediumblue: \"#0000CD\",\n  darkgreen: \"#006400\",\n  darkcyan: \"#008B8B\",\n  deepskyblue: \"#00BFFF\",\n  darkturquoise: \"#00CED1\",\n  mediumspringgreen: \"#00FA9A\",\n  springgreen: \"#00FF7F\",\n  cyan: \"#00FFFF\",\n  midnightblue: \"#191970\",\n  dodgerblue: \"#1E90FF\",\n  lightseagreen: \"#20B2AA\",\n  forestgreen: \"#228B22\",\n  seagreen: \"#2E8B57\",\n  darkslategray: \"#2F4F4F\",\n  darkslategrey: \"#2F4F4F\",\n  limegreen: \"#32CD32\",\n  mediumseagreen: \"#3CB371\",\n  turquoise: \"#40E0D0\",\n  royalblue: \"#4169E1\",\n  steelblue: \"#4682B4\",\n  darkslateblue: \"#483D8B\",\n  mediumturquoise: \"#48D1CC\",\n  indigo: \"#4B0082\",\n  darkolivegreen: \"#556B2F\",\n  cadetblue: \"#5F9EA0\",\n  cornflowerblue: \"#6495ED\",\n  rebeccapurple: \"#663399\",\n  mediumaquamarine: \"#66CDAA\",\n  dimgray: \"#696969\",\n  dimgrey: \"#696969\",\n  slateblue: \"#6A5ACD\",\n  olivedrab: \"#6B8E23\",\n  slategray: \"#708090\",\n  slategrey: \"#708090\",\n  lightslategray: \"#778899\",\n  lightslategrey: \"#778899\",\n  mediumslateblue: \"#7B68EE\",\n  lawngreen: \"#7CFC00\",\n  chartreuse: \"#7FFF00\",\n  aquamarine: \"#7FFFD4\",\n  skyblue: \"#87CEEB\",\n  lightskyblue: \"#87CEFA\",\n  blueviolet: \"#8A2BE2\",\n  darkred: \"#8B0000\",\n  darkmagenta: \"#8B008B\",\n  saddlebrown: \"#8B4513\",\n  darkseagreen: \"#8FBC8F\",\n  lightgreen: \"#90EE90\",\n  mediumpurple: \"#9370DB\",\n  darkviolet: \"#9400D3\",\n  palegreen: \"#98FB98\",\n  darkorchid: \"#9932CC\",\n  yellowgreen: \"#9ACD32\",\n  sienna: \"#A0522D\",\n  brown: \"#A52A2A\",\n  darkgray: \"#A9A9A9\",\n  darkgrey: \"#A9A9A9\",\n  lightblue: \"#ADD8E6\",\n  greenyellow: \"#ADFF2F\",\n  paleturquoise: \"#AFEEEE\",\n  lightsteelblue: \"#B0C4DE\",\n  powderblue: \"#B0E0E6\",\n  firebrick: \"#B22222\",\n  darkgoldenrod: \"#B8860B\",\n  mediumorchid: \"#BA55D3\",\n  rosybrown: \"#BC8F8F\",\n  darkkhaki: \"#BDB76B\",\n  mediumvioletred: \"#C71585\",\n  indianred: \"#CD5C5C\",\n  peru: \"#CD853F\",\n  chocolate: \"#D2691E\",\n  tan: \"#D2B48C\",\n  lightgray: \"#D3D3D3\",\n  lightgrey: \"#D3D3D3\",\n  thistle: \"#D8BFD8\",\n  orchid: \"#DA70D6\",\n  goldenrod: \"#DAA520\",\n  palevioletred: \"#DB7093\",\n  crimson: \"#DC143C\",\n  gainsboro: \"#DCDCDC\",\n  plum: \"#DDA0DD\",\n  burlywood: \"#DEB887\",\n  lightcyan: \"#E0FFFF\",\n  lavender: \"#E6E6FA\",\n  darksalmon: \"#E9967A\",\n  violet: \"#EE82EE\",\n  palegoldenrod: \"#EEE8AA\",\n  lightcoral: \"#F08080\",\n  khaki: \"#F0E68C\",\n  aliceblue: \"#F0F8FF\",\n  honeydew: \"#F0FFF0\",\n  azure: \"#F0FFFF\",\n  sandybrown: \"#F4A460\",\n  wheat: \"#F5DEB3\",\n  beige: \"#F5F5DC\",\n  whitesmoke: \"#F5F5F5\",\n  mintcream: \"#F5FFFA\",\n  ghostwhite: \"#F8F8FF\",\n  salmon: \"#FA8072\",\n  antiquewhite: \"#FAEBD7\",\n  linen: \"#FAF0E6\",\n  lightgoldenrodyellow: \"#FAFAD2\",\n  oldlace: \"#FDF5E6\",\n  magenta: \"#FF00FF\",\n  deeppink: \"#FF1493\",\n  orangered: \"#FF4500\",\n  tomato: \"#FF6347\",\n  hotpink: \"#FF69B4\",\n  coral: \"#FF7F50\",\n  darkorange: \"#FF8C00\",\n  lightsalmon: \"#FFA07A\",\n  orange: \"#FFA500\",\n  lightpink: \"#FFB6C1\",\n  pink: \"#FFC0CB\",\n  gold: \"#FFD700\",\n  peachpuff: \"#FFDAB9\",\n  navajowhite: \"#FFDEAD\",\n  moccasin: \"#FFE4B5\",\n  bisque: \"#FFE4C4\",\n  mistyrose: \"#FFE4E1\",\n  blanchedalmond: \"#FFEBCD\",\n  papayawhip: \"#FFEFD5\",\n  lavenderblush: \"#FFF0F5\",\n  seashell: \"#FFF5EE\",\n  cornsilk: \"#FFF8DC\",\n  lemonchiffon: \"#FFFACD\",\n  floralwhite: \"#FFFAF0\",\n  snow: \"#FFFAFA\",\n  lightyellow: \"#FFFFE0\",\n  ivory: \"#FFFFF0\"\n};\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\nvar ReflectOwnKeys;\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function get() {\n    return defaultMaxListeners;\n  },\n  set: function set(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\nEventEmitter.init = function () {\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) {\n    args.push(arguments[i]);\n  }\n  var doError = type === 'error';\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n  if (handler === undefined) return false;\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i) {\n      ReflectApply(listeners[i], this, args);\n    }\n  }\n  return true;\n};\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n  checkListener(listener);\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n  return target;\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0) return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\nfunction _onceWrap(target, type, listener) {\n  var state = {\n    fired: false,\n    wrapFn: undefined,\n    target: target,\n    type: type,\n    listener: listener\n  };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  checkListener(listener);\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n};\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n  checkListener(listener);\n  events = this._events;\n  if (events === undefined) return this;\n  list = events[type];\n  if (list === undefined) return this;\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n    if (position < 0) return this;\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n    if (list.length === 1) events[type] = list[0];\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n  return this;\n};\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n  events = this._events;\n  if (events === undefined) return this;\n\n  // not listening for removeListener, no need to emit\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n  listeners = events[type];\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n  return this;\n};\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n  if (events === undefined) return [];\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n  if (events !== undefined) {\n    var evlistener = events[type];\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n  return 0;\n}\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i) {\n    copy[i] = arr[i];\n  }\n  return copy;\n}\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) {\n    list[index] = list[index + 1];\n  }\n  list.pop();\n}\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    }\n    ;\n    eventTargetAgnosticAddListener(emitter, name, resolver, {\n      once: true\n    });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, {\n        once: true\n      });\n    }\n  });\n}\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\n/**\n * Extend function\n * ================\n *\n * Function used to push a bunch of values into an array at once.\n *\n * Its strategy is to mutate target array's length then setting the new indices\n * to be the values to add.\n *\n * A benchmark proved that it is faster than the following strategies:\n *   1) `array.push.apply(array, values)`.\n *   2) A loop of pushes.\n *   3) `array = array.concat(values)`, obviously.\n *\n * Intuitively, this is correct because when adding a lot of elements, the\n * chosen strategies does not need to handle the `arguments` object to\n * execute #.apply's variadicity and because the array know its final length\n * at the beginning, avoiding potential multiple reallocations of the underlying\n * contiguous array. Some engines may be able to optimize the loop of push\n * operations but empirically they don't seem to do so.\n */\n\n/**\n * Extends the target array with the given values.\n *\n * @param  {array} array  - Target array.\n * @param  {array} values - Values to add.\n */\nmodule.exports = function extend(array, values) {\n  var l2 = values.length;\n  if (l2 === 0) return;\n  var l1 = array.length;\n  array.length += l2;\n  for (var i = 0; i < l2; i++) {\n    array[l1 + i] = values[i];\n  }\n};\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.edgeLabelsToDisplayFromNodes = exports.LabelGrid = void 0;\n/**\n * Class representing a single candidate for the label grid selection.\n *\n * It also describes a deterministic way to compare two candidates to assess\n * which one is better.\n */\nvar LabelCandidate = /** @class */function () {\n  function LabelCandidate(key, size) {\n    this.key = key;\n    this.size = size;\n  }\n  LabelCandidate.compare = function (first, second) {\n    // First we compare by size\n    if (first.size > second.size) return -1;\n    if (first.size < second.size) return 1;\n    // Then since no two nodes can have the same key, we use it to\n    // deterministically tie-break by key\n    if (first.key > second.key) return 1;\n    // NOTE: this comparator cannot return 0\n    return -1;\n  };\n  return LabelCandidate;\n}();\n/**\n * Class representing a 2D spatial grid divided into constant-size cells.\n */\nvar LabelGrid = /** @class */function () {\n  function LabelGrid() {\n    this.width = 0;\n    this.height = 0;\n    this.cellSize = 0;\n    this.columns = 0;\n    this.rows = 0;\n    this.cells = {};\n  }\n  LabelGrid.prototype.resizeAndClear = function (dimensions, cellSize) {\n    this.width = dimensions.width;\n    this.height = dimensions.height;\n    this.cellSize = cellSize;\n    this.columns = Math.ceil(dimensions.width / cellSize);\n    this.rows = Math.ceil(dimensions.height / cellSize);\n    this.cells = {};\n  };\n  LabelGrid.prototype.getIndex = function (pos) {\n    var xIndex = Math.floor(pos.x / this.cellSize);\n    var yIndex = Math.floor(pos.y / this.cellSize);\n    return yIndex * this.columns + xIndex;\n  };\n  LabelGrid.prototype.add = function (key, size, pos) {\n    var candidate = new LabelCandidate(key, size);\n    var index = this.getIndex(pos);\n    var cell = this.cells[index];\n    if (!cell) {\n      cell = [];\n      this.cells[index] = cell;\n    }\n    cell.push(candidate);\n  };\n  LabelGrid.prototype.organize = function () {\n    for (var k in this.cells) {\n      var cell = this.cells[k];\n      cell.sort(LabelCandidate.compare);\n    }\n  };\n  LabelGrid.prototype.getLabelsToDisplay = function (ratio, density) {\n    // TODO: work on visible nodes to optimize? ^ -> threshold outside so that memoization works?\n    // TODO: adjust threshold lower, but increase cells a bit?\n    // TODO: hunt for geom issue in disguise\n    // TODO: memoize while ratio does not move. method to force recompute\n    var cellArea = this.cellSize * this.cellSize;\n    var scaledCellArea = cellArea / ratio / ratio;\n    var scaledDensity = scaledCellArea * density / cellArea;\n    var labelsToDisplayPerCell = Math.ceil(scaledDensity);\n    var labels = [];\n    for (var k in this.cells) {\n      var cell = this.cells[k];\n      for (var i = 0; i < Math.min(labelsToDisplayPerCell, cell.length); i++) {\n        labels.push(cell[i].key);\n      }\n    }\n    return labels;\n  };\n  return LabelGrid;\n}();\nexports.LabelGrid = LabelGrid;\n/**\n * Label heuristic selecting edge labels to display, based on displayed node\n * labels\n *\n * @param  {object} params                 - Parameters:\n * @param  {Set}      displayedNodeLabels  - Currently displayed node labels.\n * @param  {Set}      highlightedNodes     - Highlighted nodes.\n * @param  {Graph}    graph                - The rendered graph.\n * @param  {string}   hoveredNode          - Hovered node (optional)\n * @return {Array}                         - The selected labels.\n */\nfunction edgeLabelsToDisplayFromNodes(params) {\n  var graph = params.graph,\n    hoveredNode = params.hoveredNode,\n    highlightedNodes = params.highlightedNodes,\n    displayedNodeLabels = params.displayedNodeLabels;\n  var worthyEdges = [];\n  // TODO: the code below can be optimized using #.forEach and batching the code per adj\n  // We should display an edge's label if:\n  //   - Any of its extremities is highlighted or hovered\n  //   - Both of its extremities has its label shown\n  graph.forEachEdge(function (edge, _, source, target) {\n    if (source === hoveredNode || target === hoveredNode || highlightedNodes.has(source) || highlightedNodes.has(target) || displayedNodeLabels.has(source) && displayedNodeLabels.has(target)) {\n      worthyEdges.push(edge);\n    }\n  });\n  return worthyEdges;\n}\nexports.edgeLabelsToDisplayFromNodes = edgeLabelsToDisplayFromNodes;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Sigma.js Settings\n * =================================\n *\n * The list of settings and some handy functions.\n * @module\n */\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DEFAULT_SETTINGS = exports.validateSettings = void 0;\nvar label_1 = __importDefault(__webpack_require__(11));\nvar hover_1 = __importDefault(__webpack_require__(26));\nvar edge_label_1 = __importDefault(__webpack_require__(27));\nvar node_fast_1 = __importDefault(__webpack_require__(28));\nvar edge_1 = __importDefault(__webpack_require__(33));\nvar edge_arrow_1 = __importDefault(__webpack_require__(35));\nfunction validateSettings(settings) {\n  if (typeof settings.labelDensity !== \"number\" || settings.labelDensity < 0) {\n    throw new Error(\"Settings: invalid `labelDensity`. Expecting a positive number.\");\n  }\n  var minCameraRatio = settings.minCameraRatio,\n    maxCameraRatio = settings.maxCameraRatio;\n  if (typeof minCameraRatio === \"number\" && typeof maxCameraRatio === \"number\" && maxCameraRatio < minCameraRatio) {\n    throw new Error(\"Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.\");\n  }\n}\nexports.validateSettings = validateSettings;\nexports.DEFAULT_SETTINGS = {\n  // Performance\n  hideEdgesOnMove: false,\n  hideLabelsOnMove: false,\n  renderLabels: true,\n  renderEdgeLabels: false,\n  enableEdgeClickEvents: false,\n  enableEdgeWheelEvents: false,\n  enableEdgeHoverEvents: false,\n  // Component rendering\n  defaultNodeColor: \"#999\",\n  defaultNodeType: \"circle\",\n  defaultEdgeColor: \"#ccc\",\n  defaultEdgeType: \"line\",\n  labelFont: \"Arial\",\n  labelSize: 14,\n  labelWeight: \"normal\",\n  labelColor: {\n    color: \"#000\"\n  },\n  edgeLabelFont: \"Arial\",\n  edgeLabelSize: 14,\n  edgeLabelWeight: \"normal\",\n  edgeLabelColor: {\n    attribute: \"color\"\n  },\n  stagePadding: 30,\n  // Labels\n  labelDensity: 1,\n  labelGridCellSize: 100,\n  labelRenderedSizeThreshold: 6,\n  // Reducers\n  nodeReducer: null,\n  edgeReducer: null,\n  // Features\n  zIndex: false,\n  minCameraRatio: null,\n  maxCameraRatio: null,\n  // Renderers\n  labelRenderer: label_1.default,\n  hoverRenderer: hover_1.default,\n  edgeLabelRenderer: edge_label_1.default,\n  // Lifecycle\n  allowInvalidContainer: false,\n  // Program classes\n  nodeProgramClasses: {\n    circle: node_fast_1.default\n  },\n  edgeProgramClasses: {\n    arrow: edge_arrow_1.default,\n    line: edge_1.default\n  }\n};\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar label_1 = __importDefault(__webpack_require__(11));\n/**\n * Draw an hovered node.\n * - if there is no label => display a shadow on the node\n * - if the label box is bigger than node size => display a label box that contains the node with a shadow\n * - else node with shadow and the label box\n */\nfunction drawHover(context, data, settings) {\n  var size = settings.labelSize,\n    font = settings.labelFont,\n    weight = settings.labelWeight;\n  context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n  // Then we draw the label background\n  context.fillStyle = \"#FFF\";\n  context.shadowOffsetX = 0;\n  context.shadowOffsetY = 0;\n  context.shadowBlur = 8;\n  context.shadowColor = \"#000\";\n  var PADDING = 2;\n  if (typeof data.label === \"string\") {\n    var textWidth = context.measureText(data.label).width,\n      boxWidth = Math.round(textWidth + 5),\n      boxHeight = Math.round(size + 2 * PADDING),\n      radius = Math.max(data.size, size / 2) + PADDING;\n    var angleRadian = Math.asin(boxHeight / 2 / radius);\n    var xDeltaCoord = Math.sqrt(Math.abs(Math.pow(radius, 2) - Math.pow(boxHeight / 2, 2)));\n    context.beginPath();\n    context.moveTo(data.x + xDeltaCoord, data.y + boxHeight / 2);\n    context.lineTo(data.x + radius + boxWidth, data.y + boxHeight / 2);\n    context.lineTo(data.x + radius + boxWidth, data.y - boxHeight / 2);\n    context.lineTo(data.x + xDeltaCoord, data.y - boxHeight / 2);\n    context.arc(data.x, data.y, radius, angleRadian, -angleRadian);\n    context.closePath();\n    context.fill();\n  } else {\n    context.beginPath();\n    context.arc(data.x, data.y, data.size + PADDING, 0, Math.PI * 2);\n    context.closePath();\n    context.fill();\n  }\n  context.shadowOffsetX = 0;\n  context.shadowOffsetY = 0;\n  context.shadowBlur = 0;\n  // And finally we draw the label\n  (0, label_1.default)(context, data, settings);\n}\nexports.default = drawHover;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction drawEdgeLabel(context, edgeData, sourceData, targetData, settings) {\n  var size = settings.edgeLabelSize,\n    font = settings.edgeLabelFont,\n    weight = settings.edgeLabelWeight,\n    color = settings.edgeLabelColor.attribute ? edgeData[settings.edgeLabelColor.attribute] || settings.edgeLabelColor.color || \"#000\" : settings.edgeLabelColor.color;\n  var label = edgeData.label;\n  if (!label) return;\n  context.fillStyle = color;\n  context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n  // Computing positions without considering nodes sizes:\n  var sSize = sourceData.size;\n  var tSize = targetData.size;\n  var sx = sourceData.x;\n  var sy = sourceData.y;\n  var tx = targetData.x;\n  var ty = targetData.y;\n  var cx = (sx + tx) / 2;\n  var cy = (sy + ty) / 2;\n  var dx = tx - sx;\n  var dy = ty - sy;\n  var d = Math.sqrt(dx * dx + dy * dy);\n  if (d < sSize + tSize) return;\n  // Adding nodes sizes:\n  sx += dx * sSize / d;\n  sy += dy * sSize / d;\n  tx -= dx * tSize / d;\n  ty -= dy * tSize / d;\n  cx = (sx + tx) / 2;\n  cy = (sy + ty) / 2;\n  dx = tx - sx;\n  dy = ty - sy;\n  d = Math.sqrt(dx * dx + dy * dy);\n  // Handling ellipsis\n  var textLength = context.measureText(label).width;\n  if (textLength > d) {\n    var ellipsis = \"\";\n    label = label + ellipsis;\n    textLength = context.measureText(label).width;\n    while (textLength > d && label.length > 1) {\n      label = label.slice(0, -2) + ellipsis;\n      textLength = context.measureText(label).width;\n    }\n    if (label.length < 4) return;\n  }\n  var angle;\n  if (dx > 0) {\n    if (dy > 0) angle = Math.acos(dx / d);else angle = Math.asin(dy / d);\n  } else {\n    if (dy > 0) angle = Math.acos(dx / d) + Math.PI;else angle = Math.asin(dx / d) + Math.PI / 2;\n  }\n  context.save();\n  context.translate(cx, cy);\n  context.rotate(angle);\n  context.fillText(label, -textLength / 2, edgeData.size / 2 + size);\n  context.restore();\n}\nexports.default = drawEdgeLabel;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar utils_1 = __webpack_require__(0);\nvar node_fast_vert_glsl_1 = __importDefault(__webpack_require__(29));\nvar node_fast_frag_glsl_1 = __importDefault(__webpack_require__(30));\nvar node_1 = __webpack_require__(31);\nvar POINTS = 1,\n  ATTRIBUTES = 4;\nvar NodeFastProgram = /** @class */function (_super) {\n  __extends(NodeFastProgram, _super);\n  function NodeFastProgram(gl) {\n    var _this = _super.call(this, gl, node_fast_vert_glsl_1.default, node_fast_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n    _this.bind();\n    return _this;\n  }\n  NodeFastProgram.prototype.process = function (data, hidden, offset) {\n    var array = this.array;\n    var i = offset * POINTS * ATTRIBUTES;\n    if (hidden) {\n      array[i++] = 0;\n      array[i++] = 0;\n      array[i++] = 0;\n      array[i++] = 0;\n      return;\n    }\n    var color = (0, utils_1.floatColor)(data.color);\n    array[i++] = data.x;\n    array[i++] = data.y;\n    array[i++] = data.size;\n    array[i] = color;\n  };\n  NodeFastProgram.prototype.render = function (params) {\n    if (this.hasNothingToRender()) return;\n    var gl = this.gl;\n    var program = this.program;\n    gl.useProgram(program);\n    gl.uniform1f(this.ratioLocation, 1 / Math.sqrt(params.ratio));\n    gl.uniform1f(this.scaleLocation, params.scalingRatio);\n    gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n    gl.drawArrays(gl.POINTS, 0, this.array.length / ATTRIBUTES);\n  };\n  return NodeFastProgram;\n}(node_1.AbstractNodeProgram);\nexports.default = NodeFastProgram;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports) {\n\n(function () {\n  \"use strict\";\n\n  var o = {\n      d: function d(t, e) {\n        for (var n in e) {\n          o.o(e, n) && !o.o(t, n) && Object.defineProperty(t, n, {\n            enumerable: !0,\n            get: e[n]\n          });\n        }\n      },\n      o: function o(_o, t) {\n        return Object.prototype.hasOwnProperty.call(_o, t);\n      },\n      r: function r(o) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(o, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(o, \"__esModule\", {\n          value: !0\n        });\n      }\n    },\n    t = {};\n  o.r(t), o.d(t, {\n    default: function _default() {\n      return e;\n    }\n  });\n  var e = \"attribute vec2 a_position;\\nattribute float a_size;\\nattribute vec4 a_color;\\n\\nuniform float u_ratio;\\nuniform float u_scale;\\nuniform mat3 u_matrix;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  gl_Position = vec4(\\n    (u_matrix * vec3(a_position, 1)).xy,\\n    0,\\n    1\\n  );\\n\\n  // Multiply the point size twice:\\n  //  - x SCALING_RATIO to correct the canvas scaling\\n  //  - x 2 to correct the formulae\\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\\n\\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";\n  module.exports = t;\n})();\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n(function () {\n  \"use strict\";\n\n  var e = {\n      d: function d(n, o) {\n        for (var t in o) {\n          e.o(o, t) && !e.o(n, t) && Object.defineProperty(n, t, {\n            enumerable: !0,\n            get: o[t]\n          });\n        }\n      },\n      o: function o(e, n) {\n        return Object.prototype.hasOwnProperty.call(e, n);\n      },\n      r: function r(e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(e, \"__esModule\", {\n          value: !0\n        });\n      }\n    },\n    n = {};\n  e.r(n), e.d(n, {\n    default: function _default() {\n      return o;\n    }\n  });\n  var o = \"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float radius = 0.5;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\\n  float dist = radius - length(m);\\n\\n  float t = 0.0;\\n  if (dist > v_border)\\n    t = 1.0;\\n  else if (dist > 0.0)\\n    t = dist / v_border;\\n\\n  gl_FragColor = mix(transparent, v_color, t);\\n}\\n\";\n  module.exports = n;\n})();\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createNodeCompoundProgram = exports.AbstractNodeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Node Program\n * =====================================\n *\n * @module\n */\nvar program_1 = __webpack_require__(12);\n/**\n * Node Program class.\n *\n * @constructor\n */\nvar AbstractNodeProgram = /** @class */function (_super) {\n  __extends(AbstractNodeProgram, _super);\n  function AbstractNodeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n    var _this = _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n    // Locations\n    _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n    _this.sizeLocation = gl.getAttribLocation(_this.program, \"a_size\");\n    _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n    // Uniform Location\n    var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n    if (matrixLocation === null) throw new Error(\"AbstractNodeProgram: error while getting matrixLocation\");\n    _this.matrixLocation = matrixLocation;\n    var ratioLocation = gl.getUniformLocation(_this.program, \"u_ratio\");\n    if (ratioLocation === null) throw new Error(\"AbstractNodeProgram: error while getting ratioLocation\");\n    _this.ratioLocation = ratioLocation;\n    var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n    if (scaleLocation === null) throw new Error(\"AbstractNodeProgram: error while getting scaleLocation\");\n    _this.scaleLocation = scaleLocation;\n    return _this;\n  }\n  AbstractNodeProgram.prototype.bind = function () {\n    var gl = this.gl;\n    gl.enableVertexAttribArray(this.positionLocation);\n    gl.enableVertexAttribArray(this.sizeLocation);\n    gl.enableVertexAttribArray(this.colorLocation);\n    gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 0);\n    gl.vertexAttribPointer(this.sizeLocation, 1, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 8);\n    gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, this.attributes * Float32Array.BYTES_PER_ELEMENT, 12);\n  };\n  return AbstractNodeProgram;\n}(program_1.AbstractProgram);\nexports.AbstractNodeProgram = AbstractNodeProgram;\n/**\n * Helper function combining two or more programs into a single compound one.\n * Note that this is more a quick & easy way to combine program than a really\n * performant option. More performant programs can be written entirely.\n *\n * @param  {array}    programClasses - Program classes to combine.\n * @return {function}\n */\nfunction createNodeCompoundProgram(programClasses) {\n  return (/** @class */function () {\n      function NodeCompoundProgram(gl, renderer) {\n        this.programs = programClasses.map(function (ProgramClass) {\n          return new ProgramClass(gl, renderer);\n        });\n      }\n      NodeCompoundProgram.prototype.bufferData = function () {\n        this.programs.forEach(function (program) {\n          return program.bufferData();\n        });\n      };\n      NodeCompoundProgram.prototype.allocate = function (capacity) {\n        this.programs.forEach(function (program) {\n          return program.allocate(capacity);\n        });\n      };\n      NodeCompoundProgram.prototype.bind = function () {\n        // nothing todo, it's already done in each program constructor\n      };\n      NodeCompoundProgram.prototype.render = function (params) {\n        this.programs.forEach(function (program) {\n          program.bind();\n          program.bufferData();\n          program.render(params);\n        });\n      };\n      NodeCompoundProgram.prototype.process = function (data, hidden, offset) {\n        this.programs.forEach(function (program) {\n          return program.process(data, hidden, offset);\n        });\n      };\n      return NodeCompoundProgram;\n    }()\n  );\n}\nexports.createNodeCompoundProgram = createNodeCompoundProgram;\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Sigma.js Shader Utils\n * ======================\n *\n * Code used to load sigma's shaders.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadProgram = exports.loadFragmentShader = exports.loadVertexShader = void 0;\n/**\n * Function used to load a shader.\n */\nfunction loadShader(type, gl, source) {\n  var glType = type === \"VERTEX\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER;\n  // Creating the shader\n  var shader = gl.createShader(glType);\n  if (shader === null) {\n    throw new Error(\"loadShader: error while creating the shader\");\n  }\n  // Loading source\n  gl.shaderSource(shader, source);\n  // Compiling the shader\n  gl.compileShader(shader);\n  // Retrieving compilation status\n  var successfullyCompiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n  // Throwing if something went awry\n  if (!successfullyCompiled) {\n    var infoLog = gl.getShaderInfoLog(shader);\n    gl.deleteShader(shader);\n    throw new Error(\"loadShader: error while compiling the shader:\\n\".concat(infoLog, \"\\n\").concat(source));\n  }\n  return shader;\n}\nfunction loadVertexShader(gl, source) {\n  return loadShader(\"VERTEX\", gl, source);\n}\nexports.loadVertexShader = loadVertexShader;\nfunction loadFragmentShader(gl, source) {\n  return loadShader(\"FRAGMENT\", gl, source);\n}\nexports.loadFragmentShader = loadFragmentShader;\n/**\n * Function used to load a program.\n */\nfunction loadProgram(gl, shaders) {\n  var program = gl.createProgram();\n  if (program === null) {\n    throw new Error(\"loadProgram: error while creating the program.\");\n  }\n  var i, l;\n  // Attaching the shaders\n  for (i = 0, l = shaders.length; i < l; i++) {\n    gl.attachShader(program, shaders[i]);\n  }\n  gl.linkProgram(program);\n  // Checking status\n  var successfullyLinked = gl.getProgramParameter(program, gl.LINK_STATUS);\n  if (!successfullyLinked) {\n    gl.deleteProgram(program);\n    throw new Error(\"loadProgram: error while linking the program.\");\n  }\n  return program;\n}\nexports.loadProgram = loadProgram;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Sigma.js WebGL Renderer Edge Program\n * =====================================\n *\n * Program rendering edges as thick lines using four points translated\n * orthogonally from the source & target's centers by half thickness.\n *\n * Rendering two triangles by using only four points is made possible through\n * the use of indices.\n *\n * This method should be faster than the 6 points / 2 triangles approach and\n * should handle thickness better than with gl.LINES.\n *\n * This version of the shader balances geometry computation evenly between\n * the CPU & GPU (normals are computed on the CPU side).\n * @module\n */\nvar utils_1 = __webpack_require__(0);\nvar edge_vert_glsl_1 = __importDefault(__webpack_require__(34));\nvar edge_frag_glsl_1 = __importDefault(__webpack_require__(13));\nvar edge_1 = __webpack_require__(2);\nvar POINTS = 4,\n  ATTRIBUTES = 5,\n  STRIDE = POINTS * ATTRIBUTES;\nvar EdgeProgram = /** @class */function (_super) {\n  __extends(EdgeProgram, _super);\n  function EdgeProgram(gl) {\n    var _this = _super.call(this, gl, edge_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n    // Initializing indices buffer\n    var indicesBuffer = gl.createBuffer();\n    if (indicesBuffer === null) throw new Error(\"EdgeProgram: error while creating indicesBuffer\");\n    _this.indicesBuffer = indicesBuffer;\n    // Locations\n    _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n    _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n    _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n    var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n    if (matrixLocation === null) throw new Error(\"EdgeProgram: error while getting matrixLocation\");\n    _this.matrixLocation = matrixLocation;\n    var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n    if (correctionRatioLocation === null) throw new Error(\"EdgeProgram: error while getting correctionRatioLocation\");\n    _this.correctionRatioLocation = correctionRatioLocation;\n    var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n    if (sqrtZoomRatioLocation === null) throw new Error(\"EdgeProgram: error while getting sqrtZoomRatioLocation\");\n    _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n    // Enabling the OES_element_index_uint extension\n    // NOTE: on older GPUs, this means that really large graphs won't\n    // have all their edges rendered. But it seems that the\n    // `OES_element_index_uint` is quite everywhere so we'll handle\n    // the potential issue if it really arises.\n    // NOTE: when using webgl2, the extension is enabled by default\n    _this.canUse32BitsIndices = (0, utils_1.canUse32BitsIndices)(gl);\n    _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n    _this.indicesArray = new _this.IndicesArray();\n    _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n    _this.bind();\n    return _this;\n  }\n  EdgeProgram.prototype.bind = function () {\n    var gl = this.gl;\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n    // Bindings\n    gl.enableVertexAttribArray(this.positionLocation);\n    gl.enableVertexAttribArray(this.normalLocation);\n    gl.enableVertexAttribArray(this.colorLocation);\n    gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n    gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n    gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n  };\n  EdgeProgram.prototype.computeIndices = function () {\n    var l = this.array.length / ATTRIBUTES;\n    var size = l + l / 2;\n    var indices = new this.IndicesArray(size);\n    for (var i = 0, c = 0; i < l; i += 4) {\n      indices[c++] = i;\n      indices[c++] = i + 1;\n      indices[c++] = i + 2;\n      indices[c++] = i + 2;\n      indices[c++] = i + 1;\n      indices[c++] = i + 3;\n    }\n    this.indicesArray = indices;\n  };\n  EdgeProgram.prototype.bufferData = function () {\n    _super.prototype.bufferData.call(this);\n    // Indices data\n    var gl = this.gl;\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n  };\n  EdgeProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n    if (hidden) {\n      for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++) {\n        this.array[i_1] = 0;\n      }\n      return;\n    }\n    var thickness = data.size || 1,\n      x1 = sourceData.x,\n      y1 = sourceData.y,\n      x2 = targetData.x,\n      y2 = targetData.y,\n      color = (0, utils_1.floatColor)(data.color);\n    // Computing normals\n    var dx = x2 - x1,\n      dy = y2 - y1;\n    var len = dx * dx + dy * dy,\n      n1 = 0,\n      n2 = 0;\n    if (len) {\n      len = 1 / Math.sqrt(len);\n      n1 = -dy * len * thickness;\n      n2 = dx * len * thickness;\n    }\n    var i = POINTS * ATTRIBUTES * offset;\n    var array = this.array;\n    // First point\n    array[i++] = x1;\n    array[i++] = y1;\n    array[i++] = n1;\n    array[i++] = n2;\n    array[i++] = color;\n    // First point flipped\n    array[i++] = x1;\n    array[i++] = y1;\n    array[i++] = -n1;\n    array[i++] = -n2;\n    array[i++] = color;\n    // Second point\n    array[i++] = x2;\n    array[i++] = y2;\n    array[i++] = n1;\n    array[i++] = n2;\n    array[i++] = color;\n    // Second point flipped\n    array[i++] = x2;\n    array[i++] = y2;\n    array[i++] = -n1;\n    array[i++] = -n2;\n    array[i] = color;\n  };\n  EdgeProgram.prototype.render = function (params) {\n    if (this.hasNothingToRender()) return;\n    var gl = this.gl;\n    var program = this.program;\n    gl.useProgram(program);\n    gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n    gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n    gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n    // Drawing:\n    gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n  };\n  return EdgeProgram;\n}(edge_1.AbstractEdgeProgram);\nexports.default = EdgeProgram;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n(function () {\n  \"use strict\";\n\n  var e = {\n      d: function d(n, o) {\n        for (var t in o) {\n          e.o(o, t) && !e.o(n, t) && Object.defineProperty(n, t, {\n            enumerable: !0,\n            get: o[t]\n          });\n        }\n      },\n      o: function o(e, n) {\n        return Object.prototype.hasOwnProperty.call(e, n);\n      },\n      r: function r(e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(e, \"__esModule\", {\n          value: !0\n        });\n      }\n    },\n    n = {};\n  e.r(n), e.d(n, {\n    default: function _default() {\n      return o;\n    }\n  });\n  var o = 'attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // We require edges to be at least `minThickness` pixels thick *on screen*\\n  // (so we need to compensate the SQRT zoom ratio):\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n\\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\\n  // referential (in a ([0, 1], [0, 1]) space), using our \"magic\" correction\\n  // ratio:\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n\\n  // Finally, we adapt the edge thickness to the \"SQRT rule\" in sigma (so that\\n  // items are not too big when zoomed in, and not too small when zoomed out).\\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\\n  // it\\'s simpler like this:\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\\n\\n  // For the fragment shader though, we need a thickness that takes the \"magic\"\\n  // correction ratio into account (as in webGLThickness), but so that the\\n  // antialiasint effect does not depend on the zoom level. So here\\'s yet\\n  // another thickness version:\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n';\n  module.exports = n;\n})();\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Sigma.js WebGL Renderer Edge Arrow Program\n * ===========================================\n *\n * Compound program rendering edges as an arrow from the source to the target.\n * @module\n */\nvar edge_1 = __webpack_require__(2);\nvar edge_arrowHead_1 = __importDefault(__webpack_require__(36));\nvar edge_clamped_1 = __importDefault(__webpack_require__(39));\nvar EdgeArrowProgram = (0, edge_1.createEdgeCompoundProgram)([edge_clamped_1.default, edge_arrowHead_1.default]);\nexports.default = EdgeArrowProgram;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar utils_1 = __webpack_require__(0);\nvar edge_arrowHead_vert_glsl_1 = __importDefault(__webpack_require__(37));\nvar edge_arrowHead_frag_glsl_1 = __importDefault(__webpack_require__(38));\nvar edge_1 = __webpack_require__(2);\nvar POINTS = 3,\n  ATTRIBUTES = 9,\n  STRIDE = POINTS * ATTRIBUTES;\nvar EdgeArrowHeadProgram = /** @class */function (_super) {\n  __extends(EdgeArrowHeadProgram, _super);\n  function EdgeArrowHeadProgram(gl) {\n    var _this = _super.call(this, gl, edge_arrowHead_vert_glsl_1.default, edge_arrowHead_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n    // Locations\n    _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n    _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n    _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n    _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n    _this.barycentricLocation = gl.getAttribLocation(_this.program, \"a_barycentric\");\n    // Uniform locations\n    var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n    if (matrixLocation === null) throw new Error(\"EdgeArrowHeadProgram: error while getting matrixLocation\");\n    _this.matrixLocation = matrixLocation;\n    var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n    if (sqrtZoomRatioLocation === null) throw new Error(\"EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation\");\n    _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n    var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n    if (correctionRatioLocation === null) throw new Error(\"EdgeArrowHeadProgram: error while getting correctionRatioLocation\");\n    _this.correctionRatioLocation = correctionRatioLocation;\n    _this.bind();\n    return _this;\n  }\n  EdgeArrowHeadProgram.prototype.bind = function () {\n    var gl = this.gl;\n    // Bindings\n    gl.enableVertexAttribArray(this.positionLocation);\n    gl.enableVertexAttribArray(this.normalLocation);\n    gl.enableVertexAttribArray(this.radiusLocation);\n    gl.enableVertexAttribArray(this.colorLocation);\n    gl.enableVertexAttribArray(this.barycentricLocation);\n    gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n    gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n    gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n    gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n    // TODO: maybe we can optimize here by packing this in a bit mask\n    gl.vertexAttribPointer(this.barycentricLocation, 3, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 24);\n  };\n  EdgeArrowHeadProgram.prototype.computeIndices = function () {\n    // nothing to do\n  };\n  EdgeArrowHeadProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n    if (hidden) {\n      for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++) {\n        this.array[i_1] = 0;\n      }\n      return;\n    }\n    var thickness = data.size || 1,\n      radius = targetData.size || 1,\n      x1 = sourceData.x,\n      y1 = sourceData.y,\n      x2 = targetData.x,\n      y2 = targetData.y,\n      color = (0, utils_1.floatColor)(data.color);\n    // Computing normals\n    var dx = x2 - x1,\n      dy = y2 - y1;\n    var len = dx * dx + dy * dy,\n      n1 = 0,\n      n2 = 0;\n    if (len) {\n      len = 1 / Math.sqrt(len);\n      n1 = -dy * len * thickness;\n      n2 = dx * len * thickness;\n    }\n    var i = POINTS * ATTRIBUTES * offset;\n    var array = this.array;\n    // First point\n    array[i++] = x2;\n    array[i++] = y2;\n    array[i++] = -n1;\n    array[i++] = -n2;\n    array[i++] = radius;\n    array[i++] = color;\n    array[i++] = 1;\n    array[i++] = 0;\n    array[i++] = 0;\n    // Second point\n    array[i++] = x2;\n    array[i++] = y2;\n    array[i++] = -n1;\n    array[i++] = -n2;\n    array[i++] = radius;\n    array[i++] = color;\n    array[i++] = 0;\n    array[i++] = 1;\n    array[i++] = 0;\n    // Third point\n    array[i++] = x2;\n    array[i++] = y2;\n    array[i++] = -n1;\n    array[i++] = -n2;\n    array[i++] = radius;\n    array[i++] = color;\n    array[i++] = 0;\n    array[i++] = 0;\n    array[i] = 1;\n  };\n  EdgeArrowHeadProgram.prototype.render = function (params) {\n    if (this.hasNothingToRender()) return;\n    var gl = this.gl;\n    var program = this.program;\n    gl.useProgram(program);\n    // Binding uniforms\n    gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n    gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n    gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n    // Drawing:\n    gl.drawArrays(gl.TRIANGLES, 0, this.array.length / ATTRIBUTES);\n  };\n  return EdgeArrowHeadProgram;\n}(edge_1.AbstractEdgeProgram);\nexports.default = EdgeArrowHeadProgram;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports) {\n\n(function () {\n  \"use strict\";\n\n  var a = {\n      d: function d(e, t) {\n        for (var o in t) {\n          a.o(t, o) && !a.o(e, o) && Object.defineProperty(e, o, {\n            enumerable: !0,\n            get: t[o]\n          });\n        }\n      },\n      o: function o(a, e) {\n        return Object.prototype.hasOwnProperty.call(a, e);\n      },\n      r: function r(a) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(a, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(a, \"__esModule\", {\n          value: !0\n        });\n      }\n    },\n    e = {};\n  a.r(e), a.d(e, {\n    default: function _default() {\n      return t;\n    }\n  });\n  var t = \"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_radius;\\nattribute vec4 a_color;\\nattribute vec3 a_barycentric;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadWidthLengthRatio = 0.66;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl and\\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\\n  // happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\\n\\n  float da = a_barycentric.x;\\n  float db = a_barycentric.y;\\n  float dc = a_barycentric.z;\\n\\n  vec2 delta = vec2(\\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\\n\\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n  );\\n\\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";\n  module.exports = e;\n})();\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports) {\n\n(function () {\n  \"use strict\";\n\n  var e = {\n      d: function d(o, r) {\n        for (var t in r) {\n          e.o(r, t) && !e.o(o, t) && Object.defineProperty(o, t, {\n            enumerable: !0,\n            get: r[t]\n          });\n        }\n      },\n      o: function o(e, _o) {\n        return Object.prototype.hasOwnProperty.call(e, _o);\n      },\n      r: function r(e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(e, \"__esModule\", {\n          value: !0\n        });\n      }\n    },\n    o = {};\n  e.r(o), e.d(o, {\n    default: function _default() {\n      return r;\n    }\n  });\n  var r = \"precision mediump float;\\n\\nvarying vec4 v_color;\\n\\nvoid main(void) {\\n  gl_FragColor = v_color;\\n}\\n\";\n  module.exports = o;\n})();\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar edge_1 = __webpack_require__(2);\nvar utils_1 = __webpack_require__(0);\nvar edge_clamped_vert_glsl_1 = __importDefault(__webpack_require__(40));\nvar edge_frag_glsl_1 = __importDefault(__webpack_require__(13));\nvar POINTS = 4,\n  ATTRIBUTES = 6,\n  STRIDE = POINTS * ATTRIBUTES;\nvar EdgeClampedProgram = /** @class */function (_super) {\n  __extends(EdgeClampedProgram, _super);\n  function EdgeClampedProgram(gl) {\n    var _this = _super.call(this, gl, edge_clamped_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n    // Initializing indices buffer\n    var indicesBuffer = gl.createBuffer();\n    if (indicesBuffer === null) throw new Error(\"EdgeClampedProgram: error while getting resolutionLocation\");\n    _this.indicesBuffer = indicesBuffer;\n    // Locations:\n    _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n    _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n    _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n    _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n    // Uniform locations\n    var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n    if (matrixLocation === null) throw new Error(\"EdgeClampedProgram: error while getting matrixLocation\");\n    _this.matrixLocation = matrixLocation;\n    var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n    if (sqrtZoomRatioLocation === null) throw new Error(\"EdgeClampedProgram: error while getting cameraRatioLocation\");\n    _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n    var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n    if (correctionRatioLocation === null) throw new Error(\"EdgeClampedProgram: error while getting viewportRatioLocation\");\n    _this.correctionRatioLocation = correctionRatioLocation;\n    // Enabling the OES_element_index_uint extension\n    // NOTE: on older GPUs, this means that really large graphs won't\n    // have all their edges rendered. But it seems that the\n    // `OES_element_index_uint` is quite everywhere so we'll handle\n    // the potential issue if it really arises.\n    // NOTE: when using webgl2, the extension is enabled by default\n    _this.canUse32BitsIndices = (0, utils_1.canUse32BitsIndices)(gl);\n    _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n    _this.indicesArray = new _this.IndicesArray();\n    _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n    _this.bind();\n    return _this;\n  }\n  EdgeClampedProgram.prototype.bind = function () {\n    var gl = this.gl;\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n    // Bindings\n    gl.enableVertexAttribArray(this.positionLocation);\n    gl.enableVertexAttribArray(this.normalLocation);\n    gl.enableVertexAttribArray(this.colorLocation);\n    gl.enableVertexAttribArray(this.radiusLocation);\n    gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n    gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n    gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n    gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n  };\n  EdgeClampedProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n    if (hidden) {\n      for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++) {\n        this.array[i_1] = 0;\n      }\n      return;\n    }\n    var thickness = data.size || 1,\n      x1 = sourceData.x,\n      y1 = sourceData.y,\n      x2 = targetData.x,\n      y2 = targetData.y,\n      radius = targetData.size || 1,\n      color = (0, utils_1.floatColor)(data.color);\n    // Computing normals\n    var dx = x2 - x1,\n      dy = y2 - y1;\n    var len = dx * dx + dy * dy,\n      n1 = 0,\n      n2 = 0;\n    if (len) {\n      len = 1 / Math.sqrt(len);\n      n1 = -dy * len * thickness;\n      n2 = dx * len * thickness;\n    }\n    var i = POINTS * ATTRIBUTES * offset;\n    var array = this.array;\n    // First point\n    array[i++] = x1;\n    array[i++] = y1;\n    array[i++] = n1;\n    array[i++] = n2;\n    array[i++] = color;\n    array[i++] = 0;\n    // First point flipped\n    array[i++] = x1;\n    array[i++] = y1;\n    array[i++] = -n1;\n    array[i++] = -n2;\n    array[i++] = color;\n    array[i++] = 0;\n    // Second point\n    array[i++] = x2;\n    array[i++] = y2;\n    array[i++] = n1;\n    array[i++] = n2;\n    array[i++] = color;\n    array[i++] = radius;\n    // Second point flipped\n    array[i++] = x2;\n    array[i++] = y2;\n    array[i++] = -n1;\n    array[i++] = -n2;\n    array[i++] = color;\n    array[i] = -radius;\n  };\n  EdgeClampedProgram.prototype.computeIndices = function () {\n    var l = this.array.length / ATTRIBUTES;\n    var size = l + l / 2;\n    var indices = new this.IndicesArray(size);\n    for (var i = 0, c = 0; i < l; i += 4) {\n      indices[c++] = i;\n      indices[c++] = i + 1;\n      indices[c++] = i + 2;\n      indices[c++] = i + 2;\n      indices[c++] = i + 1;\n      indices[c++] = i + 3;\n    }\n    this.indicesArray = indices;\n  };\n  EdgeClampedProgram.prototype.bufferData = function () {\n    _super.prototype.bufferData.call(this);\n    // Indices data\n    var gl = this.gl;\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n  };\n  EdgeClampedProgram.prototype.render = function (params) {\n    if (this.hasNothingToRender()) return;\n    var gl = this.gl;\n    var program = this.program;\n    gl.useProgram(program);\n    // Binding uniforms\n    gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n    gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n    gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n    // Drawing:\n    gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n  };\n  return EdgeClampedProgram;\n}(edge_1.AbstractEdgeProgram);\nexports.default = EdgeClampedProgram;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports) {\n\n(function () {\n  \"use strict\";\n\n  var e = {\n      d: function d(o, n) {\n        for (var t in n) {\n          e.o(n, t) && !e.o(o, t) && Object.defineProperty(o, t, {\n            enumerable: !0,\n            get: n[t]\n          });\n        }\n      },\n      o: function o(e, _o) {\n        return Object.prototype.hasOwnProperty.call(e, _o);\n      },\n      r: function r(e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(e, \"__esModule\", {\n          value: !0\n        });\n      }\n    },\n    o = {};\n  e.r(o), e.d(o, {\n    default: function _default() {\n      return n;\n    }\n  });\n  var n = \"attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\nattribute float a_radius;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl. Please read it to\\n  // get better comments on what's happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here, we move the point to leave space for the arrow head:\\n  float direction = sign(a_radius);\\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n\\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\\n\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";\n  module.exports = o;\n})();\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar captor_1 = __importStar(__webpack_require__(9));\nvar DRAG_TIMEOUT = 200;\nvar TOUCH_INERTIA_RATIO = 3;\nvar TOUCH_INERTIA_DURATION = 200;\n/**\n * Touch captor class.\n *\n * @constructor\n */\nvar TouchCaptor = /** @class */function (_super) {\n  __extends(TouchCaptor, _super);\n  function TouchCaptor(container, renderer) {\n    var _this = _super.call(this, container, renderer) || this;\n    _this.enabled = true;\n    _this.isMoving = false;\n    _this.touchMode = 0; // number of touches down\n    // Binding methods:\n    _this.handleStart = _this.handleStart.bind(_this);\n    _this.handleLeave = _this.handleLeave.bind(_this);\n    _this.handleMove = _this.handleMove.bind(_this);\n    // Binding events\n    container.addEventListener(\"touchstart\", _this.handleStart, false);\n    container.addEventListener(\"touchend\", _this.handleLeave, false);\n    container.addEventListener(\"touchcancel\", _this.handleLeave, false);\n    container.addEventListener(\"touchmove\", _this.handleMove, false);\n    return _this;\n  }\n  TouchCaptor.prototype.kill = function () {\n    var container = this.container;\n    container.removeEventListener(\"touchstart\", this.handleStart);\n    container.removeEventListener(\"touchend\", this.handleLeave);\n    container.removeEventListener(\"touchcancel\", this.handleLeave);\n    container.removeEventListener(\"touchmove\", this.handleMove);\n  };\n  TouchCaptor.prototype.getDimensions = function () {\n    return {\n      width: this.container.offsetWidth,\n      height: this.container.offsetHeight\n    };\n  };\n  TouchCaptor.prototype.dispatchRelatedMouseEvent = function (type, e, position, emitter) {\n    var mousePosition = position || (0, captor_1.getPosition)(e.touches[0], this.container);\n    var mouseEvent = new MouseEvent(type, {\n      clientX: mousePosition.x,\n      clientY: mousePosition.y,\n      altKey: e.altKey,\n      ctrlKey: e.ctrlKey\n    });\n    mouseEvent.isFakeSigmaMouseEvent = true;\n    (emitter || this.container).dispatchEvent(mouseEvent);\n  };\n  TouchCaptor.prototype.handleStart = function (e) {\n    var _this = this;\n    if (!this.enabled) return;\n    // Prevent default to avoid default browser behaviors...\n    e.preventDefault();\n    // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n    if (e.touches.length === 1) this.dispatchRelatedMouseEvent(\"mousedown\", e);\n    var touches = (0, captor_1.getTouchesArray)(e.touches);\n    this.isMoving = true;\n    this.touchMode = touches.length;\n    this.startCameraState = this.renderer.getCamera().getState();\n    this.startTouchesPositions = touches.map(function (touch) {\n      return (0, captor_1.getPosition)(touch, _this.container);\n    });\n    this.lastTouchesPositions = this.startTouchesPositions;\n    // When there are two touches down, let's record distance and angle as well:\n    if (this.touchMode === 2) {\n      var _a = __read(this.startTouchesPositions, 2),\n        _b = _a[0],\n        x0 = _b.x,\n        y0 = _b.y,\n        _c = _a[1],\n        x1 = _c.x,\n        y1 = _c.y;\n      this.startTouchesAngle = Math.atan2(y1 - y0, x1 - x0);\n      this.startTouchesDistance = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n    }\n    this.emit(\"touchdown\", (0, captor_1.getTouchCoords)(e, this.container));\n  };\n  TouchCaptor.prototype.handleLeave = function (e) {\n    if (!this.enabled) return;\n    // Prevent default to avoid default browser behaviors...\n    e.preventDefault();\n    // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n    if (e.touches.length === 0 && this.lastTouchesPositions && this.lastTouchesPositions.length) {\n      this.dispatchRelatedMouseEvent(\"mouseup\", e, this.lastTouchesPositions[0], document);\n      this.dispatchRelatedMouseEvent(\"click\", e, this.lastTouchesPositions[0]);\n    }\n    if (this.movingTimeout) {\n      this.isMoving = false;\n      clearTimeout(this.movingTimeout);\n    }\n    switch (this.touchMode) {\n      case 2:\n        if (e.touches.length === 1) {\n          this.handleStart(e);\n          e.preventDefault();\n          break;\n        }\n      /* falls through */\n      case 1:\n        // TODO\n        // Dispatch event\n        if (this.isMoving) {\n          var camera = this.renderer.getCamera();\n          var cameraState = camera.getState(),\n            previousCameraState = camera.getPreviousState() || {\n              x: 0,\n              y: 0\n            };\n          camera.animate({\n            x: cameraState.x + TOUCH_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n            y: cameraState.y + TOUCH_INERTIA_RATIO * (cameraState.y - previousCameraState.y)\n          }, {\n            duration: TOUCH_INERTIA_DURATION,\n            easing: \"quadraticOut\"\n          });\n        }\n        this.isMoving = false;\n        this.touchMode = 0;\n        break;\n    }\n    this.emit(\"touchup\", (0, captor_1.getTouchCoords)(e, this.container));\n  };\n  TouchCaptor.prototype.handleMove = function (e) {\n    var _a;\n    var _this = this;\n    if (!this.enabled) return;\n    // Prevent default to avoid default browser behaviors...\n    e.preventDefault();\n    // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n    if (e.touches.length === 1) this.dispatchRelatedMouseEvent(\"mousemove\", e);\n    var camera = this.renderer.getCamera();\n    var startCameraState = this.startCameraState;\n    var touches = (0, captor_1.getTouchesArray)(e.touches);\n    var touchesPositions = touches.map(function (touch) {\n      return (0, captor_1.getPosition)(touch, _this.container);\n    });\n    this.lastTouchesPositions = touchesPositions;\n    this.isMoving = true;\n    if (this.movingTimeout) clearTimeout(this.movingTimeout);\n    this.movingTimeout = window.setTimeout(function () {\n      _this.isMoving = false;\n    }, DRAG_TIMEOUT);\n    switch (this.touchMode) {\n      case 1:\n        {\n          var _b = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0]),\n            xStart = _b.x,\n            yStart = _b.y;\n          var _c = this.renderer.viewportToFramedGraph(touchesPositions[0]),\n            x = _c.x,\n            y = _c.y;\n          camera.setState({\n            x: startCameraState.x + xStart - x,\n            y: startCameraState.y + yStart - y\n          });\n          break;\n        }\n      case 2:\n        {\n          /**\n           * Here is the thinking here:\n           *\n           * 1. We can find the new angle and ratio, by comparing the vector from \"touch one\" to \"touch two\" at the start\n           *    of the d'n'd and now\n           *\n           * 2. We can use `Camera#viewportToGraph` inside formula to retrieve the new camera position, using the graph\n           *    position of a touch at the beginning of the d'n'd (using `startCamera.viewportToGraph`) and the viewport\n           *    position of this same touch now\n           */\n          var newCameraState = {};\n          var _d = touchesPositions[0],\n            x0 = _d.x,\n            y0 = _d.y;\n          var _e = touchesPositions[1],\n            x1 = _e.x,\n            y1 = _e.y;\n          var angleDiff = Math.atan2(y1 - y0, x1 - x0) - this.startTouchesAngle;\n          var ratioDiff = Math.hypot(y1 - y0, x1 - x0) / this.startTouchesDistance;\n          // 1.\n          var newRatio = camera.getBoundedRatio(startCameraState.ratio / ratioDiff);\n          newCameraState.ratio = newRatio;\n          newCameraState.angle = startCameraState.angle + angleDiff;\n          // 2.\n          var dimensions = this.getDimensions();\n          var touchGraphPosition = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0], {\n            cameraState: startCameraState\n          });\n          var smallestDimension = Math.min(dimensions.width, dimensions.height);\n          var dx = smallestDimension / dimensions.width;\n          var dy = smallestDimension / dimensions.height;\n          var ratio = newRatio / smallestDimension;\n          // Align with center of the graph:\n          var x = x0 - smallestDimension / 2 / dx;\n          var y = y0 - smallestDimension / 2 / dy;\n          // Rotate:\n          _a = __read([x * Math.cos(-newCameraState.angle) - y * Math.sin(-newCameraState.angle), y * Math.cos(-newCameraState.angle) + x * Math.sin(-newCameraState.angle)], 2), x = _a[0], y = _a[1];\n          newCameraState.x = touchGraphPosition.x - x * ratio;\n          newCameraState.y = touchGraphPosition.y + y * ratio;\n          camera.setState(newCameraState);\n          break;\n        }\n    }\n    this.emit(\"touchmove\", (0, captor_1.getTouchCoords)(e, this.container));\n  };\n  return TouchCaptor;\n}(captor_1.default);\nexports.default = TouchCaptor;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.doEdgeCollideWithPoint = exports.isPixelColored = void 0;\n/**\n * This helper returns true is the pixel at (x,y) in the given WebGL context is\n * colored, and false else.\n */\nfunction isPixelColored(gl, x, y) {\n  var pixels = new Uint8Array(4);\n  gl.readPixels(x, gl.drawingBufferHeight - y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n  return pixels[3] > 0;\n}\nexports.isPixelColored = isPixelColored;\n/**\n * This helper checks whether or not a point (x, y) collides with an\n * edge, connecting a source (xS, yS) to a target (xT, yT) with a thickness in\n * pixels.\n */\nfunction doEdgeCollideWithPoint(x, y, xS, yS, xT, yT, thickness) {\n  // Check first if point is out of the rectangle which opposite corners are the\n  // source and the target, rectangle we expand by `thickness` in every\n  // directions:\n  if (x < xS - thickness && x < xT - thickness) return false;\n  if (y < yS - thickness && y < yT - thickness) return false;\n  if (x > xS + thickness && x > xT + thickness) return false;\n  if (y > yS + thickness && y > yT + thickness) return false;\n  // Check actual collision now: Since we now the point is in this big rectangle\n  // we \"just\" need to check that the distance between the point and the line\n  // connecting the source and the target is less than `thickness`:\n  // https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n  var distance = Math.abs((xT - xS) * (yS - y) - (xS - x) * (yT - yS)) / Math.sqrt(Math.pow(xT - xS, 2) + Math.pow(yT - yS, 2));\n  return distance < thickness / 2;\n}\nexports.doEdgeCollideWithPoint = doEdgeCollideWithPoint;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Graphology Browser GEXF Parser\n * ===============================\n *\n * Browser version of the graphology GEXF parser.\n */\nvar createParserFunction = __webpack_require__(44);\nmodule.exports = createParserFunction(DOMParser, Document);\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* eslint no-self-compare: 0 */\n/**\n * Graphology Browser GEXF Parser\n * ===============================\n *\n * Browser version of the graphology GEXF parser using DOMParser to function.\n */\nvar isGraphConstructor = __webpack_require__(45);\nvar mergeEdge = __webpack_require__(46).mergeEdge;\nvar toMixed = __webpack_require__(47);\nvar toMulti = __webpack_require__(48);\nvar helpers = __webpack_require__(14);\nvar cast = helpers.cast;\n\n/**\n * Function checking whether the given value is a NaN.\n *\n * @param  {any} value - Value to test.\n * @return {boolean}\n */\nfunction isReallyNaN(value) {\n  return value !== value;\n}\n\n/**\n * Function used to convert a viz:color attribute into a CSS rgba? string.\n *\n * @param  {Node}   element - DOM element.\n * @return {string}\n */\nfunction toRGBString(element) {\n  var a = element.getAttribute('a'),\n    r = element.getAttribute('r'),\n    g = element.getAttribute('g'),\n    b = element.getAttribute('b');\n  return a ? 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')' : 'rgb(' + r + ',' + g + ',' + b + ')';\n}\n\n/**\n * Function returning the first matching tag of the `viz` namespace matching\n * the desired tag name.\n *\n * @param  {Node}   element - Target DOM element.\n * @param  {string} name    - Tag name.\n * @return {Node}\n */\nfunction getFirstMatchingVizTag(element, name) {\n  var vizElement = element.getElementsByTagName('viz:' + name)[0];\n  if (!vizElement) vizElement = element.getElementsByTagNameNS('viz', name)[0];\n  if (!vizElement) vizElement = element.getElementsByTagName(name)[0];\n  return vizElement;\n}\n\n/**\n * Function used to collect meta information.\n *\n * @param  {Array<Node>} elements - Target DOM element.\n * @return {object}\n */\nfunction collectMeta(elements) {\n  var meta = {},\n    element,\n    value;\n  for (var i = 0, l = elements.length; i < l; i++) {\n    element = elements[i];\n    if (element.nodeName === '#text') continue;\n    value = element.textContent.trim();\n    if (value) meta[element.tagName.toLowerCase()] = element.textContent;\n  }\n  return meta;\n}\n\n/**\n * Function used to extract the model from the right elements.\n *\n * @param  {Array<Node>} elements - Target DOM elements.\n * @return {array}                - The model & default attributes.\n */\nfunction extractModel(elements) {\n  var model = {},\n    defaults = {},\n    element,\n    defaultElement,\n    id;\n  for (var i = 0, l = elements.length; i < l; i++) {\n    element = elements[i];\n    id = element.getAttribute('id') || element.getAttribute('for');\n    model[id] = {\n      id: id,\n      type: element.getAttribute('type') || 'string',\n      title: !isReallyNaN(+id) ? element.getAttribute('title') || id : id\n    };\n\n    // Default?\n    defaultElement = element.getElementsByTagName('default')[0];\n    if (defaultElement) defaults[model[id].title] = cast(model[id].type, defaultElement.textContent);\n  }\n  return [model, defaults];\n}\n\n/**\n * Function used to collect an element's attributes.\n *\n * @param  {object} model    - Data model to use.\n * @param  {object} defaults - Default values.\n * @param  {Node}   element  - Target DOM element.\n * @return {object}          - The collected attributes.\n */\nfunction collectAttributes(model, defaults, element) {\n  var data = {},\n    label = element.getAttribute('label'),\n    weight = element.getAttribute('weight');\n  if (label) data.label = label;\n  if (weight) data.weight = +weight;\n  var valueElements = element.getElementsByTagName('attvalue'),\n    valueElement,\n    id;\n  for (var i = 0, l = valueElements.length; i < l; i++) {\n    valueElement = valueElements[i];\n    id = valueElement.getAttribute('id') || valueElement.getAttribute('for');\n    data[model[id].title] = cast(model[id].type, valueElement.getAttribute('value'));\n  }\n\n  // Applying default values\n  var k;\n  for (k in defaults) {\n    if (!(k in data)) data[k] = defaults[k];\n  }\n\n  // TODO: shortcut here to avoid viz when namespace is not set\n\n  // Attempting to find viz namespace tags\n\n  //-- 1) Color\n  var vizElement = getFirstMatchingVizTag(element, 'color');\n  if (vizElement) data.color = toRGBString(vizElement);\n\n  //-- 2) Size\n  vizElement = getFirstMatchingVizTag(element, 'size');\n  if (vizElement) data.size = +vizElement.getAttribute('value');\n\n  //-- 3) Position\n  var x, y, z;\n  vizElement = getFirstMatchingVizTag(element, 'position');\n  if (vizElement) {\n    x = vizElement.getAttribute('x');\n    y = vizElement.getAttribute('y');\n    z = vizElement.getAttribute('z');\n    if (x) data.x = +x;\n    if (y) data.y = +y;\n    if (z) data.z = +z;\n  }\n\n  //-- 4) Shape\n  vizElement = getFirstMatchingVizTag(element, 'shape');\n  if (vizElement) data.shape = vizElement.getAttribute('value');\n\n  //-- 5) Thickness\n  vizElement = getFirstMatchingVizTag(element, 'thickness');\n  if (vizElement) data.thickness = +vizElement.getAttribute('value');\n  return data;\n}\n\n/**\n * Factory taking implementations of `DOMParser` & `Document` returning\n * the parser function.\n */\nmodule.exports = function createParserFunction(DOMParser, Document) {\n  /**\n   * Function taking either a string or a document and returning a\n   * graphology instance.\n   *\n   * @param {function}        Graph  - A graphology constructor.\n   * @param {string|Document} source - The source to parse.\n   * @param {object}          options - Parsing options.\n   */\n\n  // TODO: option to map the data to the attributes for customization, nodeModel, edgeModel, nodeReducer, edgeReducer\n  // TODO: option to disable the model mapping heuristic\n  return function parse(Graph, source, options) {\n    options = options || {};\n    var addMissingNodes = options.addMissingNodes === true;\n    var mergeResult;\n    var xmlDoc = source;\n    var element, result, type, attributes, id, s, t, i, l;\n    if (!isGraphConstructor(Graph)) throw new Error('graphology-gexf/parser: invalid Graph constructor.');\n\n    // If source is a string, we are going to parse it\n    if (typeof source === 'string') xmlDoc = new DOMParser().parseFromString(source, 'application/xml');\n    if (!(xmlDoc instanceof Document)) throw new Error('graphology-gexf/parser: source should either be a XML document or a string.');\n\n    // Finding useful elements\n    var GRAPH_ELEMENT = xmlDoc.getElementsByTagName('graph')[0],\n      META_ELEMENT = xmlDoc.getElementsByTagName('meta')[0],\n      META_ELEMENTS = META_ELEMENT && META_ELEMENT.childNodes || [],\n      NODE_ELEMENTS = xmlDoc.getElementsByTagName('node'),\n      EDGE_ELEMENTS = xmlDoc.getElementsByTagName('edge'),\n      MODEL_ELEMENTS = xmlDoc.getElementsByTagName('attributes'),\n      NODE_MODEL_ELEMENTS = [],\n      EDGE_MODEL_ELEMENTS = [];\n    for (i = 0, l = MODEL_ELEMENTS.length; i < l; i++) {\n      element = MODEL_ELEMENTS[i];\n      if (element.getAttribute('class') === 'node') NODE_MODEL_ELEMENTS = element.getElementsByTagName('attribute');else if (element.getAttribute('class') === 'edge') EDGE_MODEL_ELEMENTS = element.getElementsByTagName('attribute');\n    }\n\n    // Information\n    var DEFAULT_EDGE_TYPE = GRAPH_ELEMENT.getAttribute('defaultedgetype') || 'undirected';\n    if (DEFAULT_EDGE_TYPE === 'mutual') DEFAULT_EDGE_TYPE = 'undirected';\n\n    // Computing models\n    result = extractModel(NODE_MODEL_ELEMENTS);\n    var NODE_MODEL = result[0],\n      NODE_DEFAULT_ATTRIBUTES = result[1];\n    result = extractModel(EDGE_MODEL_ELEMENTS);\n    var EDGE_MODEL = result[0],\n      EDGE_DEFAULT_ATTRIBUTES = result[1];\n\n    // Polling the first edge to guess the type of the edges\n    var graphType = EDGE_ELEMENTS[0] ? EDGE_ELEMENTS[0].getAttribute('type') || DEFAULT_EDGE_TYPE : 'mixed';\n\n    // Instantiating our graph\n    var graph = new Graph({\n      type: graphType\n    });\n\n    // Collecting meta\n    var meta = collectMeta(META_ELEMENTS),\n      lastModifiedDate = META_ELEMENT && META_ELEMENT.getAttribute('lastmodifieddate');\n    graph.replaceAttributes(meta);\n    if (lastModifiedDate) graph.setAttribute('lastModifiedDate', lastModifiedDate);\n\n    // Adding nodes\n    for (i = 0, l = NODE_ELEMENTS.length; i < l; i++) {\n      element = NODE_ELEMENTS[i];\n      graph.addNode(element.getAttribute('id'), collectAttributes(NODE_MODEL, NODE_DEFAULT_ATTRIBUTES, element));\n    }\n\n    // Adding edges\n    for (i = 0, l = EDGE_ELEMENTS.length; i < l; i++) {\n      element = EDGE_ELEMENTS[i];\n      id = element.getAttribute('id');\n      type = element.getAttribute('type') || DEFAULT_EDGE_TYPE;\n      s = element.getAttribute('source');\n      t = element.getAttribute('target');\n      attributes = collectAttributes(EDGE_MODEL, EDGE_DEFAULT_ATTRIBUTES, element);\n\n      // If we encountered an edge with a different type, we upgrade the graph\n      if (type !== graph.type && graph.type !== 'mixed') {\n        graph = toMixed(graph);\n      }\n\n      // If we encountered twice the same edge, we upgrade the graph\n      if (!graph.multi && (type === 'directed' && graph.hasDirectedEdge(s, t) || graph.hasUndirectedEdge(s, t))) {\n        graph = toMulti(graph);\n      }\n      mergeResult = mergeEdge(graph, type !== 'directed', id || null, s, t, attributes);\n      if (!addMissingNodes && (mergeResult[2] || mergeResult[3])) {\n        throw new Error('graphology-gexf/parser: one of your gexf file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.');\n      }\n    }\n    return graph;\n  };\n};\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports) {\n\n/**\n * Graphology isGraphConstructor\n * ==============================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology constructor.\n */\n\n/**\n * Checking the value is a graphology constructor.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraphConstructor(value) {\n  return value !== null && typeof value === 'function' && typeof value.prototype === 'object' && typeof value.prototype.addUndirectedEdgeWithKey === 'function' && typeof value.prototype.dropNode === 'function';\n};\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports) {\n\n/**\n * Graphology Edge Adders\n * =======================\n *\n * Generic edge addition functions that can be used to avoid nasty repetitive\n * conditions.\n */\nexports.addEdge = function addEdge(graph, undirected, key, source, target, attributes) {\n  if (undirected) {\n    if (key === null || key === undefined) return graph.addUndirectedEdge(source, target, attributes);else return graph.addUndirectedEdgeWithKey(key, source, target, attributes);\n  } else {\n    if (key === null || key === undefined) return graph.addDirectedEdge(source, target, attributes);else return graph.addDirectedEdgeWithKey(key, source, target, attributes);\n  }\n};\nexports.copyEdge = function copyEdge(graph, undirected, key, source, target, attributes) {\n  attributes = Object.assign({}, attributes);\n  if (undirected) {\n    if (key === null || key === undefined) return graph.addUndirectedEdge(source, target, attributes);else return graph.addUndirectedEdgeWithKey(key, source, target, attributes);\n  } else {\n    if (key === null || key === undefined) return graph.addDirectedEdge(source, target, attributes);else return graph.addDirectedEdgeWithKey(key, source, target, attributes);\n  }\n};\nexports.mergeEdge = function mergeEdge(graph, undirected, key, source, target, attributes) {\n  if (undirected) {\n    if (key === null || key === undefined) return graph.mergeUndirectedEdge(source, target, attributes);else return graph.mergeUndirectedEdgeWithKey(key, source, target, attributes);\n  } else {\n    if (key === null || key === undefined) return graph.mergeDirectedEdge(source, target, attributes);else return graph.mergeDirectedEdgeWithKey(key, source, target, attributes);\n  }\n};\nexports.updateEdge = function updateEdge(graph, undirected, key, source, target, updater) {\n  if (undirected) {\n    if (key === null || key === undefined) return graph.updateUndirectedEdge(source, target, updater);else return graph.updateUndirectedEdgeWithKey(key, source, target, updater);\n  } else {\n    if (key === null || key === undefined) return graph.updateDirectedEdge(source, target, updater);else return graph.updateDirectedEdgeWithKey(key, source, target, updater);\n  }\n};\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Graphology Operators To Mixed Caster\n * =====================================\n *\n * Function used to cast any graph to a mixed one.\n */\nvar isGraph = __webpack_require__(1);\nmodule.exports = function toMixed(graph) {\n  if (!isGraph(graph)) throw new Error('graphology-operators/to-mixed: expecting a valid graphology instance.');\n  return graph.copy({\n    type: 'mixed'\n  });\n};\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Graphology Operators To Multi Caster\n * =====================================\n *\n * Function used to cast any graph to a multi one.\n */\nvar isGraph = __webpack_require__(1);\nmodule.exports = function toMulti(graph) {\n  if (!isGraph(graph)) throw new Error('graphology-operators/to-multi: expecting a valid graphology instance.');\n  return graph.copy({\n    multi: true\n  });\n};\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* eslint no-self-compare: 0 */\n/**\n * Graphology Common GEXF Writer\n * ==============================\n *\n * GEXF writer working for both node.js & the browser.\n */\nvar isGraph = __webpack_require__(1),\n  inferType = __webpack_require__(50),\n  XMLWriter = __webpack_require__(51),\n  sanitizeTagName = __webpack_require__(14).sanitizeTagName;\n\n// TODO: handle object in color, position with object for viz\n\n/**\n * Constants.\n */\nvar GEXF_NAMESPACE = 'http://www.gexf.net/1.2draft',\n  GEXF_VIZ_NAMESPACE = 'http:///www.gexf.net/1.1draft/viz';\nvar VIZ_RESERVED_NAMES = new Set(['color', 'size', 'x', 'y', 'z', 'shape', 'thickness']);\nvar RGBA_TEST = /^\\s*rgba?\\s*\\(/i,\n  RGBA_MATCH = /^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*(?:,\\s*([.0-9]*))?\\)\\s*$/;\n\n/**\n * Function used to transform a CSS color into a RGBA object.\n *\n * @param  {string} value - Target value.\n * @return {object}\n */\nfunction CSSColorToRGBA(value) {\n  if (!value || typeof value !== 'string') return {};\n  if (value[0] === '#') {\n    value = value.slice(1);\n    return value.length === 3 ? {\n      r: parseInt(value[0] + value[0], 16),\n      g: parseInt(value[1] + value[1], 16),\n      b: parseInt(value[2] + value[2], 16)\n    } : {\n      r: parseInt(value[0] + value[1], 16),\n      g: parseInt(value[2] + value[3], 16),\n      b: parseInt(value[4] + value[5], 16)\n    };\n  } else if (RGBA_TEST.test(value)) {\n    var result = {};\n    value = value.match(RGBA_MATCH);\n    result.r = +value[1];\n    result.g = +value[2];\n    result.b = +value[3];\n    if (value[4]) result.a = +value[4];\n    return result;\n  }\n  return {};\n}\n\n/**\n * Function used to map an element's attributes to a standardized map of\n * GEXF expected properties (label, viz, attributes).\n *\n * @param  {string} type       - The element's type.\n * @param  {string} key        - The element's key.\n * @param  {object} attributes - The element's attributes.\n * @return {object}\n */\nfunction DEFAULT_ELEMENT_FORMATTER(type, key, attributes) {\n  var output = {},\n    name;\n  for (name in attributes) {\n    if (name === 'label') {\n      output.label = attributes.label;\n    } else if (type === 'edge' && name === 'weight') {\n      output.weight = attributes.weight;\n    } else if (VIZ_RESERVED_NAMES.has(name)) {\n      output.viz = output.viz || {};\n      output.viz[name] = attributes[name];\n    } else {\n      output.attributes = output.attributes || {};\n      output.attributes[name] = attributes[name];\n    }\n  }\n  return output;\n}\nvar DEFAULT_NODE_FORMATTER = DEFAULT_ELEMENT_FORMATTER.bind(null, 'node'),\n  DEFAULT_EDGE_FORMATTER = DEFAULT_ELEMENT_FORMATTER.bind(null, 'edge');\n\n/**\n * Function used to check whether the given integer is 32 bits or not.\n *\n * @param  {number} number - Target number.\n * @return {boolean}\n */\nfunction is32BitInteger(number) {\n  return number <= 0x7fffffff && number >= -0x7fffffff;\n}\n\n/**\n * Function used to check whether the given value is \"empty\".\n *\n * @param  {any} value - Target value.\n * @return {boolean}\n */\nfunction isEmptyValue(value) {\n  return typeof value === 'undefined' || value === null || value === '' || value !== value;\n}\n\n/**\n * Function used to detect a JavaScript's value type in the GEXF model.\n *\n * @param  {any}    value - Target value.\n * @return {string}\n */\nfunction detectValueType(value) {\n  if (isEmptyValue(value)) return 'empty';\n  if (Array.isArray(value)) return 'liststring';\n  if (typeof value === 'boolean') return 'boolean';\n  if (typeof value === 'object') return 'string';\n\n  // Numbers\n  if (typeof value === 'number') {\n    // Integer\n    if (value === (value | 0)) {\n      // Long (JavaScript integer can go up to 53 bit)?\n      return is32BitInteger(value) ? 'integer' : 'long';\n    }\n\n    // JavaScript numbers are 64 bit float, hence the double\n    return 'double';\n  }\n  return 'string';\n}\n\n/**\n * Function used to cast the given value into the given type.\n *\n * @param  {string} type  - Target type.\n * @param  {any}    value - Value to cast.\n * @return {string}\n */\nfunction cast(type, value) {\n  if (type === 'liststring' && Array.isArray(value)) return value.join('|');\n  return '' + value;\n}\n\n/**\n * Function used to collect data from a graph's nodes.\n *\n * @param  {Graph}    graph   - Target graph.\n * @param  {function} format  - Function formatting the nodes attributes.\n * @return {array}\n */\nfunction collectNodeData(graph, format) {\n  var nodes = new Array(graph.order);\n  var i = 0;\n  graph.forEachNode(function (node, attr) {\n    var data = format(node, attr);\n    data.key = node;\n    nodes[i++] = data;\n  });\n  return nodes;\n}\n\n/**\n * Function used to collect data from a graph's edges.\n *\n * @param  {Graph}    graph   - Target graph.\n * @param  {function} reducer - Function reducing the edges attributes.\n * @return {array}\n */\nfunction collectEdgeData(graph, reducer) {\n  var edges = new Array(graph.size);\n  var i = 0;\n  graph.forEachEdge(function (edge, attr, source, target, _sa, _ta, undirected) {\n    var data = reducer(edge, attr);\n    data.key = edge;\n    data.source = source;\n    data.target = target;\n    data.undirected = undirected;\n    edges[i++] = data;\n  });\n  return edges;\n}\n\n/**\n * Function used to infer the model of the graph's nodes or edges.\n *\n * @param  {array} elements - The graph's relevant elements.\n * @return {array}\n */\n\n// TODO: on large graph, we could also sample or let the user indicate the types\nfunction inferModel(elements) {\n  var model = {},\n    attributes,\n    type,\n    k;\n\n  // Testing every attributes\n  for (var i = 0, l = elements.length; i < l; i++) {\n    attributes = elements[i].attributes;\n    if (!attributes) continue;\n    for (k in attributes) {\n      type = detectValueType(attributes[k]);\n      if (type === 'empty') continue;\n      if (!model[k]) model[k] = type;else {\n        if (model[k] === 'integer' && type === 'long') model[k] = type;else if (model[k] !== type) model[k] = 'string';\n      }\n    }\n  }\n\n  // TODO: check default values\n  return model;\n}\n\n/**\n * Function used to write a model.\n *\n * @param {XMLWriter} writer     - The writer to use.\n * @param {object}    model      - Model to write.\n * @param {string}    modelClass - Class of the model.\n */\nfunction writeModel(writer, model, modelClass) {\n  var name;\n  if (!Object.keys(model).length) return;\n  writer.startElement('attributes');\n  writer.writeAttribute('class', modelClass);\n  for (name in model) {\n    writer.startElement('attribute');\n    writer.writeAttribute('id', name);\n    writer.writeAttribute('title', name);\n    writer.writeAttribute('type', model[name]);\n    writer.endElement();\n  }\n  writer.endElement();\n}\nfunction writeElements(writer, type, model, elements) {\n  var emptyModel = !Object.keys(model).length,\n    element,\n    name,\n    color,\n    value,\n    edgeType,\n    attributes,\n    weight,\n    viz,\n    k,\n    i,\n    l;\n  writer.startElement(type + 's');\n  for (i = 0, l = elements.length; i < l; i++) {\n    element = elements[i];\n    attributes = element.attributes;\n    viz = element.viz;\n    writer.startElement(type);\n    writer.writeAttribute('id', element.key);\n    if (type === 'edge') {\n      edgeType = element.undirected ? 'undirected' : 'directed';\n      if (edgeType !== writer.defaultEdgeType) writer.writeAttribute('type', edgeType);\n      writer.writeAttribute('source', element.source);\n      writer.writeAttribute('target', element.target);\n      weight = element.weight;\n      if (typeof weight === 'number' && !isNaN(weight) || typeof weight === 'string') writer.writeAttribute('weight', element.weight);\n    }\n    if (element.label) writer.writeAttribute('label', element.label);\n    if (!emptyModel && attributes) {\n      writer.startElement('attvalues');\n      for (name in model) {\n        if (name in attributes) {\n          value = attributes[name];\n          if (isEmptyValue(value)) continue;\n          writer.startElement('attvalue');\n          writer.writeAttribute('for', name);\n          writer.writeAttribute('value', cast(model[name], value));\n          writer.endElement();\n        }\n      }\n      writer.endElement();\n    }\n    if (viz) {\n      //-- 1) Color\n      if (viz.color) {\n        color = CSSColorToRGBA(viz.color);\n        writer.startElementNS('viz', 'color');\n        for (k in color) {\n          writer.writeAttribute(k, color[k]);\n        }\n        writer.endElement();\n      }\n\n      //-- 2) Size\n      if ('size' in viz) {\n        writer.startElementNS('viz', 'size');\n        writer.writeAttribute('value', viz.size);\n        writer.endElement();\n      }\n\n      //-- 3) Position\n      if ('x' in viz || 'y' in viz || 'z' in viz) {\n        writer.startElementNS('viz', 'position');\n        if ('x' in viz) writer.writeAttribute('x', viz.x);\n        if ('y' in viz) writer.writeAttribute('y', viz.y);\n        if ('z' in viz) writer.writeAttribute('z', viz.z);\n        writer.endElement();\n      }\n\n      //-- 4) Shape\n      if (viz.shape) {\n        writer.startElementNS('viz', 'shape');\n        writer.writeAttribute('value', viz.shape);\n        writer.endElement();\n      }\n\n      //-- 5) Thickness\n      if ('thickness' in viz) {\n        writer.startElementNS('viz', 'thickness');\n        writer.writeAttribute('value', viz.thickness);\n        writer.endElement();\n      }\n    }\n    writer.endElement();\n  }\n  writer.endElement();\n}\n\n/**\n * Defaults.\n */\nvar DEFAULTS = {\n  encoding: 'UTF-8',\n  pretty: true,\n  formatNode: DEFAULT_NODE_FORMATTER,\n  formatEdge: DEFAULT_EDGE_FORMATTER\n};\n\n/**\n * Function taking a graphology instance & outputting a gexf string.\n *\n * @param  {Graph}  graph        - Target graphology instance.\n * @param  {object} options      - Options:\n * @param  {string}   [encoding]   - Character encoding.\n * @param  {boolean}  [pretty]     - Whether to pretty print output.\n * @param  {function} [formatNode] - Function formatting nodes' output.\n * @param  {function} [formatEdge] - Function formatting edges' output.\n * @return {string}              - GEXF string.\n */\nmodule.exports = function write(graph, options) {\n  if (!isGraph(graph)) throw new Error('graphology-gexf/writer: invalid graphology instance.');\n  options = options || {};\n  var indent = options.pretty === false ? false : '  ';\n  var formatNode = options.formatNode || DEFAULTS.formatNode,\n    formatEdge = options.formatEdge || DEFAULTS.formatEdge;\n  var writer = new XMLWriter(indent);\n  writer.startDocument('1.0', options.encoding || DEFAULTS.encoding);\n\n  // Starting gexf\n  writer.startElement('gexf');\n  writer.writeAttribute('version', '1.2');\n  writer.writeAttribute('xmlns', GEXF_NAMESPACE);\n  writer.writeAttribute('xmlns:viz', GEXF_VIZ_NAMESPACE);\n\n  // Processing meta\n  writer.startElement('meta');\n  var graphAttributes = graph.getAttributes();\n  if (graphAttributes.lastModifiedDate) writer.writeAttribute('lastmodifieddate', graphAttributes.lastModifiedDate);\n  var metaTagName;\n  var graphAttribute;\n  for (var k in graphAttributes) {\n    if (k === 'lastModifiedDate') continue;\n    metaTagName = sanitizeTagName(k);\n    if (!metaTagName) continue;\n    graphAttribute = graphAttributes[k];\n\n    // NOTE: if the graph attribute is not a scalar, we do not bother writing\n    // it as metadata in the gexf output. This means the writer/parser is not\n    // idempotent, but we cannot do better because the gexf format does not\n    // allow it, since it was not meant to handle complex values as graph\n    // metadata anyway.\n    if (typeof graphAttribute === 'string' || typeof graphAttribute === 'number' || typeof graphAttribute === 'boolean') {\n      writer.writeElement(metaTagName, '' + graphAttribute);\n    }\n  }\n  writer.endElement();\n  writer.startElement('graph');\n  var type = inferType(graph);\n  writer.defaultEdgeType = type === 'mixed' ? 'directed' : type;\n  writer.writeAttribute('defaultedgetype', writer.defaultEdgeType);\n\n  // Processing model\n  var nodes = collectNodeData(graph, formatNode),\n    edges = collectEdgeData(graph, formatEdge);\n  var nodeModel = inferModel(nodes);\n  writeModel(writer, nodeModel, 'node');\n  var edgeModel = inferModel(edges);\n  writeModel(writer, edgeModel, 'edge');\n\n  // Processing nodes\n  writeElements(writer, 'node', nodeModel, nodes);\n\n  // Processing edges\n  writeElements(writer, 'edge', edgeModel, edges);\n  return writer.toString();\n};\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Graphology inferType\n * =====================\n *\n * Useful function used to \"guess\" the real type of the given Graph using\n * introspection.\n */\nvar isGraph = __webpack_require__(1);\n\n/**\n * Returning the inferred type of the given graph.\n *\n * @param  {Graph}   graph - Target graph.\n * @return {boolean}\n */\nmodule.exports = function inferType(graph) {\n  if (!isGraph(graph)) throw new Error('graphology-utils/infer-type: expecting a valid graphology instance.');\n  var declaredType = graph.type;\n  if (declaredType !== 'mixed') return declaredType;\n  if (graph.directedSize === 0 && graph.undirectedSize === 0 || graph.directedSize > 0 && graph.undirectedSize > 0) return 'mixed';\n  if (graph.directedSize > 0) return 'directed';\n  return 'undirected';\n};\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(52);\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\nfunction isFalse(s) {\n  return typeof s !== 'number' && !s;\n}\nfunction strval(s) {\n  if (typeof s == 'string') {\n    return s;\n  } else if (typeof s == 'number') {\n    return s + '';\n  } else if (typeof s == 'function') {\n    return s();\n  } else if (s instanceof XMLWriter) {\n    return s.toString();\n  } else throw Error('Bad Parameter');\n}\nfunction XMLWriter(indent, callback) {\n  if (!(this instanceof XMLWriter)) {\n    return new XMLWriter();\n  }\n  this.name_regex = /[_:A-Za-z][-._:A-Za-z0-9]*/;\n  this.indent = indent ? true : false;\n  this.indentString = this.indent && typeof indent === 'string' ? indent : '    ';\n  this.output = '';\n  this.stack = [];\n  this.tags = 0;\n  this.attributes = 0;\n  this.attribute = 0;\n  this.texts = 0;\n  this.comment = 0;\n  this.dtd = 0;\n  this.root = '';\n  this.pi = 0;\n  this.cdata = 0;\n  this.started_write = false;\n  this.writer;\n  this.writer_encoding = 'UTF-8';\n  if (typeof callback == 'function') {\n    this.writer = callback;\n  } else {\n    this.writer = function (s, e) {\n      this.output += s;\n    };\n  }\n}\nXMLWriter.prototype = {\n  toString: function toString() {\n    this.flush();\n    return this.output;\n  },\n  indenter: function indenter() {\n    if (this.indent) {\n      this.write('\\n');\n      for (var i = 1; i < this.tags; i++) {\n        this.write(this.indentString);\n      }\n    }\n  },\n  write: function write() {\n    for (var i = 0; i < arguments.length; i++) {\n      this.writer(arguments[i], this.writer_encoding);\n    }\n  },\n  flush: function flush() {\n    for (var i = this.tags; i > 0; i--) {\n      this.endElement();\n    }\n    this.tags = 0;\n  },\n  startDocument: function startDocument(version, encoding, standalone) {\n    if (this.tags || this.attributes) return this;\n    this.startPI('xml');\n    this.startAttribute('version');\n    this.text(typeof version == \"string\" ? version : \"1.0\");\n    this.endAttribute();\n    if (typeof encoding == \"string\") {\n      this.startAttribute('encoding');\n      this.text(encoding);\n      this.endAttribute();\n      this.writer_encoding = encoding;\n    }\n    if (standalone) {\n      this.startAttribute('standalone');\n      this.text(\"yes\");\n      this.endAttribute();\n    }\n    this.endPI();\n    if (!this.indent) {\n      this.write('\\n');\n    }\n    return this;\n  },\n  endDocument: function endDocument() {\n    if (this.attributes) this.endAttributes();\n    return this;\n  },\n  writeElement: function writeElement(name, content) {\n    return this.startElement(name).text(content).endElement();\n  },\n  writeElementNS: function writeElementNS(prefix, name, uri, content) {\n    if (!content) {\n      content = uri;\n    }\n    return this.startElementNS(prefix, name, uri).text(content).endElement();\n  },\n  startElement: function startElement(name) {\n    name = strval(name);\n    if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n    if (this.tags === 0 && this.root && this.root !== name) throw Error('Invalid Parameter');\n    if (this.attributes) this.endAttributes();\n    ++this.tags;\n    this.texts = 0;\n    if (this.stack.length > 0) this.stack[this.stack.length - 1].containsTag = true;\n    this.stack.push({\n      name: name,\n      tags: this.tags\n    });\n    if (this.started_write) this.indenter();\n    this.write('<', name);\n    this.startAttributes();\n    this.started_write = true;\n    return this;\n  },\n  startElementNS: function startElementNS(prefix, name, uri) {\n    prefix = strval(prefix);\n    name = strval(name);\n    if (!prefix.match(this.name_regex)) throw Error('Invalid Parameter');\n    if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n    if (this.attributes) this.endAttributes();\n    ++this.tags;\n    this.texts = 0;\n    if (this.stack.length > 0) this.stack[this.stack.length - 1].containsTag = true;\n    this.stack.push({\n      name: prefix + ':' + name,\n      tags: this.tags\n    });\n    if (this.started_write) this.indenter();\n    this.write('<', prefix + ':' + name);\n    this.startAttributes();\n    this.started_write = true;\n    return this;\n  },\n  endElement: function endElement() {\n    if (!this.tags) return this;\n    var t = this.stack.pop();\n    if (this.attributes > 0) {\n      if (this.attribute) {\n        if (this.texts) this.endAttribute();\n        this.endAttribute();\n      }\n      this.write('/');\n      this.endAttributes();\n    } else {\n      if (t.containsTag) this.indenter();\n      this.write('</', t.name, '>');\n    }\n    --this.tags;\n    this.texts = 0;\n    return this;\n  },\n  writeAttribute: function writeAttribute(name, content) {\n    if (typeof content == 'function') {\n      content = content();\n    }\n    if (isFalse(content)) {\n      return this;\n    }\n    return this.startAttribute(name).text(content).endAttribute();\n  },\n  writeAttributeNS: function writeAttributeNS(prefix, name, uri, content) {\n    if (!content) {\n      content = uri;\n    }\n    if (typeof content == 'function') {\n      content = content();\n    }\n    if (isFalse(content)) {\n      return this;\n    }\n    return this.startAttributeNS(prefix, name, uri).text(content).endAttribute();\n  },\n  startAttributes: function startAttributes() {\n    this.attributes = 1;\n    return this;\n  },\n  endAttributes: function endAttributes() {\n    if (!this.attributes) return this;\n    if (this.attribute) this.endAttribute();\n    this.attributes = 0;\n    this.attribute = 0;\n    this.texts = 0;\n    this.write('>');\n    return this;\n  },\n  startAttribute: function startAttribute(name) {\n    name = strval(name);\n    if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n    if (!this.attributes && !this.pi) return this;\n    if (this.attribute) return this;\n    this.attribute = 1;\n    this.write(' ', name, '=\"');\n    return this;\n  },\n  startAttributeNS: function startAttributeNS(prefix, name, uri) {\n    prefix = strval(prefix);\n    name = strval(name);\n    if (!prefix.match(this.name_regex)) throw Error('Invalid Parameter');\n    if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n    if (!this.attributes && !this.pi) return this;\n    if (this.attribute) return this;\n    this.attribute = 1;\n    this.write(' ', prefix + ':' + name, '=\"');\n    return this;\n  },\n  endAttribute: function endAttribute() {\n    if (!this.attribute) return this;\n    this.attribute = 0;\n    this.texts = 0;\n    this.write('\"');\n    return this;\n  },\n  text: function text(content) {\n    content = strval(content);\n    if (!this.tags && !this.comment && !this.pi && !this.cdata) return this;\n    if (this.attributes && this.attribute) {\n      ++this.texts;\n      this.write(content.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/\\t/g, '&#x9;').replace(/\\n/g, '&#xA;').replace(/\\r/g, '&#xD;'));\n      return this;\n    } else if (this.attributes && !this.attribute) {\n      this.endAttributes();\n    }\n    if (this.comment || this.cdata) {\n      this.write(content);\n    } else {\n      this.write(content.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;'));\n    }\n    ++this.texts;\n    this.started_write = true;\n    return this;\n  },\n  writeComment: function writeComment(content) {\n    return this.startComment().text(content).endComment();\n  },\n  startComment: function startComment() {\n    if (this.comment) return this;\n    if (this.attributes) this.endAttributes();\n    this.indenter();\n    this.write('<!--');\n    this.comment = 1;\n    this.started_write = true;\n    return this;\n  },\n  endComment: function endComment() {\n    if (!this.comment) return this;\n    this.write('-->');\n    this.comment = 0;\n    return this;\n  },\n  writeDocType: function writeDocType(name, pubid, sysid, subset) {\n    return this.startDocType(name, pubid, sysid, subset).endDocType();\n  },\n  startDocType: function startDocType(name, pubid, sysid, subset) {\n    if (this.dtd || this.tags) return this;\n    name = strval(name);\n    pubid = pubid ? strval(pubid) : pubid;\n    sysid = sysid ? strval(sysid) : sysid;\n    subset = subset ? strval(subset) : subset;\n    if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n    if (pubid && !pubid.match(/^[\\w\\-][\\w\\s\\-\\/\\+\\:\\.]*/)) throw Error('Invalid Parameter');\n    if (sysid && !sysid.match(/^[\\w\\.][\\w\\-\\/\\\\\\:\\.]*/)) throw Error('Invalid Parameter');\n    if (subset && !subset.match(/[\\w\\s\\<\\>\\+\\.\\!\\#\\-\\?\\*\\,\\(\\)\\|]*/)) throw Error('Invalid Parameter');\n    pubid = pubid ? ' PUBLIC \"' + pubid + '\"' : sysid ? ' SYSTEM' : '';\n    sysid = sysid ? ' \"' + sysid + '\"' : '';\n    subset = subset ? ' [' + subset + ']' : '';\n    if (this.started_write) this.indenter();\n    this.write('<!DOCTYPE ', name, pubid, sysid, subset);\n    this.root = name;\n    this.dtd = 1;\n    this.started_write = true;\n    return this;\n  },\n  endDocType: function endDocType() {\n    if (!this.dtd) return this;\n    this.write('>');\n    return this;\n  },\n  writePI: function writePI(name, content) {\n    return this.startPI(name).text(content).endPI();\n  },\n  startPI: function startPI(name) {\n    name = strval(name);\n    if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n    if (this.pi) return this;\n    if (this.attributes) this.endAttributes();\n    if (this.started_write) this.indenter();\n    this.write('<?', name);\n    this.pi = 1;\n    this.started_write = true;\n    return this;\n  },\n  endPI: function endPI() {\n    if (!this.pi) return this;\n    this.write('?>');\n    this.pi = 0;\n    return this;\n  },\n  writeCData: function writeCData(content) {\n    return this.startCData().text(content).endCData();\n  },\n  startCData: function startCData() {\n    if (this.cdata) return this;\n    if (this.attributes) this.endAttributes();\n    this.indenter();\n    this.write('<![CDATA[');\n    this.cdata = 1;\n    this.started_write = true;\n    return this;\n  },\n  endCData: function endCData() {\n    if (!this.cdata) return this;\n    this.write(']]>');\n    this.cdata = 0;\n    return this;\n  },\n  writeRaw: function writeRaw(content) {\n    content = strval(content);\n    if (!this.tags && !this.comment && !this.pi && !this.cdata) return this;\n    if (this.attributes && this.attribute) {\n      ++this.texts;\n      this.write(content.replace('&', '&amp;').replace('\"', '&quot;'));\n      return this;\n    } else if (this.attributes && !this.attribute) {\n      this.endAttributes();\n    }\n    ++this.texts;\n    this.write(content);\n    this.started_write = true;\n    return this;\n  }\n};\nmodule.exports = XMLWriter;\n\n/***/ })\n]]);","inputSourceMap":{"version":3,"sources":["/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/utils/index.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-utils/is-graph.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/programs/common/edge.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/types.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/core/camera.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/utils/matrices.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/utils/easings.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/core/captors/mouse.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/core/captors/captor.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/core/quadtree.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/canvas/label.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/programs/common/program.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/shaders/edge.frag.glsl.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-gexf/common/helpers.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/index.js","../src/utils.js","../../../node_modules/events/events.js","../../../node_modules/obliterator/iterator.js","../../../node_modules/obliterator/support.js","../../../node_modules/obliterator/iter.js","../../../node_modules/obliterator/take.js","../src/errors.js","../src/data.js","../src/attributes/nodes.js","../src/attributes/edges.js","../../../node_modules/obliterator/chain.js","../src/iteration/edges.js","../src/iteration/neighbors.js","../src/iteration/adjacency.js","../src/serialization.js","../src/graph.js","../src/classes.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-gexf/browser/index.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/sigma.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/utils/animate.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/utils/data.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/events/events.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/@yomguithereal/helpers/extend.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/core/labels.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/settings.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/canvas/hover.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/canvas/edge-label.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/programs/node.fast.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/shaders/node.fast.vert.glsl.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/shaders/node.fast.frag.glsl.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/programs/common/node.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/shaders/utils.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/programs/edge.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/shaders/edge.vert.glsl.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/programs/edge.arrow.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/programs/edge.arrowHead.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.vert.glsl.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.frag.glsl.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/programs/edge.clamped.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/rendering/webgl/shaders/edge.clamped.vert.glsl.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/core/captors/touch.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/sigma/utils/edge-collisions.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-gexf/browser/parser.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-gexf/common/parser.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-utils/is-graph-constructor.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-utils/add-edge.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-operators/to-mixed.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-operators/to-multi.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-gexf/common/writer.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/graphology-utils/infer-type.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/xml-writer/index.js","/Users/declanbradley/Documents/GitHub/senate-finance/node_modules/xml-writer/lib/xml-writer.js"],"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","__importDefault","mod","__esModule","Object","defineProperty","exports","validateGraph","canUse32BitsIndices","extractPixel","getMatrixImpact","matrixFromCamera","getCorrectionRatio","floatColor","floatArrayColor","parseColor","zIndexOrdering","createNormalizationFunction","graphExtent","getPixelRatio","createElement","cancelFrame","requestFrame","assignDeep","assign","isPlainObject","is_graph_1","require","matrices_1","data_1","constructor","target","objects","_i","arguments","length","l","k","requestAnimationFrame","callback","setTimeout","cancelAnimationFrame","requestID","clearTimeout","tag","style","attributes","element","document","setAttribute","window","devicePixelRatio","graph","order","x","y","xMin","Infinity","xMax","yMin","yMax","forEachNode","_","attr","extent","_a","minX","maxX","_b","minY","maxY","ratio","Math","max","dX","dY","abs","isNaN","fn","data","applyTo","inverse","getter","elements","sort","a","b","zA","zB","INT8","Int8Array","INT32","Int32Array","buffer","FLOAT32","Float32Array","RGBA_TEST_REGEX","RGBA_EXTRACT_REGEX","val","g","parseInt","charAt","test","match","FLOAT_COLOR_CACHE","htmlColor","HTML_COLORS","parsed","color","viewportDimensions","graphDimensions","viewportRatio","height","width","graphRatio","min","state","padding","angle","matrix","identity","smallestDimension","correctionRatio","multiply","scale","rotate","translate","cameraState","multiplyVec2","cos","sin","sqrt","pow","gl","array","Uint8Array","readPixels","RGBA","UNSIGNED_BYTE","webgl2","WebGL2RenderingContext","getExtension","default","Error","key","Number","isFinite","concat","module","isGraph","addUndirectedEdgeWithKey","dropNode","multi","__extends","extendStatics","d","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","TypeError","String","__","create","createEdgeCompoundProgram","AbstractEdgeProgram","program_1","_super","vertexShaderSource","fragmentShaderSource","points","AbstractProgram","programClasses","EdgeCompoundProgram","renderer","programs","map","ProgramClass","bufferData","forEach","program","allocate","capacity","bind","computeIndices","render","params","process","sourceData","targetData","hidden","offset","TypedEventEmitter","events_1","_this","rawEmitter","EventEmitter","animate_1","easings_1","utils_1","types_1","DEFAULT_ZOOMING_RATIO","Camera","minRatio","maxRatio","nextFrame","previousState","enabled","getState","from","camera","setState","enable","disable","hasState","getPreviousState","getBoundedRatio","validateState","validatedState","isAnimated","validState","emit","animate","opts","options","ANIMATE_DEFAULTS","easing","start","Date","now","initialState","t","duration","animationCallback","undefined","coefficient","newState","animatedZoom","factorOrOptions","factor","animatedUnzoom","animatedReset","copy","of","s","c","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","z","b0","b1","cubicInOut","cubicOut","cubicIn","quadraticInOut","quadraticOut","quadraticIn","linear","easings","__createBinding","k2","enumerable","get","__setModuleDefault","v","__importStar","result","captor_1","DRAG_TIMEOUT","DRAGGED_EVENTS_TOLERANCE","MOUSE_INERTIA_DURATION","MOUSE_INERTIA_RATIO","MOUSE_ZOOM_DURATION","ZOOMING_RATIO","DOUBLE_CLICK_TIMEOUT","DOUBLE_CLICK_ZOOMING_RATIO","DOUBLE_CLICK_ZOOMING_DURATION","MouseCaptor","container","draggedEvents","downStartTime","lastMouseX","lastMouseY","isMouseDown","isMoving","movingTimeout","startCameraState","clicks","doubleClickTimeout","currentWheelDirection","handleClick","handleRightClick","handleDown","handleUp","handleMove","handleWheel","handleOut","addEventListener","kill","removeEventListener","handleDoubleClick","getMouseCoords","preventDefault","stopPropagation","mouseCoords","sigmaDefaultPrevented","getCamera","newRatio","getViewportZoomedState","getPosition","previousCameraState","refresh","eX","eY","lastMouse","viewportToFramedGraph","mouse","offsetX","offsetY","delta","getWheelDelta","wheelCoords","getWheelCoords","ratioDiff","wheelDirection","lastWheelTriggerTime","__assign","apply","getTouchCoords","getTouchesArray","dom","bbox","getBoundingClientRect","clientX","left","clientY","top","res","preventSigmaDefault","original","MAX_TOUCHES","touches","arr","touch","deltaY","detail","Captor","__spreadArray","to","pack","slice","rectangleCollidesWithQuad","squareCollidesWithQuad","getCircumscribedAlignedRectangle","isRectangleAligned","extend_1","BLOCKS","MAX_LEVEL","OUTSIDE_BLOCK","X_OFFSET","Y_OFFSET","WIDTH_OFFSET","HEIGHT_OFFSET","TOP_LEFT","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_RIGHT","hasWarnedTooMuchOutside","rect","x1","x2","y1","y2","heightVector","tl","tr","bl","br","xL","xR","yT","yB","w","qx","qy","qw","qh","h","pointIsInQuad","xmp","ymp","buildQuadrants","maxLevel","stack","level","pop","block","topLeftBlock","topRightBlock","bottomLeftBlock","bottomRightBlock","hw","hh","insertNode","containers","size","collidingWithTopLeft","collidingWithTopRight","collidingWithBottomLeft","collidingWithBottomRight","collisions","reduce","acc","current","console","warn","getNodesInAxisAlignedRectangleArea","collectedNodes","QuadTree","cache","lastRectangle","L","boundaries","resize","add","clear","point","nodes","quad","rectangle","lr","drawLabel","context","settings","label","labelSize","font","labelFont","weight","labelWeight","labelColor","attribute","fillStyle","fillText","createBuffer","bindBuffer","ARRAY_BUFFER","vertexShader","loadVertexShader","fragmentShader","loadFragmentShader","loadProgram","DYNAMIC_DRAW","hasNothingToRender","toStringTag","cast","type","split","SANITIZE_PATTERN","sanitizeTagName","tagName","replace","trim","Sigma","sigma_1","camera_1","quadtree_1","mouse_1","getMatchingEdge","source","_nodes","edge","out","undirected","_typeof","isEmpty","privateProperty","name","configurable","writable","readOnlyProperty","descriptor","validateHints","hints","isArray","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","init","this","eventsModule","events","emitter","Promise","resolve","reject","errorListener","err","removeListener","resolver","eventTargetAgnosticAddListener","once","handler","flags","on","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","existing","warning","newListener","unshift","warned","count","onceWrapper","fired","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","ret","unwrapListeners","arrayClone","listenerCount","wrapListener","arg","Iterator","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","message","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","Iterator$2","empty","fromSequence","sequence","is","support","ArrayBuffer","require$$0","require$$1","ARRAY_BUFFER_SUPPORT","SYMBOL_SUPPORT","iter","isView","iterOrNull","take","iterable","step","GraphError","_Error","_inheritsLoose","_wrapNativeSuper","InvalidArgumentsGraphError","_this2","captureStackTrace","NotFoundGraphError","_this3","UsageGraphError","_this4","MixedNodeData","DirectedNodeData","UndirectedNodeData","EdgeData","inDegree","outDegree","undirectedDegree","undirectedLoops","directedLoops","in","attach","outKey","inKey","attachMulti","adj","head","previous","detach","detachMulti","findRelevantNodeData","method","mode","nodeOrEdge","nameOrEdge","add1","add2","nodeData","edgeData","arg1","arg2","_edges","NODE_ATTRIBUTES_METHODS","attacher","Class","_findRelevantNodeData","_findRelevantNodeData3","_findRelevantNodeData4","_findRelevantNodeData5","updater","_findRelevantNodeData6","_findRelevantNodeData7","_findRelevantNodeData8","_findRelevantNodeData9","EDGE_ATTRIBUTES_METHODS","chain","iterables","EDGES_ITERATION","direction","forEachSimple","breakable","object","avoid","shouldBreak","forEachMulti","createIterator","sourceAttributes","targetAttributes","forEachForKeySimple","forEachForKeyMulti","createIteratorForKey","createEdgeArray","undirectedSize","directedSize","mask","values","forEachEdge","shouldFilter","createEdgeIterator","forEachEdgeForNode","found","createEdgeArrayForNode","edges","createEdgeIteratorForNode","forEachEdgeForPath","createEdgeArrayForPath","createEdgeIteratorForPath","NEIGHBORS_ITERATION","CompositeSetWrapper","A","B","forEachInObjectOnce","visited","neighborData","has","forEachNeighbor","wrap","createDedupedObjectIterator","neighbor","attachNeighborArrayCreator","description","node","neighbors","createNeighborArrayForNode","attachNeighborIteratorCreator","iteratorName","createNeighborIterator","forEachAdjacency","assymetric","disconnectedNodes","hasEdges","validateSerializedNode","validateSerializedEdge","INSTANCE_ID","floor","random","TYPES","Set","EMITTER_PROPS","DEFAULTS","allowSelfLoops","unsafeAddNode","NodeDataClass","addEdge","mustGenerateKey","eventData","_edgeKeyGenerator","isSelfLoop","_undirectedSelfLoopCount","_directedSelfLoopCount","_undirectedSize","_directedSize","mergeEdge","asUpdater","alreadyExistingEdgeData","info","oldAttributes","sourceWasAdded","targetWasAdded","dropEdgeFromData","delete","Graph","_EventEmitter","_assertThisInitialized","instancePrefix","edgeId","Map","availableEdgeKey","prop","_options","_proto","_resetInstanceCounters","hasNode","hasDirectedEdge","hasUndirectedEdge","hasEdge","directedEdge","undirectedEdge","areDirectedNeighbors","areOutNeighbors","areInNeighbors","areUndirectedNeighbors","areNeighbors","areInboundNeighbors","areOutboundNeighbors","directedDegree","inboundDegree","degree","outboundDegree","inDegreeWithoutSelfLoops","outDegreeWithoutSelfLoops","directedDegreeWithoutSelfLoops","undirectedDegreeWithoutSelfLoops","inboundDegreeWithoutSelfLoops","loops","outboundDegreeWithoutSelfLoops","degreeWithoutSelfLoops","extremities","opposite","hasExtremity","isUndirected","isDirected","addNode","mergeNode","updateNode","dropEdge","dropDirectedEdge","dropUndirectedEdge","clearEdges","getAttribute","_attributes","getAttributes","hasAttribute","updateAttribute","removeAttribute","replaceAttributes","mergeAttributes","updateAttributes","updateEachNodeAttributes","updateEachEdgeAttributes","forEachAdjacencyEntry","forEachAdjacencyEntryWithOrphans","forEachAssymetricAdjacencyEntry","forEachAssymetricAdjacencyEntryWithOrphans","findNode","mapNodes","someNode","everyNode","filterNodes","reduceNodes","initialValue","accumulator","nodeEntries","serialized","serializeNode","serializeEdge","import","merge","_sa","_ta","u","mergeUndirectedEdgeWithKey","mergeDirectedEdgeWithKey","addDirectedEdgeWithKey","undirectedByDefault","_edge$undirected","mergeUndirectedEdge","mergeDirectedEdge","addUndirectedEdge","addDirectedEdge","nullCopy","emptyCopy","toJSON","toString","inspect","multiIndex","tmp","desc","startsWith","dummy","verb","generateKey","_ref","attachNodeAttributesMethods","attachEdgeAttributesMethods","attachEdgeArrayCreator","forEachName","toUpperCase","mapName","ea","sa","ta","filterName","reduceName","attachForEachEdge","findEdgeName","someName","everyName","attachFindEdge","originalName","attachEdgeIteratorCreator","attachEdgeIterationMethods","attachForEachNeighbor","capitalizedSingular","findName","attachFindNeighbor","attachNeighborIterationMethods","DirectedGraph","finalOptions","_Graph","UndirectedGraph","_Graph2","MultiGraph","_Graph3","MultiDirectedGraph","_Graph4","MultiUndirectedGraph","_Graph5","attachStaticFromMethod","instance","parse","write","__values","labels_1","settings_1","touch_1","edge_collisions_1","applyNodeDefaults","defaultNodeColor","highlighted","forceLabel","defaultNodeType","zIndex","applyEdgeDefaults","defaultEdgeColor","defaultEdgeType","canvasContexts","webGLContexts","activeListeners","quadtree","labelGrid","LabelGrid","nodeDataCache","edgeDataCache","nodesWithForcedLabels","edgesWithForcedLabels","nodeExtent","invMatrix","customBBox","normalizationFunction","cameraSizeRatio","pixelRatio","displayedLabels","highlightedNodes","hoveredNode","hoveredEdge","renderFrame","renderHighlightedNodesFrame","needToProcess","needToSoftProcess","checkEdgesEventsFrame","nodePrograms","hoverNodePrograms","edgePrograms","DEFAULT_SETTINGS","validateSettings","HTMLElement","createWebGLContext","preserveDrawingBuffer","createCanvasContext","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","BLEND","nodeProgramClasses","NodeProgramClass","hoverNodes","edgeProgramClasses","EdgeProgramClass","bindCameraHandlers","mouseCaptor","touchCaptor","bindEventHandlers","bindGraphHandlers","handleSettingsUpdate","createCanvas","id","canvas","class","appendChild","contextOptions","antialias","getContext","_scheduleRefresh","mouseIsOnNode","nodeX","nodeY","getQuadNodes","mouseGraphPosition","getNodeAtPosition","quadNodes","minDistance","nodeAtPosition","nodePosition","framedGraphToViewport","scaleSize","distance","handleResize","baseEvent","event","nodeToHover","scheduleHighlightedNodesRender","pos","enableEdgeHoverEvents","checkEdgeHoverEvents","createMouseListener","eventType","isFakeSigmaMouseEvent","enableEdgeWheelEvents","enableEdgeClickEvents","getEdgeAtPoint","graphUpdate","softGraphUpdate","dropNodeGraphUpdate","dropEdgeGraphUpdate","clearEdgesGraphUpdate","clearGraphUpdate","payload","edgeToHover","e_1","isPixelColored","_c","viewportToGraph","graphX","graphY","transformationRatio","someEdge","sourceId","targetId","xs","ys","xt","yt","graphLength","graphToViewport","vp_xs","vp_ys","_d","vp_xt","vp_yt","viewportLength","filterEdges","edgeAttributes","sourcePosition","targetPosition","doEdgeCollideWithPoint","selectedEdge","highestZIndex","edges_1","edges_1_1","getEdgeAttribute","e_1_1","return","keepArrays","dimensions","getDimensions","nodeZExtent","edgeZExtent","resizeAndClear","labelGridCellSize","nullCamera","nullCameraMatrix","getGraphDimensions","getSetting","nodesPerPrograms","getNodeAttributes","nodeReducer","organize","edgesPerPrograms","getEdgeAttributes","edgeReducer","minCameraRatio","maxCameraRatio","_refresh","renderLabels","visibleNodes","viewRectangle","labelsToDisplay","getLabelsToDisplay","labelDensity","labels","labelRenderedSizeThreshold","labelRenderer","renderEdgeLabels","edgeLabels","clearRect","edgeLabelsToDisplay","edgeLabelsToDisplayFromNodes","displayedNodeLabels","edgeLabelRenderer","renderHighlightedNodes","hovers","hoverRenderer","nodesToRender","COLOR_BUFFER_BIT","scalingRatio","handleEscape","updateCachedValues","moving","hideEdgesOnMove","hideLabelsOnMove","getContainer","getGraph","getMouseCaptor","getTouchCaptor","getNodeDisplayData","getEdgeDisplayData","getSettings","setSetting","updateSetting","previousWidth","previousHeight","offsetWidth","offsetHeight","allowInvalidContainer","viewport","scheduleRefresh","viewportTarget","center","graphMousePosition","graphCenterPosition","marginX","marginY","p1","p2","coordinates","override","recomputeMatrix","viewportPos","viewportPoint","graphPoint","getBBox","getCustomBBox","setCustomBBox","firstChild","removeChild","getCanvases","animateNodes","index_1","targets","startPositions","attrs","getNodeAttribute","frame","setNodeAttribute","black","silver","gray","grey","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","darkblue","mediumblue","darkgreen","darkcyan","deepskyblue","darkturquoise","mediumspringgreen","springgreen","cyan","midnightblue","dodgerblue","lightseagreen","forestgreen","seagreen","darkslategray","darkslategrey","limegreen","mediumseagreen","turquoise","royalblue","steelblue","darkslateblue","mediumturquoise","indigo","darkolivegreen","cadetblue","cornflowerblue","rebeccapurple","mediumaquamarine","dimgray","dimgrey","slateblue","olivedrab","slategray","slategrey","lightslategray","lightslategrey","mediumslateblue","lawngreen","chartreuse","aquamarine","skyblue","lightskyblue","blueviolet","darkred","darkmagenta","saddlebrown","darkseagreen","lightgreen","mediumpurple","darkviolet","palegreen","darkorchid","yellowgreen","sienna","brown","darkgray","darkgrey","lightblue","greenyellow","paleturquoise","lightsteelblue","powderblue","firebrick","darkgoldenrod","mediumorchid","rosybrown","darkkhaki","mediumvioletred","indianred","peru","chocolate","tan","lightgray","lightgrey","thistle","orchid","goldenrod","palevioletred","crimson","gainsboro","plum","burlywood","lightcyan","lavender","darksalmon","violet","palegoldenrod","lightcoral","khaki","aliceblue","honeydew","azure","sandybrown","wheat","beige","whitesmoke","mintcream","ghostwhite","salmon","antiquewhite","linen","lightgoldenrodyellow","oldlace","magenta","deeppink","orangered","tomato","hotpink","coral","darkorange","lightsalmon","orange","lightpink","pink","gold","peachpuff","navajowhite","moccasin","bisque","mistyrose","blanchedalmond","papayawhip","lavenderblush","seashell","cornsilk","lemonchiffon","floralwhite","snow","lightyellow","ivory","ProcessEmitWarning","extend","l2","l1","LabelCandidate","compare","first","second","cellSize","columns","rows","cells","ceil","getIndex","xIndex","yIndex","candidate","cell","density","cellArea","scaledCellArea","scaledDensity","labelsToDisplayPerCell","worthyEdges","label_1","hover_1","edge_label_1","node_fast_1","edge_1","edge_arrow_1","edgeLabelFont","edgeLabelSize","edgeLabelWeight","edgeLabelColor","stagePadding","circle","arrow","line","drawHover","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","PADDING","textWidth","measureText","boxWidth","round","boxHeight","radius","angleRadian","asin","xDeltaCoord","beginPath","moveTo","lineTo","arc","closePath","fill","PI","drawEdgeLabel","sSize","tSize","sx","sy","tx","ty","cx","cy","dx","dy","textLength","ellipsis","acos","save","restore","node_fast_vert_glsl_1","node_fast_frag_glsl_1","node_1","POINTS","ATTRIBUTES","NodeFastProgram","useProgram","uniform1f","ratioLocation","scaleLocation","uniformMatrix3fv","matrixLocation","drawArrays","AbstractNodeProgram","createNodeCompoundProgram","positionLocation","getAttribLocation","sizeLocation","colorLocation","getUniformLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","NodeCompoundProgram","loadShader","glType","VERTEX_SHADER","FRAGMENT_SHADER","shader","createShader","shaderSource","compileShader","successfullyCompiled","getShaderParameter","COMPILE_STATUS","infoLog","getShaderInfoLog","deleteShader","shaders","createProgram","attachShader","linkProgram","successfullyLinked","getProgramParameter","LINK_STATUS","deleteProgram","edge_vert_glsl_1","edge_frag_glsl_1","STRIDE","EdgeProgram","indicesBuffer","normalLocation","correctionRatioLocation","sqrtZoomRatioLocation","IndicesArray","Uint32Array","Uint16Array","indicesArray","indicesType","UNSIGNED_INT","UNSIGNED_SHORT","ELEMENT_ARRAY_BUFFER","indices","STATIC_DRAW","i_1","thickness","n1","n2","drawElements","TRIANGLES","edge_arrowHead_1","edge_clamped_1","EdgeArrowProgram","edge_arrowHead_vert_glsl_1","edge_arrowHead_frag_glsl_1","EdgeArrowHeadProgram","radiusLocation","barycentricLocation","edge_clamped_vert_glsl_1","EdgeClampedProgram","TOUCH_INERTIA_RATIO","TOUCH_INERTIA_DURATION","TouchCaptor","touchMode","handleStart","handleLeave","dispatchRelatedMouseEvent","mousePosition","mouseEvent","MouseEvent","altKey","ctrlKey","dispatchEvent","startTouchesPositions","lastTouchesPositions","x0","y0","startTouchesAngle","atan2","startTouchesDistance","touchesPositions","xStart","yStart","newCameraState","_e","angleDiff","hypot","touchGraphPosition","pixels","drawingBufferHeight","xS","yS","xT","createParserFunction","DOMParser","Document","isGraphConstructor","toMixed","toMulti","helpers","isReallyNaN","toRGBString","getFirstMatchingVizTag","vizElement","getElementsByTagName","getElementsByTagNameNS","collectMeta","meta","nodeName","textContent","toLowerCase","extractModel","model","defaults","defaultElement","title","collectAttributes","valueElements","valueElement","shape","addMissingNodes","mergeResult","xmlDoc","parseFromString","GRAPH_ELEMENT","META_ELEMENT","META_ELEMENTS","childNodes","NODE_ELEMENTS","EDGE_ELEMENTS","MODEL_ELEMENTS","NODE_MODEL_ELEMENTS","EDGE_MODEL_ELEMENTS","DEFAULT_EDGE_TYPE","NODE_MODEL","NODE_DEFAULT_ATTRIBUTES","EDGE_MODEL","EDGE_DEFAULT_ATTRIBUTES","graphType","lastModifiedDate","copyEdge","updateEdge","updateUndirectedEdge","updateUndirectedEdgeWithKey","updateDirectedEdge","updateDirectedEdgeWithKey","inferType","XMLWriter","GEXF_NAMESPACE","GEXF_VIZ_NAMESPACE","VIZ_RESERVED_NAMES","RGBA_TEST","RGBA_MATCH","CSSColorToRGBA","DEFAULT_ELEMENT_FORMATTER","output","viz","DEFAULT_NODE_FORMATTER","DEFAULT_EDGE_FORMATTER","is32BitInteger","number","isEmptyValue","detectValueType","join","collectNodeData","format","collectEdgeData","reducer","inferModel","writeModel","writer","modelClass","startElement","writeAttribute","endElement","writeElements","emptyModel","edgeType","startElementNS","encoding","pretty","formatNode","formatEdge","indent","startDocument","graphAttributes","metaTagName","graphAttribute","writeElement","nodeModel","edgeModel","declaredType","isFalse","strval","name_regex","indentString","tags","texts","comment","dtd","root","pi","cdata","started_write","writer_encoding","flush","indenter","version","standalone","startPI","startAttribute","text","endAttribute","endPI","endDocument","endAttributes","content","writeElementNS","prefix","uri","containsTag","startAttributes","writeAttributeNS","startAttributeNS","writeComment","startComment","endComment","writeDocType","pubid","sysid","subset","startDocType","endDocType","writePI","writeCData","startCData","endCData","writeRaw"],"mappings":"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","file":"x","sourcesContent":["\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateGraph = exports.canUse32BitsIndices = exports.extractPixel = exports.getMatrixImpact = exports.matrixFromCamera = exports.getCorrectionRatio = exports.floatColor = exports.floatArrayColor = exports.parseColor = exports.zIndexOrdering = exports.createNormalizationFunction = exports.graphExtent = exports.getPixelRatio = exports.createElement = exports.cancelFrame = exports.requestFrame = exports.assignDeep = exports.assign = exports.isPlainObject = void 0;\nvar is_graph_1 = __importDefault(require(\"graphology-utils/is-graph\"));\nvar matrices_1 = require(\"./matrices\");\nvar data_1 = require(\"./data\");\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nfunction isPlainObject(value) {\n    return typeof value === \"object\" && value !== null && value.constructor === Object;\n}\nexports.isPlainObject = isPlainObject;\n/**\n * Helper to use Object.assign with more than two objects.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assign(target) {\n    var objects = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        objects[_i - 1] = arguments[_i];\n    }\n    target = target || {};\n    for (var i = 0, l = objects.length; i < l; i++) {\n        var o = objects[i];\n        if (!o)\n            continue;\n        Object.assign(target, o);\n    }\n    return target;\n}\nexports.assign = assign;\n/**\n * Very simple recursive Object.assign-like function.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignDeep(target) {\n    var objects = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        objects[_i - 1] = arguments[_i];\n    }\n    target = target || {};\n    for (var i = 0, l = objects.length; i < l; i++) {\n        var o = objects[i];\n        if (!o)\n            continue;\n        for (var k in o) {\n            if (isPlainObject(o[k])) {\n                target[k] = assignDeep(target[k], o[k]);\n            }\n            else {\n                target[k] = o[k];\n            }\n        }\n    }\n    return target;\n}\nexports.assignDeep = assignDeep;\n/**\n * Just some dirty trick to make requestAnimationFrame and cancelAnimationFrame \"work\" in Node.js, for unit tests:\n */\nexports.requestFrame = typeof requestAnimationFrame !== \"undefined\"\n    ? function (callback) { return requestAnimationFrame(callback); }\n    : function (callback) { return setTimeout(callback, 0); };\nexports.cancelFrame = typeof cancelAnimationFrame !== \"undefined\"\n    ? function (requestID) { return cancelAnimationFrame(requestID); }\n    : function (requestID) { return clearTimeout(requestID); };\n/**\n * Function used to create DOM elements easily.\n *\n * @param  {string} tag        - Tag name of the element to create.\n * @param  {object} style      - Styles map.\n * @param  {object} attributes - Attributes map.\n * @return {HTMLElement}\n */\nfunction createElement(tag, style, attributes) {\n    var element = document.createElement(tag);\n    if (style) {\n        for (var k in style) {\n            element.style[k] = style[k];\n        }\n    }\n    if (attributes) {\n        for (var k in attributes) {\n            element.setAttribute(k, attributes[k]);\n        }\n    }\n    return element;\n}\nexports.createElement = createElement;\n/**\n * Function returning the browser's pixel ratio.\n *\n * @return {number}\n */\nfunction getPixelRatio() {\n    if (typeof window.devicePixelRatio !== \"undefined\")\n        return window.devicePixelRatio;\n    return 1;\n}\nexports.getPixelRatio = getPixelRatio;\n/**\n * Function returning the graph's node extent in x & y.\n *\n * @param  {Graph}\n * @return {object}\n */\nfunction graphExtent(graph) {\n    if (!graph.order)\n        return { x: [0, 1], y: [0, 1] };\n    var xMin = Infinity;\n    var xMax = -Infinity;\n    var yMin = Infinity;\n    var yMax = -Infinity;\n    graph.forEachNode(function (_, attr) {\n        var x = attr.x, y = attr.y;\n        if (x < xMin)\n            xMin = x;\n        if (x > xMax)\n            xMax = x;\n        if (y < yMin)\n            yMin = y;\n        if (y > yMax)\n            yMax = y;\n    });\n    return { x: [xMin, xMax], y: [yMin, yMax] };\n}\nexports.graphExtent = graphExtent;\nfunction createNormalizationFunction(extent) {\n    var _a = __read(extent.x, 2), minX = _a[0], maxX = _a[1], _b = __read(extent.y, 2), minY = _b[0], maxY = _b[1];\n    var ratio = Math.max(maxX - minX, maxY - minY), dX = (maxX + minX) / 2, dY = (maxY + minY) / 2;\n    if (ratio === 0 || Math.abs(ratio) === Infinity || isNaN(ratio))\n        ratio = 1;\n    if (isNaN(dX))\n        dX = 0;\n    if (isNaN(dY))\n        dY = 0;\n    var fn = function (data) {\n        return {\n            x: 0.5 + (data.x - dX) / ratio,\n            y: 0.5 + (data.y - dY) / ratio,\n        };\n    };\n    // TODO: possibility to apply this in batch over array of indices\n    fn.applyTo = function (data) {\n        data.x = 0.5 + (data.x - dX) / ratio;\n        data.y = 0.5 + (data.y - dY) / ratio;\n    };\n    fn.inverse = function (data) {\n        return {\n            x: dX + ratio * (data.x - 0.5),\n            y: dY + ratio * (data.y - 0.5),\n        };\n    };\n    fn.ratio = ratio;\n    return fn;\n}\nexports.createNormalizationFunction = createNormalizationFunction;\n/**\n * Function ordering the given elements in reverse z-order so they drawn\n * the correct way.\n *\n * @param  {number}   extent   - [min, max] z values.\n * @param  {function} getter   - Z attribute getter function.\n * @param  {array}    elements - The array to sort.\n * @return {array} - The sorted array.\n */\nfunction zIndexOrdering(extent, getter, elements) {\n    // If k is > n, we'll use a standard sort\n    return elements.sort(function (a, b) {\n        var zA = getter(a) || 0, zB = getter(b) || 0;\n        if (zA < zB)\n            return -1;\n        if (zA > zB)\n            return 1;\n        return 0;\n    });\n    // TODO: counting sort optimization\n}\nexports.zIndexOrdering = zIndexOrdering;\n/**\n * WebGL utils\n * ===========\n */\n/**\n * Memoized function returning a float-encoded color from various string\n * formats describing colors.\n */\nvar INT8 = new Int8Array(4);\nvar INT32 = new Int32Array(INT8.buffer, 0, 1);\nvar FLOAT32 = new Float32Array(INT8.buffer, 0, 1);\nvar RGBA_TEST_REGEX = /^\\s*rgba?\\s*\\(/;\nvar RGBA_EXTRACT_REGEX = /^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)(?:\\s*,\\s*(.*)?)?\\)\\s*$/;\nfunction parseColor(val) {\n    var r = 0; // byte\n    var g = 0; // byte\n    var b = 0; // byte\n    var a = 1; // float\n    // Handling hexadecimal notation\n    if (val[0] === \"#\") {\n        if (val.length === 4) {\n            r = parseInt(val.charAt(1) + val.charAt(1), 16);\n            g = parseInt(val.charAt(2) + val.charAt(2), 16);\n            b = parseInt(val.charAt(3) + val.charAt(3), 16);\n        }\n        else {\n            r = parseInt(val.charAt(1) + val.charAt(2), 16);\n            g = parseInt(val.charAt(3) + val.charAt(4), 16);\n            b = parseInt(val.charAt(5) + val.charAt(6), 16);\n        }\n        // TODO: parse hex with alpha?\n    }\n    // Handling rgb notation\n    else if (RGBA_TEST_REGEX.test(val)) {\n        var match = val.match(RGBA_EXTRACT_REGEX);\n        if (match) {\n            r = +match[1];\n            g = +match[2];\n            b = +match[3];\n            if (match[4])\n                a = +match[4];\n        }\n    }\n    return { r: r, g: g, b: b, a: a };\n}\nexports.parseColor = parseColor;\nvar FLOAT_COLOR_CACHE = {};\nfor (var htmlColor in data_1.HTML_COLORS) {\n    FLOAT_COLOR_CACHE[htmlColor] = floatColor(data_1.HTML_COLORS[htmlColor]);\n    // Replicating cache for hex values for free\n    FLOAT_COLOR_CACHE[data_1.HTML_COLORS[htmlColor]] = FLOAT_COLOR_CACHE[htmlColor];\n}\nfunction floatArrayColor(val) {\n    val = data_1.HTML_COLORS[val] || val;\n    // NOTE: this variant is not cached because it is mostly used for uniforms\n    var _a = parseColor(val), r = _a.r, g = _a.g, b = _a.b, a = _a.a;\n    return new Float32Array([r / 255, g / 255, b / 255, a]);\n}\nexports.floatArrayColor = floatArrayColor;\nfunction floatColor(val) {\n    // If the color is already computed, we yield it\n    if (typeof FLOAT_COLOR_CACHE[val] !== \"undefined\")\n        return FLOAT_COLOR_CACHE[val];\n    var parsed = parseColor(val);\n    var r = parsed.r, g = parsed.g, b = parsed.b;\n    var a = parsed.a;\n    a = (a * 255) | 0;\n    INT32[0] = ((a << 24) | (b << 16) | (g << 8) | r) & 0xfeffffff;\n    var color = FLOAT32[0];\n    FLOAT_COLOR_CACHE[val] = color;\n    return color;\n}\nexports.floatColor = floatColor;\n/**\n * In sigma, the graph is normalized into a [0, 1], [0, 1] square, before being given to the various renderers. This\n * helps dealing with quadtree in particular.\n * But at some point, we need to rescale it so that it takes the best place in the screen, ie. we always want to see two\n * nodes \"touching\" opposite sides of the graph, with the camera being at its default state.\n *\n * This function determines this ratio.\n */\nfunction getCorrectionRatio(viewportDimensions, graphDimensions) {\n    var viewportRatio = viewportDimensions.height / viewportDimensions.width;\n    var graphRatio = graphDimensions.height / graphDimensions.width;\n    // If the stage and the graphs are in different directions (such as the graph being wider that tall while the stage\n    // is taller than wide), we can stop here to have indeed nodes touching opposite sides:\n    if ((viewportRatio < 1 && graphRatio > 1) || (viewportRatio > 1 && graphRatio < 1)) {\n        return 1;\n    }\n    // Else, we need to fit the graph inside the stage:\n    // 1. If the graph is \"squarer\" (ie. with a ratio closer to 1), we need to make the largest sides touch;\n    // 2. If the stage is \"squarer\", we need to make the smallest sides touch.\n    return Math.min(Math.max(graphRatio, 1 / graphRatio), Math.max(1 / viewportRatio, viewportRatio));\n}\nexports.getCorrectionRatio = getCorrectionRatio;\n/**\n * Function returning a matrix from the current state of the camera.\n */\n// TODO: it's possible to optimize this drastically!\nfunction matrixFromCamera(state, viewportDimensions, graphDimensions, padding, inverse) {\n    var angle = state.angle, ratio = state.ratio, x = state.x, y = state.y;\n    var width = viewportDimensions.width, height = viewportDimensions.height;\n    var matrix = (0, matrices_1.identity)();\n    var smallestDimension = Math.min(width, height) - 2 * padding;\n    var correctionRatio = getCorrectionRatio(viewportDimensions, graphDimensions);\n    if (!inverse) {\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), 2 * (smallestDimension / width) * correctionRatio, 2 * (smallestDimension / height) * correctionRatio));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.rotate)((0, matrices_1.identity)(), -angle));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), 1 / ratio));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.translate)((0, matrices_1.identity)(), -x, -y));\n    }\n    else {\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.translate)((0, matrices_1.identity)(), x, y));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), ratio));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.rotate)((0, matrices_1.identity)(), angle));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), width / smallestDimension / 2 / correctionRatio, height / smallestDimension / 2 / correctionRatio));\n    }\n    return matrix;\n}\nexports.matrixFromCamera = matrixFromCamera;\n/**\n * All these transformations we apply on the matrix to get it rescale the graph\n * as we want make it very hard to get pixel-perfect distances in WebGL. This\n * function returns a factor that properly cancels the matrix effect on lengths.\n *\n * [jacomyal]\n * To be fully honest, I can't really explain happens here... I notice that the\n * following ratio works (ie. it correctly compensates the matrix impact on all\n * camera states I could try):\n * > `R = size(V) / size(M * V) / W`\n * as long as `M * V` is in the direction of W (ie. parallel to (Ox)). It works\n * as well with H and a vector that transforms into something parallel to (Oy).\n *\n * Also, note that we use `angle` and not `-angle` (that would seem logical,\n * since we want to anticipate the rotation), because of the fact that in WebGL,\n * the image is vertically swapped.\n */\nfunction getMatrixImpact(matrix, cameraState, viewportDimensions) {\n    var _a = (0, matrices_1.multiplyVec2)(matrix, { x: Math.cos(cameraState.angle), y: Math.sin(cameraState.angle) }, 0), x = _a.x, y = _a.y;\n    return 1 / Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2)) / viewportDimensions.width;\n}\nexports.getMatrixImpact = getMatrixImpact;\n/**\n * Function extracting the color at the given pixel.\n */\nfunction extractPixel(gl, x, y, array) {\n    var data = array || new Uint8Array(4);\n    gl.readPixels(x, y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    return data;\n}\nexports.extractPixel = extractPixel;\n/**\n * Function used to know whether given webgl context can use 32 bits indices.\n */\nfunction canUse32BitsIndices(gl) {\n    var webgl2 = typeof WebGL2RenderingContext !== \"undefined\" && gl instanceof WebGL2RenderingContext;\n    return webgl2 || !!gl.getExtension(\"OES_element_index_uint\");\n}\nexports.canUse32BitsIndices = canUse32BitsIndices;\n/**\n * Check if the graph variable is a valid graph, and if sigma can render it.\n */\nfunction validateGraph(graph) {\n    // check if it's a valid graphology instance\n    if (!(0, is_graph_1.default)(graph))\n        throw new Error(\"Sigma: invalid graph instance.\");\n    // check if nodes have x/y attributes\n    graph.forEachNode(function (key, attributes) {\n        if (!Number.isFinite(attributes.x) || !Number.isFinite(attributes.y)) {\n            throw new Error(\"Sigma: Coordinates of node \".concat(key, \" are invalid. A node must have a numeric 'x' and 'y' attribute.\"));\n        }\n    });\n}\nexports.validateGraph = validateGraph;\n","/**\n * Graphology isGraph\n * ===================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology instance.\n */\n\n/**\n * Checking the value is a graphology instance.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraph(value) {\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.dropNode === 'function' &&\n    typeof value.multi === 'boolean'\n  );\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createEdgeCompoundProgram = exports.AbstractEdgeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Edge Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Edge Program class.\n *\n * @constructor\n */\nvar AbstractEdgeProgram = /** @class */ (function (_super) {\n    __extends(AbstractEdgeProgram, _super);\n    function AbstractEdgeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        return _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n    }\n    return AbstractEdgeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractEdgeProgram = AbstractEdgeProgram;\nfunction createEdgeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function EdgeCompoundProgram(gl, renderer) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl, renderer); });\n        }\n        EdgeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        EdgeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        EdgeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        EdgeCompoundProgram.prototype.computeIndices = function () {\n            this.programs.forEach(function (program) { return program.computeIndices(); });\n        };\n        EdgeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) {\n                program.bind();\n                program.bufferData();\n                program.render(params);\n            });\n        };\n        EdgeCompoundProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(sourceData, targetData, data, hidden, offset); });\n        };\n        return EdgeCompoundProgram;\n    }());\n}\nexports.createEdgeCompoundProgram = createEdgeCompoundProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedEventEmitter = void 0;\n/**\n * Sigma.js Types\n * ===============\n *\n * Various type declarations used throughout the library.\n * @module\n */\nvar events_1 = require(\"events\");\nvar TypedEventEmitter = /** @class */ (function (_super) {\n    __extends(TypedEventEmitter, _super);\n    function TypedEventEmitter() {\n        var _this = _super.call(this) || this;\n        _this.rawEmitter = _this;\n        return _this;\n    }\n    return TypedEventEmitter;\n}(events_1.EventEmitter));\nexports.TypedEventEmitter = TypedEventEmitter;\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js Camera Class\n * ======================\n *\n * Class designed to store camera information & used to update it.\n * @module\n */\nvar animate_1 = require(\"../utils/animate\");\nvar easings_1 = __importDefault(require(\"../utils/easings\"));\nvar utils_1 = require(\"../utils\");\nvar types_1 = require(\"../types\");\n/**\n * Defaults.\n */\nvar DEFAULT_ZOOMING_RATIO = 1.5;\n/**\n * Camera class\n *\n * @constructor\n */\nvar Camera = /** @class */ (function (_super) {\n    __extends(Camera, _super);\n    function Camera() {\n        var _this = _super.call(this) || this;\n        _this.x = 0.5;\n        _this.y = 0.5;\n        _this.angle = 0;\n        _this.ratio = 1;\n        _this.minRatio = null;\n        _this.maxRatio = null;\n        _this.nextFrame = null;\n        _this.previousState = null;\n        _this.enabled = true;\n        // State\n        _this.previousState = _this.getState();\n        return _this;\n    }\n    /**\n     * Static method used to create a Camera object with a given state.\n     *\n     * @param state\n     * @return {Camera}\n     */\n    Camera.from = function (state) {\n        var camera = new Camera();\n        return camera.setState(state);\n    };\n    /**\n     * Method used to enable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.enable = function () {\n        this.enabled = true;\n        return this;\n    };\n    /**\n     * Method used to disable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.disable = function () {\n        this.enabled = false;\n        return this;\n    };\n    /**\n     * Method used to retrieve the camera's current state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getState = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            angle: this.angle,\n            ratio: this.ratio,\n        };\n    };\n    /**\n     * Method used to check whether the camera has the given state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.hasState = function (state) {\n        return this.x === state.x && this.y === state.y && this.ratio === state.ratio && this.angle === state.angle;\n    };\n    /**\n     * Method used to retrieve the camera's previous state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getPreviousState = function () {\n        var state = this.previousState;\n        if (!state)\n            return null;\n        return {\n            x: state.x,\n            y: state.y,\n            angle: state.angle,\n            ratio: state.ratio,\n        };\n    };\n    /**\n     * Method used to check minRatio and maxRatio values.\n     *\n     * @param ratio\n     * @return {number}\n     */\n    Camera.prototype.getBoundedRatio = function (ratio) {\n        var r = ratio;\n        if (typeof this.minRatio === \"number\")\n            r = Math.max(r, this.minRatio);\n        if (typeof this.maxRatio === \"number\")\n            r = Math.min(r, this.maxRatio);\n        return r;\n    };\n    /**\n     * Method used to check various things to return a legit state candidate.\n     *\n     * @param state\n     * @return {object}\n     */\n    Camera.prototype.validateState = function (state) {\n        var validatedState = {};\n        if (typeof state.x === \"number\")\n            validatedState.x = state.x;\n        if (typeof state.y === \"number\")\n            validatedState.y = state.y;\n        if (typeof state.angle === \"number\")\n            validatedState.angle = state.angle;\n        if (typeof state.ratio === \"number\")\n            validatedState.ratio = this.getBoundedRatio(state.ratio);\n        return validatedState;\n    };\n    /**\n     * Method used to check whether the camera is currently being animated.\n     *\n     * @return {boolean}\n     */\n    Camera.prototype.isAnimated = function () {\n        return !!this.nextFrame;\n    };\n    /**\n     * Method used to set the camera's state.\n     *\n     * @param  {object} state - New state.\n     * @return {Camera}\n     */\n    Camera.prototype.setState = function (state) {\n        if (!this.enabled)\n            return this;\n        // TODO: update by function\n        // Keeping track of last state\n        this.previousState = this.getState();\n        var validState = this.validateState(state);\n        if (typeof validState.x === \"number\")\n            this.x = validState.x;\n        if (typeof validState.y === \"number\")\n            this.y = validState.y;\n        if (typeof validState.angle === \"number\")\n            this.angle = validState.angle;\n        if (typeof validState.ratio === \"number\")\n            this.ratio = validState.ratio;\n        // Emitting\n        if (!this.hasState(this.previousState))\n            this.emit(\"updated\", this.getState());\n        return this;\n    };\n    /**\n     * Method used to animate the camera.\n     *\n     * @param  {object}                    state      - State to reach eventually.\n     * @param  {object}                    opts       - Options:\n     * @param  {number}                      duration - Duration of the animation.\n     * @param  {string | number => number}   easing   - Easing function or name of an existing one\n     * @param  {function}                  callback   - Callback\n     */\n    Camera.prototype.animate = function (state, opts, callback) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        var options = Object.assign({}, animate_1.ANIMATE_DEFAULTS, opts);\n        var validState = this.validateState(state);\n        var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n        // State\n        var start = Date.now(), initialState = this.getState();\n        // Function performing the animation\n        var fn = function () {\n            var t = (Date.now() - start) / options.duration;\n            // The animation is over:\n            if (t >= 1) {\n                _this.nextFrame = null;\n                _this.setState(validState);\n                if (_this.animationCallback) {\n                    _this.animationCallback.call(null);\n                    _this.animationCallback = undefined;\n                }\n                return;\n            }\n            var coefficient = easing(t);\n            var newState = {};\n            if (typeof validState.x === \"number\")\n                newState.x = initialState.x + (validState.x - initialState.x) * coefficient;\n            if (typeof validState.y === \"number\")\n                newState.y = initialState.y + (validState.y - initialState.y) * coefficient;\n            if (typeof validState.angle === \"number\")\n                newState.angle = initialState.angle + (validState.angle - initialState.angle) * coefficient;\n            if (typeof validState.ratio === \"number\")\n                newState.ratio = initialState.ratio + (validState.ratio - initialState.ratio) * coefficient;\n            _this.setState(newState);\n            _this.nextFrame = (0, utils_1.requestFrame)(fn);\n        };\n        if (this.nextFrame) {\n            (0, utils_1.cancelFrame)(this.nextFrame);\n            if (this.animationCallback)\n                this.animationCallback.call(null);\n            this.nextFrame = (0, utils_1.requestFrame)(fn);\n        }\n        else {\n            fn();\n        }\n        this.animationCallback = callback;\n    };\n    /**\n     * Method used to zoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     * @return {function}\n     */\n    Camera.prototype.animatedZoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio / DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio / factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio / (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to unzoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     */\n    Camera.prototype.animatedUnzoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio * DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio * factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio * (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to reset the camera.\n     *\n     * @param  {object} options - Options.\n     */\n    Camera.prototype.animatedReset = function (options) {\n        this.animate({\n            x: 0.5,\n            y: 0.5,\n            ratio: 1,\n            angle: 0,\n        }, options);\n    };\n    /**\n     * Returns a new Camera instance, with the same state as the current camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.copy = function () {\n        return Camera.from(this.getState());\n    };\n    return Camera;\n}(types_1.TypedEventEmitter));\nexports.default = Camera;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiplyVec2 = exports.multiply = exports.translate = exports.rotate = exports.scale = exports.identity = void 0;\nfunction identity() {\n    return Float32Array.of(1, 0, 0, 0, 1, 0, 0, 0, 1);\n}\nexports.identity = identity;\n// TODO: optimize\nfunction scale(m, x, y) {\n    m[0] = x;\n    m[4] = typeof y === \"number\" ? y : x;\n    return m;\n}\nexports.scale = scale;\nfunction rotate(m, r) {\n    var s = Math.sin(r), c = Math.cos(r);\n    m[0] = c;\n    m[1] = s;\n    m[3] = -s;\n    m[4] = c;\n    return m;\n}\nexports.rotate = rotate;\nfunction translate(m, x, y) {\n    m[6] = x;\n    m[7] = y;\n    return m;\n}\nexports.translate = translate;\nfunction multiply(a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2];\n    var a10 = a[3], a11 = a[4], a12 = a[5];\n    var a20 = a[6], a21 = a[7], a22 = a[8];\n    var b00 = b[0], b01 = b[1], b02 = b[2];\n    var b10 = b[3], b11 = b[4], b12 = b[5];\n    var b20 = b[6], b21 = b[7], b22 = b[8];\n    a[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    a[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    a[2] = b00 * a02 + b01 * a12 + b02 * a22;\n    a[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    a[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    a[5] = b10 * a02 + b11 * a12 + b12 * a22;\n    a[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    a[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    a[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return a;\n}\nexports.multiply = multiply;\nfunction multiplyVec2(a, b, z) {\n    if (z === void 0) { z = 1; }\n    var a00 = a[0];\n    var a01 = a[1];\n    var a10 = a[3];\n    var a11 = a[4];\n    var a20 = a[6];\n    var a21 = a[7];\n    var b0 = b.x;\n    var b1 = b.y;\n    return { x: b0 * a00 + b1 * a10 + a20 * z, y: b0 * a01 + b1 * a11 + a21 * z };\n}\nexports.multiplyVec2 = multiplyVec2;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cubicInOut = exports.cubicOut = exports.cubicIn = exports.quadraticInOut = exports.quadraticOut = exports.quadraticIn = exports.linear = void 0;\n/**\n * Sigma.js Easings\n * =================\n *\n * Handy collection of easing functions.\n * @module\n */\nvar linear = function (k) { return k; };\nexports.linear = linear;\nvar quadraticIn = function (k) { return k * k; };\nexports.quadraticIn = quadraticIn;\nvar quadraticOut = function (k) { return k * (2 - k); };\nexports.quadraticOut = quadraticOut;\nvar quadraticInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k;\n    return -0.5 * (--k * (k - 2) - 1);\n};\nexports.quadraticInOut = quadraticInOut;\nvar cubicIn = function (k) { return k * k * k; };\nexports.cubicIn = cubicIn;\nvar cubicOut = function (k) { return --k * k * k + 1; };\nexports.cubicOut = cubicOut;\nvar cubicInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k * k;\n    return 0.5 * ((k -= 2) * k * k + 2);\n};\nexports.cubicInOut = cubicInOut;\nvar easings = {\n    linear: exports.linear,\n    quadraticIn: exports.quadraticIn,\n    quadraticOut: exports.quadraticOut,\n    quadraticInOut: exports.quadraticInOut,\n    cubicIn: exports.cubicIn,\n    cubicOut: exports.cubicOut,\n    cubicInOut: exports.cubicInOut,\n};\nexports.default = easings;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\n/**\n * Constants.\n */\nvar DRAG_TIMEOUT = 100;\nvar DRAGGED_EVENTS_TOLERANCE = 3;\nvar MOUSE_INERTIA_DURATION = 200;\nvar MOUSE_INERTIA_RATIO = 3;\nvar MOUSE_ZOOM_DURATION = 250;\nvar ZOOMING_RATIO = 1.7;\nvar DOUBLE_CLICK_TIMEOUT = 300;\nvar DOUBLE_CLICK_ZOOMING_RATIO = 2.2;\nvar DOUBLE_CLICK_ZOOMING_DURATION = 200;\n/**\n * Mouse captor class.\n *\n * @constructor\n */\nvar MouseCaptor = /** @class */ (function (_super) {\n    __extends(MouseCaptor, _super);\n    function MouseCaptor(container, renderer) {\n        var _this = _super.call(this, container, renderer) || this;\n        // State\n        _this.enabled = true;\n        _this.draggedEvents = 0;\n        _this.downStartTime = null;\n        _this.lastMouseX = null;\n        _this.lastMouseY = null;\n        _this.isMouseDown = false;\n        _this.isMoving = false;\n        _this.movingTimeout = null;\n        _this.startCameraState = null;\n        _this.clicks = 0;\n        _this.doubleClickTimeout = null;\n        _this.currentWheelDirection = 0;\n        // Binding methods\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.handleRightClick = _this.handleRightClick.bind(_this);\n        _this.handleDown = _this.handleDown.bind(_this);\n        _this.handleUp = _this.handleUp.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        _this.handleWheel = _this.handleWheel.bind(_this);\n        _this.handleOut = _this.handleOut.bind(_this);\n        // Binding events\n        container.addEventListener(\"click\", _this.handleClick, false);\n        container.addEventListener(\"contextmenu\", _this.handleRightClick, false);\n        container.addEventListener(\"mousedown\", _this.handleDown, false);\n        container.addEventListener(\"wheel\", _this.handleWheel, false);\n        container.addEventListener(\"mouseout\", _this.handleOut, false);\n        document.addEventListener(\"mousemove\", _this.handleMove, false);\n        document.addEventListener(\"mouseup\", _this.handleUp, false);\n        return _this;\n    }\n    MouseCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"click\", this.handleClick);\n        container.removeEventListener(\"contextmenu\", this.handleRightClick);\n        container.removeEventListener(\"mousedown\", this.handleDown);\n        container.removeEventListener(\"wheel\", this.handleWheel);\n        container.removeEventListener(\"mouseout\", this.handleOut);\n        document.removeEventListener(\"mousemove\", this.handleMove);\n        document.removeEventListener(\"mouseup\", this.handleUp);\n    };\n    MouseCaptor.prototype.handleClick = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        this.clicks++;\n        if (this.clicks === 2) {\n            this.clicks = 0;\n            if (typeof this.doubleClickTimeout === \"number\") {\n                clearTimeout(this.doubleClickTimeout);\n                this.doubleClickTimeout = null;\n            }\n            return this.handleDoubleClick(e);\n        }\n        setTimeout(function () {\n            _this.clicks = 0;\n            _this.doubleClickTimeout = null;\n        }, DOUBLE_CLICK_TIMEOUT);\n        // NOTE: this is here to prevent click events on drag\n        if (this.draggedEvents < DRAGGED_EVENTS_TOLERANCE)\n            this.emit(\"click\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleRightClick = function (e) {\n        if (!this.enabled)\n            return;\n        this.emit(\"rightClick\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleDoubleClick = function (e) {\n        if (!this.enabled)\n            return;\n        e.preventDefault();\n        e.stopPropagation();\n        var mouseCoords = (0, captor_1.getMouseCoords)(e, this.container);\n        this.emit(\"doubleClick\", mouseCoords);\n        if (mouseCoords.sigmaDefaultPrevented)\n            return;\n        // default behavior\n        var camera = this.renderer.getCamera();\n        var newRatio = camera.getBoundedRatio(camera.getState().ratio / DOUBLE_CLICK_ZOOMING_RATIO);\n        camera.animate(this.renderer.getViewportZoomedState((0, captor_1.getPosition)(e, this.container), newRatio), {\n            easing: \"quadraticInOut\",\n            duration: DOUBLE_CLICK_ZOOMING_DURATION,\n        });\n    };\n    MouseCaptor.prototype.handleDown = function (e) {\n        if (!this.enabled)\n            return;\n        this.startCameraState = this.renderer.getCamera().getState();\n        var _a = (0, captor_1.getPosition)(e, this.container), x = _a.x, y = _a.y;\n        this.lastMouseX = x;\n        this.lastMouseY = y;\n        this.draggedEvents = 0;\n        this.downStartTime = Date.now();\n        // TODO: dispatch events\n        // Left button pressed\n        this.isMouseDown = true;\n        this.emit(\"mousedown\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleUp = function (e) {\n        var _this = this;\n        if (!this.enabled || !this.isMouseDown)\n            return;\n        var camera = this.renderer.getCamera();\n        this.isMouseDown = false;\n        if (typeof this.movingTimeout === \"number\") {\n            clearTimeout(this.movingTimeout);\n            this.movingTimeout = null;\n        }\n        var _a = (0, captor_1.getPosition)(e, this.container), x = _a.x, y = _a.y;\n        var cameraState = camera.getState(), previousCameraState = camera.getPreviousState() || { x: 0, y: 0 };\n        if (this.isMoving) {\n            camera.animate({\n                x: cameraState.x + MOUSE_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                y: cameraState.y + MOUSE_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n            }, {\n                duration: MOUSE_INERTIA_DURATION,\n                easing: \"quadraticOut\",\n            });\n        }\n        else if (this.lastMouseX !== x || this.lastMouseY !== y) {\n            camera.setState({\n                x: cameraState.x,\n                y: cameraState.y,\n            });\n        }\n        this.isMoving = false;\n        setTimeout(function () {\n            _this.draggedEvents = 0;\n            _this.renderer.refresh();\n        }, 0);\n        this.emit(\"mouseup\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleMove = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        var mouseCoords = (0, captor_1.getMouseCoords)(e, this.container);\n        // Always trigger a \"mousemovebody\" event, so that it is possible to develop\n        // a drag-and-drop effect that works even when the mouse is out of the\n        // container:\n        this.emit(\"mousemovebody\", mouseCoords);\n        // Only trigger the \"mousemove\" event when the mouse is actually hovering\n        // the container, to avoid weirdly hovering nodes and/or edges when the\n        // mouse is not hover the container:\n        if (e.target === this.container) {\n            this.emit(\"mousemove\", mouseCoords);\n        }\n        if (mouseCoords.sigmaDefaultPrevented)\n            return;\n        // Handle the case when \"isMouseDown\" all the time, to allow dragging the\n        // stage while the mouse is not hover the container:\n        if (this.isMouseDown) {\n            this.isMoving = true;\n            this.draggedEvents++;\n            if (typeof this.movingTimeout === \"number\") {\n                clearTimeout(this.movingTimeout);\n            }\n            this.movingTimeout = window.setTimeout(function () {\n                _this.movingTimeout = null;\n                _this.isMoving = false;\n            }, DRAG_TIMEOUT);\n            var camera = this.renderer.getCamera();\n            var _a = (0, captor_1.getPosition)(e, this.container), eX = _a.x, eY = _a.y;\n            var lastMouse = this.renderer.viewportToFramedGraph({\n                x: this.lastMouseX,\n                y: this.lastMouseY,\n            });\n            var mouse = this.renderer.viewportToFramedGraph({ x: eX, y: eY });\n            var offsetX = lastMouse.x - mouse.x, offsetY = lastMouse.y - mouse.y;\n            var cameraState = camera.getState();\n            var x = cameraState.x + offsetX, y = cameraState.y + offsetY;\n            camera.setState({ x: x, y: y });\n            this.lastMouseX = eX;\n            this.lastMouseY = eY;\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    };\n    MouseCaptor.prototype.handleWheel = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        e.preventDefault();\n        e.stopPropagation();\n        var delta = (0, captor_1.getWheelDelta)(e);\n        if (!delta)\n            return;\n        var wheelCoords = (0, captor_1.getWheelCoords)(e, this.container);\n        this.emit(\"wheel\", wheelCoords);\n        if (wheelCoords.sigmaDefaultPrevented)\n            return;\n        // Default behavior\n        var ratioDiff = delta > 0 ? 1 / ZOOMING_RATIO : ZOOMING_RATIO;\n        var camera = this.renderer.getCamera();\n        var newRatio = camera.getBoundedRatio(camera.getState().ratio * ratioDiff);\n        var wheelDirection = delta > 0 ? 1 : -1;\n        var now = Date.now();\n        // Cancel events that are too close too each other and in the same direction:\n        if (this.currentWheelDirection === wheelDirection &&\n            this.lastWheelTriggerTime &&\n            now - this.lastWheelTriggerTime < MOUSE_ZOOM_DURATION / 5) {\n            return;\n        }\n        camera.animate(this.renderer.getViewportZoomedState((0, captor_1.getPosition)(e, this.container), newRatio), {\n            easing: \"quadraticOut\",\n            duration: MOUSE_ZOOM_DURATION,\n        }, function () {\n            _this.currentWheelDirection = 0;\n        });\n        this.currentWheelDirection = wheelDirection;\n        this.lastWheelTriggerTime = now;\n    };\n    MouseCaptor.prototype.handleOut = function () {\n        // TODO: dispatch event\n    };\n    return MouseCaptor;\n}(captor_1.default));\nexports.default = MouseCaptor;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getWheelDelta = exports.getTouchCoords = exports.getTouchesArray = exports.getWheelCoords = exports.getMouseCoords = exports.getPosition = void 0;\n/**\n * Sigma.js Captor Class\n * ======================\n * @module\n */\nvar types_1 = require(\"../../types\");\n/**\n * Captor utils functions\n * ======================\n */\n/**\n * Extract the local X and Y coordinates from a mouse event or touch object. If\n * a DOM element is given, it uses this element's offset to compute the position\n * (this allows using events that are not bound to the container itself and\n * still have a proper position).\n *\n * @param  {event}       e - A mouse event or touch object.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {number}      The local Y value of the mouse.\n */\nfunction getPosition(e, dom) {\n    var bbox = dom.getBoundingClientRect();\n    return {\n        x: e.clientX - bbox.left,\n        y: e.clientY - bbox.top,\n    };\n}\nexports.getPosition = getPosition;\n/**\n * Convert mouse coords to sigma coords.\n *\n * @param  {event}       e   - A mouse event or touch object.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getMouseCoords(e, dom) {\n    var res = __assign(__assign({}, getPosition(e, dom)), { sigmaDefaultPrevented: false, preventSigmaDefault: function () {\n            res.sigmaDefaultPrevented = true;\n        }, original: e });\n    return res;\n}\nexports.getMouseCoords = getMouseCoords;\n/**\n * Convert mouse wheel event coords to sigma coords.\n *\n * @param  {event}       e   - A wheel mouse event.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getWheelCoords(e, dom) {\n    return __assign(__assign({}, getMouseCoords(e, dom)), { delta: getWheelDelta(e) });\n}\nexports.getWheelCoords = getWheelCoords;\nvar MAX_TOUCHES = 2;\nfunction getTouchesArray(touches) {\n    var arr = [];\n    for (var i = 0, l = Math.min(touches.length, MAX_TOUCHES); i < l; i++)\n        arr.push(touches[i]);\n    return arr;\n}\nexports.getTouchesArray = getTouchesArray;\n/**\n * Convert touch coords to sigma coords.\n *\n * @param  {event}       e   - A touch event.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getTouchCoords(e, dom) {\n    return {\n        touches: getTouchesArray(e.touches).map(function (touch) { return getPosition(touch, dom); }),\n        original: e,\n    };\n}\nexports.getTouchCoords = getTouchCoords;\n/**\n * Extract the wheel delta from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The wheel delta of the mouse.\n */\nfunction getWheelDelta(e) {\n    // TODO: check those ratios again to ensure a clean Chrome/Firefox compat\n    if (typeof e.deltaY !== \"undefined\")\n        return (e.deltaY * -3) / 360;\n    if (typeof e.detail !== \"undefined\")\n        return e.detail / -9;\n    throw new Error(\"Captor: could not extract delta from event.\");\n}\nexports.getWheelDelta = getWheelDelta;\n/**\n * Abstract class representing a captor like the user's mouse or touch controls.\n */\nvar Captor = /** @class */ (function (_super) {\n    __extends(Captor, _super);\n    function Captor(container, renderer) {\n        var _this = _super.call(this) || this;\n        // Properties\n        _this.container = container;\n        _this.renderer = renderer;\n        return _this;\n    }\n    return Captor;\n}(types_1.TypedEventEmitter));\nexports.default = Captor;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rectangleCollidesWithQuad = exports.squareCollidesWithQuad = exports.getCircumscribedAlignedRectangle = exports.isRectangleAligned = void 0;\n/**\n * Sigma.js Quad Tree Class\n * =========================\n *\n * Class implementing the quad tree data structure used to solve hovers and\n * determine which elements are currently in the scope of the camera so that\n * we don't waste time rendering things the user cannot see anyway.\n * @module\n */\n/* eslint no-nested-ternary: 0 */\n/* eslint no-constant-condition: 0 */\nvar extend_1 = __importDefault(require(\"@yomguithereal/helpers/extend\"));\n// TODO: should not ask the quadtree when the camera has the whole graph in\n// sight.\n// TODO: a square can be represented as topleft + width, saying for the quad blocks (reduce mem)\n// TODO: jsdoc\n// TODO: be sure we can handle cases overcoming boundaries (because of size) or use a maxed size\n// TODO: filtering unwanted labels beforehand through the filter function\n// NOTE: this is basically a MX-CIF Quadtree at this point\n// NOTE: need to explore R-Trees for edges\n// NOTE: need to explore 2d segment tree for edges\n// NOTE: probably can do faster using spatial hashing\n/**\n * Constants.\n *\n * Note that since we are representing a static 4-ary tree, the indices of the\n * quadrants are the following:\n *   - TOP_LEFT:     4i + b\n *   - TOP_RIGHT:    4i + 2b\n *   - BOTTOM_LEFT:  4i + 3b\n *   - BOTTOM_RIGHT: 4i + 4b\n */\nvar BLOCKS = 4, MAX_LEVEL = 5;\nvar OUTSIDE_BLOCK = \"outside\";\nvar X_OFFSET = 0, Y_OFFSET = 1, WIDTH_OFFSET = 2, HEIGHT_OFFSET = 3;\nvar TOP_LEFT = 1, TOP_RIGHT = 2, BOTTOM_LEFT = 3, BOTTOM_RIGHT = 4;\nvar hasWarnedTooMuchOutside = false;\n/**\n * Geometry helpers.\n */\n/**\n * Function returning whether the given rectangle is axis-aligned.\n *\n * @param  {Rectangle} rect\n * @return {boolean}\n */\nfunction isRectangleAligned(rect) {\n    return rect.x1 === rect.x2 || rect.y1 === rect.y2;\n}\nexports.isRectangleAligned = isRectangleAligned;\n/**\n * Function returning the smallest rectangle that contains the given rectangle, and that is aligned with the axis.\n *\n * @param {Rectangle} rect\n * @return {Rectangle}\n */\nfunction getCircumscribedAlignedRectangle(rect) {\n    var width = Math.sqrt(Math.pow(rect.x2 - rect.x1, 2) + Math.pow(rect.y2 - rect.y1, 2));\n    var heightVector = {\n        x: ((rect.y1 - rect.y2) * rect.height) / width,\n        y: ((rect.x2 - rect.x1) * rect.height) / width,\n    };\n    // Compute all corners:\n    var tl = { x: rect.x1, y: rect.y1 };\n    var tr = { x: rect.x2, y: rect.y2 };\n    var bl = {\n        x: rect.x1 + heightVector.x,\n        y: rect.y1 + heightVector.y,\n    };\n    var br = {\n        x: rect.x2 + heightVector.x,\n        y: rect.y2 + heightVector.y,\n    };\n    var xL = Math.min(tl.x, tr.x, bl.x, br.x);\n    var xR = Math.max(tl.x, tr.x, bl.x, br.x);\n    var yT = Math.min(tl.y, tr.y, bl.y, br.y);\n    var yB = Math.max(tl.y, tr.y, bl.y, br.y);\n    return {\n        x1: xL,\n        y1: yT,\n        x2: xR,\n        y2: yT,\n        height: yB - yT,\n    };\n}\nexports.getCircumscribedAlignedRectangle = getCircumscribedAlignedRectangle;\n/**\n *\n * @param x1\n * @param y1\n * @param w\n * @param qx\n * @param qy\n * @param qw\n * @param qh\n */\nfunction squareCollidesWithQuad(x1, y1, w, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + w > qy;\n}\nexports.squareCollidesWithQuad = squareCollidesWithQuad;\nfunction rectangleCollidesWithQuad(x1, y1, w, h, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + h > qy;\n}\nexports.rectangleCollidesWithQuad = rectangleCollidesWithQuad;\nfunction pointIsInQuad(x, y, qx, qy, qw, qh) {\n    var xmp = qx + qw / 2, ymp = qy + qh / 2, top = y < ymp, left = x < xmp;\n    return top ? (left ? TOP_LEFT : TOP_RIGHT) : left ? BOTTOM_LEFT : BOTTOM_RIGHT;\n}\n/**\n * Helper functions that are not bound to the class so an external user\n * cannot mess with them.\n */\nfunction buildQuadrants(maxLevel, data) {\n    // [block, level]\n    var stack = [0, 0];\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var x = data[block + X_OFFSET], y = data[block + Y_OFFSET], width = data[block + WIDTH_OFFSET], height = data[block + HEIGHT_OFFSET], hw = width / 2, hh = height / 2;\n        data[topLeftBlock + X_OFFSET] = x;\n        data[topLeftBlock + Y_OFFSET] = y;\n        data[topLeftBlock + WIDTH_OFFSET] = hw;\n        data[topLeftBlock + HEIGHT_OFFSET] = hh;\n        data[topRightBlock + X_OFFSET] = x + hw;\n        data[topRightBlock + Y_OFFSET] = y;\n        data[topRightBlock + WIDTH_OFFSET] = hw;\n        data[topRightBlock + HEIGHT_OFFSET] = hh;\n        data[bottomLeftBlock + X_OFFSET] = x;\n        data[bottomLeftBlock + Y_OFFSET] = y + hh;\n        data[bottomLeftBlock + WIDTH_OFFSET] = hw;\n        data[bottomLeftBlock + HEIGHT_OFFSET] = hh;\n        data[bottomRightBlock + X_OFFSET] = x + hw;\n        data[bottomRightBlock + Y_OFFSET] = y + hh;\n        data[bottomRightBlock + WIDTH_OFFSET] = hw;\n        data[bottomRightBlock + HEIGHT_OFFSET] = hh;\n        if (level < maxLevel - 1) {\n            stack.push(bottomRightBlock, level + 1);\n            stack.push(bottomLeftBlock, level + 1);\n            stack.push(topRightBlock, level + 1);\n            stack.push(topLeftBlock, level + 1);\n        }\n    }\n}\nfunction insertNode(maxLevel, data, containers, key, x, y, size) {\n    var x1 = x - size, y1 = y - size, w = size * 2;\n    var level = 0, block = 0;\n    while (true) {\n        // If we reached max level\n        if (level >= maxLevel) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = squareCollidesWithQuad(x1, y1, w, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = squareCollidesWithQuad(x1, y1, w, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = squareCollidesWithQuad(x1, y1, w, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = squareCollidesWithQuad(x1, y1, w, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        var collisions = [\n            collidingWithTopLeft,\n            collidingWithTopRight,\n            collidingWithBottomLeft,\n            collidingWithBottomRight,\n        ].reduce(function (acc, current) {\n            if (current)\n                return acc + 1;\n            else\n                return acc;\n        }, 0);\n        // If we have no collision at root level, inject node in the outside block\n        if (collisions === 0 && level === 0) {\n            containers[OUTSIDE_BLOCK].push(key);\n            if (!hasWarnedTooMuchOutside && containers[OUTSIDE_BLOCK].length >= 5) {\n                hasWarnedTooMuchOutside = true;\n                console.warn(\"sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. \" +\n                    \"You might have a problem with the normalization function or the custom bounding box.\");\n            }\n            return;\n        }\n        // If we don't have at least a collision but deeper, there is an issue\n        if (collisions === 0)\n            throw new Error(\"sigma/quadtree.insertNode: no collision (level: \".concat(level, \", key: \").concat(key, \", x: \").concat(x, \", y: \").concat(y, \", size: \").concat(size, \").\"));\n        // If we have 3 collisions, we have a geometry problem obviously\n        if (collisions === 3)\n            throw new Error(\"sigma/quadtree.insertNode: 3 impossible collisions (level: \".concat(level, \", key: \").concat(key, \", x: \").concat(x, \", y: \").concat(y, \", size: \").concat(size, \").\"));\n        // If we have more that one collision, we stop here and store the node\n        // in the relevant containers\n        if (collisions > 1) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        else {\n            level++;\n        }\n        // Else we recurse into the correct quads\n        if (collidingWithTopLeft)\n            block = topLeftBlock;\n        if (collidingWithTopRight)\n            block = topRightBlock;\n        if (collidingWithBottomLeft)\n            block = bottomLeftBlock;\n        if (collidingWithBottomRight)\n            block = bottomRightBlock;\n    }\n}\nfunction getNodesInAxisAlignedRectangleArea(maxLevel, data, containers, x1, y1, w, h) {\n    // [block, level]\n    var stack = [0, 0];\n    var collectedNodes = [];\n    var container;\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        // Collecting nodes\n        container = containers[block];\n        if (container)\n            (0, extend_1.default)(collectedNodes, container);\n        // If we reached max level\n        if (level >= maxLevel)\n            continue;\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = rectangleCollidesWithQuad(x1, y1, w, h, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        if (collidingWithTopLeft)\n            stack.push(topLeftBlock, level + 1);\n        if (collidingWithTopRight)\n            stack.push(topRightBlock, level + 1);\n        if (collidingWithBottomLeft)\n            stack.push(bottomLeftBlock, level + 1);\n        if (collidingWithBottomRight)\n            stack.push(bottomRightBlock, level + 1);\n    }\n    return collectedNodes;\n}\n/**\n * QuadTree class.\n *\n * @constructor\n * @param {object} boundaries - The graph boundaries.\n */\nvar QuadTree = /** @class */ (function () {\n    function QuadTree(params) {\n        var _a;\n        if (params === void 0) { params = {}; }\n        this.containers = (_a = {}, _a[OUTSIDE_BLOCK] = [], _a);\n        this.cache = null;\n        this.lastRectangle = null;\n        // Allocating the underlying byte array\n        var L = Math.pow(4, MAX_LEVEL);\n        this.data = new Float32Array(BLOCKS * ((4 * L - 1) / 3));\n        if (params.boundaries)\n            this.resize(params.boundaries);\n        else\n            this.resize({\n                x: 0,\n                y: 0,\n                width: 1,\n                height: 1,\n            });\n    }\n    QuadTree.prototype.add = function (key, x, y, size) {\n        insertNode(MAX_LEVEL, this.data, this.containers, key, x, y, size);\n        return this;\n    };\n    QuadTree.prototype.resize = function (boundaries) {\n        this.clear();\n        // Building the quadrants\n        this.data[X_OFFSET] = boundaries.x;\n        this.data[Y_OFFSET] = boundaries.y;\n        this.data[WIDTH_OFFSET] = boundaries.width;\n        this.data[HEIGHT_OFFSET] = boundaries.height;\n        buildQuadrants(MAX_LEVEL, this.data);\n    };\n    QuadTree.prototype.clear = function () {\n        var _a;\n        this.containers = (_a = {}, _a[OUTSIDE_BLOCK] = [], _a);\n        return this;\n    };\n    QuadTree.prototype.point = function (x, y) {\n        var nodes = this.containers[OUTSIDE_BLOCK];\n        var block = 0, level = 0;\n        do {\n            if (this.containers[block])\n                nodes.push.apply(nodes, __spreadArray([], __read(this.containers[block]), false));\n            var quad = pointIsInQuad(x, y, this.data[block + X_OFFSET], this.data[block + Y_OFFSET], this.data[block + WIDTH_OFFSET], this.data[block + HEIGHT_OFFSET]);\n            block = 4 * block + quad * BLOCKS;\n            level++;\n        } while (level <= MAX_LEVEL);\n        return nodes;\n    };\n    QuadTree.prototype.rectangle = function (x1, y1, x2, y2, height) {\n        var _a;\n        var lr = this.lastRectangle;\n        if (lr && x1 === lr.x1 && x2 === lr.x2 && y1 === lr.y1 && y2 === lr.y2 && height === lr.height) {\n            return this.cache;\n        }\n        this.lastRectangle = {\n            x1: x1,\n            y1: y1,\n            x2: x2,\n            y2: y2,\n            height: height,\n        };\n        // If the rectangle is shifted, we use the smallest aligned rectangle that contains the shifted one:\n        if (!isRectangleAligned(this.lastRectangle))\n            this.lastRectangle = getCircumscribedAlignedRectangle(this.lastRectangle);\n        this.cache = getNodesInAxisAlignedRectangleArea(MAX_LEVEL, this.data, this.containers, x1, y1, Math.abs(x1 - x2) || Math.abs(y1 - y2), height);\n        // Add all the nodes in the outside block, since they might be relevant, and since they should be very few:\n        (_a = this.cache).push.apply(_a, __spreadArray([], __read(this.containers[OUTSIDE_BLOCK]), false));\n        return this.cache;\n    };\n    return QuadTree;\n}());\nexports.default = QuadTree;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawLabel(context, data, settings) {\n    if (!data.label)\n        return;\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight, color = settings.labelColor.attribute\n        ? data[settings.labelColor.attribute] || settings.labelColor.color || \"#000\"\n        : settings.labelColor.color;\n    context.fillStyle = color;\n    context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n    context.fillText(data.label, data.x + data.size + 3, data.y + size / 3);\n}\nexports.default = drawLabel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractProgram = void 0;\n/**\n * Sigma.js WebGL Renderer Program\n * ================================\n *\n * Class representing a single WebGL program used by sigma's WebGL renderer.\n * @module\n */\nvar utils_1 = require(\"../../shaders/utils\");\n/**\n * Abstract Program class.\n *\n * @constructor\n */\nvar AbstractProgram = /** @class */ (function () {\n    function AbstractProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        this.array = new Float32Array();\n        this.points = points;\n        this.attributes = attributes;\n        this.gl = gl;\n        this.vertexShaderSource = vertexShaderSource;\n        this.fragmentShaderSource = fragmentShaderSource;\n        var buffer = gl.createBuffer();\n        if (buffer === null)\n            throw new Error(\"AbstractProgram: error while creating the buffer\");\n        this.buffer = buffer;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        this.vertexShader = (0, utils_1.loadVertexShader)(gl, this.vertexShaderSource);\n        this.fragmentShader = (0, utils_1.loadFragmentShader)(gl, this.fragmentShaderSource);\n        this.program = (0, utils_1.loadProgram)(gl, [this.vertexShader, this.fragmentShader]);\n    }\n    AbstractProgram.prototype.bufferData = function () {\n        var gl = this.gl;\n        gl.bufferData(gl.ARRAY_BUFFER, this.array, gl.DYNAMIC_DRAW);\n    };\n    AbstractProgram.prototype.allocate = function (capacity) {\n        this.array = new Float32Array(this.points * this.attributes * capacity);\n    };\n    AbstractProgram.prototype.hasNothingToRender = function () {\n        return this.array.length === 0;\n    };\n    return AbstractProgram;\n}());\nexports.AbstractProgram = AbstractProgram;\n","(()=>{\"use strict\";var e={d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>t});const t=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float feather = 0.001;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  float dist = length(v_normal) * v_thickness;\\n\\n  float t = smoothstep(\\n    v_thickness - feather,\\n    v_thickness,\\n    dist\\n  );\\n\\n  gl_FragColor = mix(v_color, transparent, t);\\n}\\n\";module.exports=n})();","/**\n * Graphology Common GEXF Helpers\n * ===============================\n *\n * Miscellaneous helpers used by both instance of the code.\n */\n\n/**\n * Function used to cast a string value to the desired type.\n *\n * @param  {string} type - Value type.\n * @param  {string} type - String value.\n * @return {any}         - Parsed type.\n */\nexports.cast = function (type, value) {\n  switch (type) {\n    case 'boolean':\n      value = value === 'true';\n      break;\n\n    case 'integer':\n    case 'long':\n    case 'float':\n    case 'double':\n      value = +value;\n      break;\n\n    case 'liststring':\n      value = value ? value.split('|') : [];\n      break;\n\n    default:\n  }\n\n  return value;\n};\n\n/**\n * Function deleting illegal characters from a potential tag name to avoid\n * generating invalid XML.\n *\n * @param  {string} type - Tag name.\n * @return {string}\n */\nvar SANITIZE_PATTERN = /[\"'<>&\\s]/g;\n\nexports.sanitizeTagName = function sanitizeTagName(tagName) {\n  return tagName.replace(SANITIZE_PATTERN, '').trim();\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sigma = exports.MouseCaptor = exports.QuadTree = exports.Camera = void 0;\n/**\n * Sigma.js Library Endpoint\n * =========================\n *\n * The library endpoint.\n * @module\n */\nvar sigma_1 = __importDefault(require(\"./sigma\"));\nexports.Sigma = sigma_1.default;\nvar camera_1 = __importDefault(require(\"./core/camera\"));\nexports.Camera = camera_1.default;\nvar quadtree_1 = __importDefault(require(\"./core/quadtree\"));\nexports.QuadTree = quadtree_1.default;\nvar mouse_1 = __importDefault(require(\"./core/captors/mouse\"));\nexports.MouseCaptor = mouse_1.default;\nexports.default = sigma_1.default;\n","/**\n * Graphology Utilities\n * =====================\n *\n * Collection of helpful functions used by the implementation.\n */\n\n/**\n * Object.assign-like polyfill.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignPolyfill() {\n  const target = arguments[0];\n\n  for (let i = 1, l = arguments.length; i < l; i++) {\n    if (!arguments[i]) continue;\n\n    for (const k in arguments[i]) target[k] = arguments[i][k];\n  }\n\n  return target;\n}\n\nlet assign = assignPolyfill;\n\nif (typeof Object.assign === 'function') assign = Object.assign;\n\nexport {assign};\n\n/**\n * Function returning the first matching edge for given path.\n * Note: this function does not check the existence of source & target. This\n * must be performed by the caller.\n *\n * @param  {Graph}  graph  - Target graph.\n * @param  {any}    source - Source node.\n * @param  {any}    target - Target node.\n * @param  {string} type   - Type of the edge (mixed, directed or undirected).\n * @return {string|null}\n */\nexport function getMatchingEdge(graph, source, target, type) {\n  const sourceData = graph._nodes.get(source);\n\n  let edge = null;\n\n  if (!sourceData) return edge;\n\n  if (type === 'mixed') {\n    edge =\n      (sourceData.out && sourceData.out[target]) ||\n      (sourceData.undirected && sourceData.undirected[target]);\n  } else if (type === 'directed') {\n    edge = sourceData.out && sourceData.out[target];\n  } else {\n    edge = sourceData.undirected && sourceData.undirected[target];\n  }\n\n  return edge;\n}\n\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\nexport function isPlainObject(value) {\n  return (\n    typeof value === 'object' && value !== null && value.constructor === Object\n  );\n}\n\n/**\n * Checks whether the given object is empty.\n *\n * @param  {object}  o - Target Object.\n * @return {boolean}\n */\nexport function isEmpty(o) {\n  let k;\n\n  for (k in o) return false;\n\n  return true;\n}\n\n/**\n * Creates a \"private\" property for the given member name by concealing it\n * using the `enumerable` option.\n *\n * @param {object} target - Target object.\n * @param {string} name   - Member name.\n */\nexport function privateProperty(target, name, value) {\n  Object.defineProperty(target, name, {\n    enumerable: false,\n    configurable: false,\n    writable: true,\n    value\n  });\n}\n\n/**\n * Creates a read-only property for the given member name & the given getter.\n *\n * @param {object}   target - Target object.\n * @param {string}   name   - Member name.\n * @param {mixed}    value  - The attached getter or fixed value.\n */\nexport function readOnlyProperty(target, name, value) {\n  const descriptor = {\n    enumerable: true,\n    configurable: true\n  };\n\n  if (typeof value === 'function') {\n    descriptor.get = value;\n  } else {\n    descriptor.value = value;\n    descriptor.writable = false;\n  }\n\n  Object.defineProperty(target, name, descriptor);\n}\n\n/**\n * Returns whether the given object constitute valid hints.\n *\n * @param {object} hints - Target object.\n */\nexport function validateHints(hints) {\n  if (!isPlainObject(hints)) return false;\n\n  if (hints.attributes && !Array.isArray(hints.attributes)) return false;\n\n  return true;\n}\n\n/**\n * Creates a function generating incremental ids for edges.\n *\n * @return {function}\n */\nexport function incrementalIdStartingFromRandomByte() {\n  let i = Math.floor(Math.random() * 256) & 0xff;\n\n  return () => {\n    return i++;\n  };\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Obliterator Iterator Class\n * ===========================\n *\n * Simple class representing the library's iterators.\n */\n\n/**\n * Iterator class.\n *\n * @constructor\n * @param {function} next - Next function.\n */\nfunction Iterator(next) {\n  if (typeof next !== 'function')\n    throw new Error('obliterator/iterator: expecting a function!');\n\n  this.next = next;\n}\n\n/**\n * If symbols are supported, we add `next` to `Symbol.iterator`.\n */\nif (typeof Symbol !== 'undefined')\n  Iterator.prototype[Symbol.iterator] = function () {\n    return this;\n  };\n\n/**\n * Returning an iterator of the given values.\n *\n * @param  {any...} values - Values.\n * @return {Iterator}\n */\nIterator.of = function () {\n  var args = arguments,\n    l = args.length,\n    i = 0;\n\n  return new Iterator(function () {\n    if (i >= l) return {done: true};\n\n    return {done: false, value: args[i++]};\n  });\n};\n\n/**\n * Returning an empty iterator.\n *\n * @return {Iterator}\n */\nIterator.empty = function () {\n  var iterator = new Iterator(function () {\n    return {done: true};\n  });\n\n  return iterator;\n};\n\n/**\n * Returning an iterator over the given indexed sequence.\n *\n * @param  {string|Array} sequence - Target sequence.\n * @return {Iterator}\n */\nIterator.fromSequence = function (sequence) {\n  var i = 0,\n    l = sequence.length;\n\n  return new Iterator(function () {\n    if (i >= l) return {done: true};\n\n    return {done: false, value: sequence[i++]};\n  });\n};\n\n/**\n * Returning whether the given value is an iterator.\n *\n * @param  {any} value - Value.\n * @return {boolean}\n */\nIterator.is = function (value) {\n  if (value instanceof Iterator) return true;\n\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    typeof value.next === 'function'\n  );\n};\n\n/**\n * Exporting.\n */\nmodule.exports = Iterator;\n","exports.ARRAY_BUFFER_SUPPORT = typeof ArrayBuffer !== 'undefined';\nexports.SYMBOL_SUPPORT = typeof Symbol !== 'undefined';\n","/**\n * Obliterator Iter Function\n * ==========================\n *\n * Function coercing values to an iterator. It can be quite useful when needing\n * to handle iterables and iterators the same way.\n */\nvar Iterator = require('./iterator.js');\nvar support = require('./support.js');\n\nvar ARRAY_BUFFER_SUPPORT = support.ARRAY_BUFFER_SUPPORT;\nvar SYMBOL_SUPPORT = support.SYMBOL_SUPPORT;\n\nfunction iterOrNull(target) {\n  // Indexed sequence\n  if (\n    typeof target === 'string' ||\n    Array.isArray(target) ||\n    (ARRAY_BUFFER_SUPPORT && ArrayBuffer.isView(target))\n  )\n    return Iterator.fromSequence(target);\n\n  // Invalid value\n  if (typeof target !== 'object' || target === null) return null;\n\n  // Iterable\n  if (SYMBOL_SUPPORT && typeof target[Symbol.iterator] === 'function')\n    return target[Symbol.iterator]();\n\n  // Iterator duck-typing\n  if (typeof target.next === 'function') return target;\n\n  // Invalid object\n  return null;\n}\n\nmodule.exports = function iter(target) {\n  var iterator = iterOrNull(target);\n\n  if (!iterator)\n    throw new Error(\n      'obliterator: target is not iterable nor a valid iterator.'\n    );\n\n  return iterator;\n};\n","/* eslint no-constant-condition: 0 */\n/**\n * Obliterator Take Function\n * ==========================\n *\n * Function taking n or every value of the given iterator and returns them\n * into an array.\n */\nvar iter = require('./iter.js');\n\n/**\n * Take.\n *\n * @param  {Iterable} iterable - Target iterable.\n * @param  {number}   [n]      - Optional number of items to take.\n * @return {array}\n */\nmodule.exports = function take(iterable, n) {\n  var l = arguments.length > 1 ? n : Infinity,\n    array = l !== Infinity ? new Array(l) : [],\n    step,\n    i = 0;\n\n  var iterator = iter(iterable);\n\n  while (true) {\n    if (i === l) return array;\n\n    step = iterator.next();\n\n    if (step.done) {\n      if (i !== n) array.length = i;\n\n      return array;\n    }\n\n    array[i++] = step.value;\n  }\n};\n","/**\n * Graphology Custom Errors\n * =========================\n *\n * Defining custom errors for ease of use & easy unit tests across\n * implementations (normalized typology rather than relying on error\n * messages to check whether the correct error was found).\n */\nexport class GraphError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'GraphError';\n    this.message = message;\n  }\n}\n\nexport class InvalidArgumentsGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'InvalidArgumentsGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(\n        this,\n        InvalidArgumentsGraphError.prototype.constructor\n      );\n  }\n}\n\nexport class NotFoundGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'NotFoundGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(this, NotFoundGraphError.prototype.constructor);\n  }\n}\n\nexport class UsageGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'UsageGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(this, UsageGraphError.prototype.constructor);\n  }\n}\n","/**\n * Graphology Internal Data Classes\n * =================================\n *\n * Internal classes hopefully reduced to structs by engines & storing\n * necessary information for nodes & edges.\n *\n * Note that those classes don't rely on the `class` keyword to avoid some\n * cruft introduced by most of ES2015 transpilers.\n */\n\n/**\n * MixedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nexport function MixedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nMixedNodeData.prototype.clear = function () {\n  // Degrees\n  this.inDegree = 0;\n  this.outDegree = 0;\n  this.undirectedDegree = 0;\n  this.undirectedLoops = 0;\n  this.directedLoops = 0;\n\n  // Indices\n  this.in = {};\n  this.out = {};\n  this.undirected = {};\n};\n\n/**\n * DirectedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nexport function DirectedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nDirectedNodeData.prototype.clear = function () {\n  // Degrees\n  this.inDegree = 0;\n  this.outDegree = 0;\n  this.directedLoops = 0;\n\n  // Indices\n  this.in = {};\n  this.out = {};\n};\n\n/**\n * UndirectedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nexport function UndirectedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nUndirectedNodeData.prototype.clear = function () {\n  // Degrees\n  this.undirectedDegree = 0;\n  this.undirectedLoops = 0;\n\n  // Indices\n  this.undirected = {};\n};\n\n/**\n * EdgeData class.\n *\n * @constructor\n * @param {boolean} undirected   - Whether the edge is undirected.\n * @param {string}  string       - The edge's key.\n * @param {string}  source       - Source of the edge.\n * @param {string}  target       - Target of the edge.\n * @param {object}  attributes   - Edge's attributes.\n */\nexport function EdgeData(undirected, key, source, target, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n  this.undirected = undirected;\n\n  // Extremities\n  this.source = source;\n  this.target = target;\n}\n\nEdgeData.prototype.attach = function () {\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  const source = this.source.key;\n  const target = this.target.key;\n\n  // Handling source\n  this.source[outKey][target] = this;\n\n  if (this.undirected && source === target) return;\n\n  // Handling target\n  this.target[inKey][source] = this;\n};\n\nEdgeData.prototype.attachMulti = function () {\n  let outKey = 'out';\n  let inKey = 'in';\n\n  const source = this.source.key;\n  const target = this.target.key;\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  // Handling source\n  const adj = this.source[outKey];\n  const head = adj[target];\n\n  if (typeof head === 'undefined') {\n    adj[target] = this;\n\n    // Self-loop optimization\n    if (!(this.undirected && source === target)) {\n      // Handling target\n      this.target[inKey][source] = this;\n    }\n\n    return;\n  }\n\n  // Prepending to doubly-linked list\n  head.previous = this;\n  this.next = head;\n\n  // Pointing to new head\n  // NOTE: use mutating swap later to avoid lookup?\n  adj[target] = this;\n  this.target[inKey][source] = this;\n};\n\nEdgeData.prototype.detach = function () {\n  const source = this.source.key;\n  const target = this.target.key;\n\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  delete this.source[outKey][target];\n\n  // No-op delete in case of undirected self-loop\n  delete this.target[inKey][source];\n};\n\nEdgeData.prototype.detachMulti = function () {\n  const source = this.source.key;\n  const target = this.target.key;\n\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  // Deleting from doubly-linked list\n  if (this.previous === undefined) {\n    // We are dealing with the head\n\n    // Should we delete the adjacency entry because it is now empty?\n    if (this.next === undefined) {\n      delete this.source[outKey][target];\n\n      // No-op delete in case of undirected self-loop\n      delete this.target[inKey][source];\n    } else {\n      // Detaching\n      this.next.previous = undefined;\n\n      // NOTE: could avoid the lookups by creating a #.become mutating method\n      this.source[outKey][target] = this.next;\n\n      // No-op delete in case of undirected self-loop\n      this.target[inKey][source] = this.next;\n    }\n  } else {\n    // We are dealing with another list node\n    this.previous.next = this.next;\n\n    // If not last\n    if (this.next !== undefined) {\n      this.next.previous = this.previous;\n    }\n  }\n};\n","/**\n * Graphology Node Attributes methods\n * ===================================\n */\nimport {assign, isPlainObject} from '../utils';\n\nimport {InvalidArgumentsGraphError, NotFoundGraphError} from '../errors';\n\nconst NODE = 0;\nconst SOURCE = 1;\nconst TARGET = 2;\nconst OPPOSITE = 3;\n\nfunction findRelevantNodeData(\n  graph,\n  method,\n  mode,\n  nodeOrEdge,\n  nameOrEdge,\n  add1,\n  add2\n) {\n  let nodeData, edgeData, arg1, arg2;\n\n  nodeOrEdge = '' + nodeOrEdge;\n\n  if (mode === NODE) {\n    nodeData = graph._nodes.get(nodeOrEdge);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nodeOrEdge}\" node in the graph.`\n      );\n\n    arg1 = nameOrEdge;\n    arg2 = add1;\n  } else if (mode === OPPOSITE) {\n    nameOrEdge = '' + nameOrEdge;\n\n    edgeData = graph._edges.get(nameOrEdge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nameOrEdge}\" edge in the graph.`\n      );\n\n    const source = edgeData.source.key;\n    const target = edgeData.target.key;\n\n    if (nodeOrEdge === source) {\n      nodeData = edgeData.target;\n    } else if (nodeOrEdge === target) {\n      nodeData = edgeData.source;\n    } else {\n      throw new NotFoundGraphError(\n        `Graph.${method}: the \"${nodeOrEdge}\" node is not attached to the \"${nameOrEdge}\" edge (${source}, ${target}).`\n      );\n    }\n\n    arg1 = add1;\n    arg2 = add2;\n  } else {\n    edgeData = graph._edges.get(nodeOrEdge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nodeOrEdge}\" edge in the graph.`\n      );\n\n    if (mode === SOURCE) {\n      nodeData = edgeData.source;\n    } else {\n      nodeData = edgeData.target;\n    }\n\n    arg1 = nameOrEdge;\n    arg2 = add1;\n  }\n\n  return [nodeData, arg1, arg2];\n}\n\nfunction attachNodeAttributeGetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    return data.attributes[name];\n  };\n}\n\nfunction attachNodeAttributesGetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge) {\n    const [data] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge\n    );\n\n    return data.attributes;\n  };\n}\n\nfunction attachNodeAttributeChecker(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    return data.attributes.hasOwnProperty(name);\n  };\n}\n\nfunction attachNodeAttributeSetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1, add2) {\n    const [data, name, value] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1,\n      add2\n    );\n\n    data.attributes[name] = value;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributeUpdater(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1, add2) {\n    const [data, name, updater] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1,\n      add2\n    );\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: updater should be a function.`\n      );\n\n    const attributes = data.attributes;\n    const value = updater(attributes[name]);\n\n    attributes[name] = value;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributeRemover(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    delete data.attributes[name];\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'remove',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesReplacer(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, attributes] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    data.attributes = attributes;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'replace',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesMerger(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, attributes] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    assign(data.attributes, attributes);\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'merge',\n      attributes: data.attributes,\n      data: attributes\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesUpdater(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, updater] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided updater is not a function.`\n      );\n\n    data.attributes = updater(data.attributes);\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'update',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * List of methods to attach.\n */\nconst NODE_ATTRIBUTES_METHODS = [\n  {\n    name: element => `get${element}Attribute`,\n    attacher: attachNodeAttributeGetter\n  },\n  {\n    name: element => `get${element}Attributes`,\n    attacher: attachNodeAttributesGetter\n  },\n  {\n    name: element => `has${element}Attribute`,\n    attacher: attachNodeAttributeChecker\n  },\n  {\n    name: element => `set${element}Attribute`,\n    attacher: attachNodeAttributeSetter\n  },\n  {\n    name: element => `update${element}Attribute`,\n    attacher: attachNodeAttributeUpdater\n  },\n  {\n    name: element => `remove${element}Attribute`,\n    attacher: attachNodeAttributeRemover\n  },\n  {\n    name: element => `replace${element}Attributes`,\n    attacher: attachNodeAttributesReplacer\n  },\n  {\n    name: element => `merge${element}Attributes`,\n    attacher: attachNodeAttributesMerger\n  },\n  {\n    name: element => `update${element}Attributes`,\n    attacher: attachNodeAttributesUpdater\n  }\n];\n\n/**\n * Attach every attributes-related methods to a Graph class.\n *\n * @param {function} Graph - Target class.\n */\nexport default function attachNodeAttributesMethods(Graph) {\n  NODE_ATTRIBUTES_METHODS.forEach(function ({name, attacher}) {\n    // For nodes\n    attacher(Graph, name('Node'), NODE);\n\n    // For sources\n    attacher(Graph, name('Source'), SOURCE);\n\n    // For targets\n    attacher(Graph, name('Target'), TARGET);\n\n    // For opposites\n    attacher(Graph, name('Opposite'), OPPOSITE);\n  });\n}\n","/**\n * Graphology Edge Attributes methods\n * ===================================\n */\nimport {assign, isPlainObject, getMatchingEdge} from '../utils';\n\nimport {\n  InvalidArgumentsGraphError,\n  NotFoundGraphError,\n  UsageGraphError\n} from '../errors';\n\n/**\n * Attach an attribute getter method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeGetter(Class, method, type) {\n  /**\n   * Get the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {mixed}          - The attribute's value.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes[name];\n  };\n}\n\n/**\n * Attach an attributes getter method onto the provided class.\n *\n * @param {function} Class       - Target class.\n * @param {string}   method      - Method name.\n * @param {string}   type        - Type of the edge to find.\n */\nfunction attachEdgeAttributesGetter(Class, method, type) {\n  /**\n   * Retrieves all the target element's attributes.\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   *\n   * @return {object}          - The element's attributes.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 1) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + arguments[1];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes;\n  };\n}\n\n/**\n * Attach an attribute checker method onto the provided class.\n *\n * @param {function} Class       - Target class.\n * @param {string}   method      - Method name.\n * @param {string}   type        - Type of the edge to find.\n */\nfunction attachEdgeAttributeChecker(Class, method, type) {\n  /**\n   * Checks whether the desired attribute is set for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes.hasOwnProperty(name);\n  };\n}\n\n/**\n * Attach an attribute setter method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeSetter(Class, method, type) {\n  /**\n   * Set the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   * @param  {mixed}  value   - New attribute value.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   * @param  {mixed}  value   - New attribute value.\n   *\n   * @return {Graph}          - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name, value) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 3) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n      value = arguments[3];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    data.attributes[name] = value;\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute updater method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeUpdater(Class, method, type) {\n  /**\n   * Update the desired attribute for the given element (node or edge) using\n   * the provided function.\n   *\n   * Arity 2:\n   * @param  {any}      element - Target element.\n   * @param  {string}   name    - Attribute's name.\n   * @param  {function} updater - Updater function.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}      source  - Source element.\n   * @param  {any}      target  - Target element.\n   * @param  {string}   name    - Attribute's name.\n   * @param  {function} updater - Updater function.\n   *\n   * @return {Graph}            - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name, updater) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 3) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n      updater = arguments[3];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: updater should be a function.`\n      );\n\n    data.attributes[name] = updater(data.attributes[name]);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute remover method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeRemover(Class, method, type) {\n  /**\n   * Remove the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {Graph}          - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    delete data.attributes[name];\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'remove',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute replacer method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesReplacer(Class, method, type) {\n  /**\n   * Replace the attributes for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element    - Target element.\n   * @param  {object} attributes - New attributes.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source     - Source element.\n   * @param  {any}     target     - Target element.\n   * @param  {object}  attributes - New attributes.\n   *\n   * @return {Graph}              - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, attributes) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + attributes;\n\n      attributes = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    data.attributes = attributes;\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'replace',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute merger method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesMerger(Class, method, type) {\n  /**\n   * Merge the attributes for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element    - Target element.\n   * @param  {object} attributes - Attributes to merge.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source     - Source element.\n   * @param  {any}     target     - Target element.\n   * @param  {object}  attributes - Attributes to merge.\n   *\n   * @return {Graph}              - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, attributes) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + attributes;\n\n      attributes = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    assign(data.attributes, attributes);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'merge',\n      attributes: data.attributes,\n      data: attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute updater method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesUpdater(Class, method, type) {\n  /**\n   * Update the attributes of the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}      element - Target element.\n   * @param  {function} updater - Updater function.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}      source  - Source element.\n   * @param  {any}      target  - Target element.\n   * @param  {function} updater - Updater function.\n   *\n   * @return {Graph}            - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, updater) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + updater;\n\n      updater = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided updater is not a function.`\n      );\n\n    data.attributes = updater(data.attributes);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'update',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * List of methods to attach.\n */\nconst EDGE_ATTRIBUTES_METHODS = [\n  {\n    name: element => `get${element}Attribute`,\n    attacher: attachEdgeAttributeGetter\n  },\n  {\n    name: element => `get${element}Attributes`,\n    attacher: attachEdgeAttributesGetter\n  },\n  {\n    name: element => `has${element}Attribute`,\n    attacher: attachEdgeAttributeChecker\n  },\n  {\n    name: element => `set${element}Attribute`,\n    attacher: attachEdgeAttributeSetter\n  },\n  {\n    name: element => `update${element}Attribute`,\n    attacher: attachEdgeAttributeUpdater\n  },\n  {\n    name: element => `remove${element}Attribute`,\n    attacher: attachEdgeAttributeRemover\n  },\n  {\n    name: element => `replace${element}Attributes`,\n    attacher: attachEdgeAttributesReplacer\n  },\n  {\n    name: element => `merge${element}Attributes`,\n    attacher: attachEdgeAttributesMerger\n  },\n  {\n    name: element => `update${element}Attributes`,\n    attacher: attachEdgeAttributesUpdater\n  }\n];\n\n/**\n * Attach every attributes-related methods to a Graph class.\n *\n * @param {function} Graph - Target class.\n */\nexport default function attachEdgeAttributesMethods(Graph) {\n  EDGE_ATTRIBUTES_METHODS.forEach(function ({name, attacher}) {\n    // For edges\n    attacher(Graph, name('Edge'), 'mixed');\n\n    // For directed edges\n    attacher(Graph, name('DirectedEdge'), 'directed');\n\n    // For undirected edges\n    attacher(Graph, name('UndirectedEdge'), 'undirected');\n  });\n}\n","/**\n * Obliterator Chain Function\n * ===========================\n *\n * Variadic function combining the given iterables.\n */\nvar Iterator = require('./iterator.js');\nvar iter = require('./iter.js');\n\n/**\n * Chain.\n *\n * @param  {...Iterator} iterables - Target iterables.\n * @return {Iterator}\n */\nmodule.exports = function chain() {\n  var iterables = arguments;\n  var current = null;\n  var i = -1;\n\n  /* eslint-disable no-constant-condition */\n  return new Iterator(function next() {\n    var step = null;\n\n    do {\n      if (current === null) {\n        i++;\n\n        if (i >= iterables.length) return {done: true};\n\n        current = iter(iterables[i]);\n      }\n\n      step = current.next();\n\n      if (step.done === true) {\n        current = null;\n        continue;\n      }\n\n      break;\n    } while (true);\n\n    return step;\n  });\n};\n","/**\n * Graphology Edge Iteration\n * ==========================\n *\n * Attaching some methods to the Graph class to be able to iterate over a\n * graph's edges.\n */\nimport Iterator from 'obliterator/iterator';\nimport chain from 'obliterator/chain';\nimport take from 'obliterator/take';\n\nimport {InvalidArgumentsGraphError, NotFoundGraphError} from '../errors';\n\n/**\n * Definitions.\n */\nconst EDGES_ITERATION = [\n  {\n    name: 'edges',\n    type: 'mixed'\n  },\n  {\n    name: 'inEdges',\n    type: 'directed',\n    direction: 'in'\n  },\n  {\n    name: 'outEdges',\n    type: 'directed',\n    direction: 'out'\n  },\n  {\n    name: 'inboundEdges',\n    type: 'mixed',\n    direction: 'in'\n  },\n  {\n    name: 'outboundEdges',\n    type: 'mixed',\n    direction: 'out'\n  },\n  {\n    name: 'directedEdges',\n    type: 'directed'\n  },\n  {\n    name: 'undirectedEdges',\n    type: 'undirected'\n  }\n];\n\n/**\n * Function iterating over edges from the given object to match one of them.\n *\n * @param {object}   object   - Target object.\n * @param {function} callback - Function to call.\n */\nfunction forEachSimple(breakable, object, callback, avoid) {\n  let shouldBreak = false;\n\n  for (const k in object) {\n    if (k === avoid) continue;\n\n    const edgeData = object[k];\n\n    shouldBreak = callback(\n      edgeData.key,\n      edgeData.attributes,\n      edgeData.source.key,\n      edgeData.target.key,\n      edgeData.source.attributes,\n      edgeData.target.attributes,\n      edgeData.undirected\n    );\n\n    if (breakable && shouldBreak) return edgeData.key;\n  }\n\n  return;\n}\n\nfunction forEachMulti(breakable, object, callback, avoid) {\n  let edgeData, source, target;\n\n  let shouldBreak = false;\n\n  for (const k in object) {\n    if (k === avoid) continue;\n\n    edgeData = object[k];\n\n    do {\n      source = edgeData.source;\n      target = edgeData.target;\n\n      shouldBreak = callback(\n        edgeData.key,\n        edgeData.attributes,\n        source.key,\n        target.key,\n        source.attributes,\n        target.attributes,\n        edgeData.undirected\n      );\n\n      if (breakable && shouldBreak) return edgeData.key;\n\n      edgeData = edgeData.next;\n    } while (edgeData !== undefined);\n  }\n\n  return;\n}\n\n/**\n * Function returning an iterator over edges from the given object.\n *\n * @param  {object}   object - Target object.\n * @return {Iterator}\n */\nfunction createIterator(object, avoid) {\n  const keys = Object.keys(object);\n  const l = keys.length;\n\n  let edgeData;\n  let i = 0;\n\n  return new Iterator(function next() {\n    do {\n      if (!edgeData) {\n        if (i >= l) return {done: true};\n\n        const k = keys[i++];\n\n        if (k === avoid) {\n          edgeData = undefined;\n          continue;\n        }\n\n        edgeData = object[k];\n      } else {\n        edgeData = edgeData.next;\n      }\n    } while (!edgeData);\n\n    return {\n      done: false,\n      value: {\n        edge: edgeData.key,\n        attributes: edgeData.attributes,\n        source: edgeData.source.key,\n        target: edgeData.target.key,\n        sourceAttributes: edgeData.source.attributes,\n        targetAttributes: edgeData.target.attributes,\n        undirected: edgeData.undirected\n      }\n    };\n  });\n}\n\n/**\n * Function iterating over the egdes from the object at given key to match\n * one of them.\n *\n * @param {object}   object   - Target object.\n * @param {mixed}    k        - Neighbor key.\n * @param {function} callback - Callback to use.\n */\nfunction forEachForKeySimple(breakable, object, k, callback) {\n  const edgeData = object[k];\n\n  if (!edgeData) return;\n\n  const sourceData = edgeData.source;\n  const targetData = edgeData.target;\n\n  if (\n    callback(\n      edgeData.key,\n      edgeData.attributes,\n      sourceData.key,\n      targetData.key,\n      sourceData.attributes,\n      targetData.attributes,\n      edgeData.undirected\n    ) &&\n    breakable\n  )\n    return edgeData.key;\n}\n\nfunction forEachForKeyMulti(breakable, object, k, callback) {\n  let edgeData = object[k];\n\n  if (!edgeData) return;\n\n  let shouldBreak = false;\n\n  do {\n    shouldBreak = callback(\n      edgeData.key,\n      edgeData.attributes,\n      edgeData.source.key,\n      edgeData.target.key,\n      edgeData.source.attributes,\n      edgeData.target.attributes,\n      edgeData.undirected\n    );\n\n    if (breakable && shouldBreak) return edgeData.key;\n\n    edgeData = edgeData.next;\n  } while (edgeData !== undefined);\n\n  return;\n}\n\n/**\n * Function returning an iterator over the egdes from the object at given key.\n *\n * @param  {object}   object   - Target object.\n * @param  {mixed}    k        - Neighbor key.\n * @return {Iterator}\n */\nfunction createIteratorForKey(object, k) {\n  let edgeData = object[k];\n\n  if (edgeData.next !== undefined) {\n    return new Iterator(function () {\n      if (!edgeData) return {done: true};\n\n      const value = {\n        edge: edgeData.key,\n        attributes: edgeData.attributes,\n        source: edgeData.source.key,\n        target: edgeData.target.key,\n        sourceAttributes: edgeData.source.attributes,\n        targetAttributes: edgeData.target.attributes,\n        undirected: edgeData.undirected\n      };\n\n      edgeData = edgeData.next;\n\n      return {\n        done: false,\n        value\n      };\n    });\n  }\n\n  return Iterator.of({\n    edge: edgeData.key,\n    attributes: edgeData.attributes,\n    source: edgeData.source.key,\n    target: edgeData.target.key,\n    sourceAttributes: edgeData.source.attributes,\n    targetAttributes: edgeData.target.attributes,\n    undirected: edgeData.undirected\n  });\n}\n\n/**\n * Function creating an array of edges for the given type.\n *\n * @param  {Graph}   graph - Target Graph instance.\n * @param  {string}  type  - Type of edges to retrieve.\n * @return {array}         - Array of edges.\n */\nfunction createEdgeArray(graph, type) {\n  if (graph.size === 0) return [];\n\n  if (type === 'mixed' || type === graph.type) {\n    if (typeof Array.from === 'function')\n      return Array.from(graph._edges.keys());\n\n    return take(graph._edges.keys(), graph._edges.size);\n  }\n\n  const size =\n    type === 'undirected' ? graph.undirectedSize : graph.directedSize;\n\n  const list = new Array(size),\n    mask = type === 'undirected';\n\n  const iterator = graph._edges.values();\n\n  let i = 0;\n  let step, data;\n\n  while (((step = iterator.next()), step.done !== true)) {\n    data = step.value;\n\n    if (data.undirected === mask) list[i++] = data.key;\n  }\n\n  return list;\n}\n\n/**\n * Function iterating over a graph's edges using a callback to match one of\n * them.\n *\n * @param  {Graph}    graph    - Target Graph instance.\n * @param  {string}   type     - Type of edges to retrieve.\n * @param  {function} callback - Function to call.\n */\nfunction forEachEdge(breakable, graph, type, callback) {\n  if (graph.size === 0) return;\n\n  const shouldFilter = type !== 'mixed' && type !== graph.type;\n  const mask = type === 'undirected';\n\n  let step, data;\n  let shouldBreak = false;\n  const iterator = graph._edges.values();\n\n  while (((step = iterator.next()), step.done !== true)) {\n    data = step.value;\n\n    if (shouldFilter && data.undirected !== mask) continue;\n\n    const {key, attributes, source, target} = data;\n\n    shouldBreak = callback(\n      key,\n      attributes,\n      source.key,\n      target.key,\n      source.attributes,\n      target.attributes,\n      data.undirected\n    );\n\n    if (breakable && shouldBreak) return key;\n  }\n\n  return;\n}\n\n/**\n * Function creating an iterator of edges for the given type.\n *\n * @param  {Graph}    graph - Target Graph instance.\n * @param  {string}   type  - Type of edges to retrieve.\n * @return {Iterator}\n */\nfunction createEdgeIterator(graph, type) {\n  if (graph.size === 0) return Iterator.empty();\n\n  const shouldFilter = type !== 'mixed' && type !== graph.type;\n  const mask = type === 'undirected';\n\n  const iterator = graph._edges.values();\n\n  return new Iterator(function next() {\n    let step, data;\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      step = iterator.next();\n\n      if (step.done) return step;\n\n      data = step.value;\n\n      if (shouldFilter && data.undirected !== mask) continue;\n\n      break;\n    }\n\n    const value = {\n      edge: data.key,\n      attributes: data.attributes,\n      source: data.source.key,\n      target: data.target.key,\n      sourceAttributes: data.source.attributes,\n      targetAttributes: data.target.attributes,\n      undirected: data.undirected\n    };\n\n    return {value, done: false};\n  });\n}\n\n/**\n * Function iterating over a node's edges using a callback to match one of them.\n *\n * @param  {boolean}  multi     - Whether the graph is multi or not.\n * @param  {string}   type      - Type of edges to retrieve.\n * @param  {string}   direction - In or out?\n * @param  {any}      nodeData  - Target node's data.\n * @param  {function} callback  - Function to call.\n */\nfunction forEachEdgeForNode(\n  breakable,\n  multi,\n  type,\n  direction,\n  nodeData,\n  callback\n) {\n  const fn = multi ? forEachMulti : forEachSimple;\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      found = fn(breakable, nodeData.in, callback);\n\n      if (breakable && found) return found;\n    }\n    if (direction !== 'in') {\n      found = fn(\n        breakable,\n        nodeData.out,\n        callback,\n        !direction ? nodeData.key : undefined\n      );\n\n      if (breakable && found) return found;\n    }\n  }\n\n  if (type !== 'directed') {\n    found = fn(breakable, nodeData.undirected, callback);\n\n    if (breakable && found) return found;\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of edges for the given type & the given node.\n *\n * @param  {boolean} multi     - Whether the graph is multi or not.\n * @param  {string}  type      - Type of edges to retrieve.\n * @param  {string}  direction - In or out?\n * @param  {any}     nodeData  - Target node's data.\n * @return {array}             - Array of edges.\n */\nfunction createEdgeArrayForNode(multi, type, direction, nodeData) {\n  const edges = []; // TODO: possibility to know size beforehand or factorize with map\n\n  forEachEdgeForNode(false, multi, type, direction, nodeData, function (key) {\n    edges.push(key);\n  });\n\n  return edges;\n}\n\n/**\n * Function iterating over a node's edges using a callback.\n *\n * @param  {string}   type      - Type of edges to retrieve.\n * @param  {string}   direction - In or out?\n * @param  {any}      nodeData  - Target node's data.\n * @return {Iterator}\n */\nfunction createEdgeIteratorForNode(type, direction, nodeData) {\n  let iterator = Iterator.empty();\n\n  if (type !== 'undirected') {\n    if (direction !== 'out' && typeof nodeData.in !== 'undefined')\n      iterator = chain(iterator, createIterator(nodeData.in));\n    if (direction !== 'in' && typeof nodeData.out !== 'undefined')\n      iterator = chain(\n        iterator,\n        createIterator(nodeData.out, !direction ? nodeData.key : undefined)\n      );\n  }\n\n  if (type !== 'directed' && typeof nodeData.undirected !== 'undefined') {\n    iterator = chain(iterator, createIterator(nodeData.undirected));\n  }\n\n  return iterator;\n}\n\n/**\n * Function iterating over edges for the given path using a callback to match\n * one of them.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {boolean}  multi      - Whether the graph is multi.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {string}   target     - Target node.\n * @param  {function} callback   - Function to call.\n */\nfunction forEachEdgeForPath(\n  breakable,\n  type,\n  multi,\n  direction,\n  sourceData,\n  target,\n  callback\n) {\n  const fn = multi ? forEachForKeyMulti : forEachForKeySimple;\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (typeof sourceData.in !== 'undefined' && direction !== 'out') {\n      found = fn(breakable, sourceData.in, target, callback);\n\n      if (breakable && found) return found;\n    }\n\n    if (\n      typeof sourceData.out !== 'undefined' &&\n      direction !== 'in' &&\n      (direction || sourceData.key !== target)\n    ) {\n      found = fn(breakable, sourceData.out, target, callback);\n\n      if (breakable && found) return found;\n    }\n  }\n\n  if (type !== 'directed') {\n    if (typeof sourceData.undirected !== 'undefined') {\n      found = fn(breakable, sourceData.undirected, target, callback);\n\n      if (breakable && found) return found;\n    }\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of edges for the given path.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {boolean}  multi      - Whether the graph is multi.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {any}      target     - Target node.\n * @return {array}               - Array of edges.\n */\nfunction createEdgeArrayForPath(type, multi, direction, sourceData, target) {\n  const edges = []; // TODO: possibility to know size beforehand or factorize with map\n\n  forEachEdgeForPath(\n    false,\n    type,\n    multi,\n    direction,\n    sourceData,\n    target,\n    function (key) {\n      edges.push(key);\n    }\n  );\n\n  return edges;\n}\n\n/**\n * Function returning an iterator over edges for the given path.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {string}   target     - Target node.\n * @param  {function} callback   - Function to call.\n */\nfunction createEdgeIteratorForPath(type, direction, sourceData, target) {\n  let iterator = Iterator.empty();\n\n  if (type !== 'undirected') {\n    if (\n      typeof sourceData.in !== 'undefined' &&\n      direction !== 'out' &&\n      target in sourceData.in\n    )\n      iterator = chain(iterator, createIteratorForKey(sourceData.in, target));\n\n    if (\n      typeof sourceData.out !== 'undefined' &&\n      direction !== 'in' &&\n      target in sourceData.out &&\n      (direction || sourceData.key !== target)\n    )\n      iterator = chain(iterator, createIteratorForKey(sourceData.out, target));\n  }\n\n  if (type !== 'directed') {\n    if (\n      typeof sourceData.undirected !== 'undefined' &&\n      target in sourceData.undirected\n    )\n      iterator = chain(\n        iterator,\n        createIteratorForKey(sourceData.undirected, target)\n      );\n  }\n\n  return iterator;\n}\n\n/**\n * Function attaching an edge array creator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachEdgeArrayCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  /**\n   * Function returning an array of certain edges.\n   *\n   * Arity 0: Return all the relevant edges.\n   *\n   * Arity 1: Return all of a node's relevant edges.\n   * @param  {any}   node   - Target node.\n   *\n   * Arity 2: Return the relevant edges across the given path.\n   * @param  {any}   source - Source node.\n   * @param  {any}   target - Target node.\n   *\n   * @return {array|number} - The edges or the number of edges.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[name] = function (source, target) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return [];\n\n    if (!arguments.length) return createEdgeArray(this, type);\n\n    if (arguments.length === 1) {\n      source = '' + source;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${name}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      return createEdgeArrayForNode(\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData\n      );\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return createEdgeArrayForPath(\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`\n    );\n  };\n}\n\n/**\n * Function attaching a edge callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachForEachEdge(Class, description) {\n  const {name, type, direction} = description;\n\n  const forEachName = 'forEach' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over the graph's relevant edges by applying the given\n   * callback.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[forEachName] = function (source, target, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    if (arguments.length === 1) {\n      callback = source;\n      return forEachEdge(false, this, type, callback);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      callback = target;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      // TODO: maybe attach the sub method to the instance dynamically?\n      return forEachEdgeForNode(\n        false,\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData,\n        callback\n      );\n    }\n\n    if (arguments.length === 3) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return forEachEdgeForPath(\n        false,\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target,\n        callback\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${forEachName}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`\n    );\n  };\n\n  /**\n   * Function mapping the graph's relevant edges by applying the given\n   * callback.\n   *\n   * Arity 1: Map all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Map all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Map the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const mapName = 'map' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[mapName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    let result;\n\n    // We know the result length beforehand\n    if (args.length === 0) {\n      let length = 0;\n\n      if (type !== 'directed') length += this.undirectedSize;\n      if (type !== 'undirected') length += this.directedSize;\n\n      result = new Array(length);\n\n      let i = 0;\n\n      args.push((e, ea, s, t, sa, ta, u) => {\n        result[i++] = callback(e, ea, s, t, sa, ta, u);\n      });\n    }\n\n    // We don't know the result length beforehand\n    // TODO: we can in some instances of simple graphs, knowing degree\n    else {\n      result = [];\n\n      args.push((e, ea, s, t, sa, ta, u) => {\n        result.push(callback(e, ea, s, t, sa, ta, u));\n      });\n    }\n\n    this[forEachName].apply(this, args);\n\n    return result;\n  };\n\n  /**\n   * Function filtering the graph's relevant edges using the provided predicate\n   * function.\n   *\n   * Arity 1: Filter all the relevant edges.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * Arity 2: Filter all of a node's relevant edges.\n   * @param  {any}      node      - Target node.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * Arity 3: Filter the relevant edges across the given path.\n   * @param  {any}      source    - Source node.\n   * @param  {any}      target    - Target node.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const filterName = 'filter' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[filterName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    const result = [];\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      if (callback(e, ea, s, t, sa, ta, u)) result.push(e);\n    });\n\n    this[forEachName].apply(this, args);\n\n    return result;\n  };\n\n  /**\n   * Function reducing the graph's relevant edges using the provided accumulator\n   * function.\n   *\n   * Arity 1: Reduce all the relevant edges.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * Arity 2: Reduce all of a node's relevant edges.\n   * @param  {any}      node         - Target node.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * Arity 3: Reduce the relevant edges across the given path.\n   * @param  {any}      source       - Source node.\n   * @param  {any}      target       - Target node.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const reduceName = 'reduce' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[reduceName] = function () {\n    let args = Array.prototype.slice.call(arguments);\n\n    if (args.length < 2 || args.length > 4) {\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: invalid number of arguments (expecting 2, 3 or 4 and got ${args.length}).`\n      );\n    }\n\n    if (\n      typeof args[args.length - 1] === 'function' &&\n      typeof args[args.length - 2] !== 'function'\n    ) {\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`\n      );\n    }\n\n    let callback;\n    let initialValue;\n\n    if (args.length === 2) {\n      callback = args[0];\n      initialValue = args[1];\n      args = [];\n    } else if (args.length === 3) {\n      callback = args[1];\n      initialValue = args[2];\n      args = [args[0]];\n    } else if (args.length === 4) {\n      callback = args[2];\n      initialValue = args[3];\n      args = [args[0], args[1]];\n    }\n\n    let accumulator = initialValue;\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      accumulator = callback(accumulator, e, ea, s, t, sa, ta, u);\n    });\n\n    this[forEachName].apply(this, args);\n\n    return accumulator;\n  };\n}\n\n/**\n * Function attaching a breakable edge callback iterator method to the Graph\n * prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachFindEdge(Class, description) {\n  const {name, type, direction} = description;\n\n  const findEdgeName = 'find' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over the graph's relevant edges in order to match\n   * one of them using the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[findEdgeName] = function (source, target, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return false;\n\n    if (arguments.length === 1) {\n      callback = source;\n      return forEachEdge(true, this, type, callback);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      callback = target;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      // TODO: maybe attach the sub method to the instance dynamically?\n      return forEachEdgeForNode(\n        true,\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData,\n        callback\n      );\n    }\n\n    if (arguments.length === 3) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return forEachEdgeForPath(\n        true,\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target,\n        callback\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${findEdgeName}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`\n    );\n  };\n\n  /**\n   * Function iterating over the graph's relevant edges in order to assert\n   * whether any one of them matches the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const someName = 'some' + name[0].toUpperCase() + name.slice(1, -1);\n\n  Class.prototype[someName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      return callback(e, ea, s, t, sa, ta, u);\n    });\n\n    const found = this[findEdgeName].apply(this, args);\n\n    if (found) return true;\n\n    return false;\n  };\n\n  /**\n   * Function iterating over the graph's relevant edges in order to assert\n   * whether all of them matche the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const everyName = 'every' + name[0].toUpperCase() + name.slice(1, -1);\n\n  Class.prototype[everyName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      return !callback(e, ea, s, t, sa, ta, u);\n    });\n\n    const found = this[findEdgeName].apply(this, args);\n\n    if (found) return false;\n\n    return true;\n  };\n}\n\n/**\n * Function attaching an edge iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachEdgeIteratorCreator(Class, description) {\n  const {name: originalName, type, direction} = description;\n\n  const name = originalName.slice(0, -1) + 'Entries';\n\n  /**\n   * Function returning an iterator over the graph's edges.\n   *\n   * Arity 0: Iterate over all the relevant edges.\n   *\n   * Arity 1: Iterate over all of a node's relevant edges.\n   * @param  {any}   node   - Target node.\n   *\n   * Arity 2: Iterate over the relevant edges across the given path.\n   * @param  {any}   source - Source node.\n   * @param  {any}   target - Target node.\n   *\n   * @return {array|number} - The edges or the number of edges.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[name] = function (source, target) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return Iterator.empty();\n\n    if (!arguments.length) return createEdgeIterator(this, type);\n\n    if (arguments.length === 1) {\n      source = '' + source;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      return createEdgeIteratorForNode(type, direction, sourceData);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return createEdgeIteratorForPath(type, direction, sourceData, target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`\n    );\n  };\n}\n\n/**\n * Function attaching every edge iteration method to the Graph class.\n *\n * @param {function} Graph - Graph class.\n */\nexport default function attachEdgeIterationMethods(Graph) {\n  EDGES_ITERATION.forEach(description => {\n    attachEdgeArrayCreator(Graph, description);\n    attachForEachEdge(Graph, description);\n    attachFindEdge(Graph, description);\n    attachEdgeIteratorCreator(Graph, description);\n  });\n}\n","/**\n * Graphology Neighbor Iteration\n * ==============================\n *\n * Attaching some methods to the Graph class to be able to iterate over\n * neighbors.\n */\nimport Iterator from 'obliterator/iterator';\nimport chain from 'obliterator/chain';\n\nimport {NotFoundGraphError, InvalidArgumentsGraphError} from '../errors';\n\n/**\n * Definitions.\n */\nconst NEIGHBORS_ITERATION = [\n  {\n    name: 'neighbors',\n    type: 'mixed'\n  },\n  {\n    name: 'inNeighbors',\n    type: 'directed',\n    direction: 'in'\n  },\n  {\n    name: 'outNeighbors',\n    type: 'directed',\n    direction: 'out'\n  },\n  {\n    name: 'inboundNeighbors',\n    type: 'mixed',\n    direction: 'in'\n  },\n  {\n    name: 'outboundNeighbors',\n    type: 'mixed',\n    direction: 'out'\n  },\n  {\n    name: 'directedNeighbors',\n    type: 'directed'\n  },\n  {\n    name: 'undirectedNeighbors',\n    type: 'undirected'\n  }\n];\n\n/**\n * Helpers.\n */\nfunction CompositeSetWrapper() {\n  this.A = null;\n  this.B = null;\n}\n\nCompositeSetWrapper.prototype.wrap = function (set) {\n  if (this.A === null) this.A = set;\n  else if (this.B === null) this.B = set;\n};\n\nCompositeSetWrapper.prototype.has = function (key) {\n  if (this.A !== null && key in this.A) return true;\n  if (this.B !== null && key in this.B) return true;\n  return false;\n};\n\n/**\n * Function iterating over the given node's relevant neighbors to match\n * one of them using a predicated function.\n *\n * @param  {string}   type      - Type of neighbors.\n * @param  {string}   direction - Direction.\n * @param  {any}      nodeData  - Target node's data.\n * @param  {function} callback  - Callback to use.\n */\nfunction forEachInObjectOnce(breakable, visited, nodeData, object, callback) {\n  for (const k in object) {\n    const edgeData = object[k];\n\n    const sourceData = edgeData.source;\n    const targetData = edgeData.target;\n\n    const neighborData = sourceData === nodeData ? targetData : sourceData;\n\n    if (visited && visited.has(neighborData.key)) continue;\n\n    const shouldBreak = callback(neighborData.key, neighborData.attributes);\n\n    if (breakable && shouldBreak) return neighborData.key;\n  }\n\n  return;\n}\n\nfunction forEachNeighbor(breakable, type, direction, nodeData, callback) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected')\n      return forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData.undirected,\n        callback\n      );\n\n    if (typeof direction === 'string')\n      return forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData[direction],\n        callback\n      );\n  }\n\n  // Else we need to keep a set of neighbors not to return duplicates\n  // We cheat by querying the other adjacencies\n  const visited = new CompositeSetWrapper();\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      found = forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData.in,\n        callback\n      );\n\n      if (breakable && found) return found;\n\n      visited.wrap(nodeData.in);\n    }\n    if (direction !== 'in') {\n      found = forEachInObjectOnce(\n        breakable,\n        visited,\n        nodeData,\n        nodeData.out,\n        callback\n      );\n\n      if (breakable && found) return found;\n\n      visited.wrap(nodeData.out);\n    }\n  }\n\n  if (type !== 'directed') {\n    found = forEachInObjectOnce(\n      breakable,\n      visited,\n      nodeData,\n      nodeData.undirected,\n      callback\n    );\n\n    if (breakable && found) return found;\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of relevant neighbors for the given node.\n *\n * @param  {string}       type      - Type of neighbors.\n * @param  {string}       direction - Direction.\n * @param  {any}          nodeData  - Target node's data.\n * @return {Array}                  - The list of neighbors.\n */\nfunction createNeighborArrayForNode(type, direction, nodeData) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected') return Object.keys(nodeData.undirected);\n\n    if (typeof direction === 'string') return Object.keys(nodeData[direction]);\n  }\n\n  const neighbors = [];\n\n  forEachNeighbor(false, type, direction, nodeData, function (key) {\n    neighbors.push(key);\n  });\n\n  return neighbors;\n}\n\n/**\n * Function returning an iterator over the given node's relevant neighbors.\n *\n * @param  {string}   type      - Type of neighbors.\n * @param  {string}   direction - Direction.\n * @param  {any}      nodeData  - Target node's data.\n * @return {Iterator}\n */\nfunction createDedupedObjectIterator(visited, nodeData, object) {\n  const keys = Object.keys(object);\n  const l = keys.length;\n\n  let i = 0;\n\n  return new Iterator(function next() {\n    let neighborData = null;\n\n    do {\n      if (i >= l) {\n        if (visited) visited.wrap(object);\n        return {done: true};\n      }\n\n      const edgeData = object[keys[i++]];\n\n      const sourceData = edgeData.source;\n      const targetData = edgeData.target;\n\n      neighborData = sourceData === nodeData ? targetData : sourceData;\n\n      if (visited && visited.has(neighborData.key)) {\n        neighborData = null;\n        continue;\n      }\n    } while (neighborData === null);\n\n    return {\n      done: false,\n      value: {neighbor: neighborData.key, attributes: neighborData.attributes}\n    };\n  });\n}\n\nfunction createNeighborIterator(type, direction, nodeData) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected')\n      return createDedupedObjectIterator(null, nodeData, nodeData.undirected);\n\n    if (typeof direction === 'string')\n      return createDedupedObjectIterator(null, nodeData, nodeData[direction]);\n  }\n\n  let iterator = Iterator.empty();\n\n  // Else we need to keep a set of neighbors not to return duplicates\n  // We cheat by querying the other adjacencies\n  const visited = new CompositeSetWrapper();\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      iterator = chain(\n        iterator,\n        createDedupedObjectIterator(visited, nodeData, nodeData.in)\n      );\n    }\n    if (direction !== 'in') {\n      iterator = chain(\n        iterator,\n        createDedupedObjectIterator(visited, nodeData, nodeData.out)\n      );\n    }\n  }\n\n  if (type !== 'directed') {\n    iterator = chain(\n      iterator,\n      createDedupedObjectIterator(visited, nodeData, nodeData.undirected)\n    );\n  }\n\n  return iterator;\n}\n\n/**\n * Function attaching a neighbors array creator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachNeighborArrayCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  /**\n   * Function returning an array of certain neighbors.\n   *\n   * @param  {any}   node   - Target node.\n   * @return {array} - The neighbors of neighbors.\n   *\n   * @throws {Error} - Will throw if node is not found in the graph.\n   */\n  Class.prototype[name] = function (node) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return [];\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${name}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return createNeighborArrayForNode(\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData\n    );\n  };\n}\n\n/**\n * Function attaching a neighbors callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachForEachNeighbor(Class, description) {\n  const {name, type, direction} = description;\n\n  const forEachName = 'forEach' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over all the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[forEachName] = function (node, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${forEachName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    forEachNeighbor(\n      false,\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData,\n      callback\n    );\n  };\n\n  /**\n   * Function mapping the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const mapName = 'map' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[mapName] = function (node, callback) {\n    // TODO: optimize when size is known beforehand\n    const result = [];\n\n    this[forEachName](node, (n, a) => {\n      result.push(callback(n, a));\n    });\n\n    return result;\n  };\n\n  /**\n   * Function filtering the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const filterName = 'filter' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[filterName] = function (node, callback) {\n    const result = [];\n\n    this[forEachName](node, (n, a) => {\n      if (callback(n, a)) result.push(n);\n    });\n\n    return result;\n  };\n\n  /**\n   * Function reducing the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const reduceName = 'reduce' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[reduceName] = function (node, callback, initialValue) {\n    if (arguments.length < 3)\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`\n      );\n\n    let accumulator = initialValue;\n\n    this[forEachName](node, (n, a) => {\n      accumulator = callback(accumulator, n, a);\n    });\n\n    return accumulator;\n  };\n}\n\n/**\n * Function attaching a breakable neighbors callback iterator method to the\n * Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachFindNeighbor(Class, description) {\n  const {name, type, direction} = description;\n\n  const capitalizedSingular = name[0].toUpperCase() + name.slice(1, -1);\n\n  const findName = 'find' + capitalizedSingular;\n\n  /**\n   * Function iterating over all the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[findName] = function (node, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${findName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return forEachNeighbor(\n      true,\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData,\n      callback\n    );\n  };\n\n  /**\n   * Function iterating over all the relevant neighbors to find if any of them\n   * matches the given predicate.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const someName = 'some' + capitalizedSingular;\n\n  Class.prototype[someName] = function (node, callback) {\n    const found = this[findName](node, callback);\n\n    if (found) return true;\n\n    return false;\n  };\n\n  /**\n   * Function iterating over all the relevant neighbors to find if all of them\n   * matche the given predicate.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const everyName = 'every' + capitalizedSingular;\n\n  Class.prototype[everyName] = function (node, callback) {\n    const found = this[findName](node, (n, a) => {\n      return !callback(n, a);\n    });\n\n    if (found) return false;\n\n    return true;\n  };\n}\n\n/**\n * Function attaching a neighbors callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachNeighborIteratorCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  const iteratorName = name.slice(0, -1) + 'Entries';\n\n  /**\n   * Function returning an iterator over all the relevant neighbors.\n   *\n   * @param  {any}      node     - Target node.\n   * @return {Iterator}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[iteratorName] = function (node) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return Iterator.empty();\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${iteratorName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return createNeighborIterator(\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData\n    );\n  };\n}\n\n/**\n * Function attaching every neighbor iteration method to the Graph class.\n *\n * @param {function} Graph - Graph class.\n */\nexport default function attachNeighborIterationMethods(Graph) {\n  NEIGHBORS_ITERATION.forEach(description => {\n    attachNeighborArrayCreator(Graph, description);\n    attachForEachNeighbor(Graph, description);\n    attachFindNeighbor(Graph, description);\n    attachNeighborIteratorCreator(Graph, description);\n  });\n}\n","/**\n * Graphology Adjacency Iteration\n * ===============================\n *\n * Attaching some methods to the Graph class to be able to iterate over a\n * graph's adjacency.\n */\n\n/**\n * Function iterating over a simple graph's adjacency using a callback.\n *\n * @param {boolean}  breakable         - Can we break?\n * @param {boolean}  assymetric        - Whether to emit undirected edges only once.\n * @param {boolean}  disconnectedNodes - Whether to emit disconnected nodes.\n * @param {Graph}    graph             - Target Graph instance.\n * @param {callback} function          - Iteration callback.\n */\nexport function forEachAdjacency(\n  breakable,\n  assymetric,\n  disconnectedNodes,\n  graph,\n  callback\n) {\n  const iterator = graph._nodes.values();\n\n  const type = graph.type;\n\n  let step, sourceData, neighbor, adj, edgeData, targetData, shouldBreak;\n\n  while (((step = iterator.next()), step.done !== true)) {\n    let hasEdges = false;\n\n    sourceData = step.value;\n\n    if (type !== 'undirected') {\n      adj = sourceData.out;\n\n      for (neighbor in adj) {\n        edgeData = adj[neighbor];\n\n        do {\n          targetData = edgeData.target;\n\n          hasEdges = true;\n          shouldBreak = callback(\n            sourceData.key,\n            targetData.key,\n            sourceData.attributes,\n            targetData.attributes,\n            edgeData.key,\n            edgeData.attributes,\n            edgeData.undirected\n          );\n\n          if (breakable && shouldBreak) return edgeData;\n\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (type !== 'directed') {\n      adj = sourceData.undirected;\n\n      for (neighbor in adj) {\n        if (assymetric && sourceData.key > neighbor) continue;\n\n        edgeData = adj[neighbor];\n\n        do {\n          targetData = edgeData.target;\n\n          if (targetData.key !== neighbor) targetData = edgeData.source;\n\n          hasEdges = true;\n          shouldBreak = callback(\n            sourceData.key,\n            targetData.key,\n            sourceData.attributes,\n            targetData.attributes,\n            edgeData.key,\n            edgeData.attributes,\n            edgeData.undirected\n          );\n\n          if (breakable && shouldBreak) return edgeData;\n\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (disconnectedNodes && !hasEdges) {\n      shouldBreak = callback(\n        sourceData.key,\n        null,\n        sourceData.attributes,\n        null,\n        null,\n        null,\n        null\n      );\n\n      if (breakable && shouldBreak) return null;\n    }\n  }\n\n  return;\n}\n","/**\n * Graphology Serialization Utilities\n * ===================================\n *\n * Collection of functions used by the graph serialization schemes.\n */\nimport {InvalidArgumentsGraphError} from './errors';\nimport {assign, isPlainObject, isEmpty} from './utils';\n\n/**\n * Formats internal node data into a serialized node.\n *\n * @param  {any}    key  - The node's key.\n * @param  {object} data - Internal node's data.\n * @return {array}       - The serialized node.\n */\nexport function serializeNode(key, data) {\n  const serialized = {key};\n\n  if (!isEmpty(data.attributes))\n    serialized.attributes = assign({}, data.attributes);\n\n  return serialized;\n}\n\n/**\n * Formats internal edge data into a serialized edge.\n *\n * @param  {string} type - The graph's type.\n * @param  {any}    key  - The edge's key.\n * @param  {object} data - Internal edge's data.\n * @return {array}       - The serialized edge.\n */\nexport function serializeEdge(type, key, data) {\n  const serialized = {\n    key,\n    source: data.source.key,\n    target: data.target.key\n  };\n\n  if (!isEmpty(data.attributes))\n    serialized.attributes = assign({}, data.attributes);\n\n  if (type === 'mixed' && data.undirected) serialized.undirected = true;\n\n  return serialized;\n}\n\n/**\n * Checks whether the given value is a serialized node.\n *\n * @param  {mixed} value - Target value.\n * @return {string|null}\n */\nexport function validateSerializedNode(value) {\n  if (!isPlainObject(value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid serialized node. A serialized node should be a plain object with at least a \"key\" property.'\n    );\n\n  if (!('key' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized node is missing its key.'\n    );\n\n  if (\n    'attributes' in value &&\n    (!isPlainObject(value.attributes) || value.attributes === null)\n  )\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.'\n    );\n}\n\n/**\n * Checks whether the given value is a serialized edge.\n *\n * @param  {mixed} value - Target value.\n * @return {string|null}\n */\nexport function validateSerializedEdge(value) {\n  if (!isPlainObject(value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a \"source\" & \"target\" property.'\n    );\n\n  if (!('source' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized edge is missing its source.'\n    );\n\n  if (!('target' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized edge is missing its target.'\n    );\n\n  if (\n    'attributes' in value &&\n    (!isPlainObject(value.attributes) || value.attributes === null)\n  )\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.'\n    );\n\n  if ('undirected' in value && typeof value.undirected !== 'boolean')\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.'\n    );\n}\n","/* eslint no-nested-ternary: 0 */\n/**\n * Graphology Reference Implementation\n * ====================================\n *\n * Reference implementation of the graphology specs.\n */\nimport {EventEmitter} from 'events';\nimport Iterator from 'obliterator/iterator';\nimport take from 'obliterator/take';\n\nimport {\n  InvalidArgumentsGraphError,\n  NotFoundGraphError,\n  UsageGraphError\n} from './errors';\n\nimport {\n  MixedNodeData,\n  DirectedNodeData,\n  UndirectedNodeData,\n  EdgeData\n} from './data';\n\nimport attachNodeAttributesMethods from './attributes/nodes';\nimport attachEdgeAttributesMethods from './attributes/edges';\nimport attachEdgeIterationMethods from './iteration/edges';\nimport attachNeighborIterationMethods from './iteration/neighbors';\nimport {forEachAdjacency} from './iteration/adjacency';\n\nimport {\n  serializeNode,\n  serializeEdge,\n  validateSerializedNode,\n  validateSerializedEdge\n} from './serialization';\n\nimport {\n  assign,\n  getMatchingEdge,\n  isPlainObject,\n  privateProperty,\n  readOnlyProperty,\n  incrementalIdStartingFromRandomByte,\n  validateHints\n} from './utils';\n\n/**\n * Constants.\n */\nconst INSTANCE_ID = incrementalIdStartingFromRandomByte();\n\n/**\n * Enums.\n */\nconst TYPES = new Set(['directed', 'undirected', 'mixed']);\n\nconst EMITTER_PROPS = new Set([\n  'domain',\n  '_events',\n  '_eventsCount',\n  '_maxListeners'\n]);\n\nconst EDGE_ADD_METHODS = [\n  {\n    name: verb => `${verb}Edge`,\n    generateKey: true\n  },\n  {\n    name: verb => `${verb}DirectedEdge`,\n    generateKey: true,\n    type: 'directed'\n  },\n  {\n    name: verb => `${verb}UndirectedEdge`,\n    generateKey: true,\n    type: 'undirected'\n  },\n  {\n    name: verb => `${verb}EdgeWithKey`\n  },\n  {\n    name: verb => `${verb}DirectedEdgeWithKey`,\n    type: 'directed'\n  },\n  {\n    name: verb => `${verb}UndirectedEdgeWithKey`,\n    type: 'undirected'\n  }\n];\n\n/**\n * Default options.\n */\nconst DEFAULTS = {\n  allowSelfLoops: true,\n  multi: false,\n  type: 'mixed'\n};\n\n/**\n * Abstract functions used by the Graph class for various methods.\n */\n\n/**\n * Internal method used to add a node to the given graph\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {any}     node            - The node's key.\n * @param  {object}  [attributes]    - Optional attributes.\n * @return {NodeData}                - Created node data.\n */\nfunction addNode(graph, node, attributes) {\n  if (attributes && !isPlainObject(attributes))\n    throw new InvalidArgumentsGraphError(\n      `Graph.addNode: invalid attributes. Expecting an object but got \"${attributes}\"`\n    );\n\n  // String coercion\n  node = '' + node;\n  attributes = attributes || {};\n\n  if (graph._nodes.has(node))\n    throw new UsageGraphError(\n      `Graph.addNode: the \"${node}\" node already exist in the graph.`\n    );\n\n  const data = new graph.NodeDataClass(node, attributes);\n\n  // Adding the node to internal register\n  graph._nodes.set(node, data);\n\n  // Emitting\n  graph.emit('nodeAdded', {\n    key: node,\n    attributes\n  });\n\n  return data;\n}\n\n/**\n * Same as the above but without sanity checks because we call this in contexts\n * where necessary checks were already done.\n */\nfunction unsafeAddNode(graph, node, attributes) {\n  const data = new graph.NodeDataClass(node, attributes);\n\n  graph._nodes.set(node, data);\n\n  graph.emit('nodeAdded', {\n    key: node,\n    attributes\n  });\n\n  return data;\n}\n\n/**\n * Internal method used to add an arbitrary edge to the given graph.\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {string}  name            - Name of the child method for errors.\n * @param  {boolean} mustGenerateKey - Should the graph generate an id?\n * @param  {boolean} undirected      - Whether the edge is undirected.\n * @param  {any}     edge            - The edge's key.\n * @param  {any}     source          - The source node.\n * @param  {any}     target          - The target node.\n * @param  {object}  [attributes]    - Optional attributes.\n * @return {any}                     - The edge.\n *\n * @throws {Error} - Will throw if the graph is of the wrong type.\n * @throws {Error} - Will throw if the given attributes are not an object.\n * @throws {Error} - Will throw if source or target doesn't exist.\n * @throws {Error} - Will throw if the edge already exist.\n */\nfunction addEdge(\n  graph,\n  name,\n  mustGenerateKey,\n  undirected,\n  edge,\n  source,\n  target,\n  attributes\n) {\n  // Checking validity of operation\n  if (!undirected && graph.type === 'undirected')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`\n    );\n\n  if (undirected && graph.type === 'directed')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`\n    );\n\n  if (attributes && !isPlainObject(attributes))\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: invalid attributes. Expecting an object but got \"${attributes}\"`\n    );\n\n  // Coercion of source & target:\n  source = '' + source;\n  target = '' + target;\n  attributes = attributes || {};\n\n  if (!graph.allowSelfLoops && source === target)\n    throw new UsageGraphError(\n      `Graph.${name}: source & target are the same (\"${source}\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`\n    );\n\n  const sourceData = graph._nodes.get(source),\n    targetData = graph._nodes.get(target);\n\n  if (!sourceData)\n    throw new NotFoundGraphError(\n      `Graph.${name}: source node \"${source}\" not found.`\n    );\n\n  if (!targetData)\n    throw new NotFoundGraphError(\n      `Graph.${name}: target node \"${target}\" not found.`\n    );\n\n  // Must the graph generate an id for this edge?\n  const eventData = {\n    key: null,\n    undirected,\n    source,\n    target,\n    attributes\n  };\n\n  if (mustGenerateKey) {\n    // NOTE: in this case we can guarantee that the key does not already\n    // exist and is already correctly casted as a string\n    edge = graph._edgeKeyGenerator();\n  } else {\n    // Coercion of edge key\n    edge = '' + edge;\n\n    // Here, we have a key collision\n    if (graph._edges.has(edge))\n      throw new UsageGraphError(\n        `Graph.${name}: the \"${edge}\" edge already exists in the graph.`\n      );\n  }\n\n  // Here, we might have a source / target collision\n  if (\n    !graph.multi &&\n    (undirected\n      ? typeof sourceData.undirected[target] !== 'undefined'\n      : typeof sourceData.out[target] !== 'undefined')\n  ) {\n    throw new UsageGraphError(\n      `Graph.${name}: an edge linking \"${source}\" to \"${target}\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`\n    );\n  }\n\n  // Storing some data\n  const edgeData = new EdgeData(\n    undirected,\n    edge,\n    sourceData,\n    targetData,\n    attributes\n  );\n\n  // Adding the edge to the internal register\n  graph._edges.set(edge, edgeData);\n\n  // Incrementing node degree counters\n  const isSelfLoop = source === target;\n\n  if (undirected) {\n    sourceData.undirectedDegree++;\n    targetData.undirectedDegree++;\n\n    if (isSelfLoop) {\n      sourceData.undirectedLoops++;\n      graph._undirectedSelfLoopCount++;\n    }\n  } else {\n    sourceData.outDegree++;\n    targetData.inDegree++;\n\n    if (isSelfLoop) {\n      sourceData.directedLoops++;\n      graph._directedSelfLoopCount++;\n    }\n  }\n\n  // Updating relevant index\n  if (graph.multi) edgeData.attachMulti();\n  else edgeData.attach();\n\n  if (undirected) graph._undirectedSize++;\n  else graph._directedSize++;\n\n  // Emitting\n  eventData.key = edge;\n\n  graph.emit('edgeAdded', eventData);\n\n  return edge;\n}\n\n/**\n * Internal method used to add an arbitrary edge to the given graph.\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {string}  name            - Name of the child method for errors.\n * @param  {boolean} mustGenerateKey - Should the graph generate an id?\n * @param  {boolean} undirected      - Whether the edge is undirected.\n * @param  {any}     edge            - The edge's key.\n * @param  {any}     source          - The source node.\n * @param  {any}     target          - The target node.\n * @param  {object}  [attributes]    - Optional attributes.\n * @param  {boolean} [asUpdater]       - Are we updating or merging?\n * @return {any}                     - The edge.\n *\n * @throws {Error} - Will throw if the graph is of the wrong type.\n * @throws {Error} - Will throw if the given attributes are not an object.\n * @throws {Error} - Will throw if source or target doesn't exist.\n * @throws {Error} - Will throw if the edge already exist.\n */\nfunction mergeEdge(\n  graph,\n  name,\n  mustGenerateKey,\n  undirected,\n  edge,\n  source,\n  target,\n  attributes,\n  asUpdater\n) {\n  // Checking validity of operation\n  if (!undirected && graph.type === 'undirected')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`\n    );\n\n  if (undirected && graph.type === 'directed')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`\n    );\n\n  if (attributes) {\n    if (asUpdater) {\n      if (typeof attributes !== 'function')\n        throw new InvalidArgumentsGraphError(\n          `Graph.${name}: invalid updater function. Expecting a function but got \"${attributes}\"`\n        );\n    } else {\n      if (!isPlainObject(attributes))\n        throw new InvalidArgumentsGraphError(\n          `Graph.${name}: invalid attributes. Expecting an object but got \"${attributes}\"`\n        );\n    }\n  }\n\n  // Coercion of source & target:\n  source = '' + source;\n  target = '' + target;\n\n  let updater;\n\n  if (asUpdater) {\n    updater = attributes;\n    attributes = undefined;\n  }\n\n  if (!graph.allowSelfLoops && source === target)\n    throw new UsageGraphError(\n      `Graph.${name}: source & target are the same (\"${source}\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`\n    );\n\n  let sourceData = graph._nodes.get(source);\n  let targetData = graph._nodes.get(target);\n  let edgeData;\n\n  // Do we need to handle duplicate?\n  let alreadyExistingEdgeData;\n\n  if (!mustGenerateKey) {\n    edgeData = graph._edges.get(edge);\n\n    if (edgeData) {\n      // Here, we need to ensure, if the user gave a key, that source & target\n      // are consistent\n      if (edgeData.source.key !== source || edgeData.target.key !== target) {\n        // If source or target inconsistent\n        if (\n          !undirected ||\n          edgeData.source.key !== target ||\n          edgeData.target.key !== source\n        ) {\n          // If directed, or source/target aren't flipped\n          throw new UsageGraphError(\n            `Graph.${name}: inconsistency detected when attempting to merge the \"${edge}\" edge with \"${source}\" source & \"${target}\" target vs. (\"${edgeData.source.key}\", \"${edgeData.target.key}\").`\n          );\n        }\n      }\n\n      alreadyExistingEdgeData = edgeData;\n    }\n  }\n\n  // Here, we might have a source / target collision\n  if (!alreadyExistingEdgeData && !graph.multi && sourceData) {\n    alreadyExistingEdgeData = undirected\n      ? sourceData.undirected[target]\n      : sourceData.out[target];\n  }\n\n  // Handling duplicates\n  if (alreadyExistingEdgeData) {\n    const info = [alreadyExistingEdgeData.key, false, false, false];\n\n    // We can skip the attribute merging part if the user did not provide them\n    if (asUpdater ? !updater : !attributes) return info;\n\n    // Updating the attributes\n    if (asUpdater) {\n      const oldAttributes = alreadyExistingEdgeData.attributes;\n      alreadyExistingEdgeData.attributes = updater(oldAttributes);\n\n      graph.emit('edgeAttributesUpdated', {\n        type: 'replace',\n        key: alreadyExistingEdgeData.key,\n        attributes: alreadyExistingEdgeData.attributes\n      });\n    }\n\n    // Merging the attributes\n    else {\n      assign(alreadyExistingEdgeData.attributes, attributes);\n\n      graph.emit('edgeAttributesUpdated', {\n        type: 'merge',\n        key: alreadyExistingEdgeData.key,\n        attributes: alreadyExistingEdgeData.attributes,\n        data: attributes\n      });\n    }\n\n    return info;\n  }\n\n  attributes = attributes || {};\n\n  if (asUpdater && updater) attributes = updater(attributes);\n\n  // Must the graph generate an id for this edge?\n  const eventData = {\n    key: null,\n    undirected,\n    source,\n    target,\n    attributes\n  };\n\n  if (mustGenerateKey) {\n    // NOTE: in this case we can guarantee that the key does not already\n    // exist and is already correctly casted as a string\n    edge = graph._edgeKeyGenerator();\n  } else {\n    // Coercion of edge key\n    edge = '' + edge;\n\n    // Here, we have a key collision\n    if (graph._edges.has(edge))\n      throw new UsageGraphError(\n        `Graph.${name}: the \"${edge}\" edge already exists in the graph.`\n      );\n  }\n\n  let sourceWasAdded = false;\n  let targetWasAdded = false;\n\n  if (!sourceData) {\n    sourceData = unsafeAddNode(graph, source, {});\n    sourceWasAdded = true;\n\n    if (source === target) {\n      targetData = sourceData;\n      targetWasAdded = true;\n    }\n  }\n  if (!targetData) {\n    targetData = unsafeAddNode(graph, target, {});\n    targetWasAdded = true;\n  }\n\n  // Storing some data\n  edgeData = new EdgeData(undirected, edge, sourceData, targetData, attributes);\n\n  // Adding the edge to the internal register\n  graph._edges.set(edge, edgeData);\n\n  // Incrementing node degree counters\n  const isSelfLoop = source === target;\n\n  if (undirected) {\n    sourceData.undirectedDegree++;\n    targetData.undirectedDegree++;\n\n    if (isSelfLoop) {\n      sourceData.undirectedLoops++;\n      graph._undirectedSelfLoopCount++;\n    }\n  } else {\n    sourceData.outDegree++;\n    targetData.inDegree++;\n\n    if (isSelfLoop) {\n      sourceData.directedLoops++;\n      graph._directedSelfLoopCount++;\n    }\n  }\n\n  // Updating relevant index\n  if (graph.multi) edgeData.attachMulti();\n  else edgeData.attach();\n\n  if (undirected) graph._undirectedSize++;\n  else graph._directedSize++;\n\n  // Emitting\n  eventData.key = edge;\n\n  graph.emit('edgeAdded', eventData);\n\n  return [edge, true, sourceWasAdded, targetWasAdded];\n}\n\n/**\n * Internal method used to drop an edge.\n *\n * @param  {Graph}    graph    - Target graph.\n * @param  {EdgeData} edgeData - Data of the edge to drop.\n */\nfunction dropEdgeFromData(graph, edgeData) {\n  // Dropping the edge from the register\n  graph._edges.delete(edgeData.key);\n\n  // Updating related degrees\n  const {source: sourceData, target: targetData, attributes} = edgeData;\n\n  const undirected = edgeData.undirected;\n\n  const isSelfLoop = sourceData === targetData;\n\n  if (undirected) {\n    sourceData.undirectedDegree--;\n    targetData.undirectedDegree--;\n\n    if (isSelfLoop) {\n      sourceData.undirectedLoops--;\n      graph._undirectedSelfLoopCount--;\n    }\n  } else {\n    sourceData.outDegree--;\n    targetData.inDegree--;\n\n    if (isSelfLoop) {\n      sourceData.directedLoops--;\n      graph._directedSelfLoopCount--;\n    }\n  }\n\n  // Clearing index\n  if (graph.multi) edgeData.detachMulti();\n  else edgeData.detach();\n\n  if (undirected) graph._undirectedSize--;\n  else graph._directedSize--;\n\n  // Emitting\n  graph.emit('edgeDropped', {\n    key: edgeData.key,\n    attributes,\n    source: sourceData.key,\n    target: targetData.key,\n    undirected\n  });\n}\n\n/**\n * Graph class\n *\n * @constructor\n * @param  {object}  [options] - Options:\n * @param  {boolean}   [allowSelfLoops] - Allow self loops?\n * @param  {string}    [type]           - Type of the graph.\n * @param  {boolean}   [map]            - Allow references as keys?\n * @param  {boolean}   [multi]          - Allow parallel edges?\n *\n * @throws {Error} - Will throw if the arguments are not valid.\n */\nexport default class Graph extends EventEmitter {\n  constructor(options) {\n    super();\n\n    //-- Solving options\n    options = assign({}, DEFAULTS, options);\n\n    // Enforcing options validity\n    if (typeof options.multi !== 'boolean')\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"${options.multi}\".`\n      );\n\n    if (!TYPES.has(options.type))\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'type' option. Should be one of \"mixed\", \"directed\" or \"undirected\" but got \"${options.type}\".`\n      );\n\n    if (typeof options.allowSelfLoops !== 'boolean')\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"${options.allowSelfLoops}\".`\n      );\n\n    //-- Private properties\n\n    // Utilities\n    const NodeDataClass =\n      options.type === 'mixed'\n        ? MixedNodeData\n        : options.type === 'directed'\n        ? DirectedNodeData\n        : UndirectedNodeData;\n\n    privateProperty(this, 'NodeDataClass', NodeDataClass);\n\n    // Internal edge key generator\n\n    // NOTE: this internal generator produce keys that are strings\n    // composed of a weird prefix, an incremental instance id starting from\n    // a random byte and finally an internal instance incremental id.\n    // All this to avoid intra-frame and cross-frame adversarial inputs\n    // that can force a single #.addEdge call to degenerate into a O(n)\n    // available key search loop.\n\n    // It also ensures that automatically generated edge keys are unlikely\n    // to produce collisions with arbitrary keys given by users.\n    const instancePrefix = 'geid_' + INSTANCE_ID() + '_';\n    let edgeId = 0;\n\n    const edgeKeyGenerator = () => {\n      let availableEdgeKey;\n\n      do {\n        availableEdgeKey = instancePrefix + edgeId++;\n      } while (this._edges.has(availableEdgeKey));\n\n      return availableEdgeKey;\n    };\n\n    // Indexes\n    privateProperty(this, '_attributes', {});\n    privateProperty(this, '_nodes', new Map());\n    privateProperty(this, '_edges', new Map());\n    privateProperty(this, '_directedSize', 0);\n    privateProperty(this, '_undirectedSize', 0);\n    privateProperty(this, '_directedSelfLoopCount', 0);\n    privateProperty(this, '_undirectedSelfLoopCount', 0);\n    privateProperty(this, '_edgeKeyGenerator', edgeKeyGenerator);\n\n    // Options\n    privateProperty(this, '_options', options);\n\n    // Emitter properties\n    EMITTER_PROPS.forEach(prop => privateProperty(this, prop, this[prop]));\n\n    //-- Properties readers\n    readOnlyProperty(this, 'order', () => this._nodes.size);\n    readOnlyProperty(this, 'size', () => this._edges.size);\n    readOnlyProperty(this, 'directedSize', () => this._directedSize);\n    readOnlyProperty(this, 'undirectedSize', () => this._undirectedSize);\n    readOnlyProperty(\n      this,\n      'selfLoopCount',\n      () => this._directedSelfLoopCount + this._undirectedSelfLoopCount\n    );\n    readOnlyProperty(\n      this,\n      'directedSelfLoopCount',\n      () => this._directedSelfLoopCount\n    );\n    readOnlyProperty(\n      this,\n      'undirectedSelfLoopCount',\n      () => this._undirectedSelfLoopCount\n    );\n    readOnlyProperty(this, 'multi', this._options.multi);\n    readOnlyProperty(this, 'type', this._options.type);\n    readOnlyProperty(this, 'allowSelfLoops', this._options.allowSelfLoops);\n    readOnlyProperty(this, 'implementation', () => 'graphology');\n  }\n\n  _resetInstanceCounters() {\n    this._directedSize = 0;\n    this._undirectedSize = 0;\n    this._directedSelfLoopCount = 0;\n    this._undirectedSelfLoopCount = 0;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Read\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning whether the given node is found in the graph.\n   *\n   * @param  {any}     node - The node.\n   * @return {boolean}\n   */\n  hasNode(node) {\n    return this._nodes.has('' + node);\n  }\n\n  /**\n   * Method returning whether the given directed edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasDirectedEdge(source, target) {\n    // Early termination\n    if (this.type === 'undirected') return false;\n\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      const edgeData = this._edges.get(edge);\n\n      return !!edgeData && !edgeData.undirected;\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      return nodeData.out.hasOwnProperty(target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning whether the given undirected edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasUndirectedEdge(source, target) {\n    // Early termination\n    if (this.type === 'directed') return false;\n\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      const edgeData = this._edges.get(edge);\n\n      return !!edgeData && edgeData.undirected;\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      return nodeData.undirected.hasOwnProperty(target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning whether the given edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasEdge(source, target) {\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      return this._edges.has(edge);\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      return (\n        (typeof nodeData.out !== 'undefined' &&\n          nodeData.out.hasOwnProperty(target)) ||\n        (typeof nodeData.undirected !== 'undefined' &&\n          nodeData.undirected.hasOwnProperty(target))\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning the edge matching source & target in a directed fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  directedEdge(source, target) {\n    if (this.type === 'undirected') return;\n\n    source = '' + source;\n    target = '' + target;\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.'\n      );\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.directedEdge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.directedEdge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData = (sourceData.out && sourceData.out[target]) || undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning the edge matching source & target in a undirected fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  undirectedEdge(source, target) {\n    if (this.type === 'directed') return;\n\n    source = '' + source;\n    target = '' + target;\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.'\n      );\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedEdge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.undirectedEdge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData =\n      (sourceData.undirected && sourceData.undirected[target]) || undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning the edge matching source & target in a mixed fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  edge(source, target) {\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.'\n      );\n\n    source = '' + source;\n    target = '' + target;\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.edge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.edge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData =\n      (sourceData.out && sourceData.out[target]) ||\n      (sourceData.undirected && sourceData.undirected[target]) ||\n      undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning whether two nodes are directed neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areDirectedNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areDirectedNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.in || neighbor in nodeData.out;\n  }\n\n  /**\n   * Method returning whether two nodes are out neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areOutNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areOutNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.out;\n  }\n\n  /**\n   * Method returning whether two nodes are in neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areInNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areInNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.in;\n  }\n\n  /**\n   * Method returning whether two nodes are undirected neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areUndirectedNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areUndirectedNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return false;\n\n    return neighbor in nodeData.undirected;\n  }\n\n  /**\n   * Method returning whether two nodes are neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.in || neighbor in nodeData.out) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether two nodes are inbound neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areInboundNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areInboundNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.in) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether two nodes are outbound neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areOutboundNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areOutboundNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.out) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning the given node's in degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree;\n  }\n\n  /**\n   * Method returning the given node's out degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.outDegree;\n  }\n\n  /**\n   * Method returning the given node's directed degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  directedDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.directedDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree + nodeData.outDegree;\n  }\n\n  /**\n   * Method returning the given node's undirected degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  undirectedDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return 0;\n\n    return nodeData.undirectedDegree;\n  }\n\n  /**\n   * Method returning the given node's inbound degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's inbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inboundDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inboundDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's outbound degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's outbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outboundDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outboundDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.outDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's directed degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  degree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.degree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree + nodeData.outDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's in degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree - nodeData.directedLoops;\n  }\n\n  /**\n   * Method returning the given node's out degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.outDegree - nodeData.directedLoops;\n  }\n\n  /**\n   * Method returning the given node's directed degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  directedDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.directedDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree + nodeData.outDegree - nodeData.directedLoops * 2;\n  }\n\n  /**\n   * Method returning the given node's undirected degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  undirectedDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return 0;\n\n    return nodeData.undirectedDegree - nodeData.undirectedLoops * 2;\n  }\n\n  /**\n   * Method returning the given node's inbound degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's inbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inboundDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inboundDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n      loops += nodeData.undirectedLoops * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree;\n      loops += nodeData.directedLoops;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given node's outbound degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's outbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outboundDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outboundDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n      loops += nodeData.undirectedLoops * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.outDegree;\n      loops += nodeData.directedLoops;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given node's directed degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  degreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.degreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n      loops += nodeData.undirectedLoops * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree + nodeData.outDegree;\n      loops += nodeData.directedLoops * 2;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given edge's source.\n   *\n   * @param  {any} edge - The edge's key.\n   * @return {any}      - The edge's source.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  source(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.source: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source.key;\n  }\n\n  /**\n   * Method returning the given edge's target.\n   *\n   * @param  {any} edge - The edge's key.\n   * @return {any}      - The edge's target.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  target(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.target: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.target.key;\n  }\n\n  /**\n   * Method returning the given edge's extremities.\n   *\n   * @param  {any}   edge - The edge's key.\n   * @return {array}      - The edge's extremities.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  extremities(edge) {\n    edge = '' + edge;\n\n    const edgeData = this._edges.get(edge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.extremities: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return [edgeData.source.key, edgeData.target.key];\n  }\n\n  /**\n   * Given a node & an edge, returns the other extremity of the edge.\n   *\n   * @param  {any}   node - The node's key.\n   * @param  {any}   edge - The edge's key.\n   * @return {any}        - The related node.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph or if the\n   *                   edge & node are not related.\n   */\n  opposite(node, edge) {\n    node = '' + node;\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.opposite: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    const source = data.source.key;\n    const target = data.target.key;\n\n    if (node === source) return target;\n    if (node === target) return source;\n\n    throw new NotFoundGraphError(\n      `Graph.opposite: the \"${node}\" node is not attached to the \"${edge}\" edge (${source}, ${target}).`\n    );\n  }\n\n  /**\n   * Returns whether the given edge has the given node as extremity.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @param  {any}     node - The node's key.\n   * @return {boolean}      - The related node.\n   *\n   * @throws {Error} - Will throw if either the node or the edge isn't in the graph.\n   */\n  hasExtremity(edge, node) {\n    edge = '' + edge;\n    node = '' + node;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.hasExtremity: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source.key === node || data.target.key === node;\n  }\n\n  /**\n   * Method returning whether the given edge is undirected.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isUndirected(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isUndirected: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.undirected;\n  }\n\n  /**\n   * Method returning whether the given edge is directed.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isDirected(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isDirected: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return !data.undirected;\n  }\n\n  /**\n   * Method returning whether the given edge is a self loop.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isSelfLoop(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isSelfLoop: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source === data.target;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Mutation\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used to add a node to the graph.\n   *\n   * @param  {any}    node         - The node.\n   * @param  {object} [attributes] - Optional attributes.\n   * @return {any}                 - The node.\n   *\n   * @throws {Error} - Will throw if the given node already exist.\n   * @throws {Error} - Will throw if the given attributes are not an object.\n   */\n  addNode(node, attributes) {\n    const nodeData = addNode(this, node, attributes);\n\n    return nodeData.key;\n  }\n\n  /**\n   * Method used to merge a node into the graph.\n   *\n   * @param  {any}    node         - The node.\n   * @param  {object} [attributes] - Optional attributes.\n   * @return {any}                 - The node.\n   */\n  mergeNode(node, attributes) {\n    if (attributes && !isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.mergeNode: invalid attributes. Expecting an object but got \"${attributes}\"`\n      );\n\n    // String coercion\n    node = '' + node;\n    attributes = attributes || {};\n\n    // If the node already exists, we merge the attributes\n    let data = this._nodes.get(node);\n\n    if (data) {\n      if (attributes) {\n        assign(data.attributes, attributes);\n\n        this.emit('nodeAttributesUpdated', {\n          type: 'merge',\n          key: node,\n          attributes: data.attributes,\n          data: attributes\n        });\n      }\n      return [node, false];\n    }\n\n    data = new this.NodeDataClass(node, attributes);\n\n    // Adding the node to internal register\n    this._nodes.set(node, data);\n\n    // Emitting\n    this.emit('nodeAdded', {\n      key: node,\n      attributes\n    });\n\n    return [node, true];\n  }\n\n  /**\n   * Method used to add a node if it does not exist in the graph or else to\n   * update its attributes using a function.\n   *\n   * @param  {any}      node      - The node.\n   * @param  {function} [updater] - Optional updater function.\n   * @return {any}                - The node.\n   */\n  updateNode(node, updater) {\n    if (updater && typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.updateNode: invalid updater function. Expecting a function but got \"${updater}\"`\n      );\n\n    // String coercion\n    node = '' + node;\n\n    // If the node already exists, we update the attributes\n    let data = this._nodes.get(node);\n\n    if (data) {\n      if (updater) {\n        const oldAttributes = data.attributes;\n        data.attributes = updater(oldAttributes);\n\n        this.emit('nodeAttributesUpdated', {\n          type: 'replace',\n          key: node,\n          attributes: data.attributes\n        });\n      }\n      return [node, false];\n    }\n\n    const attributes = updater ? updater({}) : {};\n\n    data = new this.NodeDataClass(node, attributes);\n\n    // Adding the node to internal register\n    this._nodes.set(node, data);\n\n    // Emitting\n    this.emit('nodeAdded', {\n      key: node,\n      attributes\n    });\n\n    return [node, true];\n  }\n\n  /**\n   * Method used to drop a single node & all its attached edges from the graph.\n   *\n   * @param  {any}    node - The node.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the node doesn't exist.\n   */\n  dropNode(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.dropNode: could not find the \"${node}\" node in the graph.`\n      );\n\n    let edgeData;\n\n    // Removing attached edges\n    // NOTE: we could be faster here, but this is such a pain to maintain\n    if (this.type !== 'undirected') {\n      for (const neighbor in nodeData.out) {\n        edgeData = nodeData.out[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n\n      for (const neighbor in nodeData.in) {\n        edgeData = nodeData.in[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (this.type !== 'directed') {\n      for (const neighbor in nodeData.undirected) {\n        edgeData = nodeData.undirected[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    // Dropping the node from the register\n    this._nodes.delete(node);\n\n    // Emitting\n    this.emit('nodeDropped', {\n      key: node,\n      attributes: nodeData.attributes\n    });\n  }\n\n  /**\n   * Method used to drop a single edge from the graph.\n   *\n   * Arity 1:\n   * @param  {any}    edge - The edge.\n   *\n   * Arity 2:\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropEdge(edge) {\n    let edgeData;\n\n    if (arguments.length > 1) {\n      const source = '' + arguments[0];\n      const target = '' + arguments[1];\n\n      edgeData = getMatchingEdge(this, source, target, this.type);\n\n      if (!edgeData)\n        throw new NotFoundGraphError(\n          `Graph.dropEdge: could not find the \"${source}\" -> \"${target}\" edge in the graph.`\n        );\n    } else {\n      edge = '' + edge;\n\n      edgeData = this._edges.get(edge);\n\n      if (!edgeData)\n        throw new NotFoundGraphError(\n          `Graph.dropEdge: could not find the \"${edge}\" edge in the graph.`\n        );\n    }\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to drop a single directed edge from the graph.\n   *\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropDirectedEdge(source, target) {\n    if (arguments.length < 2)\n      throw new UsageGraphError(\n        'Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.'\n      );\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.'\n      );\n\n    source = '' + source;\n    target = '' + target;\n\n    const edgeData = getMatchingEdge(this, source, target, 'directed');\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.dropDirectedEdge: could not find a \"${source}\" -> \"${target}\" edge in the graph.`\n      );\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to drop a single undirected edge from the graph.\n   *\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropUndirectedEdge(source, target) {\n    if (arguments.length < 2)\n      throw new UsageGraphError(\n        'Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.'\n      );\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.'\n      );\n\n    const edgeData = getMatchingEdge(this, source, target, 'undirected');\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.dropUndirectedEdge: could not find a \"${source}\" -> \"${target}\" edge in the graph.`\n      );\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to remove every edge & every node from the graph.\n   *\n   * @return {Graph}\n   */\n  clear() {\n    // Clearing edges\n    this._edges.clear();\n\n    // Clearing nodes\n    this._nodes.clear();\n\n    // Reset counters\n    this._resetInstanceCounters();\n\n    // Emitting\n    this.emit('cleared');\n  }\n\n  /**\n   * Method used to remove every edge from the graph.\n   *\n   * @return {Graph}\n   */\n  clearEdges() {\n    // Clearing structure index\n    const iterator = this._nodes.values();\n\n    let step;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      step.value.clear();\n    }\n\n    // Clearing edges\n    this._edges.clear();\n\n    // Reset counters\n    this._resetInstanceCounters();\n\n    // Emitting\n    this.emit('edgesCleared');\n  }\n\n  /**---------------------------------------------------------------------------\n   * Attributes-related methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning the desired graph's attribute.\n   *\n   * @param  {string} name - Name of the attribute.\n   * @return {any}\n   */\n  getAttribute(name) {\n    return this._attributes[name];\n  }\n\n  /**\n   * Method returning the graph's attributes.\n   *\n   * @return {object}\n   */\n  getAttributes() {\n    return this._attributes;\n  }\n\n  /**\n   * Method returning whether the graph has the desired attribute.\n   *\n   * @param  {string}  name - Name of the attribute.\n   * @return {boolean}\n   */\n  hasAttribute(name) {\n    return this._attributes.hasOwnProperty(name);\n  }\n\n  /**\n   * Method setting a value for the desired graph's attribute.\n   *\n   * @param  {string}  name  - Name of the attribute.\n   * @param  {any}     value - Value for the attribute.\n   * @return {Graph}\n   */\n  setAttribute(name, value) {\n    this._attributes[name] = value;\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'set',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method using a function to update the desired graph's attribute's value.\n   *\n   * @param  {string}   name    - Name of the attribute.\n   * @param  {function} updater - Function use to update the attribute's value.\n   * @return {Graph}\n   */\n  updateAttribute(name, updater) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateAttribute: updater should be a function.'\n      );\n\n    const value = this._attributes[name];\n\n    this._attributes[name] = updater(value);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'set',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method removing the desired graph's attribute.\n   *\n   * @param  {string} name  - Name of the attribute.\n   * @return {Graph}\n   */\n  removeAttribute(name) {\n    delete this._attributes[name];\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'remove',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method replacing the graph's attributes.\n   *\n   * @param  {object} attributes - New attributes.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given attributes are not a plain object.\n   */\n  replaceAttributes(attributes) {\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        'Graph.replaceAttributes: provided attributes are not a plain object.'\n      );\n\n    this._attributes = attributes;\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'replace',\n      attributes: this._attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method merging the graph's attributes.\n   *\n   * @param  {object} attributes - Attributes to merge.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given attributes are not a plain object.\n   */\n  mergeAttributes(attributes) {\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        'Graph.mergeAttributes: provided attributes are not a plain object.'\n      );\n\n    assign(this._attributes, attributes);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'merge',\n      attributes: this._attributes,\n      data: attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method updating the graph's attributes.\n   *\n   * @param  {function} updater - Function used to update the attributes.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given updater is not a function.\n   */\n  updateAttributes(updater) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateAttributes: provided updater is not a function.'\n      );\n\n    this._attributes = updater(this._attributes);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'update',\n      attributes: this._attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method used to update each node's attributes using the given function.\n   *\n   * @param {function}  updater - Updater function to use.\n   * @param {object}    [hints] - Optional hints.\n   */\n  updateEachNodeAttributes(updater, hints) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachNodeAttributes: expecting an updater function.'\n      );\n\n    if (hints && !validateHints(hints))\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      nodeData.attributes = updater(nodeData.key, nodeData.attributes);\n    }\n\n    this.emit('eachNodeAttributesUpdated', {\n      hints: hints ? hints : null\n    });\n  }\n\n  /**\n   * Method used to update each edge's attributes using the given function.\n   *\n   * @param {function}  updater - Updater function to use.\n   * @param {object}    [hints] - Optional hints.\n   */\n  updateEachEdgeAttributes(updater, hints) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachEdgeAttributes: expecting an updater function.'\n      );\n\n    if (hints && !validateHints(hints))\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}'\n      );\n\n    const iterator = this._edges.values();\n\n    let step, edgeData, sourceData, targetData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      edgeData = step.value;\n      sourceData = edgeData.source;\n      targetData = edgeData.target;\n\n      edgeData.attributes = updater(\n        edgeData.key,\n        edgeData.attributes,\n        sourceData.key,\n        targetData.key,\n        sourceData.attributes,\n        targetData.attributes,\n        edgeData.undirected\n      );\n    }\n\n    this.emit('eachEdgeAttributesUpdated', {\n      hints: hints ? hints : null\n    });\n  }\n\n  /**---------------------------------------------------------------------------\n   * Iteration-related methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method iterating over the graph's adjacency using the given callback.\n   *\n   * @param  {function}  callback - Callback to use.\n   */\n  forEachAdjacencyEntry(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAdjacencyEntry: expecting a callback.'\n      );\n\n    forEachAdjacency(false, false, false, this, callback);\n  }\n  forEachAdjacencyEntryWithOrphans(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.'\n      );\n\n    forEachAdjacency(false, false, true, this, callback);\n  }\n\n  /**\n   * Method iterating over the graph's assymetric adjacency using the given callback.\n   *\n   * @param  {function}  callback - Callback to use.\n   */\n  forEachAssymetricAdjacencyEntry(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAssymetricAdjacencyEntry: expecting a callback.'\n      );\n\n    forEachAdjacency(false, true, false, this, callback);\n  }\n  forEachAssymetricAdjacencyEntryWithOrphans(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.'\n      );\n\n    forEachAdjacency(false, true, true, this, callback);\n  }\n\n  /**\n   * Method returning the list of the graph's nodes.\n   *\n   * @return {array} - The nodes.\n   */\n  nodes() {\n    if (typeof Array.from === 'function') return Array.from(this._nodes.keys());\n\n    return take(this._nodes.keys(), this._nodes.size);\n  }\n\n  /**\n   * Method iterating over the graph's nodes using the given callback.\n   *\n   * @param  {function}  callback - Callback (key, attributes, index).\n   */\n  forEachNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      callback(nodeData.key, nodeData.attributes);\n    }\n  }\n\n  /**\n   * Method iterating attempting to find a node matching the given predicate\n   * function.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  findNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.findNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes)) return nodeData.key;\n    }\n\n    return;\n  }\n\n  /**\n   * Method mapping nodes.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  mapNodes(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.mapNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    const result = new Array(this.order);\n    let i = 0;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      result[i++] = callback(nodeData.key, nodeData.attributes);\n    }\n\n    return result;\n  }\n\n  /**\n   * Method returning whether some node verify the given predicate.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  someNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.someNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes)) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether all node verify the given predicate.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  everyNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.everyNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (!callback(nodeData.key, nodeData.attributes)) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Method filtering nodes.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  filterNodes(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.filterNodes: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    const result = [];\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes))\n        result.push(nodeData.key);\n    }\n\n    return result;\n  }\n\n  /**\n   * Method reducing nodes.\n   *\n   * @param  {function}  callback - Callback (accumulator, key, attributes).\n   */\n  reduceNodes(callback, initialValue) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.reduceNodes: expecting a callback.'\n      );\n\n    if (arguments.length < 2)\n      throw new InvalidArgumentsGraphError(\n        'Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.'\n      );\n\n    let accumulator = initialValue;\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      accumulator = callback(accumulator, nodeData.key, nodeData.attributes);\n    }\n\n    return accumulator;\n  }\n\n  /**\n   * Method returning an iterator over the graph's node entries.\n   *\n   * @return {Iterator}\n   */\n  nodeEntries() {\n    const iterator = this._nodes.values();\n\n    return new Iterator(() => {\n      const step = iterator.next();\n\n      if (step.done) return step;\n\n      const data = step.value;\n\n      return {\n        value: {node: data.key, attributes: data.attributes},\n        done: false\n      };\n    });\n  }\n\n  /**---------------------------------------------------------------------------\n   * Serialization\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used to export the whole graph.\n   *\n   * @return {object} - The serialized graph.\n   */\n  export() {\n    const nodes = new Array(this._nodes.size);\n\n    let i = 0;\n\n    this._nodes.forEach((data, key) => {\n      nodes[i++] = serializeNode(key, data);\n    });\n\n    const edges = new Array(this._edges.size);\n\n    i = 0;\n\n    this._edges.forEach((data, key) => {\n      edges[i++] = serializeEdge(this.type, key, data);\n    });\n\n    return {\n      options: {\n        type: this.type,\n        multi: this.multi,\n        allowSelfLoops: this.allowSelfLoops\n      },\n      attributes: this.getAttributes(),\n      nodes,\n      edges\n    };\n  }\n\n  /**\n   * Method used to import a serialized graph.\n   *\n   * @param  {object|Graph} data  - The serialized graph.\n   * @param  {boolean}      merge - Whether to merge data.\n   * @return {Graph}              - Returns itself for chaining.\n   */\n  import(data, merge = false) {\n    // Importing a Graph instance directly\n    if (data instanceof Graph) {\n      // Nodes\n      data.forEachNode((n, a) => {\n        if (merge) this.mergeNode(n, a);\n        else this.addNode(n, a);\n      });\n\n      // Edges\n      data.forEachEdge((e, a, s, t, _sa, _ta, u) => {\n        if (merge) {\n          if (u) this.mergeUndirectedEdgeWithKey(e, s, t, a);\n          else this.mergeDirectedEdgeWithKey(e, s, t, a);\n        } else {\n          if (u) this.addUndirectedEdgeWithKey(e, s, t, a);\n          else this.addDirectedEdgeWithKey(e, s, t, a);\n        }\n      });\n\n      return this;\n    }\n\n    // Importing a serialized graph\n    if (!isPlainObject(data))\n      throw new InvalidArgumentsGraphError(\n        'Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.'\n      );\n\n    if (data.attributes) {\n      if (!isPlainObject(data.attributes))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid attributes. Expecting a plain object.'\n        );\n\n      if (merge) this.mergeAttributes(data.attributes);\n      else this.replaceAttributes(data.attributes);\n    }\n\n    let i, l, list, node, edge;\n\n    if (data.nodes) {\n      list = data.nodes;\n\n      if (!Array.isArray(list))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid nodes. Expecting an array.'\n        );\n\n      for (i = 0, l = list.length; i < l; i++) {\n        node = list[i];\n\n        // Validating\n        validateSerializedNode(node);\n\n        // Adding the node\n        const {key, attributes} = node;\n\n        if (merge) this.mergeNode(key, attributes);\n        else this.addNode(key, attributes);\n      }\n    }\n\n    if (data.edges) {\n      let undirectedByDefault = false;\n\n      if (this.type === 'undirected') {\n        undirectedByDefault = true;\n      }\n\n      list = data.edges;\n\n      if (!Array.isArray(list))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid edges. Expecting an array.'\n        );\n\n      for (i = 0, l = list.length; i < l; i++) {\n        edge = list[i];\n\n        // Validating\n        validateSerializedEdge(edge);\n\n        // Adding the edge\n        const {\n          source,\n          target,\n          attributes,\n          undirected = undirectedByDefault\n        } = edge;\n\n        let method;\n\n        if ('key' in edge) {\n          method = merge\n            ? undirected\n              ? this.mergeUndirectedEdgeWithKey\n              : this.mergeDirectedEdgeWithKey\n            : undirected\n            ? this.addUndirectedEdgeWithKey\n            : this.addDirectedEdgeWithKey;\n\n          method.call(this, edge.key, source, target, attributes);\n        } else {\n          method = merge\n            ? undirected\n              ? this.mergeUndirectedEdge\n              : this.mergeDirectedEdge\n            : undirected\n            ? this.addUndirectedEdge\n            : this.addDirectedEdge;\n\n          method.call(this, source, target, attributes);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Utils\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning a null copy of the graph, i.e. a graph without nodes\n   * & edges but with the exact same options.\n   *\n   * @param  {object} options - Options to merge with the current ones.\n   * @return {Graph}          - The null copy.\n   */\n  nullCopy(options) {\n    const graph = new Graph(assign({}, this._options, options));\n    graph.replaceAttributes(assign({}, this.getAttributes()));\n    return graph;\n  }\n\n  /**\n   * Method returning an empty copy of the graph, i.e. a graph without edges but\n   * with the exact same options.\n   *\n   * @param  {object} options - Options to merge with the current ones.\n   * @return {Graph}          - The empty copy.\n   */\n  emptyCopy(options) {\n    const graph = this.nullCopy(options);\n\n    this._nodes.forEach((nodeData, key) => {\n      const attributes = assign({}, nodeData.attributes);\n\n      // NOTE: no need to emit events since user cannot access the instance yet\n      nodeData = new graph.NodeDataClass(key, attributes);\n      graph._nodes.set(key, nodeData);\n    });\n\n    return graph;\n  }\n\n  /**\n   * Method returning an exact copy of the graph.\n   *\n   * @param  {object} options - Upgrade options.\n   * @return {Graph}          - The copy.\n   */\n  copy(options) {\n    options = options || {};\n\n    if (\n      typeof options.type === 'string' &&\n      options.type !== this.type &&\n      options.type !== 'mixed'\n    )\n      throw new UsageGraphError(\n        `Graph.copy: cannot create an incompatible copy from \"${this.type}\" type to \"${options.type}\" because this would mean losing information about the current graph.`\n      );\n\n    if (\n      typeof options.multi === 'boolean' &&\n      options.multi !== this.multi &&\n      options.multi !== true\n    )\n      throw new UsageGraphError(\n        'Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.'\n      );\n\n    if (\n      typeof options.allowSelfLoops === 'boolean' &&\n      options.allowSelfLoops !== this.allowSelfLoops &&\n      options.allowSelfLoops !== true\n    )\n      throw new UsageGraphError(\n        'Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.'\n      );\n\n    const graph = this.emptyCopy(options);\n\n    const iterator = this._edges.values();\n\n    let step, edgeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      edgeData = step.value;\n\n      // NOTE: no need to emit events since user cannot access the instance yet\n      addEdge(\n        graph,\n        'copy',\n        false,\n        edgeData.undirected,\n        edgeData.key,\n        edgeData.source.key,\n        edgeData.target.key,\n        assign({}, edgeData.attributes)\n      );\n    }\n\n    return graph;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Known methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used by JavaScript to perform JSON serialization.\n   *\n   * @return {object} - The serialized graph.\n   */\n  toJSON() {\n    return this.export();\n  }\n\n  /**\n   * Method returning [object Graph].\n   */\n  toString() {\n    return '[object Graph]';\n  }\n\n  /**\n   * Method used internally by node's console to display a custom object.\n   *\n   * @return {object} - Formatted object representation of the graph.\n   */\n  inspect() {\n    const nodes = {};\n    this._nodes.forEach((data, key) => {\n      nodes[key] = data.attributes;\n    });\n\n    const edges = {},\n      multiIndex = {};\n\n    this._edges.forEach((data, key) => {\n      const direction = data.undirected ? '--' : '->';\n\n      let label = '';\n\n      let source = data.source.key;\n      let target = data.target.key;\n      let tmp;\n\n      if (data.undirected && source > target) {\n        tmp = source;\n        source = target;\n        target = tmp;\n      }\n\n      const desc = `(${source})${direction}(${target})`;\n\n      if (!key.startsWith('geid_')) {\n        label += `[${key}]: `;\n      } else if (this.multi) {\n        if (typeof multiIndex[desc] === 'undefined') {\n          multiIndex[desc] = 0;\n        } else {\n          multiIndex[desc]++;\n        }\n\n        label += `${multiIndex[desc]}. `;\n      }\n\n      label += desc;\n\n      edges[label] = data.attributes;\n    });\n\n    const dummy = {};\n\n    for (const k in this) {\n      if (\n        this.hasOwnProperty(k) &&\n        !EMITTER_PROPS.has(k) &&\n        typeof this[k] !== 'function' &&\n        typeof k !== 'symbol'\n      )\n        dummy[k] = this[k];\n    }\n\n    dummy.attributes = this._attributes;\n    dummy.nodes = nodes;\n    dummy.edges = edges;\n\n    privateProperty(dummy, 'constructor', this.constructor);\n\n    return dummy;\n  }\n}\n\n/**\n * Attaching methods to the prototype.\n *\n * Here, we are attaching a wide variety of methods to the Graph class'\n * prototype when those are very numerous and when their creation is\n * abstracted.\n */\n\n/**\n * Attaching custom inspect method for node >= 10.\n */\nif (typeof Symbol !== 'undefined')\n  Graph.prototype[Symbol.for('nodejs.util.inspect.custom')] =\n    Graph.prototype.inspect;\n\n/**\n * Related to edge addition.\n */\nEDGE_ADD_METHODS.forEach(method => {\n  ['add', 'merge', 'update'].forEach(verb => {\n    const name = method.name(verb);\n    const fn = verb === 'add' ? addEdge : mergeEdge;\n\n    if (method.generateKey) {\n      Graph.prototype[name] = function (source, target, attributes) {\n        return fn(\n          this,\n          name,\n          true,\n          (method.type || this.type) === 'undirected',\n          null,\n          source,\n          target,\n          attributes,\n          verb === 'update'\n        );\n      };\n    } else {\n      Graph.prototype[name] = function (edge, source, target, attributes) {\n        return fn(\n          this,\n          name,\n          false,\n          (method.type || this.type) === 'undirected',\n          edge,\n          source,\n          target,\n          attributes,\n          verb === 'update'\n        );\n      };\n    }\n  });\n});\n\n/**\n * Attributes-related.\n */\nattachNodeAttributesMethods(Graph);\nattachEdgeAttributesMethods(Graph);\n\n/**\n * Edge iteration-related.\n */\nattachEdgeIterationMethods(Graph);\n\n/**\n * Neighbor iteration-related.\n */\nattachNeighborIterationMethods(Graph);\n","/**\n * Graphology Helper Classes\n * ==========================\n *\n * Building some higher-order classes instantiating the graph with\n * predefinite options.\n */\nimport {assign} from './utils';\nimport Graph from './graph';\n\nimport {\n  InvalidArgumentsGraphError,\n  NotFoundGraphError,\n  UsageGraphError\n} from './errors';\n\n/**\n * Alternative constructors.\n */\nclass DirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'directed'}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== false)\n      throw new InvalidArgumentsGraphError(\n        'DirectedGraph.from: inconsistent indication that the graph should be multi in given options!'\n      );\n\n    if (finalOptions.type !== 'directed')\n      throw new InvalidArgumentsGraphError(\n        'DirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass UndirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'undirected'}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== false)\n      throw new InvalidArgumentsGraphError(\n        'UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!'\n      );\n\n    if (finalOptions.type !== 'undirected')\n      throw new InvalidArgumentsGraphError(\n        'UndirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiDirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'directed', multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    if (finalOptions.type !== 'directed')\n      throw new InvalidArgumentsGraphError(\n        'MultiDirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiUndirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'undirected', multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    if (finalOptions.type !== 'undirected')\n      throw new InvalidArgumentsGraphError(\n        'MultiUndirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\n\n/**\n * Attaching static #.from method to each of the constructors.\n */\nfunction attachStaticFromMethod(Class) {\n  /**\n   * Builds a graph from serialized data or another graph's data.\n   *\n   * @param  {Graph|SerializedGraph} data      - Hydratation data.\n   * @param  {object}                [options] - Options.\n   * @return {Class}\n   */\n  Class.from = function (data, options) {\n    // Merging given options with serialized ones\n    const finalOptions = assign({}, data.options, options);\n\n    const instance = new Class(finalOptions);\n    instance.import(data);\n\n    return instance;\n  };\n}\n\nattachStaticFromMethod(Graph);\nattachStaticFromMethod(DirectedGraph);\nattachStaticFromMethod(UndirectedGraph);\nattachStaticFromMethod(MultiGraph);\nattachStaticFromMethod(MultiDirectedGraph);\nattachStaticFromMethod(MultiUndirectedGraph);\n\nGraph.Graph = Graph;\nGraph.DirectedGraph = DirectedGraph;\nGraph.UndirectedGraph = UndirectedGraph;\nGraph.MultiGraph = MultiGraph;\nGraph.MultiDirectedGraph = MultiDirectedGraph;\nGraph.MultiUndirectedGraph = MultiUndirectedGraph;\n\nGraph.InvalidArgumentsGraphError = InvalidArgumentsGraphError;\nGraph.NotFoundGraphError = NotFoundGraphError;\nGraph.UsageGraphError = UsageGraphError;\n\nexport {\n  Graph,\n  DirectedGraph,\n  UndirectedGraph,\n  MultiGraph,\n  MultiDirectedGraph,\n  MultiUndirectedGraph\n};\n","/**\n * Graphology Browser GEXF Endpoint\n * =================================\n *\n * Endpoint gathering both parser & writer for the browser.\n */\nexports.parse = require('./parser.js');\nexports.write = require('../common/writer.js');\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar camera_1 = __importDefault(require(\"./core/camera\"));\nvar mouse_1 = __importDefault(require(\"./core/captors/mouse\"));\nvar quadtree_1 = __importDefault(require(\"./core/quadtree\"));\nvar types_1 = require(\"./types\");\nvar utils_1 = require(\"./utils\");\nvar labels_1 = require(\"./core/labels\");\nvar settings_1 = require(\"./settings\");\nvar touch_1 = __importDefault(require(\"./core/captors/touch\"));\nvar matrices_1 = require(\"./utils/matrices\");\nvar edge_collisions_1 = require(\"./utils/edge-collisions\");\n/**\n * Important functions.\n */\nfunction applyNodeDefaults(settings, key, data) {\n    if (!data.hasOwnProperty(\"x\") || !data.hasOwnProperty(\"y\"))\n        throw new Error(\"Sigma: could not find a valid position (x, y) for node \\\"\".concat(key, \"\\\". All your nodes must have a number \\\"x\\\" and \\\"y\\\". Maybe your forgot to apply a layout or your \\\"nodeReducer\\\" is not returning the correct data?\"));\n    if (!data.color)\n        data.color = settings.defaultNodeColor;\n    if (!data.label && data.label !== \"\")\n        data.label = null;\n    if (data.label !== undefined && data.label !== null)\n        data.label = \"\" + data.label;\n    else\n        data.label = null;\n    if (!data.size)\n        data.size = 2;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n    if (!data.hasOwnProperty(\"highlighted\"))\n        data.highlighted = false;\n    if (!data.hasOwnProperty(\"forceLabel\"))\n        data.forceLabel = false;\n    if (!data.type || data.type === \"\")\n        data.type = settings.defaultNodeType;\n    if (!data.zIndex)\n        data.zIndex = 0;\n    return data;\n}\nfunction applyEdgeDefaults(settings, key, data) {\n    if (!data.color)\n        data.color = settings.defaultEdgeColor;\n    if (!data.label)\n        data.label = \"\";\n    if (!data.size)\n        data.size = 0.5;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n    if (!data.hasOwnProperty(\"forceLabel\"))\n        data.forceLabel = false;\n    if (!data.type || data.type === \"\")\n        data.type = settings.defaultEdgeType;\n    if (!data.zIndex)\n        data.zIndex = 0;\n    return data;\n}\n/**\n * Main class.\n *\n * @constructor\n * @param {Graph}       graph     - Graph to render.\n * @param {HTMLElement} container - DOM container in which to render.\n * @param {object}      settings  - Optional settings.\n */\nvar Sigma = /** @class */ (function (_super) {\n    __extends(Sigma, _super);\n    function Sigma(graph, container, settings) {\n        if (settings === void 0) { settings = {}; }\n        var _this = _super.call(this) || this;\n        _this.elements = {};\n        _this.canvasContexts = {};\n        _this.webGLContexts = {};\n        _this.activeListeners = {};\n        _this.quadtree = new quadtree_1.default();\n        _this.labelGrid = new labels_1.LabelGrid();\n        _this.nodeDataCache = {};\n        _this.edgeDataCache = {};\n        _this.nodesWithForcedLabels = [];\n        _this.edgesWithForcedLabels = [];\n        _this.nodeExtent = { x: [0, 1], y: [0, 1] };\n        _this.matrix = (0, matrices_1.identity)();\n        _this.invMatrix = (0, matrices_1.identity)();\n        _this.correctionRatio = 1;\n        _this.customBBox = null;\n        _this.normalizationFunction = (0, utils_1.createNormalizationFunction)({\n            x: [0, 1],\n            y: [0, 1],\n        });\n        // Cache:\n        _this.cameraSizeRatio = 1;\n        // Starting dimensions and pixel ratio\n        _this.width = 0;\n        _this.height = 0;\n        _this.pixelRatio = (0, utils_1.getPixelRatio)();\n        // State\n        _this.displayedLabels = new Set();\n        _this.highlightedNodes = new Set();\n        _this.hoveredNode = null;\n        _this.hoveredEdge = null;\n        _this.renderFrame = null;\n        _this.renderHighlightedNodesFrame = null;\n        _this.needToProcess = false;\n        _this.needToSoftProcess = false;\n        _this.checkEdgesEventsFrame = null;\n        // Programs\n        _this.nodePrograms = {};\n        _this.hoverNodePrograms = {};\n        _this.edgePrograms = {};\n        _this.settings = (0, utils_1.assign)({}, settings_1.DEFAULT_SETTINGS, settings);\n        // Validating\n        (0, settings_1.validateSettings)(_this.settings);\n        (0, utils_1.validateGraph)(graph);\n        if (!(container instanceof HTMLElement))\n            throw new Error(\"Sigma: container should be an html element.\");\n        // Properties\n        _this.graph = graph;\n        _this.container = container;\n        // Initializing contexts\n        _this.createWebGLContext(\"edges\", { preserveDrawingBuffer: true });\n        _this.createCanvasContext(\"edgeLabels\");\n        _this.createWebGLContext(\"nodes\");\n        _this.createCanvasContext(\"labels\");\n        _this.createCanvasContext(\"hovers\");\n        _this.createWebGLContext(\"hoverNodes\");\n        _this.createCanvasContext(\"mouse\");\n        // Blending\n        for (var key in _this.webGLContexts) {\n            var gl = _this.webGLContexts[key];\n            gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n            gl.enable(gl.BLEND);\n        }\n        // Loading programs\n        for (var type in _this.settings.nodeProgramClasses) {\n            var NodeProgramClass = _this.settings.nodeProgramClasses[type];\n            _this.nodePrograms[type] = new NodeProgramClass(_this.webGLContexts.nodes, _this);\n            _this.hoverNodePrograms[type] = new NodeProgramClass(_this.webGLContexts.hoverNodes, _this);\n        }\n        for (var type in _this.settings.edgeProgramClasses) {\n            var EdgeProgramClass = _this.settings.edgeProgramClasses[type];\n            _this.edgePrograms[type] = new EdgeProgramClass(_this.webGLContexts.edges, _this);\n        }\n        // Initial resize\n        _this.resize();\n        // Initializing the camera\n        _this.camera = new camera_1.default();\n        // Binding camera events\n        _this.bindCameraHandlers();\n        // Initializing captors\n        _this.mouseCaptor = new mouse_1.default(_this.elements.mouse, _this);\n        _this.touchCaptor = new touch_1.default(_this.elements.mouse, _this);\n        // Binding event handlers\n        _this.bindEventHandlers();\n        // Binding graph handlers\n        _this.bindGraphHandlers();\n        // Trigger eventual settings-related things\n        _this.handleSettingsUpdate();\n        // Processing data for the first time & render\n        _this.process();\n        _this.render();\n        return _this;\n    }\n    /**---------------------------------------------------------------------------\n     * Internal methods.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Internal function used to create a canvas element.\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvas = function (id) {\n        var canvas = (0, utils_1.createElement)(\"canvas\", {\n            position: \"absolute\",\n        }, {\n            class: \"sigma-\".concat(id),\n        });\n        this.elements[id] = canvas;\n        this.container.appendChild(canvas);\n        return canvas;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvasContext = function (id) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = {\n            preserveDrawingBuffer: false,\n            antialias: false,\n        };\n        this.canvasContexts[id] = canvas.getContext(\"2d\", contextOptions);\n        return this;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string}  id      - Context's id.\n     * @param  {object?} options - #getContext params to override (optional)\n     * @return {Sigma}\n     */\n    Sigma.prototype.createWebGLContext = function (id, options) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = __assign({ preserveDrawingBuffer: false, antialias: false }, (options || {}));\n        var context;\n        // First we try webgl2 for an easy performance boost\n        context = canvas.getContext(\"webgl2\", contextOptions);\n        // Else we fall back to webgl\n        if (!context)\n            context = canvas.getContext(\"webgl\", contextOptions);\n        // Edge, I am looking right at you...\n        if (!context)\n            context = canvas.getContext(\"experimental-webgl\", contextOptions);\n        this.webGLContexts[id] = context;\n        return this;\n    };\n    /**\n     * Method binding camera handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindCameraHandlers = function () {\n        var _this = this;\n        this.activeListeners.camera = function () {\n            _this._scheduleRefresh();\n        };\n        this.camera.on(\"updated\", this.activeListeners.camera);\n        return this;\n    };\n    /**\n     * Method that checks whether or not a node collides with a given position.\n     */\n    Sigma.prototype.mouseIsOnNode = function (_a, _b, size) {\n        var x = _a.x, y = _a.y;\n        var nodeX = _b.x, nodeY = _b.y;\n        return (x > nodeX - size &&\n            x < nodeX + size &&\n            y > nodeY - size &&\n            y < nodeY + size &&\n            Math.sqrt(Math.pow(x - nodeX, 2) + Math.pow(y - nodeY, 2)) < size);\n    };\n    /**\n     * Method that returns all nodes in quad at a given position.\n     */\n    Sigma.prototype.getQuadNodes = function (position) {\n        var mouseGraphPosition = this.viewportToFramedGraph(position);\n        return this.quadtree.point(mouseGraphPosition.x, 1 - mouseGraphPosition.y);\n    };\n    /**\n     * Method that returns the closest node to a given position.\n     */\n    Sigma.prototype.getNodeAtPosition = function (position) {\n        var x = position.x, y = position.y;\n        var quadNodes = this.getQuadNodes(position);\n        // We will hover the node whose center is closest to mouse\n        var minDistance = Infinity, nodeAtPosition = null;\n        for (var i = 0, l = quadNodes.length; i < l; i++) {\n            var node = quadNodes[i];\n            var data = this.nodeDataCache[node];\n            var nodePosition = this.framedGraphToViewport(data);\n            var size = this.scaleSize(data.size);\n            if (!data.hidden && this.mouseIsOnNode(position, nodePosition, size)) {\n                var distance = Math.sqrt(Math.pow(x - nodePosition.x, 2) + Math.pow(y - nodePosition.y, 2));\n                // TODO: sort by min size also for cases where center is the same\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    nodeAtPosition = node;\n                }\n            }\n        }\n        return nodeAtPosition;\n    };\n    /**\n     * Method binding event handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindEventHandlers = function () {\n        var _this = this;\n        // Handling window resize\n        this.activeListeners.handleResize = function () {\n            _this.needToSoftProcess = true;\n            _this._scheduleRefresh();\n        };\n        window.addEventListener(\"resize\", this.activeListeners.handleResize);\n        // Handling mouse move\n        this.activeListeners.handleMove = function (e) {\n            var baseEvent = {\n                event: e,\n                preventSigmaDefault: function () {\n                    e.preventSigmaDefault();\n                },\n            };\n            var nodeToHover = _this.getNodeAtPosition(e);\n            if (nodeToHover && _this.hoveredNode !== nodeToHover && !_this.nodeDataCache[nodeToHover].hidden) {\n                // Handling passing from one node to the other directly\n                if (_this.hoveredNode)\n                    _this.emit(\"leaveNode\", __assign(__assign({}, baseEvent), { node: _this.hoveredNode }));\n                _this.hoveredNode = nodeToHover;\n                _this.emit(\"enterNode\", __assign(__assign({}, baseEvent), { node: nodeToHover }));\n                _this.scheduleHighlightedNodesRender();\n                return;\n            }\n            // Checking if the hovered node is still hovered\n            if (_this.hoveredNode) {\n                var data = _this.nodeDataCache[_this.hoveredNode];\n                var pos = _this.framedGraphToViewport(data);\n                var size = _this.scaleSize(data.size);\n                if (!_this.mouseIsOnNode(e, pos, size)) {\n                    var node = _this.hoveredNode;\n                    _this.hoveredNode = null;\n                    _this.emit(\"leaveNode\", __assign(__assign({}, baseEvent), { node: node }));\n                    _this.scheduleHighlightedNodesRender();\n                    return;\n                }\n            }\n            if (_this.settings.enableEdgeHoverEvents === true) {\n                _this.checkEdgeHoverEvents(baseEvent);\n            }\n            else if (_this.settings.enableEdgeHoverEvents === \"debounce\") {\n                if (!_this.checkEdgesEventsFrame)\n                    _this.checkEdgesEventsFrame = (0, utils_1.requestFrame)(function () {\n                        _this.checkEdgeHoverEvents(baseEvent);\n                        _this.checkEdgesEventsFrame = null;\n                    });\n            }\n        };\n        // Handling click\n        var createMouseListener = function (eventType) {\n            return function (e) {\n                var baseEvent = {\n                    event: e,\n                    preventSigmaDefault: function () {\n                        e.preventSigmaDefault();\n                    },\n                };\n                var isFakeSigmaMouseEvent = e.original.isFakeSigmaMouseEvent;\n                var nodeAtPosition = isFakeSigmaMouseEvent ? _this.getNodeAtPosition(e) : _this.hoveredNode;\n                if (nodeAtPosition)\n                    return _this.emit(\"\".concat(eventType, \"Node\"), __assign(__assign({}, baseEvent), { node: nodeAtPosition }));\n                if (eventType === \"wheel\" ? _this.settings.enableEdgeWheelEvents : _this.settings.enableEdgeClickEvents) {\n                    var edge = _this.getEdgeAtPoint(e.x, e.y);\n                    if (edge)\n                        return _this.emit(\"\".concat(eventType, \"Edge\"), __assign(__assign({}, baseEvent), { edge: edge }));\n                }\n                return _this.emit(\"\".concat(eventType, \"Stage\"), baseEvent);\n            };\n        };\n        this.activeListeners.handleClick = createMouseListener(\"click\");\n        this.activeListeners.handleRightClick = createMouseListener(\"rightClick\");\n        this.activeListeners.handleDoubleClick = createMouseListener(\"doubleClick\");\n        this.activeListeners.handleWheel = createMouseListener(\"wheel\");\n        this.activeListeners.handleDown = createMouseListener(\"down\");\n        this.mouseCaptor.on(\"mousemove\", this.activeListeners.handleMove);\n        this.mouseCaptor.on(\"click\", this.activeListeners.handleClick);\n        this.mouseCaptor.on(\"rightClick\", this.activeListeners.handleRightClick);\n        this.mouseCaptor.on(\"doubleClick\", this.activeListeners.handleDoubleClick);\n        this.mouseCaptor.on(\"wheel\", this.activeListeners.handleWheel);\n        this.mouseCaptor.on(\"mousedown\", this.activeListeners.handleDown);\n        // TODO\n        // Deal with Touch captor events\n        return this;\n    };\n    /**\n     * Method binding graph handlers\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindGraphHandlers = function () {\n        var _this = this;\n        var graph = this.graph;\n        this.activeListeners.graphUpdate = function () {\n            _this.needToProcess = true;\n            _this._scheduleRefresh();\n        };\n        this.activeListeners.softGraphUpdate = function () {\n            _this.needToSoftProcess = true;\n            _this._scheduleRefresh();\n        };\n        this.activeListeners.dropNodeGraphUpdate = function (e) {\n            delete _this.nodeDataCache[e.key];\n            if (_this.hoveredNode === e.key)\n                _this.hoveredNode = null;\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.dropEdgeGraphUpdate = function (e) {\n            delete _this.edgeDataCache[e.key];\n            if (_this.hoveredEdge === e.key)\n                _this.hoveredEdge = null;\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.clearEdgesGraphUpdate = function () {\n            _this.edgeDataCache = {};\n            _this.hoveredEdge = null;\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.clearGraphUpdate = function () {\n            _this.nodeDataCache = {};\n            _this.hoveredNode = null;\n            _this.activeListeners.clearEdgesGraphUpdate();\n        };\n        graph.on(\"nodeAdded\", this.activeListeners.graphUpdate);\n        graph.on(\"nodeDropped\", this.activeListeners.dropNodeGraphUpdate);\n        graph.on(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeAdded\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeDropped\", this.activeListeners.dropEdgeGraphUpdate);\n        graph.on(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgesCleared\", this.activeListeners.clearEdgesGraphUpdate);\n        graph.on(\"cleared\", this.activeListeners.clearGraphUpdate);\n        return this;\n    };\n    /**\n     * Method dealing with \"leaveEdge\" and \"enterEdge\" events.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.checkEdgeHoverEvents = function (payload) {\n        var edgeToHover = this.hoveredNode ? null : this.getEdgeAtPoint(payload.event.x, payload.event.y);\n        if (edgeToHover !== this.hoveredEdge) {\n            if (this.hoveredEdge)\n                this.emit(\"leaveEdge\", __assign(__assign({}, payload), { edge: this.hoveredEdge }));\n            if (edgeToHover)\n                this.emit(\"enterEdge\", __assign(__assign({}, payload), { edge: edgeToHover }));\n            this.hoveredEdge = edgeToHover;\n        }\n        return this;\n    };\n    /**\n     * Method looking for an edge colliding with a given point at (x, y). Returns\n     * the key of the edge if any, or null else.\n     */\n    Sigma.prototype.getEdgeAtPoint = function (x, y) {\n        var e_1, _a;\n        var _this = this;\n        var _b = this, edgeDataCache = _b.edgeDataCache, nodeDataCache = _b.nodeDataCache;\n        // Check first that pixel is colored:\n        // Note that mouse positions must be corrected by pixel ratio to correctly\n        // index the drawing buffer.\n        if (!(0, edge_collisions_1.isPixelColored)(this.webGLContexts.edges, x * this.pixelRatio, y * this.pixelRatio))\n            return null;\n        // Check for each edge if it collides with the point:\n        var _c = this.viewportToGraph({ x: x, y: y }), graphX = _c.x, graphY = _c.y;\n        // To translate edge thicknesses to the graph system, we observe by how much\n        // the length of a non-null edge is transformed to between the graph system\n        // and the viewport system:\n        var transformationRatio = 0;\n        this.graph.someEdge(function (key, _, sourceId, targetId, _a, _b) {\n            var xs = _a.x, ys = _a.y;\n            var xt = _b.x, yt = _b.y;\n            if (edgeDataCache[key].hidden || nodeDataCache[sourceId].hidden || nodeDataCache[targetId].hidden)\n                return false;\n            if (xs !== xt || ys !== yt) {\n                var graphLength = Math.sqrt(Math.pow(xt - xs, 2) + Math.pow(yt - ys, 2));\n                var _c = _this.graphToViewport({ x: xs, y: ys }), vp_xs = _c.x, vp_ys = _c.y;\n                var _d = _this.graphToViewport({ x: xt, y: yt }), vp_xt = _d.x, vp_yt = _d.y;\n                var viewportLength = Math.sqrt(Math.pow(vp_xt - vp_xs, 2) + Math.pow(vp_yt - vp_ys, 2));\n                transformationRatio = graphLength / viewportLength;\n                return true;\n            }\n        });\n        // If no non-null edge has been found, return null:\n        if (!transformationRatio)\n            return null;\n        // Now we can look for matching edges:\n        var edges = this.graph.filterEdges(function (key, edgeAttributes, sourceId, targetId, sourcePosition, targetPosition) {\n            if (edgeDataCache[key].hidden || nodeDataCache[sourceId].hidden || nodeDataCache[targetId].hidden)\n                return false;\n            if ((0, edge_collisions_1.doEdgeCollideWithPoint)(graphX, graphY, sourcePosition.x, sourcePosition.y, targetPosition.x, targetPosition.y, \n            // Adapt the edge size to the zoom ratio:\n            (edgeDataCache[key].size * transformationRatio) / _this.cameraSizeRatio)) {\n                return true;\n            }\n        });\n        if (edges.length === 0)\n            return null; // no edges found\n        // if none of the edges have a zIndex, selected the most recently created one to match the rendering order\n        var selectedEdge = edges[edges.length - 1];\n        // otherwise select edge with highest zIndex\n        var highestZIndex = -Infinity;\n        try {\n            for (var edges_1 = __values(edges), edges_1_1 = edges_1.next(); !edges_1_1.done; edges_1_1 = edges_1.next()) {\n                var edge = edges_1_1.value;\n                var zIndex = this.graph.getEdgeAttribute(edge, \"zIndex\");\n                if (zIndex >= highestZIndex) {\n                    selectedEdge = edge;\n                    highestZIndex = zIndex;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (edges_1_1 && !edges_1_1.done && (_a = edges_1.return)) _a.call(edges_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return selectedEdge;\n    };\n    /**\n     * Method used to process the whole graph's data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.process = function (keepArrays) {\n        var _this = this;\n        if (keepArrays === void 0) { keepArrays = false; }\n        var graph = this.graph;\n        var settings = this.settings;\n        var dimensions = this.getDimensions();\n        var nodeZExtent = [Infinity, -Infinity];\n        var edgeZExtent = [Infinity, -Infinity];\n        // Clearing the quad\n        this.quadtree.clear();\n        // Resetting the label grid\n        // TODO: it's probably better to do this explicitly or on resizes for layout and anims\n        this.labelGrid.resizeAndClear(dimensions, settings.labelGridCellSize);\n        // Clear the highlightedNodes\n        this.highlightedNodes = new Set();\n        // Computing extents\n        this.nodeExtent = (0, utils_1.graphExtent)(graph);\n        // Resetting `forceLabel` indices\n        this.nodesWithForcedLabels = [];\n        this.edgesWithForcedLabels = [];\n        // NOTE: it is important to compute this matrix after computing the node's extent\n        // because #.getGraphDimensions relies on it\n        var nullCamera = new camera_1.default();\n        var nullCameraMatrix = (0, utils_1.matrixFromCamera)(nullCamera.getState(), this.getDimensions(), this.getGraphDimensions(), this.getSetting(\"stagePadding\") || 0);\n        // Rescaling function\n        this.normalizationFunction = (0, utils_1.createNormalizationFunction)(this.customBBox || this.nodeExtent);\n        var nodesPerPrograms = {};\n        var nodes = graph.nodes();\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            var node = nodes[i];\n            // Node display data resolution:\n            //   1. First we get the node's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            //   4. We apply the normalization function\n            // We shallow copy node data to avoid dangerous behaviors from reducers\n            var attr = Object.assign({}, graph.getNodeAttributes(node));\n            if (settings.nodeReducer)\n                attr = settings.nodeReducer(node, attr);\n            var data = applyNodeDefaults(this.settings, node, attr);\n            nodesPerPrograms[data.type] = (nodesPerPrograms[data.type] || 0) + 1;\n            this.nodeDataCache[node] = data;\n            this.normalizationFunction.applyTo(data);\n            if (data.forceLabel)\n                this.nodesWithForcedLabels.push(node);\n            if (this.settings.zIndex) {\n                if (data.zIndex < nodeZExtent[0])\n                    nodeZExtent[0] = data.zIndex;\n                if (data.zIndex > nodeZExtent[1])\n                    nodeZExtent[1] = data.zIndex;\n            }\n        }\n        for (var type in this.nodePrograms) {\n            if (!this.nodePrograms.hasOwnProperty(type)) {\n                throw new Error(\"Sigma: could not find a suitable program for node type \\\"\".concat(type, \"\\\"!\"));\n            }\n            if (!keepArrays)\n                this.nodePrograms[type].allocate(nodesPerPrograms[type] || 0);\n            // We reset that count here, so that we can reuse it while calling the Program#process methods:\n            nodesPerPrograms[type] = 0;\n        }\n        // Handling node z-index\n        // TODO: z-index needs us to compute display data before hand\n        if (this.settings.zIndex && nodeZExtent[0] !== nodeZExtent[1])\n            nodes = (0, utils_1.zIndexOrdering)(nodeZExtent, function (node) { return _this.nodeDataCache[node].zIndex; }, nodes);\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            var node = nodes[i];\n            var data = this.nodeDataCache[node];\n            this.quadtree.add(node, data.x, 1 - data.y, data.size / this.width);\n            if (typeof data.label === \"string\" && !data.hidden)\n                this.labelGrid.add(node, data.size, this.framedGraphToViewport(data, { matrix: nullCameraMatrix }));\n            this.nodePrograms[data.type].process(data, data.hidden, nodesPerPrograms[data.type]++);\n            // Save the node in the highlighted set if needed\n            if (data.highlighted && !data.hidden)\n                this.highlightedNodes.add(node);\n        }\n        this.labelGrid.organize();\n        var edgesPerPrograms = {};\n        var edges = graph.edges();\n        for (var i = 0, l = edges.length; i < l; i++) {\n            var edge = edges[i];\n            // Edge display data resolution:\n            //   1. First we get the edge's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            // We shallow copy edge data to avoid dangerous behaviors from reducers\n            var attr = Object.assign({}, graph.getEdgeAttributes(edge));\n            if (settings.edgeReducer)\n                attr = settings.edgeReducer(edge, attr);\n            var data = applyEdgeDefaults(this.settings, edge, attr);\n            edgesPerPrograms[data.type] = (edgesPerPrograms[data.type] || 0) + 1;\n            this.edgeDataCache[edge] = data;\n            if (data.forceLabel && !data.hidden)\n                this.edgesWithForcedLabels.push(edge);\n            if (this.settings.zIndex) {\n                if (data.zIndex < edgeZExtent[0])\n                    edgeZExtent[0] = data.zIndex;\n                if (data.zIndex > edgeZExtent[1])\n                    edgeZExtent[1] = data.zIndex;\n            }\n        }\n        for (var type in this.edgePrograms) {\n            if (!this.edgePrograms.hasOwnProperty(type)) {\n                throw new Error(\"Sigma: could not find a suitable program for edge type \\\"\".concat(type, \"\\\"!\"));\n            }\n            if (!keepArrays)\n                this.edgePrograms[type].allocate(edgesPerPrograms[type] || 0);\n            // We reset that count here, so that we can reuse it while calling the Program#process methods:\n            edgesPerPrograms[type] = 0;\n        }\n        // Handling edge z-index\n        if (this.settings.zIndex && edgeZExtent[0] !== edgeZExtent[1])\n            edges = (0, utils_1.zIndexOrdering)(edgeZExtent, function (edge) { return _this.edgeDataCache[edge].zIndex; }, edges);\n        for (var i = 0, l = edges.length; i < l; i++) {\n            var edge = edges[i];\n            var data = this.edgeDataCache[edge];\n            var extremities = graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]];\n            var hidden = data.hidden || sourceData.hidden || targetData.hidden;\n            this.edgePrograms[data.type].process(sourceData, targetData, data, hidden, edgesPerPrograms[data.type]++);\n        }\n        for (var type in this.edgePrograms) {\n            var program = this.edgePrograms[type];\n            if (!keepArrays && typeof program.computeIndices === \"function\")\n                program.computeIndices();\n        }\n        return this;\n    };\n    /**\n     * Method that backports potential settings updates where it's needed.\n     * @private\n     */\n    Sigma.prototype.handleSettingsUpdate = function () {\n        this.camera.minRatio = this.settings.minCameraRatio;\n        this.camera.maxRatio = this.settings.maxCameraRatio;\n        this.camera.setState(this.camera.validateState(this.camera.getState()));\n        return this;\n    };\n    /**\n     * Method that decides whether to reprocess graph or not, and then render the\n     * graph.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype._refresh = function () {\n        // Do we need to process data?\n        if (this.needToProcess) {\n            this.process();\n        }\n        else if (this.needToSoftProcess) {\n            this.process(true);\n        }\n        // Resetting state\n        this.needToProcess = false;\n        this.needToSoftProcess = false;\n        // Rendering\n        this.render();\n        return this;\n    };\n    /**\n     * Method that schedules a `_refresh` call if none has been scheduled yet. It\n     * will then be processed next available frame.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype._scheduleRefresh = function () {\n        var _this = this;\n        if (!this.renderFrame) {\n            this.renderFrame = (0, utils_1.requestFrame)(function () {\n                _this._refresh();\n                _this.renderFrame = null;\n            });\n        }\n        return this;\n    };\n    /**\n     * Method used to render labels.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderLabels = function () {\n        if (!this.settings.renderLabels)\n            return this;\n        var cameraState = this.camera.getState();\n        // Finding visible nodes to display their labels\n        var visibleNodes;\n        if (cameraState.ratio >= 1) {\n            // Camera is unzoomed so no need to ask the quadtree for visible nodes\n            visibleNodes = new Set(this.graph.nodes());\n        }\n        else {\n            // Let's ask the quadtree\n            var viewRectangle = this.viewRectangle();\n            visibleNodes = new Set(this.quadtree.rectangle(viewRectangle.x1, 1 - viewRectangle.y1, viewRectangle.x2, 1 - viewRectangle.y2, viewRectangle.height));\n        }\n        // Selecting labels to draw\n        // TODO: drop gridsettings likewise\n        // TODO: optimize through visible nodes\n        var labelsToDisplay = this.labelGrid\n            .getLabelsToDisplay(cameraState.ratio, this.settings.labelDensity)\n            .concat(this.nodesWithForcedLabels);\n        this.displayedLabels = new Set();\n        // Drawing labels\n        var context = this.canvasContexts.labels;\n        for (var i = 0, l = labelsToDisplay.length; i < l; i++) {\n            var node = labelsToDisplay[i];\n            var data = this.nodeDataCache[node];\n            // If the node was already drawn (like if it is eligible AND has\n            // `forceLabel`), we don't want to draw it again\n            if (this.displayedLabels.has(node))\n                continue;\n            // If the node is hidden, we don't need to display its label obviously\n            if (data.hidden)\n                continue;\n            var _a = this.framedGraphToViewport(data), x = _a.x, y = _a.y;\n            // TODO: we can cache the labels we need to render until the camera's ratio changes\n            // TODO: this should be computed in the canvas components?\n            var size = this.scaleSize(data.size);\n            if (!data.forceLabel && size < this.settings.labelRenderedSizeThreshold)\n                continue;\n            if (!visibleNodes.has(node))\n                continue;\n            // TODO:\n            // Because displayed edge labels depend directly on actually rendered node\n            // labels, we need to only add to this.displayedLabels nodes whose label\n            // is rendered.\n            // This makes this.displayedLabels depend on viewport, which might become\n            // an issue once we start memoizing getLabelsToDisplay.\n            this.displayedLabels.add(node);\n            this.settings.labelRenderer(context, __assign(__assign({ key: node }, data), { size: size, x: x, y: y }), this.settings);\n        }\n        return this;\n    };\n    /**\n     * Method used to render edge labels, based on which node labels were\n     * rendered.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderEdgeLabels = function () {\n        if (!this.settings.renderEdgeLabels)\n            return this;\n        var context = this.canvasContexts.edgeLabels;\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        var edgeLabelsToDisplay = (0, labels_1.edgeLabelsToDisplayFromNodes)({\n            graph: this.graph,\n            hoveredNode: this.hoveredNode,\n            displayedNodeLabels: this.displayedLabels,\n            highlightedNodes: this.highlightedNodes,\n        }).concat(this.edgesWithForcedLabels);\n        var displayedLabels = new Set();\n        for (var i = 0, l = edgeLabelsToDisplay.length; i < l; i++) {\n            var edge = edgeLabelsToDisplay[i], extremities = this.graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]], edgeData = this.edgeDataCache[edge];\n            // If the edge was already drawn (like if it is eligible AND has\n            // `forceLabel`), we don't want to draw it again\n            if (displayedLabels.has(edge))\n                continue;\n            // If the edge is hidden we don't need to display its label\n            // NOTE: the test on sourceData & targetData is probably paranoid at this point?\n            if (edgeData.hidden || sourceData.hidden || targetData.hidden) {\n                continue;\n            }\n            this.settings.edgeLabelRenderer(context, __assign(__assign({ key: edge }, edgeData), { size: this.scaleSize(edgeData.size) }), __assign(__assign(__assign({ key: extremities[0] }, sourceData), this.framedGraphToViewport(sourceData)), { size: this.scaleSize(sourceData.size) }), __assign(__assign(__assign({ key: extremities[1] }, targetData), this.framedGraphToViewport(targetData)), { size: this.scaleSize(targetData.size) }), this.settings);\n            displayedLabels.add(edge);\n        }\n        return this;\n    };\n    /**\n     * Method used to render the highlighted nodes.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderHighlightedNodes = function () {\n        var _this = this;\n        var context = this.canvasContexts.hovers;\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        // Rendering\n        var render = function (node) {\n            var data = _this.nodeDataCache[node];\n            var _a = _this.framedGraphToViewport(data), x = _a.x, y = _a.y;\n            var size = _this.scaleSize(data.size);\n            _this.settings.hoverRenderer(context, __assign(__assign({ key: node }, data), { size: size, x: x, y: y }), _this.settings);\n        };\n        var nodesToRender = [];\n        if (this.hoveredNode && !this.nodeDataCache[this.hoveredNode].hidden) {\n            nodesToRender.push(this.hoveredNode);\n        }\n        this.highlightedNodes.forEach(function (node) {\n            // The hovered node has already been highlighted\n            if (node !== _this.hoveredNode)\n                nodesToRender.push(node);\n        });\n        // Draw labels:\n        nodesToRender.forEach(function (node) { return render(node); });\n        // Draw WebGL nodes on top of the labels:\n        var nodesPerPrograms = {};\n        // 1. Count nodes per type:\n        nodesToRender.forEach(function (node) {\n            var type = _this.nodeDataCache[node].type;\n            nodesPerPrograms[type] = (nodesPerPrograms[type] || 0) + 1;\n        });\n        // 2. Allocate for each type for the proper number of nodes\n        for (var type in this.hoverNodePrograms) {\n            this.hoverNodePrograms[type].allocate(nodesPerPrograms[type] || 0);\n            // Also reset count, to use when rendering:\n            nodesPerPrograms[type] = 0;\n        }\n        // 3. Process all nodes to render:\n        nodesToRender.forEach(function (node) {\n            var data = _this.nodeDataCache[node];\n            _this.hoverNodePrograms[data.type].process(data, data.hidden, nodesPerPrograms[data.type]++);\n        });\n        // 4. Clear hovered nodes layer:\n        this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);\n        // 5. Render:\n        for (var type in this.hoverNodePrograms) {\n            var program = this.hoverNodePrograms[type];\n            program.bind();\n            program.bufferData();\n            program.render({\n                matrix: this.matrix,\n                width: this.width,\n                height: this.height,\n                ratio: this.camera.ratio,\n                correctionRatio: this.correctionRatio / this.camera.ratio,\n                scalingRatio: this.pixelRatio,\n            });\n        }\n    };\n    /**\n     * Method used to schedule a hover render.\n     *\n     */\n    Sigma.prototype.scheduleHighlightedNodesRender = function () {\n        var _this = this;\n        if (this.renderHighlightedNodesFrame || this.renderFrame)\n            return;\n        this.renderHighlightedNodesFrame = (0, utils_1.requestFrame)(function () {\n            // Resetting state\n            _this.renderHighlightedNodesFrame = null;\n            // Rendering\n            _this.renderHighlightedNodes();\n            _this.renderEdgeLabels();\n        });\n    };\n    /**\n     * Method used to render.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.render = function () {\n        var _this = this;\n        this.emit(\"beforeRender\");\n        var handleEscape = function () {\n            _this.emit(\"afterRender\");\n            return _this;\n        };\n        // If a render was scheduled, we cancel it\n        if (this.renderFrame) {\n            (0, utils_1.cancelFrame)(this.renderFrame);\n            this.renderFrame = null;\n            this.needToProcess = false;\n            this.needToSoftProcess = false;\n        }\n        // First we need to resize\n        this.resize();\n        // Clearing the canvases\n        this.clear();\n        // Recomputing useful camera-related values:\n        this.updateCachedValues();\n        // If we have no nodes we can stop right there\n        if (!this.graph.order)\n            return handleEscape();\n        // TODO: improve this heuristic or move to the captor itself?\n        // TODO: deal with the touch captor here as well\n        var mouseCaptor = this.mouseCaptor;\n        var moving = this.camera.isAnimated() ||\n            mouseCaptor.isMoving ||\n            mouseCaptor.draggedEvents ||\n            mouseCaptor.currentWheelDirection;\n        // Then we need to extract a matrix from the camera\n        var cameraState = this.camera.getState();\n        var viewportDimensions = this.getDimensions();\n        var graphDimensions = this.getGraphDimensions();\n        var padding = this.getSetting(\"stagePadding\") || 0;\n        this.matrix = (0, utils_1.matrixFromCamera)(cameraState, viewportDimensions, graphDimensions, padding);\n        this.invMatrix = (0, utils_1.matrixFromCamera)(cameraState, viewportDimensions, graphDimensions, padding, true);\n        this.correctionRatio = (0, utils_1.getMatrixImpact)(this.matrix, cameraState, viewportDimensions);\n        // Drawing nodes\n        for (var type in this.nodePrograms) {\n            var program = this.nodePrograms[type];\n            program.bind();\n            program.bufferData();\n            program.render({\n                matrix: this.matrix,\n                width: this.width,\n                height: this.height,\n                ratio: cameraState.ratio,\n                correctionRatio: this.correctionRatio / cameraState.ratio,\n                scalingRatio: this.pixelRatio,\n            });\n        }\n        // Drawing edges\n        if (!this.settings.hideEdgesOnMove || !moving) {\n            for (var type in this.edgePrograms) {\n                var program = this.edgePrograms[type];\n                program.bind();\n                program.bufferData();\n                program.render({\n                    matrix: this.matrix,\n                    width: this.width,\n                    height: this.height,\n                    ratio: cameraState.ratio,\n                    correctionRatio: this.correctionRatio / cameraState.ratio,\n                    scalingRatio: this.pixelRatio,\n                });\n            }\n        }\n        // Do not display labels on move per setting\n        if (this.settings.hideLabelsOnMove && moving)\n            return handleEscape();\n        this.renderLabels();\n        this.renderEdgeLabels();\n        this.renderHighlightedNodes();\n        return handleEscape();\n    };\n    /**\n     * Internal method used to update expensive and therefore cached values\n     * each time the camera state is updated.\n     */\n    Sigma.prototype.updateCachedValues = function () {\n        var ratio = this.camera.getState().ratio;\n        this.cameraSizeRatio = Math.sqrt(ratio);\n    };\n    /**---------------------------------------------------------------------------\n     * Public API.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Method returning the renderer's camera.\n     *\n     * @return {Camera}\n     */\n    Sigma.prototype.getCamera = function () {\n        return this.camera;\n    };\n    /**\n     * Method returning the container DOM element.\n     *\n     * @return {HTMLElement}\n     */\n    Sigma.prototype.getContainer = function () {\n        return this.container;\n    };\n    /**\n     * Method returning the renderer's graph.\n     *\n     * @return {Graph}\n     */\n    Sigma.prototype.getGraph = function () {\n        return this.graph;\n    };\n    /**\n     * Method returning the mouse captor.\n     *\n     * @return {MouseCaptor}\n     */\n    Sigma.prototype.getMouseCaptor = function () {\n        return this.mouseCaptor;\n    };\n    /**\n     * Method returning the touch captor.\n     *\n     * @return {TouchCaptor}\n     */\n    Sigma.prototype.getTouchCaptor = function () {\n        return this.touchCaptor;\n    };\n    /**\n     * Method returning the current renderer's dimensions.\n     *\n     * @return {Dimensions}\n     */\n    Sigma.prototype.getDimensions = function () {\n        return { width: this.width, height: this.height };\n    };\n    /**\n     * Method returning the current graph's dimensions.\n     *\n     * @return {Dimensions}\n     */\n    Sigma.prototype.getGraphDimensions = function () {\n        var extent = this.customBBox || this.nodeExtent;\n        return {\n            width: extent.x[1] - extent.x[0] || 1,\n            height: extent.y[1] - extent.y[0] || 1,\n        };\n    };\n    /**\n     * Method used to get all the sigma node attributes.\n     * It's usefull for example to get the position of a node\n     * and to get values that are set by the nodeReducer\n     *\n     * @param  {string} key - The node's key.\n     * @return {NodeDisplayData | undefined} A copy of the desired node's attribute or undefined if not found\n     */\n    Sigma.prototype.getNodeDisplayData = function (key) {\n        var node = this.nodeDataCache[key];\n        return node ? Object.assign({}, node) : undefined;\n    };\n    /**\n     * Method used to get all the sigma edge attributes.\n     * It's usefull for example to get values that are set by the edgeReducer.\n     *\n     * @param  {string} key - The edge's key.\n     * @return {EdgeDisplayData | undefined} A copy of the desired edge's attribute or undefined if not found\n     */\n    Sigma.prototype.getEdgeDisplayData = function (key) {\n        var edge = this.edgeDataCache[key];\n        return edge ? Object.assign({}, edge) : undefined;\n    };\n    /**\n     * Method returning a copy of the settings collection.\n     *\n     * @return {Settings} A copy of the settings collection.\n     */\n    Sigma.prototype.getSettings = function () {\n        return __assign({}, this.settings);\n    };\n    /**\n     * Method returning the current value for a given setting key.\n     *\n     * @param  {string} key - The setting key to get.\n     * @return {any} The value attached to this setting key or undefined if not found\n     */\n    Sigma.prototype.getSetting = function (key) {\n        return this.settings[key];\n    };\n    /**\n     * Method setting the value of a given setting key. Note that this will schedule\n     * a new render next frame.\n     *\n     * @param  {string} key - The setting key to set.\n     * @param  {any}    value - The value to set.\n     * @return {Sigma}\n     */\n    Sigma.prototype.setSetting = function (key, value) {\n        this.settings[key] = value;\n        (0, settings_1.validateSettings)(this.settings);\n        this.handleSettingsUpdate();\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method updating the value of a given setting key using the provided function.\n     * Note that this will schedule a new render next frame.\n     *\n     * @param  {string}   key     - The setting key to set.\n     * @param  {function} updater - The update function.\n     * @return {Sigma}\n     */\n    Sigma.prototype.updateSetting = function (key, updater) {\n        this.settings[key] = updater(this.settings[key]);\n        (0, settings_1.validateSettings)(this.settings);\n        this.handleSettingsUpdate();\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to resize the renderer.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.resize = function () {\n        var previousWidth = this.width, previousHeight = this.height;\n        this.width = this.container.offsetWidth;\n        this.height = this.container.offsetHeight;\n        this.pixelRatio = (0, utils_1.getPixelRatio)();\n        if (this.width === 0) {\n            if (this.settings.allowInvalidContainer)\n                this.width = 1;\n            else\n                throw new Error(\"Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.\");\n        }\n        if (this.height === 0) {\n            if (this.settings.allowInvalidContainer)\n                this.height = 1;\n            else\n                throw new Error(\"Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.\");\n        }\n        // If nothing has changed, we can stop right here\n        if (previousWidth === this.width && previousHeight === this.height)\n            return this;\n        this.emit(\"resize\");\n        // Sizing dom elements\n        for (var id in this.elements) {\n            var element = this.elements[id];\n            element.style.width = this.width + \"px\";\n            element.style.height = this.height + \"px\";\n        }\n        // Sizing canvas contexts\n        for (var id in this.canvasContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * this.pixelRatio + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * this.pixelRatio + \"px\");\n            if (this.pixelRatio !== 1)\n                this.canvasContexts[id].scale(this.pixelRatio, this.pixelRatio);\n        }\n        // Sizing WebGL contexts\n        for (var id in this.webGLContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * this.pixelRatio + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * this.pixelRatio + \"px\");\n            this.webGLContexts[id].viewport(0, 0, this.width * this.pixelRatio, this.height * this.pixelRatio);\n        }\n        return this;\n    };\n    /**\n     * Method used to clear all the canvases.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.clear = function () {\n        this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT);\n        this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT);\n        this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);\n        this.canvasContexts.labels.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.hovers.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.edgeLabels.clearRect(0, 0, this.width, this.height);\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.refresh = function () {\n        this.needToProcess = true;\n        this._refresh();\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data, at the next available frame.\n     * If this method has already been called this frame, then it will only render once at the next available frame.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.scheduleRefresh = function () {\n        this.needToProcess = true;\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to (un)zoom, while preserving the position of a viewport point.\n     * Used for instance to zoom \"on the mouse cursor\".\n     *\n     * @param viewportTarget\n     * @param newRatio\n     * @return {CameraState}\n     */\n    Sigma.prototype.getViewportZoomedState = function (viewportTarget, newRatio) {\n        var _a = this.camera.getState(), ratio = _a.ratio, angle = _a.angle, x = _a.x, y = _a.y;\n        // TODO: handle max zoom\n        var ratioDiff = newRatio / ratio;\n        var center = {\n            x: this.width / 2,\n            y: this.height / 2,\n        };\n        var graphMousePosition = this.viewportToFramedGraph(viewportTarget);\n        var graphCenterPosition = this.viewportToFramedGraph(center);\n        return {\n            angle: angle,\n            x: (graphMousePosition.x - graphCenterPosition.x) * (1 - ratioDiff) + x,\n            y: (graphMousePosition.y - graphCenterPosition.y) * (1 - ratioDiff) + y,\n            ratio: newRatio,\n        };\n    };\n    /**\n     * Method returning the abstract rectangle containing the graph according\n     * to the camera's state.\n     *\n     * @return {object} - The view's rectangle.\n     */\n    Sigma.prototype.viewRectangle = function () {\n        // TODO: reduce relative margin?\n        var marginX = (0 * this.width) / 8, marginY = (0 * this.height) / 8;\n        var p1 = this.viewportToFramedGraph({ x: 0 - marginX, y: 0 - marginY }), p2 = this.viewportToFramedGraph({ x: this.width + marginX, y: 0 - marginY }), h = this.viewportToFramedGraph({ x: 0, y: this.height + marginY });\n        return {\n            x1: p1.x,\n            y1: p1.y,\n            x2: p2.x,\n            y2: p2.y,\n            height: p2.y - h.y,\n        };\n    };\n    /**\n     * Method returning the coordinates of a point from the framed graph system to the viewport system. It allows\n     * overriding anything that is used to get the translation matrix, or even the matrix itself.\n     *\n     * Be careful if overriding dimensions, padding or cameraState, as the computation of the matrix is not the lightest\n     * of computations.\n     */\n    Sigma.prototype.framedGraphToViewport = function (coordinates, override) {\n        if (override === void 0) { override = {}; }\n        var recomputeMatrix = !!override.cameraState || !!override.viewportDimensions || !!override.graphDimensions;\n        var matrix = override.matrix\n            ? override.matrix\n            : recomputeMatrix\n                ? (0, utils_1.matrixFromCamera)(override.cameraState || this.camera.getState(), override.viewportDimensions || this.getDimensions(), override.graphDimensions || this.getGraphDimensions(), override.padding || this.getSetting(\"stagePadding\") || 0)\n                : this.matrix;\n        var viewportPos = (0, matrices_1.multiplyVec2)(matrix, coordinates);\n        return {\n            x: ((1 + viewportPos.x) * this.width) / 2,\n            y: ((1 - viewportPos.y) * this.height) / 2,\n        };\n    };\n    /**\n     * Method returning the coordinates of a point from the viewport system to the framed graph system. It allows\n     * overriding anything that is used to get the translation matrix, or even the matrix itself.\n     *\n     * Be careful if overriding dimensions, padding or cameraState, as the computation of the matrix is not the lightest\n     * of computations.\n     */\n    Sigma.prototype.viewportToFramedGraph = function (coordinates, override) {\n        if (override === void 0) { override = {}; }\n        var recomputeMatrix = !!override.cameraState || !!override.viewportDimensions || !override.graphDimensions;\n        var invMatrix = override.matrix\n            ? override.matrix\n            : recomputeMatrix\n                ? (0, utils_1.matrixFromCamera)(override.cameraState || this.camera.getState(), override.viewportDimensions || this.getDimensions(), override.graphDimensions || this.getGraphDimensions(), override.padding || this.getSetting(\"stagePadding\") || 0, true)\n                : this.invMatrix;\n        var res = (0, matrices_1.multiplyVec2)(invMatrix, {\n            x: (coordinates.x / this.width) * 2 - 1,\n            y: 1 - (coordinates.y / this.height) * 2,\n        });\n        if (isNaN(res.x))\n            res.x = 0;\n        if (isNaN(res.y))\n            res.y = 0;\n        return res;\n    };\n    /**\n     * Method used to translate a point's coordinates from the viewport system (pixel distance from the top-left of the\n     * stage) to the graph system (the reference system of data as they are in the given graph instance).\n     *\n     * This method accepts an optional camera which can be useful if you need to translate coordinates\n     * based on a different view than the one being currently being displayed on screen.\n     *\n     * @param {Coordinates}                  viewportPoint\n     * @param {CoordinateConversionOverride} override\n     */\n    Sigma.prototype.viewportToGraph = function (viewportPoint, override) {\n        if (override === void 0) { override = {}; }\n        return this.normalizationFunction.inverse(this.viewportToFramedGraph(viewportPoint, override));\n    };\n    /**\n     * Method used to translate a point's coordinates from the graph system (the reference system of data as they are in\n     * the given graph instance) to the viewport system (pixel distance from the top-left of the stage).\n     *\n     * This method accepts an optional camera which can be useful if you need to translate coordinates\n     * based on a different view than the one being currently being displayed on screen.\n     *\n     * @param {Coordinates}                  graphPoint\n     * @param {CoordinateConversionOverride} override\n     */\n    Sigma.prototype.graphToViewport = function (graphPoint, override) {\n        if (override === void 0) { override = {}; }\n        return this.framedGraphToViewport(this.normalizationFunction(graphPoint), override);\n    };\n    /**\n     * Method returning the graph's bounding box.\n     *\n     * @return {{ x: Extent, y: Extent }}\n     */\n    Sigma.prototype.getBBox = function () {\n        return (0, utils_1.graphExtent)(this.graph);\n    };\n    /**\n     * Method returning the graph's custom bounding box, if any.\n     *\n     * @return {{ x: Extent, y: Extent } | null}\n     */\n    Sigma.prototype.getCustomBBox = function () {\n        return this.customBBox;\n    };\n    /**\n     * Method used to override the graph's bounding box with a custom one. Give `null` as the argument to stop overriding.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.setCustomBBox = function (customBBox) {\n        this.customBBox = customBBox;\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to shut the container & release event listeners.\n     *\n     * @return {undefined}\n     */\n    Sigma.prototype.kill = function () {\n        var graph = this.graph;\n        // Emitting \"kill\" events so that plugins and such can cleanup\n        this.emit(\"kill\");\n        // Releasing events\n        this.removeAllListeners();\n        // Releasing camera handlers\n        this.camera.removeListener(\"updated\", this.activeListeners.camera);\n        // Releasing DOM events & captors\n        window.removeEventListener(\"resize\", this.activeListeners.handleResize);\n        this.mouseCaptor.kill();\n        this.touchCaptor.kill();\n        // Releasing graph handlers\n        graph.removeListener(\"nodeAdded\", this.activeListeners.dropNodeGraphUpdate);\n        graph.removeListener(\"nodeDropped\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeAdded\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeDropped\", this.activeListeners.dropEdgeGraphUpdate);\n        graph.removeListener(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgesCleared\", this.activeListeners.clearEdgesGraphUpdate);\n        graph.removeListener(\"cleared\", this.activeListeners.clearGraphUpdate);\n        // Releasing cache & state\n        this.quadtree = new quadtree_1.default();\n        this.nodeDataCache = {};\n        this.edgeDataCache = {};\n        this.nodesWithForcedLabels = [];\n        this.edgesWithForcedLabels = [];\n        this.highlightedNodes.clear();\n        // Clearing frames\n        if (this.renderFrame) {\n            (0, utils_1.cancelFrame)(this.renderFrame);\n            this.renderFrame = null;\n        }\n        if (this.renderHighlightedNodesFrame) {\n            (0, utils_1.cancelFrame)(this.renderHighlightedNodesFrame);\n            this.renderHighlightedNodesFrame = null;\n        }\n        // Destroying canvases\n        var container = this.container;\n        while (container.firstChild)\n            container.removeChild(container.firstChild);\n    };\n    /**\n     * Method used to scale the given size according to the camera's ratio, i.e.\n     * zooming state.\n     *\n     * @param  {number} size - The size to scale (node size, edge thickness etc.).\n     * @return {number}      - The scaled size.\n     */\n    Sigma.prototype.scaleSize = function (size) {\n        return size / this.cameraSizeRatio;\n    };\n    /**\n     * Method that returns the collection of all used canvases.\n     * At the moment, the instantiated canvases are the following, and in the\n     * following order in the DOM:\n     * - `edges`\n     * - `nodes`\n     * - `edgeLabels`\n     * - `labels`\n     * - `hovers`\n     * - `hoverNodes`\n     * - `mouse`\n     *\n     * @return {PlainObject<HTMLCanvasElement>} - The collection of canvases.\n     */\n    Sigma.prototype.getCanvases = function () {\n        return __assign({}, this.elements);\n    };\n    return Sigma;\n}(types_1.TypedEventEmitter));\nexports.default = Sigma;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.animateNodes = exports.ANIMATE_DEFAULTS = void 0;\nvar index_1 = require(\"./index\");\nvar easings_1 = __importDefault(require(\"./easings\"));\nexports.ANIMATE_DEFAULTS = {\n    easing: \"quadraticInOut\",\n    duration: 150,\n};\n/**\n * Function used to animate the nodes.\n */\nfunction animateNodes(graph, targets, opts, callback) {\n    var options = Object.assign({}, exports.ANIMATE_DEFAULTS, opts);\n    var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n    var start = Date.now();\n    var startPositions = {};\n    for (var node in targets) {\n        var attrs = targets[node];\n        startPositions[node] = {};\n        for (var k in attrs)\n            startPositions[node][k] = graph.getNodeAttribute(node, k);\n    }\n    var frame = null;\n    var step = function () {\n        frame = null;\n        var p = (Date.now() - start) / options.duration;\n        if (p >= 1) {\n            // Animation is done\n            for (var node in targets) {\n                var attrs = targets[node];\n                // We use given values to avoid precision issues and for convenience\n                for (var k in attrs)\n                    graph.setNodeAttribute(node, k, attrs[k]);\n            }\n            if (typeof callback === \"function\")\n                callback();\n            return;\n        }\n        p = easing(p);\n        for (var node in targets) {\n            var attrs = targets[node];\n            var s = startPositions[node];\n            for (var k in attrs)\n                graph.setNodeAttribute(node, k, attrs[k] * p + s[k] * (1 - p));\n        }\n        frame = (0, index_1.requestFrame)(step);\n    };\n    step();\n    return function () {\n        if (frame)\n            (0, index_1.cancelFrame)(frame);\n    };\n}\nexports.animateNodes = animateNodes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HTML_COLORS = void 0;\nexports.HTML_COLORS = {\n    black: \"#000000\",\n    silver: \"#C0C0C0\",\n    gray: \"#808080\",\n    grey: \"#808080\",\n    white: \"#FFFFFF\",\n    maroon: \"#800000\",\n    red: \"#FF0000\",\n    purple: \"#800080\",\n    fuchsia: \"#FF00FF\",\n    green: \"#008000\",\n    lime: \"#00FF00\",\n    olive: \"#808000\",\n    yellow: \"#FFFF00\",\n    navy: \"#000080\",\n    blue: \"#0000FF\",\n    teal: \"#008080\",\n    aqua: \"#00FFFF\",\n    darkblue: \"#00008B\",\n    mediumblue: \"#0000CD\",\n    darkgreen: \"#006400\",\n    darkcyan: \"#008B8B\",\n    deepskyblue: \"#00BFFF\",\n    darkturquoise: \"#00CED1\",\n    mediumspringgreen: \"#00FA9A\",\n    springgreen: \"#00FF7F\",\n    cyan: \"#00FFFF\",\n    midnightblue: \"#191970\",\n    dodgerblue: \"#1E90FF\",\n    lightseagreen: \"#20B2AA\",\n    forestgreen: \"#228B22\",\n    seagreen: \"#2E8B57\",\n    darkslategray: \"#2F4F4F\",\n    darkslategrey: \"#2F4F4F\",\n    limegreen: \"#32CD32\",\n    mediumseagreen: \"#3CB371\",\n    turquoise: \"#40E0D0\",\n    royalblue: \"#4169E1\",\n    steelblue: \"#4682B4\",\n    darkslateblue: \"#483D8B\",\n    mediumturquoise: \"#48D1CC\",\n    indigo: \"#4B0082\",\n    darkolivegreen: \"#556B2F\",\n    cadetblue: \"#5F9EA0\",\n    cornflowerblue: \"#6495ED\",\n    rebeccapurple: \"#663399\",\n    mediumaquamarine: \"#66CDAA\",\n    dimgray: \"#696969\",\n    dimgrey: \"#696969\",\n    slateblue: \"#6A5ACD\",\n    olivedrab: \"#6B8E23\",\n    slategray: \"#708090\",\n    slategrey: \"#708090\",\n    lightslategray: \"#778899\",\n    lightslategrey: \"#778899\",\n    mediumslateblue: \"#7B68EE\",\n    lawngreen: \"#7CFC00\",\n    chartreuse: \"#7FFF00\",\n    aquamarine: \"#7FFFD4\",\n    skyblue: \"#87CEEB\",\n    lightskyblue: \"#87CEFA\",\n    blueviolet: \"#8A2BE2\",\n    darkred: \"#8B0000\",\n    darkmagenta: \"#8B008B\",\n    saddlebrown: \"#8B4513\",\n    darkseagreen: \"#8FBC8F\",\n    lightgreen: \"#90EE90\",\n    mediumpurple: \"#9370DB\",\n    darkviolet: \"#9400D3\",\n    palegreen: \"#98FB98\",\n    darkorchid: \"#9932CC\",\n    yellowgreen: \"#9ACD32\",\n    sienna: \"#A0522D\",\n    brown: \"#A52A2A\",\n    darkgray: \"#A9A9A9\",\n    darkgrey: \"#A9A9A9\",\n    lightblue: \"#ADD8E6\",\n    greenyellow: \"#ADFF2F\",\n    paleturquoise: \"#AFEEEE\",\n    lightsteelblue: \"#B0C4DE\",\n    powderblue: \"#B0E0E6\",\n    firebrick: \"#B22222\",\n    darkgoldenrod: \"#B8860B\",\n    mediumorchid: \"#BA55D3\",\n    rosybrown: \"#BC8F8F\",\n    darkkhaki: \"#BDB76B\",\n    mediumvioletred: \"#C71585\",\n    indianred: \"#CD5C5C\",\n    peru: \"#CD853F\",\n    chocolate: \"#D2691E\",\n    tan: \"#D2B48C\",\n    lightgray: \"#D3D3D3\",\n    lightgrey: \"#D3D3D3\",\n    thistle: \"#D8BFD8\",\n    orchid: \"#DA70D6\",\n    goldenrod: \"#DAA520\",\n    palevioletred: \"#DB7093\",\n    crimson: \"#DC143C\",\n    gainsboro: \"#DCDCDC\",\n    plum: \"#DDA0DD\",\n    burlywood: \"#DEB887\",\n    lightcyan: \"#E0FFFF\",\n    lavender: \"#E6E6FA\",\n    darksalmon: \"#E9967A\",\n    violet: \"#EE82EE\",\n    palegoldenrod: \"#EEE8AA\",\n    lightcoral: \"#F08080\",\n    khaki: \"#F0E68C\",\n    aliceblue: \"#F0F8FF\",\n    honeydew: \"#F0FFF0\",\n    azure: \"#F0FFFF\",\n    sandybrown: \"#F4A460\",\n    wheat: \"#F5DEB3\",\n    beige: \"#F5F5DC\",\n    whitesmoke: \"#F5F5F5\",\n    mintcream: \"#F5FFFA\",\n    ghostwhite: \"#F8F8FF\",\n    salmon: \"#FA8072\",\n    antiquewhite: \"#FAEBD7\",\n    linen: \"#FAF0E6\",\n    lightgoldenrodyellow: \"#FAFAD2\",\n    oldlace: \"#FDF5E6\",\n    magenta: \"#FF00FF\",\n    deeppink: \"#FF1493\",\n    orangered: \"#FF4500\",\n    tomato: \"#FF6347\",\n    hotpink: \"#FF69B4\",\n    coral: \"#FF7F50\",\n    darkorange: \"#FF8C00\",\n    lightsalmon: \"#FFA07A\",\n    orange: \"#FFA500\",\n    lightpink: \"#FFB6C1\",\n    pink: \"#FFC0CB\",\n    gold: \"#FFD700\",\n    peachpuff: \"#FFDAB9\",\n    navajowhite: \"#FFDEAD\",\n    moccasin: \"#FFE4B5\",\n    bisque: \"#FFE4C4\",\n    mistyrose: \"#FFE4E1\",\n    blanchedalmond: \"#FFEBCD\",\n    papayawhip: \"#FFEFD5\",\n    lavenderblush: \"#FFF0F5\",\n    seashell: \"#FFF5EE\",\n    cornsilk: \"#FFF8DC\",\n    lemonchiffon: \"#FFFACD\",\n    floralwhite: \"#FFFAF0\",\n    snow: \"#FFFAFA\",\n    lightyellow: \"#FFFFE0\",\n    ivory: \"#FFFFF0\",\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Extend function\n * ================\n *\n * Function used to push a bunch of values into an array at once.\n *\n * Its strategy is to mutate target array's length then setting the new indices\n * to be the values to add.\n *\n * A benchmark proved that it is faster than the following strategies:\n *   1) `array.push.apply(array, values)`.\n *   2) A loop of pushes.\n *   3) `array = array.concat(values)`, obviously.\n *\n * Intuitively, this is correct because when adding a lot of elements, the\n * chosen strategies does not need to handle the `arguments` object to\n * execute #.apply's variadicity and because the array know its final length\n * at the beginning, avoiding potential multiple reallocations of the underlying\n * contiguous array. Some engines may be able to optimize the loop of push\n * operations but empirically they don't seem to do so.\n */\n\n/**\n * Extends the target array with the given values.\n *\n * @param  {array} array  - Target array.\n * @param  {array} values - Values to add.\n */\nmodule.exports = function extend(array, values) {\n  var l2 = values.length;\n\n  if (l2 === 0)\n    return;\n\n  var l1 = array.length;\n\n  array.length += l2;\n\n  for (var i = 0; i < l2; i++)\n    array[l1 + i] = values[i];\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.edgeLabelsToDisplayFromNodes = exports.LabelGrid = void 0;\n/**\n * Class representing a single candidate for the label grid selection.\n *\n * It also describes a deterministic way to compare two candidates to assess\n * which one is better.\n */\nvar LabelCandidate = /** @class */ (function () {\n    function LabelCandidate(key, size) {\n        this.key = key;\n        this.size = size;\n    }\n    LabelCandidate.compare = function (first, second) {\n        // First we compare by size\n        if (first.size > second.size)\n            return -1;\n        if (first.size < second.size)\n            return 1;\n        // Then since no two nodes can have the same key, we use it to\n        // deterministically tie-break by key\n        if (first.key > second.key)\n            return 1;\n        // NOTE: this comparator cannot return 0\n        return -1;\n    };\n    return LabelCandidate;\n}());\n/**\n * Class representing a 2D spatial grid divided into constant-size cells.\n */\nvar LabelGrid = /** @class */ (function () {\n    function LabelGrid() {\n        this.width = 0;\n        this.height = 0;\n        this.cellSize = 0;\n        this.columns = 0;\n        this.rows = 0;\n        this.cells = {};\n    }\n    LabelGrid.prototype.resizeAndClear = function (dimensions, cellSize) {\n        this.width = dimensions.width;\n        this.height = dimensions.height;\n        this.cellSize = cellSize;\n        this.columns = Math.ceil(dimensions.width / cellSize);\n        this.rows = Math.ceil(dimensions.height / cellSize);\n        this.cells = {};\n    };\n    LabelGrid.prototype.getIndex = function (pos) {\n        var xIndex = Math.floor(pos.x / this.cellSize);\n        var yIndex = Math.floor(pos.y / this.cellSize);\n        return yIndex * this.columns + xIndex;\n    };\n    LabelGrid.prototype.add = function (key, size, pos) {\n        var candidate = new LabelCandidate(key, size);\n        var index = this.getIndex(pos);\n        var cell = this.cells[index];\n        if (!cell) {\n            cell = [];\n            this.cells[index] = cell;\n        }\n        cell.push(candidate);\n    };\n    LabelGrid.prototype.organize = function () {\n        for (var k in this.cells) {\n            var cell = this.cells[k];\n            cell.sort(LabelCandidate.compare);\n        }\n    };\n    LabelGrid.prototype.getLabelsToDisplay = function (ratio, density) {\n        // TODO: work on visible nodes to optimize? ^ -> threshold outside so that memoization works?\n        // TODO: adjust threshold lower, but increase cells a bit?\n        // TODO: hunt for geom issue in disguise\n        // TODO: memoize while ratio does not move. method to force recompute\n        var cellArea = this.cellSize * this.cellSize;\n        var scaledCellArea = cellArea / ratio / ratio;\n        var scaledDensity = (scaledCellArea * density) / cellArea;\n        var labelsToDisplayPerCell = Math.ceil(scaledDensity);\n        var labels = [];\n        for (var k in this.cells) {\n            var cell = this.cells[k];\n            for (var i = 0; i < Math.min(labelsToDisplayPerCell, cell.length); i++) {\n                labels.push(cell[i].key);\n            }\n        }\n        return labels;\n    };\n    return LabelGrid;\n}());\nexports.LabelGrid = LabelGrid;\n/**\n * Label heuristic selecting edge labels to display, based on displayed node\n * labels\n *\n * @param  {object} params                 - Parameters:\n * @param  {Set}      displayedNodeLabels  - Currently displayed node labels.\n * @param  {Set}      highlightedNodes     - Highlighted nodes.\n * @param  {Graph}    graph                - The rendered graph.\n * @param  {string}   hoveredNode          - Hovered node (optional)\n * @return {Array}                         - The selected labels.\n */\nfunction edgeLabelsToDisplayFromNodes(params) {\n    var graph = params.graph, hoveredNode = params.hoveredNode, highlightedNodes = params.highlightedNodes, displayedNodeLabels = params.displayedNodeLabels;\n    var worthyEdges = [];\n    // TODO: the code below can be optimized using #.forEach and batching the code per adj\n    // We should display an edge's label if:\n    //   - Any of its extremities is highlighted or hovered\n    //   - Both of its extremities has its label shown\n    graph.forEachEdge(function (edge, _, source, target) {\n        if (source === hoveredNode ||\n            target === hoveredNode ||\n            highlightedNodes.has(source) ||\n            highlightedNodes.has(target) ||\n            (displayedNodeLabels.has(source) && displayedNodeLabels.has(target))) {\n            worthyEdges.push(edge);\n        }\n    });\n    return worthyEdges;\n}\nexports.edgeLabelsToDisplayFromNodes = edgeLabelsToDisplayFromNodes;\n","\"use strict\";\n/**\n * Sigma.js Settings\n * =================================\n *\n * The list of settings and some handy functions.\n * @module\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_SETTINGS = exports.validateSettings = void 0;\nvar label_1 = __importDefault(require(\"./rendering/canvas/label\"));\nvar hover_1 = __importDefault(require(\"./rendering/canvas/hover\"));\nvar edge_label_1 = __importDefault(require(\"./rendering/canvas/edge-label\"));\nvar node_fast_1 = __importDefault(require(\"./rendering/webgl/programs/node.fast\"));\nvar edge_1 = __importDefault(require(\"./rendering/webgl/programs/edge\"));\nvar edge_arrow_1 = __importDefault(require(\"./rendering/webgl/programs/edge.arrow\"));\nfunction validateSettings(settings) {\n    if (typeof settings.labelDensity !== \"number\" || settings.labelDensity < 0) {\n        throw new Error(\"Settings: invalid `labelDensity`. Expecting a positive number.\");\n    }\n    var minCameraRatio = settings.minCameraRatio, maxCameraRatio = settings.maxCameraRatio;\n    if (typeof minCameraRatio === \"number\" && typeof maxCameraRatio === \"number\" && maxCameraRatio < minCameraRatio) {\n        throw new Error(\"Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.\");\n    }\n}\nexports.validateSettings = validateSettings;\nexports.DEFAULT_SETTINGS = {\n    // Performance\n    hideEdgesOnMove: false,\n    hideLabelsOnMove: false,\n    renderLabels: true,\n    renderEdgeLabels: false,\n    enableEdgeClickEvents: false,\n    enableEdgeWheelEvents: false,\n    enableEdgeHoverEvents: false,\n    // Component rendering\n    defaultNodeColor: \"#999\",\n    defaultNodeType: \"circle\",\n    defaultEdgeColor: \"#ccc\",\n    defaultEdgeType: \"line\",\n    labelFont: \"Arial\",\n    labelSize: 14,\n    labelWeight: \"normal\",\n    labelColor: { color: \"#000\" },\n    edgeLabelFont: \"Arial\",\n    edgeLabelSize: 14,\n    edgeLabelWeight: \"normal\",\n    edgeLabelColor: { attribute: \"color\" },\n    stagePadding: 30,\n    // Labels\n    labelDensity: 1,\n    labelGridCellSize: 100,\n    labelRenderedSizeThreshold: 6,\n    // Reducers\n    nodeReducer: null,\n    edgeReducer: null,\n    // Features\n    zIndex: false,\n    minCameraRatio: null,\n    maxCameraRatio: null,\n    // Renderers\n    labelRenderer: label_1.default,\n    hoverRenderer: hover_1.default,\n    edgeLabelRenderer: edge_label_1.default,\n    // Lifecycle\n    allowInvalidContainer: false,\n    // Program classes\n    nodeProgramClasses: {\n        circle: node_fast_1.default,\n    },\n    edgeProgramClasses: {\n        arrow: edge_arrow_1.default,\n        line: edge_1.default,\n    },\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar label_1 = __importDefault(require(\"./label\"));\n/**\n * Draw an hovered node.\n * - if there is no label => display a shadow on the node\n * - if the label box is bigger than node size => display a label box that contains the node with a shadow\n * - else node with shadow and the label box\n */\nfunction drawHover(context, data, settings) {\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight;\n    context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n    // Then we draw the label background\n    context.fillStyle = \"#FFF\";\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 8;\n    context.shadowColor = \"#000\";\n    var PADDING = 2;\n    if (typeof data.label === \"string\") {\n        var textWidth = context.measureText(data.label).width, boxWidth = Math.round(textWidth + 5), boxHeight = Math.round(size + 2 * PADDING), radius = Math.max(data.size, size / 2) + PADDING;\n        var angleRadian = Math.asin(boxHeight / 2 / radius);\n        var xDeltaCoord = Math.sqrt(Math.abs(Math.pow(radius, 2) - Math.pow(boxHeight / 2, 2)));\n        context.beginPath();\n        context.moveTo(data.x + xDeltaCoord, data.y + boxHeight / 2);\n        context.lineTo(data.x + radius + boxWidth, data.y + boxHeight / 2);\n        context.lineTo(data.x + radius + boxWidth, data.y - boxHeight / 2);\n        context.lineTo(data.x + xDeltaCoord, data.y - boxHeight / 2);\n        context.arc(data.x, data.y, radius, angleRadian, -angleRadian);\n        context.closePath();\n        context.fill();\n    }\n    else {\n        context.beginPath();\n        context.arc(data.x, data.y, data.size + PADDING, 0, Math.PI * 2);\n        context.closePath();\n        context.fill();\n    }\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 0;\n    // And finally we draw the label\n    (0, label_1.default)(context, data, settings);\n}\nexports.default = drawHover;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawEdgeLabel(context, edgeData, sourceData, targetData, settings) {\n    var size = settings.edgeLabelSize, font = settings.edgeLabelFont, weight = settings.edgeLabelWeight, color = settings.edgeLabelColor.attribute\n        ? edgeData[settings.edgeLabelColor.attribute] || settings.edgeLabelColor.color || \"#000\"\n        : settings.edgeLabelColor.color;\n    var label = edgeData.label;\n    if (!label)\n        return;\n    context.fillStyle = color;\n    context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n    // Computing positions without considering nodes sizes:\n    var sSize = sourceData.size;\n    var tSize = targetData.size;\n    var sx = sourceData.x;\n    var sy = sourceData.y;\n    var tx = targetData.x;\n    var ty = targetData.y;\n    var cx = (sx + tx) / 2;\n    var cy = (sy + ty) / 2;\n    var dx = tx - sx;\n    var dy = ty - sy;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    if (d < sSize + tSize)\n        return;\n    // Adding nodes sizes:\n    sx += (dx * sSize) / d;\n    sy += (dy * sSize) / d;\n    tx -= (dx * tSize) / d;\n    ty -= (dy * tSize) / d;\n    cx = (sx + tx) / 2;\n    cy = (sy + ty) / 2;\n    dx = tx - sx;\n    dy = ty - sy;\n    d = Math.sqrt(dx * dx + dy * dy);\n    // Handling ellipsis\n    var textLength = context.measureText(label).width;\n    if (textLength > d) {\n        var ellipsis = \"\";\n        label = label + ellipsis;\n        textLength = context.measureText(label).width;\n        while (textLength > d && label.length > 1) {\n            label = label.slice(0, -2) + ellipsis;\n            textLength = context.measureText(label).width;\n        }\n        if (label.length < 4)\n            return;\n    }\n    var angle;\n    if (dx > 0) {\n        if (dy > 0)\n            angle = Math.acos(dx / d);\n        else\n            angle = Math.asin(dy / d);\n    }\n    else {\n        if (dy > 0)\n            angle = Math.acos(dx / d) + Math.PI;\n        else\n            angle = Math.asin(dx / d) + Math.PI / 2;\n    }\n    context.save();\n    context.translate(cx, cy);\n    context.rotate(angle);\n    context.fillText(label, -textLength / 2, edgeData.size / 2 + size);\n    context.restore();\n}\nexports.default = drawEdgeLabel;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar node_fast_vert_glsl_1 = __importDefault(require(\"../shaders/node.fast.vert.glsl.js\"));\nvar node_fast_frag_glsl_1 = __importDefault(require(\"../shaders/node.fast.frag.glsl.js\"));\nvar node_1 = require(\"./common/node\");\nvar POINTS = 1, ATTRIBUTES = 4;\nvar NodeFastProgram = /** @class */ (function (_super) {\n    __extends(NodeFastProgram, _super);\n    function NodeFastProgram(gl) {\n        var _this = _super.call(this, gl, node_fast_vert_glsl_1.default, node_fast_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        _this.bind();\n        return _this;\n    }\n    NodeFastProgram.prototype.process = function (data, hidden, offset) {\n        var array = this.array;\n        var i = offset * POINTS * ATTRIBUTES;\n        if (hidden) {\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            return;\n        }\n        var color = (0, utils_1.floatColor)(data.color);\n        array[i++] = data.x;\n        array[i++] = data.y;\n        array[i++] = data.size;\n        array[i] = color;\n    };\n    NodeFastProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        gl.uniform1f(this.ratioLocation, 1 / Math.sqrt(params.ratio));\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.drawArrays(gl.POINTS, 0, this.array.length / ATTRIBUTES);\n    };\n    return NodeFastProgram;\n}(node_1.AbstractNodeProgram));\nexports.default = NodeFastProgram;\n","(()=>{\"use strict\";var o={d:(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(o,\"__esModule\",{value:!0})}},t={};o.r(t),o.d(t,{default:()=>e});const e=\"attribute vec2 a_position;\\nattribute float a_size;\\nattribute vec4 a_color;\\n\\nuniform float u_ratio;\\nuniform float u_scale;\\nuniform mat3 u_matrix;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  gl_Position = vec4(\\n    (u_matrix * vec3(a_position, 1)).xy,\\n    0,\\n    1\\n  );\\n\\n  // Multiply the point size twice:\\n  //  - x SCALING_RATIO to correct the canvas scaling\\n  //  - x 2 to correct the formulae\\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\\n\\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=t})();","(()=>{\"use strict\";var e={d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const o=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float radius = 0.5;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\\n  float dist = radius - length(m);\\n\\n  float t = 0.0;\\n  if (dist > v_border)\\n    t = 1.0;\\n  else if (dist > 0.0)\\n    t = dist / v_border;\\n\\n  gl_FragColor = mix(transparent, v_color, t);\\n}\\n\";module.exports=n})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createNodeCompoundProgram = exports.AbstractNodeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Node Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Node Program class.\n *\n * @constructor\n */\nvar AbstractNodeProgram = /** @class */ (function (_super) {\n    __extends(AbstractNodeProgram, _super);\n    function AbstractNodeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        var _this = _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.sizeLocation = gl.getAttribLocation(_this.program, \"a_size\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        // Uniform Location\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var ratioLocation = gl.getUniformLocation(_this.program, \"u_ratio\");\n        if (ratioLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting ratioLocation\");\n        _this.ratioLocation = ratioLocation;\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        return _this;\n    }\n    AbstractNodeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.sizeLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.sizeLocation, 1, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, this.attributes * Float32Array.BYTES_PER_ELEMENT, 12);\n    };\n    return AbstractNodeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractNodeProgram = AbstractNodeProgram;\n/**\n * Helper function combining two or more programs into a single compound one.\n * Note that this is more a quick & easy way to combine program than a really\n * performant option. More performant programs can be written entirely.\n *\n * @param  {array}    programClasses - Program classes to combine.\n * @return {function}\n */\nfunction createNodeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function NodeCompoundProgram(gl, renderer) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl, renderer); });\n        }\n        NodeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        NodeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        NodeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        NodeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) {\n                program.bind();\n                program.bufferData();\n                program.render(params);\n            });\n        };\n        NodeCompoundProgram.prototype.process = function (data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(data, hidden, offset); });\n        };\n        return NodeCompoundProgram;\n    }());\n}\nexports.createNodeCompoundProgram = createNodeCompoundProgram;\n","\"use strict\";\n/**\n * Sigma.js Shader Utils\n * ======================\n *\n * Code used to load sigma's shaders.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadProgram = exports.loadFragmentShader = exports.loadVertexShader = void 0;\n/**\n * Function used to load a shader.\n */\nfunction loadShader(type, gl, source) {\n    var glType = type === \"VERTEX\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER;\n    // Creating the shader\n    var shader = gl.createShader(glType);\n    if (shader === null) {\n        throw new Error(\"loadShader: error while creating the shader\");\n    }\n    // Loading source\n    gl.shaderSource(shader, source);\n    // Compiling the shader\n    gl.compileShader(shader);\n    // Retrieving compilation status\n    var successfullyCompiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    // Throwing if something went awry\n    if (!successfullyCompiled) {\n        var infoLog = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        throw new Error(\"loadShader: error while compiling the shader:\\n\".concat(infoLog, \"\\n\").concat(source));\n    }\n    return shader;\n}\nfunction loadVertexShader(gl, source) {\n    return loadShader(\"VERTEX\", gl, source);\n}\nexports.loadVertexShader = loadVertexShader;\nfunction loadFragmentShader(gl, source) {\n    return loadShader(\"FRAGMENT\", gl, source);\n}\nexports.loadFragmentShader = loadFragmentShader;\n/**\n * Function used to load a program.\n */\nfunction loadProgram(gl, shaders) {\n    var program = gl.createProgram();\n    if (program === null) {\n        throw new Error(\"loadProgram: error while creating the program.\");\n    }\n    var i, l;\n    // Attaching the shaders\n    for (i = 0, l = shaders.length; i < l; i++)\n        gl.attachShader(program, shaders[i]);\n    gl.linkProgram(program);\n    // Checking status\n    var successfullyLinked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!successfullyLinked) {\n        gl.deleteProgram(program);\n        throw new Error(\"loadProgram: error while linking the program.\");\n    }\n    return program;\n}\nexports.loadProgram = loadProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Program\n * =====================================\n *\n * Program rendering edges as thick lines using four points translated\n * orthogonally from the source & target's centers by half thickness.\n *\n * Rendering two triangles by using only four points is made possible through\n * the use of indices.\n *\n * This method should be faster than the 6 points / 2 triangles approach and\n * should handle thickness better than with gl.LINES.\n *\n * This version of the shader balances geometry computation evenly between\n * the CPU & GPU (normals are computed on the CPU side).\n * @module\n */\nvar utils_1 = require(\"../../../utils\");\nvar edge_vert_glsl_1 = __importDefault(require(\"../shaders/edge.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 4, ATTRIBUTES = 5, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeProgram = /** @class */ (function (_super) {\n    __extends(EdgeProgram, _super);\n    function EdgeProgram(gl) {\n        var _this = _super.call(this, gl, edge_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeProgram: error while creating indicesBuffer\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n        if (correctionRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting correctionRatioLocation\");\n        _this.correctionRatioLocation = correctionRatioLocation;\n        var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n        if (sqrtZoomRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting sqrtZoomRatioLocation\");\n        _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = (0, utils_1.canUse32BitsIndices)(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n    };\n    EdgeProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = (0, utils_1.floatColor)(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len * thickness;\n            n2 = dx * len * thickness;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = color;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i] = color;\n    };\n    EdgeProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n        gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeProgram;\n","(()=>{\"use strict\";var e={d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const o='attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // We require edges to be at least `minThickness` pixels thick *on screen*\\n  // (so we need to compensate the SQRT zoom ratio):\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n\\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\\n  // referential (in a ([0, 1], [0, 1]) space), using our \"magic\" correction\\n  // ratio:\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n\\n  // Finally, we adapt the edge thickness to the \"SQRT rule\" in sigma (so that\\n  // items are not too big when zoomed in, and not too small when zoomed out).\\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\\n  // it\\'s simpler like this:\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\\n\\n  // For the fragment shader though, we need a thickness that takes the \"magic\"\\n  // correction ratio into account (as in webGLThickness), but so that the\\n  // antialiasint effect does not depend on the zoom level. So here\\'s yet\\n  // another thickness version:\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n';module.exports=n})();","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Arrow Program\n * ===========================================\n *\n * Compound program rendering edges as an arrow from the source to the target.\n * @module\n */\nvar edge_1 = require(\"./common/edge\");\nvar edge_arrowHead_1 = __importDefault(require(\"./edge.arrowHead\"));\nvar edge_clamped_1 = __importDefault(require(\"./edge.clamped\"));\nvar EdgeArrowProgram = (0, edge_1.createEdgeCompoundProgram)([edge_clamped_1.default, edge_arrowHead_1.default]);\nexports.default = EdgeArrowProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar edge_arrowHead_vert_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.vert.glsl.js\"));\nvar edge_arrowHead_frag_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 3, ATTRIBUTES = 9, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeArrowHeadProgram = /** @class */ (function (_super) {\n    __extends(EdgeArrowHeadProgram, _super);\n    function EdgeArrowHeadProgram(gl) {\n        var _this = _super.call(this, gl, edge_arrowHead_vert_glsl_1.default, edge_arrowHead_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        _this.barycentricLocation = gl.getAttribLocation(_this.program, \"a_barycentric\");\n        // Uniform locations\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n        if (sqrtZoomRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation\");\n        _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n        var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n        if (correctionRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting correctionRatioLocation\");\n        _this.correctionRatioLocation = correctionRatioLocation;\n        _this.bind();\n        return _this;\n    }\n    EdgeArrowHeadProgram.prototype.bind = function () {\n        var gl = this.gl;\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.barycentricLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n        // TODO: maybe we can optimize here by packing this in a bit mask\n        gl.vertexAttribPointer(this.barycentricLocation, 3, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 24);\n    };\n    EdgeArrowHeadProgram.prototype.computeIndices = function () {\n        // nothing to do\n    };\n    EdgeArrowHeadProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, radius = targetData.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = (0, utils_1.floatColor)(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len * thickness;\n            n2 = dx * len * thickness;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 1;\n        array[i++] = 0;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 1;\n        array[i++] = 0;\n        // Third point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 0;\n        array[i] = 1;\n    };\n    EdgeArrowHeadProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n        gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n        // Drawing:\n        gl.drawArrays(gl.TRIANGLES, 0, this.array.length / ATTRIBUTES);\n    };\n    return EdgeArrowHeadProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeArrowHeadProgram;\n","(()=>{\"use strict\";var a={d:(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:(a,e)=>Object.prototype.hasOwnProperty.call(a,e),r:a=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(a,\"__esModule\",{value:!0})}},e={};a.r(e),a.d(e,{default:()=>t});const t=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_radius;\\nattribute vec4 a_color;\\nattribute vec3 a_barycentric;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadWidthLengthRatio = 0.66;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl and\\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\\n  // happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\\n\\n  float da = a_barycentric.x;\\n  float db = a_barycentric.y;\\n  float dc = a_barycentric.z;\\n\\n  vec2 delta = vec2(\\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\\n\\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n  );\\n\\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=e})();","(()=>{\"use strict\";var e={d:(o,r)=>{for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>r});const r=\"precision mediump float;\\n\\nvarying vec4 v_color;\\n\\nvoid main(void) {\\n  gl_FragColor = v_color;\\n}\\n\";module.exports=o})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar edge_1 = require(\"./common/edge\");\nvar utils_1 = require(\"../../../utils\");\nvar edge_clamped_vert_glsl_1 = __importDefault(require(\"../shaders/edge.clamped.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar POINTS = 4, ATTRIBUTES = 6, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeClampedProgram = /** @class */ (function (_super) {\n    __extends(EdgeClampedProgram, _super);\n    function EdgeClampedProgram(gl) {\n        var _this = _super.call(this, gl, edge_clamped_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeClampedProgram: error while getting resolutionLocation\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations:\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        // Uniform locations\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n        if (sqrtZoomRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting cameraRatioLocation\");\n        _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n        var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n        if (correctionRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting viewportRatioLocation\");\n        _this.correctionRatioLocation = correctionRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = (0, utils_1.canUse32BitsIndices)(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeClampedProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n    };\n    EdgeClampedProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, radius = targetData.size || 1, color = (0, utils_1.floatColor)(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len * thickness;\n            n2 = dx * len * thickness;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        array[i++] = 0;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = color;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        array[i++] = radius;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = color;\n        array[i] = -radius;\n    };\n    EdgeClampedProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeClampedProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeClampedProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n        gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeClampedProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeClampedProgram;\n","(()=>{\"use strict\";var e={d:(o,n)=>{for(var t in n)e.o(n,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:n[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>n});const n=\"attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\nattribute float a_radius;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl. Please read it to\\n  // get better comments on what's happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here, we move the point to leave space for the arrow head:\\n  float direction = sign(a_radius);\\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n\\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\\n\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=o})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\nvar DRAG_TIMEOUT = 200;\nvar TOUCH_INERTIA_RATIO = 3;\nvar TOUCH_INERTIA_DURATION = 200;\n/**\n * Touch captor class.\n *\n * @constructor\n */\nvar TouchCaptor = /** @class */ (function (_super) {\n    __extends(TouchCaptor, _super);\n    function TouchCaptor(container, renderer) {\n        var _this = _super.call(this, container, renderer) || this;\n        _this.enabled = true;\n        _this.isMoving = false;\n        _this.touchMode = 0; // number of touches down\n        // Binding methods:\n        _this.handleStart = _this.handleStart.bind(_this);\n        _this.handleLeave = _this.handleLeave.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        // Binding events\n        container.addEventListener(\"touchstart\", _this.handleStart, false);\n        container.addEventListener(\"touchend\", _this.handleLeave, false);\n        container.addEventListener(\"touchcancel\", _this.handleLeave, false);\n        container.addEventListener(\"touchmove\", _this.handleMove, false);\n        return _this;\n    }\n    TouchCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"touchstart\", this.handleStart);\n        container.removeEventListener(\"touchend\", this.handleLeave);\n        container.removeEventListener(\"touchcancel\", this.handleLeave);\n        container.removeEventListener(\"touchmove\", this.handleMove);\n    };\n    TouchCaptor.prototype.getDimensions = function () {\n        return {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        };\n    };\n    TouchCaptor.prototype.dispatchRelatedMouseEvent = function (type, e, position, emitter) {\n        var mousePosition = position || (0, captor_1.getPosition)(e.touches[0], this.container);\n        var mouseEvent = new MouseEvent(type, {\n            clientX: mousePosition.x,\n            clientY: mousePosition.y,\n            altKey: e.altKey,\n            ctrlKey: e.ctrlKey,\n        });\n        mouseEvent.isFakeSigmaMouseEvent = true;\n        (emitter || this.container).dispatchEvent(mouseEvent);\n    };\n    TouchCaptor.prototype.handleStart = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousedown\", e);\n        var touches = (0, captor_1.getTouchesArray)(e.touches);\n        this.isMoving = true;\n        this.touchMode = touches.length;\n        this.startCameraState = this.renderer.getCamera().getState();\n        this.startTouchesPositions = touches.map(function (touch) { return (0, captor_1.getPosition)(touch, _this.container); });\n        this.lastTouchesPositions = this.startTouchesPositions;\n        // When there are two touches down, let's record distance and angle as well:\n        if (this.touchMode === 2) {\n            var _a = __read(this.startTouchesPositions, 2), _b = _a[0], x0 = _b.x, y0 = _b.y, _c = _a[1], x1 = _c.x, y1 = _c.y;\n            this.startTouchesAngle = Math.atan2(y1 - y0, x1 - x0);\n            this.startTouchesDistance = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n        }\n        this.emit(\"touchdown\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    TouchCaptor.prototype.handleLeave = function (e) {\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 0 && this.lastTouchesPositions && this.lastTouchesPositions.length) {\n            this.dispatchRelatedMouseEvent(\"mouseup\", e, this.lastTouchesPositions[0], document);\n            this.dispatchRelatedMouseEvent(\"click\", e, this.lastTouchesPositions[0]);\n        }\n        if (this.movingTimeout) {\n            this.isMoving = false;\n            clearTimeout(this.movingTimeout);\n        }\n        switch (this.touchMode) {\n            case 2:\n                if (e.touches.length === 1) {\n                    this.handleStart(e);\n                    e.preventDefault();\n                    break;\n                }\n            /* falls through */\n            case 1:\n                // TODO\n                // Dispatch event\n                if (this.isMoving) {\n                    var camera = this.renderer.getCamera();\n                    var cameraState = camera.getState(), previousCameraState = camera.getPreviousState() || { x: 0, y: 0 };\n                    camera.animate({\n                        x: cameraState.x + TOUCH_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                        y: cameraState.y + TOUCH_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n                    }, {\n                        duration: TOUCH_INERTIA_DURATION,\n                        easing: \"quadraticOut\",\n                    });\n                }\n                this.isMoving = false;\n                this.touchMode = 0;\n                break;\n        }\n        this.emit(\"touchup\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    TouchCaptor.prototype.handleMove = function (e) {\n        var _a;\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousemove\", e);\n        var camera = this.renderer.getCamera();\n        var startCameraState = this.startCameraState;\n        var touches = (0, captor_1.getTouchesArray)(e.touches);\n        var touchesPositions = touches.map(function (touch) { return (0, captor_1.getPosition)(touch, _this.container); });\n        this.lastTouchesPositions = touchesPositions;\n        this.isMoving = true;\n        if (this.movingTimeout)\n            clearTimeout(this.movingTimeout);\n        this.movingTimeout = window.setTimeout(function () {\n            _this.isMoving = false;\n        }, DRAG_TIMEOUT);\n        switch (this.touchMode) {\n            case 1: {\n                var _b = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0]), xStart = _b.x, yStart = _b.y;\n                var _c = this.renderer.viewportToFramedGraph(touchesPositions[0]), x = _c.x, y = _c.y;\n                camera.setState({\n                    x: startCameraState.x + xStart - x,\n                    y: startCameraState.y + yStart - y,\n                });\n                break;\n            }\n            case 2: {\n                /**\n                 * Here is the thinking here:\n                 *\n                 * 1. We can find the new angle and ratio, by comparing the vector from \"touch one\" to \"touch two\" at the start\n                 *    of the d'n'd and now\n                 *\n                 * 2. We can use `Camera#viewportToGraph` inside formula to retrieve the new camera position, using the graph\n                 *    position of a touch at the beginning of the d'n'd (using `startCamera.viewportToGraph`) and the viewport\n                 *    position of this same touch now\n                 */\n                var newCameraState = {};\n                var _d = touchesPositions[0], x0 = _d.x, y0 = _d.y;\n                var _e = touchesPositions[1], x1 = _e.x, y1 = _e.y;\n                var angleDiff = Math.atan2(y1 - y0, x1 - x0) - this.startTouchesAngle;\n                var ratioDiff = Math.hypot(y1 - y0, x1 - x0) / this.startTouchesDistance;\n                // 1.\n                var newRatio = camera.getBoundedRatio(startCameraState.ratio / ratioDiff);\n                newCameraState.ratio = newRatio;\n                newCameraState.angle = startCameraState.angle + angleDiff;\n                // 2.\n                var dimensions = this.getDimensions();\n                var touchGraphPosition = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0], { cameraState: startCameraState });\n                var smallestDimension = Math.min(dimensions.width, dimensions.height);\n                var dx = smallestDimension / dimensions.width;\n                var dy = smallestDimension / dimensions.height;\n                var ratio = newRatio / smallestDimension;\n                // Align with center of the graph:\n                var x = x0 - smallestDimension / 2 / dx;\n                var y = y0 - smallestDimension / 2 / dy;\n                // Rotate:\n                _a = __read([\n                    x * Math.cos(-newCameraState.angle) - y * Math.sin(-newCameraState.angle),\n                    y * Math.cos(-newCameraState.angle) + x * Math.sin(-newCameraState.angle),\n                ], 2), x = _a[0], y = _a[1];\n                newCameraState.x = touchGraphPosition.x - x * ratio;\n                newCameraState.y = touchGraphPosition.y + y * ratio;\n                camera.setState(newCameraState);\n                break;\n            }\n        }\n        this.emit(\"touchmove\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    return TouchCaptor;\n}(captor_1.default));\nexports.default = TouchCaptor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.doEdgeCollideWithPoint = exports.isPixelColored = void 0;\n/**\n * This helper returns true is the pixel at (x,y) in the given WebGL context is\n * colored, and false else.\n */\nfunction isPixelColored(gl, x, y) {\n    var pixels = new Uint8Array(4);\n    gl.readPixels(x, gl.drawingBufferHeight - y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n    return pixels[3] > 0;\n}\nexports.isPixelColored = isPixelColored;\n/**\n * This helper checks whether or not a point (x, y) collides with an\n * edge, connecting a source (xS, yS) to a target (xT, yT) with a thickness in\n * pixels.\n */\nfunction doEdgeCollideWithPoint(x, y, xS, yS, xT, yT, thickness) {\n    // Check first if point is out of the rectangle which opposite corners are the\n    // source and the target, rectangle we expand by `thickness` in every\n    // directions:\n    if (x < xS - thickness && x < xT - thickness)\n        return false;\n    if (y < yS - thickness && y < yT - thickness)\n        return false;\n    if (x > xS + thickness && x > xT + thickness)\n        return false;\n    if (y > yS + thickness && y > yT + thickness)\n        return false;\n    // Check actual collision now: Since we now the point is in this big rectangle\n    // we \"just\" need to check that the distance between the point and the line\n    // connecting the source and the target is less than `thickness`:\n    // https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n    var distance = Math.abs((xT - xS) * (yS - y) - (xS - x) * (yT - yS)) / Math.sqrt(Math.pow(xT - xS, 2) + Math.pow(yT - yS, 2));\n    return distance < thickness / 2;\n}\nexports.doEdgeCollideWithPoint = doEdgeCollideWithPoint;\n","/**\n * Graphology Browser GEXF Parser\n * ===============================\n *\n * Browser version of the graphology GEXF parser.\n */\nvar createParserFunction = require('../common/parser.js');\n\nmodule.exports = createParserFunction(DOMParser, Document);\n","/* eslint no-self-compare: 0 */\n/**\n * Graphology Browser GEXF Parser\n * ===============================\n *\n * Browser version of the graphology GEXF parser using DOMParser to function.\n */\nvar isGraphConstructor = require('graphology-utils/is-graph-constructor');\nvar mergeEdge = require('graphology-utils/add-edge').mergeEdge;\nvar toMixed = require('graphology-operators/to-mixed');\nvar toMulti = require('graphology-operators/to-multi');\nvar helpers = require('../common/helpers.js');\n\nvar cast = helpers.cast;\n\n/**\n * Function checking whether the given value is a NaN.\n *\n * @param  {any} value - Value to test.\n * @return {boolean}\n */\nfunction isReallyNaN(value) {\n  return value !== value;\n}\n\n/**\n * Function used to convert a viz:color attribute into a CSS rgba? string.\n *\n * @param  {Node}   element - DOM element.\n * @return {string}\n */\nfunction toRGBString(element) {\n  var a = element.getAttribute('a'),\n    r = element.getAttribute('r'),\n    g = element.getAttribute('g'),\n    b = element.getAttribute('b');\n\n  return a\n    ? 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')'\n    : 'rgb(' + r + ',' + g + ',' + b + ')';\n}\n\n/**\n * Function returning the first matching tag of the `viz` namespace matching\n * the desired tag name.\n *\n * @param  {Node}   element - Target DOM element.\n * @param  {string} name    - Tag name.\n * @return {Node}\n */\nfunction getFirstMatchingVizTag(element, name) {\n  var vizElement = element.getElementsByTagName('viz:' + name)[0];\n\n  if (!vizElement) vizElement = element.getElementsByTagNameNS('viz', name)[0];\n\n  if (!vizElement) vizElement = element.getElementsByTagName(name)[0];\n\n  return vizElement;\n}\n\n/**\n * Function used to collect meta information.\n *\n * @param  {Array<Node>} elements - Target DOM element.\n * @return {object}\n */\nfunction collectMeta(elements) {\n  var meta = {},\n    element,\n    value;\n\n  for (var i = 0, l = elements.length; i < l; i++) {\n    element = elements[i];\n\n    if (element.nodeName === '#text') continue;\n\n    value = element.textContent.trim();\n\n    if (value) meta[element.tagName.toLowerCase()] = element.textContent;\n  }\n\n  return meta;\n}\n\n/**\n * Function used to extract the model from the right elements.\n *\n * @param  {Array<Node>} elements - Target DOM elements.\n * @return {array}                - The model & default attributes.\n */\nfunction extractModel(elements) {\n  var model = {},\n    defaults = {},\n    element,\n    defaultElement,\n    id;\n\n  for (var i = 0, l = elements.length; i < l; i++) {\n    element = elements[i];\n    id = element.getAttribute('id') || element.getAttribute('for');\n\n    model[id] = {\n      id: id,\n      type: element.getAttribute('type') || 'string',\n      title: !isReallyNaN(+id) ? element.getAttribute('title') || id : id\n    };\n\n    // Default?\n    defaultElement = element.getElementsByTagName('default')[0];\n\n    if (defaultElement)\n      defaults[model[id].title] = cast(\n        model[id].type,\n        defaultElement.textContent\n      );\n  }\n\n  return [model, defaults];\n}\n\n/**\n * Function used to collect an element's attributes.\n *\n * @param  {object} model    - Data model to use.\n * @param  {object} defaults - Default values.\n * @param  {Node}   element  - Target DOM element.\n * @return {object}          - The collected attributes.\n */\nfunction collectAttributes(model, defaults, element) {\n  var data = {},\n    label = element.getAttribute('label'),\n    weight = element.getAttribute('weight');\n\n  if (label) data.label = label;\n\n  if (weight) data.weight = +weight;\n\n  var valueElements = element.getElementsByTagName('attvalue'),\n    valueElement,\n    id;\n\n  for (var i = 0, l = valueElements.length; i < l; i++) {\n    valueElement = valueElements[i];\n    id = valueElement.getAttribute('id') || valueElement.getAttribute('for');\n\n    data[model[id].title] = cast(\n      model[id].type,\n      valueElement.getAttribute('value')\n    );\n  }\n\n  // Applying default values\n  var k;\n\n  for (k in defaults) {\n    if (!(k in data)) data[k] = defaults[k];\n  }\n\n  // TODO: shortcut here to avoid viz when namespace is not set\n\n  // Attempting to find viz namespace tags\n\n  //-- 1) Color\n  var vizElement = getFirstMatchingVizTag(element, 'color');\n\n  if (vizElement) data.color = toRGBString(vizElement);\n\n  //-- 2) Size\n  vizElement = getFirstMatchingVizTag(element, 'size');\n\n  if (vizElement) data.size = +vizElement.getAttribute('value');\n\n  //-- 3) Position\n  var x, y, z;\n\n  vizElement = getFirstMatchingVizTag(element, 'position');\n\n  if (vizElement) {\n    x = vizElement.getAttribute('x');\n    y = vizElement.getAttribute('y');\n    z = vizElement.getAttribute('z');\n\n    if (x) data.x = +x;\n    if (y) data.y = +y;\n    if (z) data.z = +z;\n  }\n\n  //-- 4) Shape\n  vizElement = getFirstMatchingVizTag(element, 'shape');\n\n  if (vizElement) data.shape = vizElement.getAttribute('value');\n\n  //-- 5) Thickness\n  vizElement = getFirstMatchingVizTag(element, 'thickness');\n\n  if (vizElement) data.thickness = +vizElement.getAttribute('value');\n\n  return data;\n}\n\n/**\n * Factory taking implementations of `DOMParser` & `Document` returning\n * the parser function.\n */\nmodule.exports = function createParserFunction(DOMParser, Document) {\n  /**\n   * Function taking either a string or a document and returning a\n   * graphology instance.\n   *\n   * @param {function}        Graph  - A graphology constructor.\n   * @param {string|Document} source - The source to parse.\n   * @param {object}          options - Parsing options.\n   */\n\n  // TODO: option to map the data to the attributes for customization, nodeModel, edgeModel, nodeReducer, edgeReducer\n  // TODO: option to disable the model mapping heuristic\n  return function parse(Graph, source, options) {\n    options = options || {};\n\n    var addMissingNodes = options.addMissingNodes === true;\n    var mergeResult;\n\n    var xmlDoc = source;\n\n    var element, result, type, attributes, id, s, t, i, l;\n\n    if (!isGraphConstructor(Graph))\n      throw new Error('graphology-gexf/parser: invalid Graph constructor.');\n\n    // If source is a string, we are going to parse it\n    if (typeof source === 'string')\n      xmlDoc = new DOMParser().parseFromString(source, 'application/xml');\n\n    if (!(xmlDoc instanceof Document))\n      throw new Error(\n        'graphology-gexf/parser: source should either be a XML document or a string.'\n      );\n\n    // Finding useful elements\n    var GRAPH_ELEMENT = xmlDoc.getElementsByTagName('graph')[0],\n      META_ELEMENT = xmlDoc.getElementsByTagName('meta')[0],\n      META_ELEMENTS = (META_ELEMENT && META_ELEMENT.childNodes) || [],\n      NODE_ELEMENTS = xmlDoc.getElementsByTagName('node'),\n      EDGE_ELEMENTS = xmlDoc.getElementsByTagName('edge'),\n      MODEL_ELEMENTS = xmlDoc.getElementsByTagName('attributes'),\n      NODE_MODEL_ELEMENTS = [],\n      EDGE_MODEL_ELEMENTS = [];\n\n    for (i = 0, l = MODEL_ELEMENTS.length; i < l; i++) {\n      element = MODEL_ELEMENTS[i];\n\n      if (element.getAttribute('class') === 'node')\n        NODE_MODEL_ELEMENTS = element.getElementsByTagName('attribute');\n      else if (element.getAttribute('class') === 'edge')\n        EDGE_MODEL_ELEMENTS = element.getElementsByTagName('attribute');\n    }\n\n    // Information\n    var DEFAULT_EDGE_TYPE =\n      GRAPH_ELEMENT.getAttribute('defaultedgetype') || 'undirected';\n\n    if (DEFAULT_EDGE_TYPE === 'mutual') DEFAULT_EDGE_TYPE = 'undirected';\n\n    // Computing models\n    result = extractModel(NODE_MODEL_ELEMENTS);\n\n    var NODE_MODEL = result[0],\n      NODE_DEFAULT_ATTRIBUTES = result[1];\n\n    result = extractModel(EDGE_MODEL_ELEMENTS);\n\n    var EDGE_MODEL = result[0],\n      EDGE_DEFAULT_ATTRIBUTES = result[1];\n\n    // Polling the first edge to guess the type of the edges\n    var graphType = EDGE_ELEMENTS[0]\n      ? EDGE_ELEMENTS[0].getAttribute('type') || DEFAULT_EDGE_TYPE\n      : 'mixed';\n\n    // Instantiating our graph\n    var graph = new Graph({\n      type: graphType\n    });\n\n    // Collecting meta\n    var meta = collectMeta(META_ELEMENTS),\n      lastModifiedDate =\n        META_ELEMENT && META_ELEMENT.getAttribute('lastmodifieddate');\n\n    graph.replaceAttributes(meta);\n\n    if (lastModifiedDate)\n      graph.setAttribute('lastModifiedDate', lastModifiedDate);\n\n    // Adding nodes\n    for (i = 0, l = NODE_ELEMENTS.length; i < l; i++) {\n      element = NODE_ELEMENTS[i];\n\n      graph.addNode(\n        element.getAttribute('id'),\n        collectAttributes(NODE_MODEL, NODE_DEFAULT_ATTRIBUTES, element)\n      );\n    }\n\n    // Adding edges\n    for (i = 0, l = EDGE_ELEMENTS.length; i < l; i++) {\n      element = EDGE_ELEMENTS[i];\n\n      id = element.getAttribute('id');\n      type = element.getAttribute('type') || DEFAULT_EDGE_TYPE;\n      s = element.getAttribute('source');\n      t = element.getAttribute('target');\n      attributes = collectAttributes(\n        EDGE_MODEL,\n        EDGE_DEFAULT_ATTRIBUTES,\n        element\n      );\n\n      // If we encountered an edge with a different type, we upgrade the graph\n      if (type !== graph.type && graph.type !== 'mixed') {\n        graph = toMixed(graph);\n      }\n\n      // If we encountered twice the same edge, we upgrade the graph\n      if (\n        !graph.multi &&\n        ((type === 'directed' && graph.hasDirectedEdge(s, t)) ||\n          graph.hasUndirectedEdge(s, t))\n      ) {\n        graph = toMulti(graph);\n      }\n\n      mergeResult = mergeEdge(\n        graph,\n        type !== 'directed',\n        id || null,\n        s,\n        t,\n        attributes\n      );\n\n      if (!addMissingNodes && (mergeResult[2] || mergeResult[3])) {\n        throw new Error(\n          'graphology-gexf/parser: one of your gexf file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.'\n        );\n      }\n    }\n\n    return graph;\n  };\n};\n","/**\n * Graphology isGraphConstructor\n * ==============================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology constructor.\n */\n\n/**\n * Checking the value is a graphology constructor.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraphConstructor(value) {\n  return (\n    value !== null &&\n    typeof value === 'function' &&\n    typeof value.prototype === 'object' &&\n    typeof value.prototype.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.prototype.dropNode === 'function'\n  );\n};\n","/**\n * Graphology Edge Adders\n * =======================\n *\n * Generic edge addition functions that can be used to avoid nasty repetitive\n * conditions.\n */\nexports.addEdge = function addEdge(\n  graph,\n  undirected,\n  key,\n  source,\n  target,\n  attributes\n) {\n  if (undirected) {\n    if (key === null || key === undefined)\n      return graph.addUndirectedEdge(source, target, attributes);\n    else return graph.addUndirectedEdgeWithKey(key, source, target, attributes);\n  } else {\n    if (key === null || key === undefined)\n      return graph.addDirectedEdge(source, target, attributes);\n    else return graph.addDirectedEdgeWithKey(key, source, target, attributes);\n  }\n};\n\nexports.copyEdge = function copyEdge(\n  graph,\n  undirected,\n  key,\n  source,\n  target,\n  attributes\n) {\n  attributes = Object.assign({}, attributes);\n\n  if (undirected) {\n    if (key === null || key === undefined)\n      return graph.addUndirectedEdge(source, target, attributes);\n    else return graph.addUndirectedEdgeWithKey(key, source, target, attributes);\n  } else {\n    if (key === null || key === undefined)\n      return graph.addDirectedEdge(source, target, attributes);\n    else return graph.addDirectedEdgeWithKey(key, source, target, attributes);\n  }\n};\n\nexports.mergeEdge = function mergeEdge(\n  graph,\n  undirected,\n  key,\n  source,\n  target,\n  attributes\n) {\n  if (undirected) {\n    if (key === null || key === undefined)\n      return graph.mergeUndirectedEdge(source, target, attributes);\n    else\n      return graph.mergeUndirectedEdgeWithKey(key, source, target, attributes);\n  } else {\n    if (key === null || key === undefined)\n      return graph.mergeDirectedEdge(source, target, attributes);\n    else return graph.mergeDirectedEdgeWithKey(key, source, target, attributes);\n  }\n};\n\nexports.updateEdge = function updateEdge(\n  graph,\n  undirected,\n  key,\n  source,\n  target,\n  updater\n) {\n  if (undirected) {\n    if (key === null || key === undefined)\n      return graph.updateUndirectedEdge(source, target, updater);\n    else return graph.updateUndirectedEdgeWithKey(key, source, target, updater);\n  } else {\n    if (key === null || key === undefined)\n      return graph.updateDirectedEdge(source, target, updater);\n    else return graph.updateDirectedEdgeWithKey(key, source, target, updater);\n  }\n};\n","/**\n * Graphology Operators To Mixed Caster\n * =====================================\n *\n * Function used to cast any graph to a mixed one.\n */\nvar isGraph = require('graphology-utils/is-graph');\n\nmodule.exports = function toMixed(graph) {\n  if (!isGraph(graph))\n    throw new Error(\n      'graphology-operators/to-mixed: expecting a valid graphology instance.'\n    );\n\n  return graph.copy({type: 'mixed'});\n};\n","/**\n * Graphology Operators To Multi Caster\n * =====================================\n *\n * Function used to cast any graph to a multi one.\n */\nvar isGraph = require('graphology-utils/is-graph');\n\nmodule.exports = function toMulti(graph) {\n  if (!isGraph(graph))\n    throw new Error(\n      'graphology-operators/to-multi: expecting a valid graphology instance.'\n    );\n\n  return graph.copy({multi: true});\n};\n","/* eslint no-self-compare: 0 */\n/**\n * Graphology Common GEXF Writer\n * ==============================\n *\n * GEXF writer working for both node.js & the browser.\n */\nvar isGraph = require('graphology-utils/is-graph'),\n  inferType = require('graphology-utils/infer-type'),\n  XMLWriter = require('xml-writer'),\n  sanitizeTagName = require('./helpers.js').sanitizeTagName;\n\n// TODO: handle object in color, position with object for viz\n\n/**\n * Constants.\n */\nvar GEXF_NAMESPACE = 'http://www.gexf.net/1.2draft',\n  GEXF_VIZ_NAMESPACE = 'http:///www.gexf.net/1.1draft/viz';\n\nvar VIZ_RESERVED_NAMES = new Set([\n  'color',\n  'size',\n  'x',\n  'y',\n  'z',\n  'shape',\n  'thickness'\n]);\n\nvar RGBA_TEST = /^\\s*rgba?\\s*\\(/i,\n  RGBA_MATCH =\n    /^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*(?:,\\s*([.0-9]*))?\\)\\s*$/;\n\n/**\n * Function used to transform a CSS color into a RGBA object.\n *\n * @param  {string} value - Target value.\n * @return {object}\n */\nfunction CSSColorToRGBA(value) {\n  if (!value || typeof value !== 'string') return {};\n\n  if (value[0] === '#') {\n    value = value.slice(1);\n\n    return value.length === 3\n      ? {\n          r: parseInt(value[0] + value[0], 16),\n          g: parseInt(value[1] + value[1], 16),\n          b: parseInt(value[2] + value[2], 16)\n        }\n      : {\n          r: parseInt(value[0] + value[1], 16),\n          g: parseInt(value[2] + value[3], 16),\n          b: parseInt(value[4] + value[5], 16)\n        };\n  } else if (RGBA_TEST.test(value)) {\n    var result = {};\n\n    value = value.match(RGBA_MATCH);\n    result.r = +value[1];\n    result.g = +value[2];\n    result.b = +value[3];\n\n    if (value[4]) result.a = +value[4];\n\n    return result;\n  }\n\n  return {};\n}\n\n/**\n * Function used to map an element's attributes to a standardized map of\n * GEXF expected properties (label, viz, attributes).\n *\n * @param  {string} type       - The element's type.\n * @param  {string} key        - The element's key.\n * @param  {object} attributes - The element's attributes.\n * @return {object}\n */\nfunction DEFAULT_ELEMENT_FORMATTER(type, key, attributes) {\n  var output = {},\n    name;\n\n  for (name in attributes) {\n    if (name === 'label') {\n      output.label = attributes.label;\n    } else if (type === 'edge' && name === 'weight') {\n      output.weight = attributes.weight;\n    } else if (VIZ_RESERVED_NAMES.has(name)) {\n      output.viz = output.viz || {};\n      output.viz[name] = attributes[name];\n    } else {\n      output.attributes = output.attributes || {};\n      output.attributes[name] = attributes[name];\n    }\n  }\n\n  return output;\n}\n\nvar DEFAULT_NODE_FORMATTER = DEFAULT_ELEMENT_FORMATTER.bind(null, 'node'),\n  DEFAULT_EDGE_FORMATTER = DEFAULT_ELEMENT_FORMATTER.bind(null, 'edge');\n\n/**\n * Function used to check whether the given integer is 32 bits or not.\n *\n * @param  {number} number - Target number.\n * @return {boolean}\n */\nfunction is32BitInteger(number) {\n  return number <= 0x7fffffff && number >= -0x7fffffff;\n}\n\n/**\n * Function used to check whether the given value is \"empty\".\n *\n * @param  {any} value - Target value.\n * @return {boolean}\n */\nfunction isEmptyValue(value) {\n  return (\n    typeof value === 'undefined' ||\n    value === null ||\n    value === '' ||\n    value !== value\n  );\n}\n\n/**\n * Function used to detect a JavaScript's value type in the GEXF model.\n *\n * @param  {any}    value - Target value.\n * @return {string}\n */\nfunction detectValueType(value) {\n  if (isEmptyValue(value)) return 'empty';\n\n  if (Array.isArray(value)) return 'liststring';\n\n  if (typeof value === 'boolean') return 'boolean';\n\n  if (typeof value === 'object') return 'string';\n\n  // Numbers\n  if (typeof value === 'number') {\n    // Integer\n    if (value === (value | 0)) {\n      // Long (JavaScript integer can go up to 53 bit)?\n      return is32BitInteger(value) ? 'integer' : 'long';\n    }\n\n    // JavaScript numbers are 64 bit float, hence the double\n    return 'double';\n  }\n\n  return 'string';\n}\n\n/**\n * Function used to cast the given value into the given type.\n *\n * @param  {string} type  - Target type.\n * @param  {any}    value - Value to cast.\n * @return {string}\n */\nfunction cast(type, value) {\n  if (type === 'liststring' && Array.isArray(value)) return value.join('|');\n  return '' + value;\n}\n\n/**\n * Function used to collect data from a graph's nodes.\n *\n * @param  {Graph}    graph   - Target graph.\n * @param  {function} format  - Function formatting the nodes attributes.\n * @return {array}\n */\nfunction collectNodeData(graph, format) {\n  var nodes = new Array(graph.order);\n  var i = 0;\n\n  graph.forEachNode(function (node, attr) {\n    var data = format(node, attr);\n    data.key = node;\n    nodes[i++] = data;\n  });\n\n  return nodes;\n}\n\n/**\n * Function used to collect data from a graph's edges.\n *\n * @param  {Graph}    graph   - Target graph.\n * @param  {function} reducer - Function reducing the edges attributes.\n * @return {array}\n */\nfunction collectEdgeData(graph, reducer) {\n  var edges = new Array(graph.size);\n  var i = 0;\n\n  graph.forEachEdge(function (\n    edge,\n    attr,\n    source,\n    target,\n    _sa,\n    _ta,\n    undirected\n  ) {\n    var data = reducer(edge, attr);\n    data.key = edge;\n    data.source = source;\n    data.target = target;\n    data.undirected = undirected;\n    edges[i++] = data;\n  });\n\n  return edges;\n}\n\n/**\n * Function used to infer the model of the graph's nodes or edges.\n *\n * @param  {array} elements - The graph's relevant elements.\n * @return {array}\n */\n\n// TODO: on large graph, we could also sample or let the user indicate the types\nfunction inferModel(elements) {\n  var model = {},\n    attributes,\n    type,\n    k;\n\n  // Testing every attributes\n  for (var i = 0, l = elements.length; i < l; i++) {\n    attributes = elements[i].attributes;\n\n    if (!attributes) continue;\n\n    for (k in attributes) {\n      type = detectValueType(attributes[k]);\n\n      if (type === 'empty') continue;\n\n      if (!model[k]) model[k] = type;\n      else {\n        if (model[k] === 'integer' && type === 'long') model[k] = type;\n        else if (model[k] !== type) model[k] = 'string';\n      }\n    }\n  }\n\n  // TODO: check default values\n  return model;\n}\n\n/**\n * Function used to write a model.\n *\n * @param {XMLWriter} writer     - The writer to use.\n * @param {object}    model      - Model to write.\n * @param {string}    modelClass - Class of the model.\n */\nfunction writeModel(writer, model, modelClass) {\n  var name;\n\n  if (!Object.keys(model).length) return;\n\n  writer.startElement('attributes');\n  writer.writeAttribute('class', modelClass);\n\n  for (name in model) {\n    writer.startElement('attribute');\n    writer.writeAttribute('id', name);\n    writer.writeAttribute('title', name);\n    writer.writeAttribute('type', model[name]);\n    writer.endElement();\n  }\n\n  writer.endElement();\n}\n\nfunction writeElements(writer, type, model, elements) {\n  var emptyModel = !Object.keys(model).length,\n    element,\n    name,\n    color,\n    value,\n    edgeType,\n    attributes,\n    weight,\n    viz,\n    k,\n    i,\n    l;\n\n  writer.startElement(type + 's');\n\n  for (i = 0, l = elements.length; i < l; i++) {\n    element = elements[i];\n    attributes = element.attributes;\n    viz = element.viz;\n\n    writer.startElement(type);\n    writer.writeAttribute('id', element.key);\n\n    if (type === 'edge') {\n      edgeType = element.undirected ? 'undirected' : 'directed';\n\n      if (edgeType !== writer.defaultEdgeType)\n        writer.writeAttribute('type', edgeType);\n\n      writer.writeAttribute('source', element.source);\n      writer.writeAttribute('target', element.target);\n\n      weight = element.weight;\n\n      if (\n        (typeof weight === 'number' && !isNaN(weight)) ||\n        typeof weight === 'string'\n      )\n        writer.writeAttribute('weight', element.weight);\n    }\n\n    if (element.label) writer.writeAttribute('label', element.label);\n\n    if (!emptyModel && attributes) {\n      writer.startElement('attvalues');\n\n      for (name in model) {\n        if (name in attributes) {\n          value = attributes[name];\n\n          if (isEmptyValue(value)) continue;\n\n          writer.startElement('attvalue');\n          writer.writeAttribute('for', name);\n          writer.writeAttribute('value', cast(model[name], value));\n          writer.endElement();\n        }\n      }\n\n      writer.endElement();\n    }\n\n    if (viz) {\n      //-- 1) Color\n      if (viz.color) {\n        color = CSSColorToRGBA(viz.color);\n\n        writer.startElementNS('viz', 'color');\n\n        for (k in color) writer.writeAttribute(k, color[k]);\n\n        writer.endElement();\n      }\n\n      //-- 2) Size\n      if ('size' in viz) {\n        writer.startElementNS('viz', 'size');\n        writer.writeAttribute('value', viz.size);\n        writer.endElement();\n      }\n\n      //-- 3) Position\n      if ('x' in viz || 'y' in viz || 'z' in viz) {\n        writer.startElementNS('viz', 'position');\n\n        if ('x' in viz) writer.writeAttribute('x', viz.x);\n\n        if ('y' in viz) writer.writeAttribute('y', viz.y);\n\n        if ('z' in viz) writer.writeAttribute('z', viz.z);\n\n        writer.endElement();\n      }\n\n      //-- 4) Shape\n      if (viz.shape) {\n        writer.startElementNS('viz', 'shape');\n        writer.writeAttribute('value', viz.shape);\n        writer.endElement();\n      }\n\n      //-- 5) Thickness\n      if ('thickness' in viz) {\n        writer.startElementNS('viz', 'thickness');\n        writer.writeAttribute('value', viz.thickness);\n        writer.endElement();\n      }\n    }\n\n    writer.endElement();\n  }\n\n  writer.endElement();\n}\n\n/**\n * Defaults.\n */\nvar DEFAULTS = {\n  encoding: 'UTF-8',\n  pretty: true,\n  formatNode: DEFAULT_NODE_FORMATTER,\n  formatEdge: DEFAULT_EDGE_FORMATTER\n};\n\n/**\n * Function taking a graphology instance & outputting a gexf string.\n *\n * @param  {Graph}  graph        - Target graphology instance.\n * @param  {object} options      - Options:\n * @param  {string}   [encoding]   - Character encoding.\n * @param  {boolean}  [pretty]     - Whether to pretty print output.\n * @param  {function} [formatNode] - Function formatting nodes' output.\n * @param  {function} [formatEdge] - Function formatting edges' output.\n * @return {string}              - GEXF string.\n */\nmodule.exports = function write(graph, options) {\n  if (!isGraph(graph))\n    throw new Error('graphology-gexf/writer: invalid graphology instance.');\n\n  options = options || {};\n\n  var indent = options.pretty === false ? false : '  ';\n\n  var formatNode = options.formatNode || DEFAULTS.formatNode,\n    formatEdge = options.formatEdge || DEFAULTS.formatEdge;\n\n  var writer = new XMLWriter(indent);\n\n  writer.startDocument('1.0', options.encoding || DEFAULTS.encoding);\n\n  // Starting gexf\n  writer.startElement('gexf');\n  writer.writeAttribute('version', '1.2');\n  writer.writeAttribute('xmlns', GEXF_NAMESPACE);\n  writer.writeAttribute('xmlns:viz', GEXF_VIZ_NAMESPACE);\n\n  // Processing meta\n  writer.startElement('meta');\n  var graphAttributes = graph.getAttributes();\n\n  if (graphAttributes.lastModifiedDate)\n    writer.writeAttribute('lastmodifieddate', graphAttributes.lastModifiedDate);\n\n  var metaTagName;\n  var graphAttribute;\n\n  for (var k in graphAttributes) {\n    if (k === 'lastModifiedDate') continue;\n\n    metaTagName = sanitizeTagName(k);\n\n    if (!metaTagName) continue;\n\n    graphAttribute = graphAttributes[k];\n\n    // NOTE: if the graph attribute is not a scalar, we do not bother writing\n    // it as metadata in the gexf output. This means the writer/parser is not\n    // idempotent, but we cannot do better because the gexf format does not\n    // allow it, since it was not meant to handle complex values as graph\n    // metadata anyway.\n    if (\n      typeof graphAttribute === 'string' ||\n      typeof graphAttribute === 'number' ||\n      typeof graphAttribute === 'boolean'\n    ) {\n      writer.writeElement(metaTagName, '' + graphAttribute);\n    }\n  }\n\n  writer.endElement();\n  writer.startElement('graph');\n\n  var type = inferType(graph);\n\n  writer.defaultEdgeType = type === 'mixed' ? 'directed' : type;\n\n  writer.writeAttribute('defaultedgetype', writer.defaultEdgeType);\n\n  // Processing model\n  var nodes = collectNodeData(graph, formatNode),\n    edges = collectEdgeData(graph, formatEdge);\n\n  var nodeModel = inferModel(nodes);\n\n  writeModel(writer, nodeModel, 'node');\n\n  var edgeModel = inferModel(edges);\n\n  writeModel(writer, edgeModel, 'edge');\n\n  // Processing nodes\n  writeElements(writer, 'node', nodeModel, nodes);\n\n  // Processing edges\n  writeElements(writer, 'edge', edgeModel, edges);\n\n  return writer.toString();\n};\n","/**\n * Graphology inferType\n * =====================\n *\n * Useful function used to \"guess\" the real type of the given Graph using\n * introspection.\n */\nvar isGraph = require('./is-graph.js');\n\n/**\n * Returning the inferred type of the given graph.\n *\n * @param  {Graph}   graph - Target graph.\n * @return {boolean}\n */\nmodule.exports = function inferType(graph) {\n  if (!isGraph(graph))\n    throw new Error(\n      'graphology-utils/infer-type: expecting a valid graphology instance.'\n    );\n\n  var declaredType = graph.type;\n\n  if (declaredType !== 'mixed') return declaredType;\n\n  if (\n    (graph.directedSize === 0 && graph.undirectedSize === 0) ||\n    (graph.directedSize > 0 && graph.undirectedSize > 0)\n  )\n    return 'mixed';\n\n  if (graph.directedSize > 0) return 'directed';\n\n  return 'undirected';\n};\n","module.exports = require('./lib/xml-writer.js');\n","\nfunction isFalse(s) {\n  return typeof s !== 'number' && !s;\n}\n\nfunction strval(s) {\n  if (typeof s == 'string') {\n    return s;\n  }\n  else if (typeof s == 'number') {\n    return s+'';\n  }\n  else if (typeof s == 'function') {\n    return s();\n  }\n  else if (s instanceof XMLWriter) {\n    return s.toString();\n  }\n  else throw Error('Bad Parameter');\n}\n\nfunction XMLWriter(indent, callback) {\n\n    if (!(this instanceof XMLWriter)) {\n        return new XMLWriter();\n    }\n\n    this.name_regex = /[_:A-Za-z][-._:A-Za-z0-9]*/;\n    this.indent = indent ? true : false;\n    this.indentString = this.indent && typeof indent === 'string' ? indent : '    ';\n    this.output = '';\n    this.stack = [];\n    this.tags = 0;\n    this.attributes = 0;\n    this.attribute = 0;\n    this.texts = 0;\n    this.comment = 0;\n    this.dtd = 0;\n    this.root = '';\n    this.pi = 0;\n    this.cdata = 0;\n    this.started_write = false;\n    this.writer;\n    this.writer_encoding = 'UTF-8';\n\n    if (typeof callback == 'function') {\n        this.writer = callback;\n    } else {\n        this.writer = function (s, e) {\n            this.output += s;\n        }\n    }\n}\n\nXMLWriter.prototype = {\n    toString : function () {\n        this.flush();\n        return this.output;\n    },\n\n    indenter : function () {\n      if (this.indent) {\n        this.write('\\n');\n        for (var i = 1; i < this.tags; i++) {\n          this.write(this.indentString);\n        }\n      }\n    },\n\n    write : function () {\n        for (var i = 0; i < arguments.length; i++) {\n            this.writer(arguments[i], this.writer_encoding);\n        }\n    },\n\n\n    flush : function () {\n        for (var i = this.tags; i > 0; i--) {\n            this.endElement();\n        }\n        this.tags = 0;\n    },\n\n    startDocument : function (version, encoding, standalone) {\n        if (this.tags || this.attributes) return this;\n\n        this.startPI('xml');\n        this.startAttribute('version');\n        this.text(typeof version == \"string\" ? version : \"1.0\");\n        this.endAttribute();\n        if (typeof encoding == \"string\") {\n            this.startAttribute('encoding');\n            this.text(encoding);\n            this.endAttribute();\n            this.writer_encoding = encoding;\n        }\n        if (standalone) {\n            this.startAttribute('standalone');\n            this.text(\"yes\");\n            this.endAttribute();\n        }\n        this.endPI();\n        if (!this.indent) {\n          this.write('\\n');\n        }\n        return this;\n    },\n\n    endDocument : function () {\n        if (this.attributes) this.endAttributes();\n        return this;\n    },\n\n    writeElement : function (name, content) {\n        return this.startElement(name).text(content).endElement();\n    },\n\n    writeElementNS : function (prefix, name, uri, content) {\n        if (!content) {\n            content = uri;\n        }\n        return this.startElementNS(prefix, name, uri).text(content).endElement();\n    },\n\n    startElement : function (name) {\n        name = strval(name);\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (this.tags === 0 && this.root && this.root !== name) throw Error('Invalid Parameter');\n        if (this.attributes) this.endAttributes();\n        ++this.tags;\n        this.texts = 0;\n        if (this.stack.length > 0)\n          this.stack[this.stack.length-1].containsTag = true;\n\n        this.stack.push({\n            name: name,\n            tags: this.tags\n        });\n        if (this.started_write) this.indenter();\n        this.write('<', name);\n        this.startAttributes();\n        this.started_write = true;\n        return this;\n    },\n    startElementNS : function (prefix, name, uri) {\n        prefix = strval(prefix);\n        name = strval(name);\n\n        if (!prefix.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (this.attributes) this.endAttributes();\n        ++this.tags;\n        this.texts = 0;\n        if (this.stack.length > 0)\n          this.stack[this.stack.length-1].containsTag = true;\n\n        this.stack.push({\n            name: prefix + ':' + name,\n            tags: this.tags\n        });\n        if (this.started_write) this.indenter();\n        this.write('<', prefix + ':' + name);\n        this.startAttributes();\n        this.started_write = true;\n        return this;\n    },\n\n    endElement : function () {\n        if (!this.tags) return this;\n        var t = this.stack.pop();\n        if (this.attributes > 0) {\n            if (this.attribute) {\n                if (this.texts) this.endAttribute();\n                this.endAttribute();\n            }\n            this.write('/');\n            this.endAttributes();\n        } else {\n            if (t.containsTag) this.indenter();\n            this.write('</', t.name, '>');\n        }\n        --this.tags;\n        this.texts = 0;\n        return this;\n    },\n\n    writeAttribute : function (name, content) {\n        if (typeof content == 'function') {\n          content = content();\n        }\n        if (isFalse(content)) {\n           return this;\n        }\n        return this.startAttribute(name).text(content).endAttribute();\n    },\n    writeAttributeNS : function (prefix, name, uri, content) {\n        if (!content) {\n            content = uri;\n        }\n        if (typeof content == 'function') {\n          content = content();\n        }\n        if (isFalse(content)) {\n          return this;\n        }\n        return this.startAttributeNS(prefix, name, uri).text(content).endAttribute();\n    },\n\n    startAttributes : function () {\n        this.attributes = 1;\n        return this;\n    },\n\n    endAttributes : function () {\n        if (!this.attributes) return this;\n        if (this.attribute) this.endAttribute();\n        this.attributes = 0;\n        this.attribute = 0;\n        this.texts = 0;\n        this.write('>');\n        return this;\n    },\n\n    startAttribute : function (name) {\n        name = strval(name);\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (!this.attributes && !this.pi) return this;\n        if (this.attribute) return this;\n        this.attribute = 1;\n        this.write(' ', name, '=\"');\n        return this;\n    },\n    startAttributeNS : function (prefix, name, uri) {\n        prefix = strval(prefix);\n        name = strval(name);\n\n        if (!prefix.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (!this.attributes && !this.pi) return this;\n        if (this.attribute) return this;\n        this.attribute = 1;\n        this.write(' ', prefix + ':' + name, '=\"');\n        return this;\n    },\n    endAttribute : function () {\n        if (!this.attribute) return this;\n        this.attribute = 0;\n        this.texts = 0;\n        this.write('\"');\n        return this;\n    },\n\n    text : function (content) {\n        content = strval(content);\n        if (!this.tags && !this.comment && !this.pi && !this.cdata) return this;\n        if (this.attributes && this.attribute) {\n            ++this.texts;\n            this.write(content\n                       .replace(/&/g, '&amp;')\n                       .replace(/</g, '&lt;')\n                       .replace(/\"/g, '&quot;')\n                       .replace(/\\t/g, '&#x9;')\n                       .replace(/\\n/g, '&#xA;')\n                       .replace(/\\r/g, '&#xD;')\n                      );\n            return this;\n        } else if (this.attributes && !this.attribute) {\n            this.endAttributes();\n        }\n        if (this.comment || this.cdata) {\n            this.write(content);\n        }\n        else {\n          this.write(content.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;'));\n        }\n        ++this.texts;\n        this.started_write = true;\n        return this;\n    },\n\n    writeComment : function (content) {\n        return this.startComment().text(content).endComment();\n    },\n\n    startComment : function () {\n        if (this.comment) return this;\n        if (this.attributes) this.endAttributes();\n        this.indenter();\n        this.write('<!--');\n        this.comment = 1;\n        this.started_write = true;\n        return this;\n    },\n\n    endComment : function () {\n        if (!this.comment) return this;\n        this.write('-->');\n        this.comment = 0;\n        return this;\n    },\n\n    writeDocType : function (name, pubid, sysid, subset) {\n        return this.startDocType(name, pubid, sysid, subset).endDocType()\n    },\n\n    startDocType : function (name, pubid, sysid, subset) {\n        if (this.dtd || this.tags) return this;\n\n        name = strval(name);\n        pubid = pubid ? strval(pubid) : pubid;\n        sysid = sysid ? strval(sysid) : sysid;\n        subset = subset ? strval(subset) : subset;\n\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (pubid && !pubid.match(/^[\\w\\-][\\w\\s\\-\\/\\+\\:\\.]*/)) throw Error('Invalid Parameter');\n        if (sysid && !sysid.match(/^[\\w\\.][\\w\\-\\/\\\\\\:\\.]*/)) throw Error('Invalid Parameter');\n        if (subset && !subset.match(/[\\w\\s\\<\\>\\+\\.\\!\\#\\-\\?\\*\\,\\(\\)\\|]*/)) throw Error('Invalid Parameter');\n\n        pubid = pubid ? ' PUBLIC \"' + pubid + '\"' : (sysid) ? ' SYSTEM' : '';\n        sysid = sysid ? ' \"' + sysid + '\"' : '';\n        subset = subset ? ' [' + subset + ']': '';\n\n        if (this.started_write) this.indenter();\n        this.write('<!DOCTYPE ', name, pubid, sysid, subset);\n        this.root = name;\n        this.dtd = 1;\n        this.started_write = true;\n        return this;\n    },\n\n    endDocType : function () {\n        if (!this.dtd) return this;\n        this.write('>');\n        return this;\n    },\n\n    writePI : function (name, content) {\n        return this.startPI(name).text(content).endPI()\n    },\n\n    startPI : function (name) {\n        name = strval(name);\n        if (!name.match(this.name_regex)) throw Error('Invalid Parameter');\n        if (this.pi) return this;\n        if (this.attributes) this.endAttributes();\n        if (this.started_write) this.indenter();\n        this.write('<?', name);\n        this.pi = 1;\n        this.started_write = true;\n        return this;\n    },\n\n    endPI : function () {\n        if (!this.pi) return this;\n        this.write('?>');\n        this.pi = 0;\n        return this;\n    },\n\n    writeCData : function (content) {\n        return this.startCData().text(content).endCData();\n    },\n\n    startCData : function () {\n        if (this.cdata) return this;\n        if (this.attributes) this.endAttributes();\n        this.indenter();\n        this.write('<![CDATA[');\n        this.cdata = 1;\n        this.started_write = true;\n        return this;\n    },\n\n    endCData : function () {\n        if (!this.cdata) return this;\n        this.write(']]>');\n        this.cdata = 0;\n        return this;\n    },\n\n    writeRaw : function(content) {\n        content = strval(content);\n        if (!this.tags && !this.comment && !this.pi && !this.cdata) return this;\n        if (this.attributes && this.attribute) {\n            ++this.texts;\n            this.write(content.replace('&', '&amp;').replace('\"', '&quot;'));\n            return this;\n        } else if (this.attributes && !this.attribute) {\n            this.endAttributes();\n        }\n        ++this.texts;\n        this.write(content);\n        this.started_write = true;\n        return this;\n    }\n\n}\n\nmodule.exports = XMLWriter;\n"]}}